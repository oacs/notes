/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source visit the plugins github repository
*/

"use strict";var k3=Object.create;var ma=Object.defineProperty;var A3=Object.getOwnPropertyDescriptor;var I3=Object.getOwnPropertyNames;var _3=Object.getPrototypeOf,C3=Object.prototype.hasOwnProperty;var T3=(e,t,r)=>t in e?ma(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Fu=(e,t)=>()=>(e&&(t=e(e=0)),t);var b=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),xb=(e,t)=>{for(var r in t)ma(e,r,{get:t[r],enumerable:!0})},Eb=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of I3(t))!C3.call(e,o)&&o!==r&&ma(e,o,{get:()=>t[o],enumerable:!(n=A3(t,o))||n.enumerable});return e};var se=(e,t,r)=>(r=e!=null?k3(_3(e)):{},Eb(t||!e||!e.__esModule?ma(r,"default",{value:e,enumerable:!0}):r,e)),Nu=e=>Eb(ma({},"__esModule",{value:!0}),e);var Sb=(e,t,r)=>(T3(e,typeof t!="symbol"?t+"":t,r),r);var Qe=b(Mu=>{"use strict";Object.defineProperty(Mu,"__esModule",{value:!0});function Bb(e,t){if(t)return e;throw new Error("Unhandled discriminated union member: "+JSON.stringify(e))}Mu.assertNever=Bb;Mu.default=Bb});var zb=b((FY,jb)=>{var Fo=1e3,No=Fo*60,Po=No*60,Tn=Po*24,L3=Tn*7,q3=Tn*365.25;jb.exports=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return B3(e);if(r==="number"&&isFinite(e))return t.long?z3(e):j3(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function B3(e){if(e=String(e),!(e.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*q3;case"weeks":case"week":case"w":return r*L3;case"days":case"day":case"d":return r*Tn;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Po;case"minutes":case"minute":case"mins":case"min":case"m":return r*No;case"seconds":case"second":case"secs":case"sec":case"s":return r*Fo;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function j3(e){var t=Math.abs(e);return t>=Tn?Math.round(e/Tn)+"d":t>=Po?Math.round(e/Po)+"h":t>=No?Math.round(e/No)+"m":t>=Fo?Math.round(e/Fo)+"s":e+"ms"}function z3(e){var t=Math.abs(e);return t>=Tn?$u(e,t,Tn,"day"):t>=Po?$u(e,t,Po,"hour"):t>=No?$u(e,t,No,"minute"):t>=Fo?$u(e,t,Fo,"second"):e+" ms"}function $u(e,t,r,n){var o=t>=r*1.5;return Math.round(e/r)+" "+n+(o?"s":"")}});var Ub=b((NY,Wb)=>{function W3(e){r.debug=r,r.default=r,r.coerce=u,r.disable=i,r.enable=o,r.enabled=a,r.humanize=zb(),r.destroy=l,Object.keys(e).forEach(c=>{r[c]=e[c]}),r.names=[],r.skips=[],r.formatters={};function t(c){let f=0;for(let p=0;p<c.length;p++)f=(f<<5)-f+c.charCodeAt(p),f|=0;return r.colors[Math.abs(f)%r.colors.length]}r.selectColor=t;function r(c){let f,p=null,d,h;function g(...y){if(!g.enabled)return;let w=g,x=Number(new Date),S=x-(f||x);w.diff=S,w.prev=f,w.curr=x,f=x,y[0]=r.coerce(y[0]),typeof y[0]!="string"&&y.unshift("%O");let O=0;y[0]=y[0].replace(/%([a-zA-Z%])/g,(D,P)=>{if(D==="%%")return"%";O++;let R=r.formatters[P];if(typeof R=="function"){let E=y[O];D=R.call(w,E),y.splice(O,1),O--}return D}),r.formatArgs.call(w,y),(w.log||r.log).apply(w,y)}return g.namespace=c,g.useColors=r.useColors(),g.color=r.selectColor(c),g.extend=n,g.destroy=r.destroy,Object.defineProperty(g,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(d!==r.namespaces&&(d=r.namespaces,h=r.enabled(c)),h),set:y=>{p=y}}),typeof r.init=="function"&&r.init(g),g}function n(c,f){let p=r(this.namespace+(typeof f>"u"?":":f)+c);return p.log=this.log,p}function o(c){r.save(c),r.namespaces=c,r.names=[],r.skips=[];let f,p=(typeof c=="string"?c:"").split(/[\s,]+/),d=p.length;for(f=0;f<d;f++)p[f]&&(c=p[f].replace(/\*/g,".*?"),c[0]==="-"?r.skips.push(new RegExp("^"+c.slice(1)+"$")):r.names.push(new RegExp("^"+c+"$")))}function i(){let c=[...r.names.map(s),...r.skips.map(s).map(f=>"-"+f)].join(",");return r.enable(""),c}function a(c){if(c[c.length-1]==="*")return!0;let f,p;for(f=0,p=r.skips.length;f<p;f++)if(r.skips[f].test(c))return!1;for(f=0,p=r.names.length;f<p;f++)if(r.names[f].test(c))return!0;return!1}function s(c){return c.toString().substring(2,c.toString().length-2).replace(/\.\*\?$/,"*")}function u(c){return c instanceof Error?c.stack||c.message:c}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}Wb.exports=W3});var We=b((bt,Lu)=>{bt.formatArgs=H3;bt.save=V3;bt.load=G3;bt.useColors=U3;bt.storage=K3();bt.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();bt.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function U3(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function H3(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+Lu.exports.humanize(this.diff),!this.useColors)return;let t="color: "+this.color;e.splice(1,0,t,"color: inherit");let r=0,n=0;e[0].replace(/%[a-zA-Z%]/g,o=>{o!=="%%"&&(r++,o==="%c"&&(n=r))}),e.splice(n,0,t)}bt.log=console.debug||console.log||(()=>{});function V3(e){try{e?bt.storage.setItem("debug",e):bt.storage.removeItem("debug")}catch{}}function G3(){let e;try{e=bt.storage.getItem("debug")}catch{}return!e&&typeof process<"u"&&"env"in process&&(e=process.env.DEBUG),e}function K3(){try{return localStorage}catch{}}Lu.exports=Ub()(bt);var{formatters:J3}=Lu.exports;J3.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}});var Vb=b((PY,Hb)=>{"use strict";Hb.exports=Z3;function Ro(e){return e instanceof Buffer?Buffer.from(e):new e.constructor(e.buffer.slice(),e.byteOffset,e.length)}function Z3(e){if(e=e||{},e.circles)return Y3(e);return e.proto?n:r;function t(o,i){for(var a=Object.keys(o),s=new Array(a.length),u=0;u<a.length;u++){var l=a[u],c=o[l];typeof c!="object"||c===null?s[l]=c:c instanceof Date?s[l]=new Date(c):ArrayBuffer.isView(c)?s[l]=Ro(c):s[l]=i(c)}return s}function r(o){if(typeof o!="object"||o===null)return o;if(o instanceof Date)return new Date(o);if(Array.isArray(o))return t(o,r);if(o instanceof Map)return new Map(t(Array.from(o),r));if(o instanceof Set)return new Set(t(Array.from(o),r));var i={};for(var a in o)if(Object.hasOwnProperty.call(o,a)!==!1){var s=o[a];typeof s!="object"||s===null?i[a]=s:s instanceof Date?i[a]=new Date(s):s instanceof Map?i[a]=new Map(t(Array.from(s),r)):s instanceof Set?i[a]=new Set(t(Array.from(s),r)):ArrayBuffer.isView(s)?i[a]=Ro(s):i[a]=r(s)}return i}function n(o){if(typeof o!="object"||o===null)return o;if(o instanceof Date)return new Date(o);if(Array.isArray(o))return t(o,n);if(o instanceof Map)return new Map(t(Array.from(o),n));if(o instanceof Set)return new Set(t(Array.from(o),n));var i={};for(var a in o){var s=o[a];typeof s!="object"||s===null?i[a]=s:s instanceof Date?i[a]=new Date(s):s instanceof Map?i[a]=new Map(t(Array.from(s),n)):s instanceof Set?i[a]=new Set(t(Array.from(s),n)):ArrayBuffer.isView(s)?i[a]=Ro(s):i[a]=n(s)}return i}}function Y3(e){var t=[],r=[];return e.proto?i:o;function n(a,s){for(var u=Object.keys(a),l=new Array(u.length),c=0;c<u.length;c++){var f=u[c],p=a[f];if(typeof p!="object"||p===null)l[f]=p;else if(p instanceof Date)l[f]=new Date(p);else if(ArrayBuffer.isView(p))l[f]=Ro(p);else{var d=t.indexOf(p);d!==-1?l[f]=r[d]:l[f]=s(p)}}return l}function o(a){if(typeof a!="object"||a===null)return a;if(a instanceof Date)return new Date(a);if(Array.isArray(a))return n(a,o);if(a instanceof Map)return new Map(n(Array.from(a),o));if(a instanceof Set)return new Set(n(Array.from(a),o));var s={};t.push(a),r.push(s);for(var u in a)if(Object.hasOwnProperty.call(a,u)!==!1){var l=a[u];if(typeof l!="object"||l===null)s[u]=l;else if(l instanceof Date)s[u]=new Date(l);else if(l instanceof Map)s[u]=new Map(n(Array.from(l),o));else if(l instanceof Set)s[u]=new Set(n(Array.from(l),o));else if(ArrayBuffer.isView(l))s[u]=Ro(l);else{var c=t.indexOf(l);c!==-1?s[u]=r[c]:s[u]=o(l)}}return t.pop(),r.pop(),s}function i(a){if(typeof a!="object"||a===null)return a;if(a instanceof Date)return new Date(a);if(Array.isArray(a))return n(a,i);if(a instanceof Map)return new Map(n(Array.from(a),i));if(a instanceof Set)return new Set(n(Array.from(a),i));var s={};t.push(a),r.push(s);for(var u in a){var l=a[u];if(typeof l!="object"||l===null)s[u]=l;else if(l instanceof Date)s[u]=new Date(l);else if(l instanceof Map)s[u]=new Map(n(Array.from(l),i));else if(l instanceof Set)s[u]=new Set(n(Array.from(l),i));else if(ArrayBuffer.isView(l))s[u]=Ro(l);else{var c=t.indexOf(l);c!==-1?s[u]=r[c]:s[u]=i(l)}}return t.pop(),r.pop(),s}}});var Dn=b((RY,Zb)=>{var Q3=require("util"),On=We()("log4js:configuration"),qu=[],Bu=[],Gb=e=>!e,Kb=e=>e&&typeof e=="object"&&!Array.isArray(e),X3=e=>/^[A-Za-z][A-Za-z0-9_]*$/g.test(e),e5=e=>e&&typeof e=="number"&&Number.isInteger(e),t5=e=>{Bu.push(e),On(`Added listener, now ${Bu.length} listeners`)},r5=e=>{qu.push(e),On(`Added pre-processing listener, now ${qu.length} listeners`)},Jb=(e,t,r)=>{(Array.isArray(t)?t:[t]).forEach(o=>{if(o)throw new Error(`Problem with log4js configuration: (${Q3.inspect(e,{depth:5})}) - ${r}`)})},n5=e=>{On("New configuration to be validated: ",e),Jb(e,Gb(Kb(e)),"must be an object."),On(`Calling pre-processing listeners (${qu.length})`),qu.forEach(t=>t(e)),On("Configuration pre-processing finished."),On(`Calling configuration listeners (${Bu.length})`),Bu.forEach(t=>t(e)),On("Configuration finished.")};Zb.exports={configure:n5,addListener:t5,addPreProcessingListener:r5,throwExceptionIf:Jb,anObject:Kb,anInteger:e5,validIdentifier:X3,not:Gb}});var ju=b((MY,Lt)=>{"use strict";function Yb(e,t){for(var r=e.toString();r.length<t;)r="0"+r;return r}function Fn(e){return Yb(e,2)}function o5(e){var t=Math.abs(e),r=String(Math.floor(t/60)),n=String(t%60);return r=("0"+r).slice(-2),n=("0"+n).slice(-2),e===0?"Z":(e<0?"+":"-")+r+":"+n}function Qb(e,t){typeof e!="string"&&(t=e,e=Lt.exports.ISO8601_FORMAT),t||(t=Lt.exports.now());var r=Fn(t.getDate()),n=Fn(t.getMonth()+1),o=Fn(t.getFullYear()),i=Fn(o.substring(2,4)),a=e.indexOf("yyyy")>-1?o:i,s=Fn(t.getHours()),u=Fn(t.getMinutes()),l=Fn(t.getSeconds()),c=Yb(t.getMilliseconds(),3),f=o5(t.getTimezoneOffset()),p=e.replace(/dd/g,r).replace(/MM/g,n).replace(/y{1,4}/g,a).replace(/hh/g,s).replace(/mm/g,u).replace(/ss/g,l).replace(/SSS/g,c).replace(/O/g,f);return p}function Xr(e,t,r,n){e["set"+(n?"":"UTC")+t](r)}function i5(e,t,r){var n=e.indexOf("O")<0,o=!1,i=[{pattern:/y{1,4}/,regexp:"\\d{1,4}",fn:function(f,p){Xr(f,"FullYear",p,n)}},{pattern:/MM/,regexp:"\\d{1,2}",fn:function(f,p){Xr(f,"Month",p-1,n),f.getMonth()!==p-1&&(o=!0)}},{pattern:/dd/,regexp:"\\d{1,2}",fn:function(f,p){o&&Xr(f,"Month",f.getMonth()-1,n),Xr(f,"Date",p,n)}},{pattern:/hh/,regexp:"\\d{1,2}",fn:function(f,p){Xr(f,"Hours",p,n)}},{pattern:/mm/,regexp:"\\d\\d",fn:function(f,p){Xr(f,"Minutes",p,n)}},{pattern:/ss/,regexp:"\\d\\d",fn:function(f,p){Xr(f,"Seconds",p,n)}},{pattern:/SSS/,regexp:"\\d\\d\\d",fn:function(f,p){Xr(f,"Milliseconds",p,n)}},{pattern:/O/,regexp:"[+-]\\d{1,2}:?\\d{2}?|Z",fn:function(f,p){p==="Z"?p=0:p=p.replace(":","");var d=Math.abs(p),h=(p>0?-1:1)*(d%100+Math.floor(d/100)*60);f.setUTCMinutes(f.getUTCMinutes()+h)}}],a=i.reduce(function(f,p){return p.pattern.test(f.regexp)?(p.index=f.regexp.match(p.pattern).index,f.regexp=f.regexp.replace(p.pattern,"("+p.regexp+")")):p.index=-1,f},{regexp:e,index:[]}),s=i.filter(function(f){return f.index>-1});s.sort(function(f,p){return f.index-p.index});var u=new RegExp(a.regexp),l=u.exec(t);if(l){var c=r||Lt.exports.now();return s.forEach(function(f,p){f.fn(c,l[p+1])}),c}throw new Error("String '"+t+"' could not be parsed as '"+e+"'")}function a5(e,t,r){if(!e)throw new Error("pattern must be supplied");return i5(e,t,r)}function s5(){return new Date}Lt.exports=Qb;Lt.exports.asString=Qb;Lt.exports.parse=a5;Lt.exports.now=s5;Lt.exports.ISO8601_FORMAT="yyyy-MM-ddThh:mm:ss.SSS";Lt.exports.ISO8601_WITH_TZ_OFFSET_FORMAT="yyyy-MM-ddThh:mm:ss.SSSO";Lt.exports.DATETIME_FORMAT="dd MM yyyy hh:mm:ss.SSS";Lt.exports.ABSOLUTETIME_FORMAT="hh:mm:ss.SSS"});var rd=b(($Y,lv)=>{var en=ju(),Xb=require("os"),ba=require("util"),ya=require("path"),ev=require("url"),tv=We()("log4js:layouts"),rv={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[90,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[91,39],yellow:[33,39]};function nv(e){return e?`\x1B[${rv[e][0]}m`:""}function ov(e){return e?`\x1B[${rv[e][1]}m`:""}function u5(e,t){return nv(t)+e+ov(t)}function iv(e,t){return u5(ba.format("[%s] [%s] %s - ",en.asString(e.startTime),e.level.toString(),e.categoryName),t)}function av(e){return iv(e)+ba.format(...e.data)}function zu(e){return iv(e,e.level.colour)+ba.format(...e.data)}function sv(e){return ba.format(...e.data)}function uv(e){return e.data[0]}function cv(e,t){let r="%r %p %c - %m%n",n=/%(-?[0-9]+)?(\.?-?[0-9]+)?([[\]cdhmnprzxXyflos%])(\{([^}]+)\})?|([^%]+)/;e=e||r;function o(v,A){let I=v.categoryName;if(A){let j=parseInt(A,10),z=I.split(".");j<z.length&&(I=z.slice(z.length-j).join("."))}return I}function i(v,A){let I=en.ISO8601_FORMAT;if(A)switch(I=A,I){case"ISO8601":case"ISO8601_FORMAT":I=en.ISO8601_FORMAT;break;case"ISO8601_WITH_TZ_OFFSET":case"ISO8601_WITH_TZ_OFFSET_FORMAT":I=en.ISO8601_WITH_TZ_OFFSET_FORMAT;break;case"ABSOLUTE":process.emitWarning("Pattern %d{ABSOLUTE} is deprecated in favor of %d{ABSOLUTETIME}. Please use %d{ABSOLUTETIME} instead.","DeprecationWarning","log4js-node-DEP0003"),tv("[log4js-node-DEP0003]","DEPRECATION: Pattern %d{ABSOLUTE} is deprecated and replaced by %d{ABSOLUTETIME}.");case"ABSOLUTETIME":case"ABSOLUTETIME_FORMAT":I=en.ABSOLUTETIME_FORMAT;break;case"DATE":process.emitWarning("Pattern %d{DATE} is deprecated due to the confusion it causes when used. Please use %d{DATETIME} instead.","DeprecationWarning","log4js-node-DEP0004"),tv("[log4js-node-DEP0004]","DEPRECATION: Pattern %d{DATE} is deprecated and replaced by %d{DATETIME}.");case"DATETIME":case"DATETIME_FORMAT":I=en.DATETIME_FORMAT;break}return en.asString(I,v.startTime)}function a(){return Xb.hostname().toString()}function s(v){return ba.format(...v.data)}function u(){return Xb.EOL}function l(v){return v.level.toString()}function c(v){return en.asString("hh:mm:ss",v.startTime)}function f(v){return nv(v.level.colour)}function p(v){return ov(v.level.colour)}function d(){return"%"}function h(v){return v&&v.pid?v.pid.toString():process.pid.toString()}function g(){return h()}function y(v,A){return typeof t[A]<"u"?typeof t[A]=="function"?t[A](v):t[A]:null}function w(v,A){let I=v.context[A];return typeof I<"u"?typeof I=="function"?I(v):I:null}function x(v,A){let I=v.fileName||"";if(I=function(z){let H="file://";return z.startsWith(H)&&(typeof ev.fileURLToPath=="function"?z=ev.fileURLToPath(z):(z=ya.normalize(z.replace(new RegExp(`^${H}`),"")),process.platform==="win32"&&(z.startsWith("\\")?z=z.slice(1):z=ya.sep+ya.sep+z))),z}(I),A){let z=parseInt(A,10),H=I.split(ya.sep);H.length>z&&(I=H.slice(-z).join(ya.sep))}return I}function S(v){return v.lineNumber?`${v.lineNumber}`:""}function O(v){return v.columnNumber?`${v.columnNumber}`:""}function F(v){return v.callStack||""}let D={c:o,d:i,h:a,m:s,n:u,p:l,r:c,"[":f,"]":p,y:g,z:h,"%":d,x:y,X:w,f:x,l:S,o:O,s:F};function P(v,A,I){return D[v](A,I)}function R(v,A){let I;return v?(I=parseInt(v.slice(1),10),I>0?A.slice(0,I):A.slice(I)):A}function E(v,A){let I;if(v)if(v.charAt(0)==="-")for(I=parseInt(v.slice(1),10);A.length<I;)A+=" ";else for(I=parseInt(v,10);A.length<I;)A=` ${A}`;return A}function T(v,A,I){let j=v;return j=R(A,j),j=E(I,j),j}return function(v){let A="",I,j=e;for(;(I=n.exec(j))!==null;){let z=I[1],H=I[2],G=I[3],re=I[5],ie=I[6];if(ie)A+=ie.toString();else{let _=P(G,v,re);A+=T(_,H,z)}j=j.slice(I.index+I[0].length)}return A}}var td={messagePassThrough(){return sv},basic(){return av},colored(){return zu},coloured(){return zu},pattern(e){return cv(e&&e.pattern,e&&e.tokens)},dummy(){return uv}};lv.exports={basicLayout:av,messagePassThroughLayout:sv,patternLayout:cv,colouredLayout:zu,coloredLayout:zu,dummyLayout:uv,addLayout(e,t){td[e]=t},layout(e,t){return td[e]&&td[e](t)}}});var Nn=b((LY,pv)=>{var Ne=Dn(),fv=["white","grey","black","blue","cyan","green","magenta","red","yellow"],Pe=class{constructor(t,r,n){this.level=t,this.levelStr=r,this.colour=n}toString(){return this.levelStr}static getLevel(t,r){return t?t instanceof Pe?t:(t instanceof Object&&t.levelStr&&(t=t.levelStr),Pe[t.toString().toUpperCase()]||r):r}static addLevels(t){t&&(Object.keys(t).forEach(n=>{let o=n.toUpperCase();Pe[o]=new Pe(t[n].value,o,t[n].colour);let i=Pe.levels.findIndex(a=>a.levelStr===o);i>-1?Pe.levels[i]=Pe[o]:Pe.levels.push(Pe[o])}),Pe.levels.sort((n,o)=>n.level-o.level))}isLessThanOrEqualTo(t){return typeof t=="string"&&(t=Pe.getLevel(t)),this.level<=t.level}isGreaterThanOrEqualTo(t){return typeof t=="string"&&(t=Pe.getLevel(t)),this.level>=t.level}isEqualTo(t){return typeof t=="string"&&(t=Pe.getLevel(t)),this.level===t.level}};Pe.levels=[];Pe.addLevels({ALL:{value:Number.MIN_VALUE,colour:"grey"},TRACE:{value:5e3,colour:"blue"},DEBUG:{value:1e4,colour:"cyan"},INFO:{value:2e4,colour:"green"},WARN:{value:3e4,colour:"yellow"},ERROR:{value:4e4,colour:"red"},FATAL:{value:5e4,colour:"magenta"},MARK:{value:9007199254740992,colour:"grey"},OFF:{value:Number.MAX_VALUE,colour:"grey"}});Ne.addListener(e=>{let t=e.levels;t&&(Ne.throwExceptionIf(e,Ne.not(Ne.anObject(t)),"levels must be an object"),Object.keys(t).forEach(n=>{Ne.throwExceptionIf(e,Ne.not(Ne.validIdentifier(n)),`level name "${n}" is not a valid identifier (must start with a letter, only contain A-Z,a-z,0-9,_)`),Ne.throwExceptionIf(e,Ne.not(Ne.anObject(t[n])),`level "${n}" must be an object`),Ne.throwExceptionIf(e,Ne.not(t[n].value),`level "${n}" must have a 'value' property`),Ne.throwExceptionIf(e,Ne.not(Ne.anInteger(t[n].value)),`level "${n}".value must have an integer value`),Ne.throwExceptionIf(e,Ne.not(t[n].colour),`level "${n}" must have a 'colour' property`),Ne.throwExceptionIf(e,Ne.not(fv.indexOf(t[n].colour)>-1),`level "${n}".colour must be one of ${fv.join(", ")}`)}))});Ne.addListener(e=>{Pe.addLevels(e.levels)});pv.exports=Pe});var Ev=b(wa=>{"use strict";var{parse:hv,stringify:gv}=JSON,{keys:c5}=Object,va=String,yv="string",dv={},Wu="object",bv=(e,t)=>t,l5=e=>e instanceof va?va(e):e,f5=(e,t)=>typeof t===yv?new va(t):t,vv=(e,t,r,n)=>{let o=[];for(let i=c5(r),{length:a}=i,s=0;s<a;s++){let u=i[s],l=r[u];if(l instanceof va){let c=e[l];typeof c===Wu&&!t.has(c)?(t.add(c),r[u]=dv,o.push({k:u,a:[e,t,c,n]})):r[u]=n.call(r,u,c)}else r[u]!==dv&&(r[u]=n.call(r,u,l))}for(let{length:i}=o,a=0;a<i;a++){let{k:s,a:u}=o[a];r[s]=n.call(r,s,vv.apply(null,u))}return r},mv=(e,t,r)=>{let n=va(t.push(r)-1);return e.set(r,n),n},wv=(e,t)=>{let r=hv(e,f5).map(l5),n=r[0],o=t||bv,i=typeof n===Wu&&n?vv(r,new Set,n,o):n;return o.call({"":i},"",i)};wa.parse=wv;var xv=(e,t,r)=>{let n=t&&typeof t===Wu?(c,f)=>c===""||-1<t.indexOf(c)?f:void 0:t||bv,o=new Map,i=[],a=[],s=+mv(o,i,n.call({"":e},"",e)),u=!s;for(;s<i.length;)u=!0,a[s]=gv(i[s++],l,r);return"["+a.join(",")+"]";function l(c,f){if(u)return u=!u,f;let p=n.call(this,c,f);switch(typeof p){case Wu:if(p===null)return p;case yv:return o.get(p)||mv(o,i,p)}return p}};wa.stringify=xv;var p5=e=>hv(xv(e));wa.toJSON=p5;var d5=e=>wv(gv(e));wa.fromJSON=d5});var nd=b((BY,Av)=>{var Sv=Ev(),kv=Nn(),Mo=class{constructor(t,r,n,o,i){this.startTime=new Date,this.categoryName=t,this.data=n,this.level=r,this.context=Object.assign({},o),this.pid=process.pid,i&&(this.functionName=i.functionName,this.fileName=i.fileName,this.lineNumber=i.lineNumber,this.columnNumber=i.columnNumber,this.callStack=i.callStack)}serialise(){return Sv.stringify(this,(t,r)=>(r&&r.message&&r.stack?r=Object.assign({message:r.message,stack:r.stack},r):typeof r=="number"&&(Number.isNaN(r)||!Number.isFinite(r))?r=r.toString():typeof r>"u"&&(r=typeof r),r))}static deserialise(t){let r;try{let n=Sv.parse(t,(o,i)=>{if(i&&i.message&&i.stack){let a=new Error(i);Object.keys(i).forEach(s=>{a[s]=i[s]}),i=a}return i});n.location={functionName:n.functionName,fileName:n.fileName,lineNumber:n.lineNumber,columnNumber:n.columnNumber,callStack:n.callStack},r=new Mo(n.categoryName,kv.getLevel(n.level.levelStr),n.data,n.context,n.location),r.startTime=new Date(n.startTime),r.pid=n.pid,r.cluster=n.cluster}catch(n){r=new Mo("log4js",kv.ERROR,["Unable to parse log:",t,"because: ",n])}return r}};Av.exports=Mo});var Hu=b((jY,Cv)=>{var qt=We()("log4js:clustering"),m5=nd(),h5=Dn(),$o=!1,Bt=null;try{Bt=require("cluster")}catch{qt("cluster module not present"),$o=!0}var id=[],Ea=!1,xa="NODE_APP_INSTANCE",Iv=()=>Ea&&process.env[xa]==="0",od=()=>$o||Bt&&Bt.isMaster||Iv(),_v=e=>{id.forEach(t=>t(e))},Uu=(e,t)=>{if(qt("cluster message received from worker ",e,": ",t),e.topic&&e.data&&(t=e,e=void 0),t&&t.topic&&t.topic==="log4js:message"){qt("received message: ",t.data);let r=m5.deserialise(t.data);_v(r)}};$o||h5.addListener(e=>{id.length=0,{pm2:Ea,disableClustering:$o,pm2InstanceVar:xa="NODE_APP_INSTANCE"}=e,qt(`clustering disabled ? ${$o}`),qt(`cluster.isMaster ? ${Bt&&Bt.isMaster}`),qt(`pm2 enabled ? ${Ea}`),qt(`pm2InstanceVar = ${xa}`),qt(`process.env[${xa}] = ${process.env[xa]}`),Ea&&process.removeListener("message",Uu),Bt&&Bt.removeListener&&Bt.removeListener("message",Uu),$o||e.disableClustering?qt("Not listening for cluster messages, because clustering disabled."):Iv()?(qt("listening for PM2 broadcast messages"),process.on("message",Uu)):Bt&&Bt.isMaster?(qt("listening for cluster messages"),Bt.on("message",Uu)):qt("not listening for messages, because we are not a master process")});Cv.exports={onlyOnMaster:(e,t)=>od()?e():t,isMaster:od,send:e=>{od()?_v(e):(Ea||(e.cluster={workerId:Bt.worker.id,worker:process.pid}),process.send({topic:"log4js:message",data:e.serialise()}))},onMessage:e=>{id.push(e)}}});var Dv=b((zY,Ov)=>{function g5(e){if(typeof e=="number"&&Number.isInteger(e))return e;let t={K:1024,M:1024*1024,G:1024*1024*1024},r=Object.keys(t),n=e.slice(-1).toLocaleUpperCase(),o=e.slice(0,-1).trim();if(r.indexOf(n)<0||!Number.isInteger(Number(o)))throw Error(`maxLogSize: "${e}" is invalid`);return o*t[n]}function y5(e,t){let r=Object.assign({},t);return Object.keys(e).forEach(n=>{r[n]&&(r[n]=e[n](t[n]))}),r}function ad(e){return y5({maxLogSize:g5},e)}var Tv={dateFile:ad,file:ad,fileSync:ad};Ov.exports.modifyConfig=e=>Tv[e.type]?Tv[e.type](e):e});var Nv=b((WY,Fv)=>{var b5=console.log.bind(console);function v5(e,t){return r=>{b5(e(r,t))}}function w5(e,t){let r=t.colouredLayout;return e.layout&&(r=t.layout(e.layout.type,e.layout)),v5(r,e.timezoneOffset)}Fv.exports.configure=w5});var Rv=b(Pv=>{function x5(e,t){return r=>{process.stdout.write(`${e(r,t)}
`)}}function E5(e,t){let r=t.colouredLayout;return e.layout&&(r=t.layout(e.layout.type,e.layout)),x5(r,e.timezoneOffset)}Pv.configure=E5});var $v=b((HY,Mv)=>{function S5(e,t){return r=>{process.stderr.write(`${e(r,t)}
`)}}function k5(e,t){let r=t.colouredLayout;return e.layout&&(r=t.layout(e.layout.type,e.layout)),S5(r,e.timezoneOffset)}Mv.exports.configure=k5});var qv=b((VY,Lv)=>{function A5(e,t,r,n){let o=n.getLevel(e),i=n.getLevel(t,n.FATAL);return a=>{let s=a.level;o.isLessThanOrEqualTo(s)&&i.isGreaterThanOrEqualTo(s)&&r(a)}}function I5(e,t,r,n){let o=r(e.appender);return A5(e.level,e.maxLevel,o,n)}Lv.exports.configure=I5});var zv=b((GY,jv)=>{var Bv=We()("log4js:categoryFilter");function _5(e,t){return typeof e=="string"&&(e=[e]),r=>{Bv(`Checking ${r.categoryName} against ${e}`),e.indexOf(r.categoryName)===-1&&(Bv("Not excluded, sending to appender"),t(r))}}function C5(e,t,r){let n=r(e.appender);return _5(e.exclude,n)}jv.exports.configure=C5});var Hv=b((KY,Uv)=>{var Wv=We()("log4js:noLogFilter");function T5(e){return e.filter(r=>r!=null&&r!=="")}function O5(e,t){return r=>{Wv(`Checking data: ${r.data} against filters: ${e}`),typeof e=="string"&&(e=[e]),e=T5(e);let n=new RegExp(e.join("|"),"i");(e.length===0||r.data.findIndex(o=>n.test(o))<0)&&(Wv("Not excluded, sending to appender"),t(r))}}function D5(e,t,r){let n=r(e.appender);return O5(e.exclude,n)}Uv.exports.configure=D5});var ut=b(sd=>{"use strict";sd.fromCallback=function(e){return Object.defineProperty(function(){if(typeof arguments[arguments.length-1]=="function")e.apply(this,arguments);else return new Promise((t,r)=>{arguments[arguments.length]=(n,o)=>{if(n)return r(n);t(o)},arguments.length++,e.apply(this,arguments)})},"name",{value:e.name})};sd.fromPromise=function(e){return Object.defineProperty(function(){let t=arguments[arguments.length-1];if(typeof t!="function")return e.apply(this,arguments);e.apply(this,arguments).then(r=>t(null,r),t)},"name",{value:e.name})}});var Gv=b((ZY,Vv)=>{var tn=require("constants"),F5=process.cwd,Vu=null,N5=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return Vu||(Vu=F5.call(process)),Vu};try{process.cwd()}catch{}typeof process.chdir=="function"&&(ud=process.chdir,process.chdir=function(e){Vu=null,ud.call(process,e)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,ud));var ud;Vv.exports=P5;function P5(e){tn.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&t(e),e.lutimes||r(e),e.chown=i(e.chown),e.fchown=i(e.fchown),e.lchown=i(e.lchown),e.chmod=n(e.chmod),e.fchmod=n(e.fchmod),e.lchmod=n(e.lchmod),e.chownSync=a(e.chownSync),e.fchownSync=a(e.fchownSync),e.lchownSync=a(e.lchownSync),e.chmodSync=o(e.chmodSync),e.fchmodSync=o(e.fchmodSync),e.lchmodSync=o(e.lchmodSync),e.stat=s(e.stat),e.fstat=s(e.fstat),e.lstat=s(e.lstat),e.statSync=u(e.statSync),e.fstatSync=u(e.fstatSync),e.lstatSync=u(e.lstatSync),e.chmod&&!e.lchmod&&(e.lchmod=function(c,f,p){p&&process.nextTick(p)},e.lchmodSync=function(){}),e.chown&&!e.lchown&&(e.lchown=function(c,f,p,d){d&&process.nextTick(d)},e.lchownSync=function(){}),N5==="win32"&&(e.rename=typeof e.rename!="function"?e.rename:function(c){function f(p,d,h){var g=Date.now(),y=0;c(p,d,function w(x){if(x&&(x.code==="EACCES"||x.code==="EPERM"||x.code==="EBUSY")&&Date.now()-g<6e4){setTimeout(function(){e.stat(d,function(S,O){S&&S.code==="ENOENT"?c(p,d,w):h(x)})},y),y<100&&(y+=10);return}h&&h(x)})}return Object.setPrototypeOf&&Object.setPrototypeOf(f,c),f}(e.rename)),e.read=typeof e.read!="function"?e.read:function(c){function f(p,d,h,g,y,w){var x;if(w&&typeof w=="function"){var S=0;x=function(O,F,D){if(O&&O.code==="EAGAIN"&&S<10)return S++,c.call(e,p,d,h,g,y,x);w.apply(this,arguments)}}return c.call(e,p,d,h,g,y,x)}return Object.setPrototypeOf&&Object.setPrototypeOf(f,c),f}(e.read),e.readSync=typeof e.readSync!="function"?e.readSync:function(c){return function(f,p,d,h,g){for(var y=0;;)try{return c.call(e,f,p,d,h,g)}catch(w){if(w.code==="EAGAIN"&&y<10){y++;continue}throw w}}}(e.readSync);function t(c){c.lchmod=function(f,p,d){c.open(f,tn.O_WRONLY|tn.O_SYMLINK,p,function(h,g){if(h){d&&d(h);return}c.fchmod(g,p,function(y){c.close(g,function(w){d&&d(y||w)})})})},c.lchmodSync=function(f,p){var d=c.openSync(f,tn.O_WRONLY|tn.O_SYMLINK,p),h=!0,g;try{g=c.fchmodSync(d,p),h=!1}finally{if(h)try{c.closeSync(d)}catch{}else c.closeSync(d)}return g}}function r(c){tn.hasOwnProperty("O_SYMLINK")&&c.futimes?(c.lutimes=function(f,p,d,h){c.open(f,tn.O_SYMLINK,function(g,y){if(g){h&&h(g);return}c.futimes(y,p,d,function(w){c.close(y,function(x){h&&h(w||x)})})})},c.lutimesSync=function(f,p,d){var h=c.openSync(f,tn.O_SYMLINK),g,y=!0;try{g=c.futimesSync(h,p,d),y=!1}finally{if(y)try{c.closeSync(h)}catch{}else c.closeSync(h)}return g}):c.futimes&&(c.lutimes=function(f,p,d,h){h&&process.nextTick(h)},c.lutimesSync=function(){})}function n(c){return c&&function(f,p,d){return c.call(e,f,p,function(h){l(h)&&(h=null),d&&d.apply(this,arguments)})}}function o(c){return c&&function(f,p){try{return c.call(e,f,p)}catch(d){if(!l(d))throw d}}}function i(c){return c&&function(f,p,d,h){return c.call(e,f,p,d,function(g){l(g)&&(g=null),h&&h.apply(this,arguments)})}}function a(c){return c&&function(f,p,d){try{return c.call(e,f,p,d)}catch(h){if(!l(h))throw h}}}function s(c){return c&&function(f,p,d){typeof p=="function"&&(d=p,p=null);function h(g,y){y&&(y.uid<0&&(y.uid+=4294967296),y.gid<0&&(y.gid+=4294967296)),d&&d.apply(this,arguments)}return p?c.call(e,f,p,h):c.call(e,f,h)}}function u(c){return c&&function(f,p){var d=p?c.call(e,f,p):c.call(e,f);return d&&(d.uid<0&&(d.uid+=4294967296),d.gid<0&&(d.gid+=4294967296)),d}}function l(c){if(!c||c.code==="ENOSYS")return!0;var f=!process.getuid||process.getuid()!==0;return!!(f&&(c.code==="EINVAL"||c.code==="EPERM"))}}});var Zv=b((YY,Jv)=>{var Kv=require("stream").Stream;Jv.exports=R5;function R5(e){return{ReadStream:t,WriteStream:r};function t(n,o){if(!(this instanceof t))return new t(n,o);Kv.call(this);var i=this;this.path=n,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,o=o||{};for(var a=Object.keys(o),s=0,u=a.length;s<u;s++){var l=a[s];this[l]=o[l]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){i._read()});return}e.open(this.path,this.flags,this.mode,function(c,f){if(c){i.emit("error",c),i.readable=!1;return}i.fd=f,i.emit("open",f),i._read()})}function r(n,o){if(!(this instanceof r))return new r(n,o);Kv.call(this),this.path=n,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,o=o||{};for(var i=Object.keys(o),a=0,s=i.length;a<s;a++){var u=i[a];this[u]=o[u]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=e.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}});var Qv=b((QY,Yv)=>{"use strict";Yv.exports=$5;var M5=Object.getPrototypeOf||function(e){return e.__proto__};function $5(e){if(e===null||typeof e!="object")return e;if(e instanceof Object)var t={__proto__:M5(e)};else var t=Object.create(null);return Object.getOwnPropertyNames(e).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}),t}});var Re=b((XY,fd)=>{var Ie=require("fs"),L5=Gv(),q5=Zv(),B5=Qv(),Gu=require("util"),Je,Ju;typeof Symbol=="function"&&typeof Symbol.for=="function"?(Je=Symbol.for("graceful-fs.queue"),Ju=Symbol.for("graceful-fs.previous")):(Je="___graceful-fs.queue",Ju="___graceful-fs.previous");function j5(){}function t0(e,t){Object.defineProperty(e,Je,{get:function(){return t}})}var Pn=j5;Gu.debuglog?Pn=Gu.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(Pn=function(){var e=Gu.format.apply(Gu,arguments);e="GFS4: "+e.split(/\n/).join(`
GFS4: `),console.error(e)});Ie[Je]||(Xv=global[Je]||[],t0(Ie,Xv),Ie.close=function(e){function t(r,n){return e.call(Ie,r,function(o){o||e0(),typeof n=="function"&&n.apply(this,arguments)})}return Object.defineProperty(t,Ju,{value:e}),t}(Ie.close),Ie.closeSync=function(e){function t(r){e.apply(Ie,arguments),e0()}return Object.defineProperty(t,Ju,{value:e}),t}(Ie.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){Pn(Ie[Je]),require("assert").equal(Ie[Je].length,0)}));var Xv;global[Je]||t0(global,Ie[Je]);fd.exports=cd(B5(Ie));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!Ie.__patched&&(fd.exports=cd(Ie),Ie.__patched=!0);function cd(e){L5(e),e.gracefulify=cd,e.createReadStream=F,e.createWriteStream=D;var t=e.readFile;e.readFile=r;function r(E,T,v){return typeof T=="function"&&(v=T,T=null),A(E,T,v);function A(I,j,z,H){return t(I,j,function(G){G&&(G.code==="EMFILE"||G.code==="ENFILE")?Lo([A,[I,j,z],G,H||Date.now(),Date.now()]):typeof z=="function"&&z.apply(this,arguments)})}}var n=e.writeFile;e.writeFile=o;function o(E,T,v,A){return typeof v=="function"&&(A=v,v=null),I(E,T,v,A);function I(j,z,H,G,re){return n(j,z,H,function(ie){ie&&(ie.code==="EMFILE"||ie.code==="ENFILE")?Lo([I,[j,z,H,G],ie,re||Date.now(),Date.now()]):typeof G=="function"&&G.apply(this,arguments)})}}var i=e.appendFile;i&&(e.appendFile=a);function a(E,T,v,A){return typeof v=="function"&&(A=v,v=null),I(E,T,v,A);function I(j,z,H,G,re){return i(j,z,H,function(ie){ie&&(ie.code==="EMFILE"||ie.code==="ENFILE")?Lo([I,[j,z,H,G],ie,re||Date.now(),Date.now()]):typeof G=="function"&&G.apply(this,arguments)})}}var s=e.copyFile;s&&(e.copyFile=u);function u(E,T,v,A){return typeof v=="function"&&(A=v,v=0),I(E,T,v,A);function I(j,z,H,G,re){return s(j,z,H,function(ie){ie&&(ie.code==="EMFILE"||ie.code==="ENFILE")?Lo([I,[j,z,H,G],ie,re||Date.now(),Date.now()]):typeof G=="function"&&G.apply(this,arguments)})}}var l=e.readdir;e.readdir=f;var c=/^v[0-5]\./;function f(E,T,v){typeof T=="function"&&(v=T,T=null);var A=c.test(process.version)?function(z,H,G,re){return l(z,I(z,H,G,re))}:function(z,H,G,re){return l(z,H,I(z,H,G,re))};return A(E,T,v);function I(j,z,H,G){return function(re,ie){re&&(re.code==="EMFILE"||re.code==="ENFILE")?Lo([A,[j,z,H],re,G||Date.now(),Date.now()]):(ie&&ie.sort&&ie.sort(),typeof H=="function"&&H.call(this,re,ie))}}}if(process.version.substr(0,4)==="v0.8"){var p=q5(e);w=p.ReadStream,S=p.WriteStream}var d=e.ReadStream;d&&(w.prototype=Object.create(d.prototype),w.prototype.open=x);var h=e.WriteStream;h&&(S.prototype=Object.create(h.prototype),S.prototype.open=O),Object.defineProperty(e,"ReadStream",{get:function(){return w},set:function(E){w=E},enumerable:!0,configurable:!0}),Object.defineProperty(e,"WriteStream",{get:function(){return S},set:function(E){S=E},enumerable:!0,configurable:!0});var g=w;Object.defineProperty(e,"FileReadStream",{get:function(){return g},set:function(E){g=E},enumerable:!0,configurable:!0});var y=S;Object.defineProperty(e,"FileWriteStream",{get:function(){return y},set:function(E){y=E},enumerable:!0,configurable:!0});function w(E,T){return this instanceof w?(d.apply(this,arguments),this):w.apply(Object.create(w.prototype),arguments)}function x(){var E=this;R(E.path,E.flags,E.mode,function(T,v){T?(E.autoClose&&E.destroy(),E.emit("error",T)):(E.fd=v,E.emit("open",v),E.read())})}function S(E,T){return this instanceof S?(h.apply(this,arguments),this):S.apply(Object.create(S.prototype),arguments)}function O(){var E=this;R(E.path,E.flags,E.mode,function(T,v){T?(E.destroy(),E.emit("error",T)):(E.fd=v,E.emit("open",v))})}function F(E,T){return new e.ReadStream(E,T)}function D(E,T){return new e.WriteStream(E,T)}var P=e.open;e.open=R;function R(E,T,v,A){return typeof v=="function"&&(A=v,v=null),I(E,T,v,A);function I(j,z,H,G,re){return P(j,z,H,function(ie,_){ie&&(ie.code==="EMFILE"||ie.code==="ENFILE")?Lo([I,[j,z,H,G],ie,re||Date.now(),Date.now()]):typeof G=="function"&&G.apply(this,arguments)})}}return e}function Lo(e){Pn("ENQUEUE",e[0].name,e[1]),Ie[Je].push(e),ld()}var Ku;function e0(){for(var e=Date.now(),t=0;t<Ie[Je].length;++t)Ie[Je][t].length>2&&(Ie[Je][t][3]=e,Ie[Je][t][4]=e);ld()}function ld(){if(clearTimeout(Ku),Ku=void 0,Ie[Je].length!==0){var e=Ie[Je].shift(),t=e[0],r=e[1],n=e[2],o=e[3],i=e[4];if(o===void 0)Pn("RETRY",t.name,r),t.apply(null,r);else if(Date.now()-o>=6e4){Pn("TIMEOUT",t.name,r);var a=r.pop();typeof a=="function"&&a.call(null,n)}else{var s=Date.now()-i,u=Math.max(i-o,1),l=Math.min(u*1.2,100);s>=l?(Pn("RETRY",t.name,r),t.apply(null,r.concat([o]))):Ie[Je].push(e)}Ku===void 0&&(Ku=setTimeout(ld,0))}}});var pd=b(Rn=>{"use strict";var r0=ut().fromCallback,jt=Re(),z5=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchown","lchmod","link","lstat","mkdir","mkdtemp","open","readFile","readdir","readlink","realpath","rename","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(e=>typeof jt[e]=="function");Object.keys(jt).forEach(e=>{e!=="promises"&&(Rn[e]=jt[e])});z5.forEach(e=>{Rn[e]=r0(jt[e])});Rn.exists=function(e,t){return typeof t=="function"?jt.exists(e,t):new Promise(r=>jt.exists(e,r))};Rn.read=function(e,t,r,n,o,i){return typeof i=="function"?jt.read(e,t,r,n,o,i):new Promise((a,s)=>{jt.read(e,t,r,n,o,(u,l,c)=>{if(u)return s(u);a({bytesRead:l,buffer:c})})})};Rn.write=function(e,t,...r){return typeof r[r.length-1]=="function"?jt.write(e,t,...r):new Promise((n,o)=>{jt.write(e,t,...r,(i,a,s)=>{if(i)return o(i);n({bytesWritten:a,buffer:s})})})};typeof jt.realpath.native=="function"&&(Rn.realpath.native=r0(jt.realpath.native))});var md=b((tQ,o0)=>{"use strict";var dd=require("path");function n0(e){return e=dd.normalize(dd.resolve(e)).split(dd.sep),e.length>0?e[0]:null}var W5=/[<>:"|?*]/;function U5(e){let t=n0(e);return e=e.replace(t,""),W5.test(e)}o0.exports={getRootPath:n0,invalidWin32Path:U5}});var a0=b((rQ,i0)=>{"use strict";var H5=Re(),hd=require("path"),V5=md().invalidWin32Path,G5=parseInt("0777",8);function gd(e,t,r,n){if(typeof t=="function"?(r=t,t={}):(!t||typeof t!="object")&&(t={mode:t}),process.platform==="win32"&&V5(e)){let a=new Error(e+" contains invalid WIN32 path characters.");return a.code="EINVAL",r(a)}let o=t.mode,i=t.fs||H5;o===void 0&&(o=G5&~process.umask()),n||(n=null),r=r||function(){},e=hd.resolve(e),i.mkdir(e,o,a=>{if(!a)return n=n||e,r(null,n);switch(a.code){case"ENOENT":if(hd.dirname(e)===e)return r(a);gd(hd.dirname(e),t,(s,u)=>{s?r(s,u):gd(e,t,r,u)});break;default:i.stat(e,(s,u)=>{s||!u.isDirectory()?r(a,n):r(null,n)});break}})}i0.exports=gd});var u0=b((nQ,s0)=>{"use strict";var K5=Re(),yd=require("path"),J5=md().invalidWin32Path,Z5=parseInt("0777",8);function bd(e,t,r){(!t||typeof t!="object")&&(t={mode:t});let n=t.mode,o=t.fs||K5;if(process.platform==="win32"&&J5(e)){let i=new Error(e+" contains invalid WIN32 path characters.");throw i.code="EINVAL",i}n===void 0&&(n=Z5&~process.umask()),r||(r=null),e=yd.resolve(e);try{o.mkdirSync(e,n),r=r||e}catch(i){if(i.code==="ENOENT"){if(yd.dirname(e)===e)throw i;r=bd(yd.dirname(e),t,r),bd(e,t,r)}else{let a;try{a=o.statSync(e)}catch{throw i}if(!a.isDirectory())throw i}}return r}s0.exports=bd});var vt=b((oQ,c0)=>{"use strict";var Y5=ut().fromCallback,vd=Y5(a0()),wd=u0();c0.exports={mkdirs:vd,mkdirsSync:wd,mkdirp:vd,mkdirpSync:wd,ensureDir:vd,ensureDirSync:wd}});var xd=b((iQ,f0)=>{"use strict";var Xe=Re(),l0=require("os"),Zu=require("path");function Q5(){let e=Zu.join("millis-test-sync"+Date.now().toString()+Math.random().toString().slice(2));e=Zu.join(l0.tmpdir(),e);let t=new Date(1435410243862);Xe.writeFileSync(e,"https://github.com/jprichardson/node-fs-extra/pull/141");let r=Xe.openSync(e,"r+");return Xe.futimesSync(r,t,t),Xe.closeSync(r),Xe.statSync(e).mtime>1435410243e3}function X5(e){let t=Zu.join("millis-test"+Date.now().toString()+Math.random().toString().slice(2));t=Zu.join(l0.tmpdir(),t);let r=new Date(1435410243862);Xe.writeFile(t,"https://github.com/jprichardson/node-fs-extra/pull/141",n=>{if(n)return e(n);Xe.open(t,"r+",(o,i)=>{if(o)return e(o);Xe.futimes(i,r,r,a=>{if(a)return e(a);Xe.close(i,s=>{if(s)return e(s);Xe.stat(t,(u,l)=>{if(u)return e(u);e(null,l.mtime>1435410243e3)})})})})})}function eM(e){if(typeof e=="number")return Math.floor(e/1e3)*1e3;if(e instanceof Date)return new Date(Math.floor(e.getTime()/1e3)*1e3);throw new Error("fs-extra: timeRemoveMillis() unknown parameter type")}function tM(e,t,r,n){Xe.open(e,"r+",(o,i)=>{if(o)return n(o);Xe.futimes(i,t,r,a=>{Xe.close(i,s=>{n&&n(a||s)})})})}function rM(e,t,r){let n=Xe.openSync(e,"r+");return Xe.futimesSync(n,t,r),Xe.closeSync(n)}f0.exports={hasMillisRes:X5,hasMillisResSync:Q5,timeRemoveMillis:eM,utimesMillis:tM,utimesMillisSync:rM}});var Aa=b((aQ,y0)=>{"use strict";var zt=Re(),ct=require("path"),p0=10,d0=5,nM=0,Sd=process.versions.node.split("."),m0=Number.parseInt(Sd[0],10),h0=Number.parseInt(Sd[1],10),oM=Number.parseInt(Sd[2],10);function Sa(){if(m0>p0)return!0;if(m0===p0){if(h0>d0)return!0;if(h0===d0&&oM>=nM)return!0}return!1}function iM(e,t,r){Sa()?zt.stat(e,{bigint:!0},(n,o)=>{if(n)return r(n);zt.stat(t,{bigint:!0},(i,a)=>i?i.code==="ENOENT"?r(null,{srcStat:o,destStat:null}):r(i):r(null,{srcStat:o,destStat:a}))}):zt.stat(e,(n,o)=>{if(n)return r(n);zt.stat(t,(i,a)=>i?i.code==="ENOENT"?r(null,{srcStat:o,destStat:null}):r(i):r(null,{srcStat:o,destStat:a}))})}function aM(e,t){let r,n;Sa()?r=zt.statSync(e,{bigint:!0}):r=zt.statSync(e);try{Sa()?n=zt.statSync(t,{bigint:!0}):n=zt.statSync(t)}catch(o){if(o.code==="ENOENT")return{srcStat:r,destStat:null};throw o}return{srcStat:r,destStat:n}}function sM(e,t,r,n){iM(e,t,(o,i)=>{if(o)return n(o);let{srcStat:a,destStat:s}=i;return s&&s.ino&&s.dev&&s.ino===a.ino&&s.dev===a.dev?n(new Error("Source and destination must not be the same.")):a.isDirectory()&&kd(e,t)?n(new Error(ka(e,t,r))):n(null,{srcStat:a,destStat:s})})}function uM(e,t,r){let{srcStat:n,destStat:o}=aM(e,t);if(o&&o.ino&&o.dev&&o.ino===n.ino&&o.dev===n.dev)throw new Error("Source and destination must not be the same.");if(n.isDirectory()&&kd(e,t))throw new Error(ka(e,t,r));return{srcStat:n,destStat:o}}function Ed(e,t,r,n,o){let i=ct.resolve(ct.dirname(e)),a=ct.resolve(ct.dirname(r));if(a===i||a===ct.parse(a).root)return o();Sa()?zt.stat(a,{bigint:!0},(s,u)=>s?s.code==="ENOENT"?o():o(s):u.ino&&u.dev&&u.ino===t.ino&&u.dev===t.dev?o(new Error(ka(e,r,n))):Ed(e,t,a,n,o)):zt.stat(a,(s,u)=>s?s.code==="ENOENT"?o():o(s):u.ino&&u.dev&&u.ino===t.ino&&u.dev===t.dev?o(new Error(ka(e,r,n))):Ed(e,t,a,n,o))}function g0(e,t,r,n){let o=ct.resolve(ct.dirname(e)),i=ct.resolve(ct.dirname(r));if(i===o||i===ct.parse(i).root)return;let a;try{Sa()?a=zt.statSync(i,{bigint:!0}):a=zt.statSync(i)}catch(s){if(s.code==="ENOENT")return;throw s}if(a.ino&&a.dev&&a.ino===t.ino&&a.dev===t.dev)throw new Error(ka(e,r,n));return g0(e,t,i,n)}function kd(e,t){let r=ct.resolve(e).split(ct.sep).filter(o=>o),n=ct.resolve(t).split(ct.sep).filter(o=>o);return r.reduce((o,i,a)=>o&&n[a]===i,!0)}function ka(e,t,r){return`Cannot ${r} '${e}' to a subdirectory of itself, '${t}'.`}y0.exports={checkPaths:sM,checkPathsSync:uM,checkParentPaths:Ed,checkParentPathsSync:g0,isSrcSubdir:kd}});var v0=b((sQ,b0)=>{"use strict";b0.exports=function(e){if(typeof Buffer.allocUnsafe=="function")try{return Buffer.allocUnsafe(e)}catch{return new Buffer(e)}return new Buffer(e)}});var k0=b((uQ,S0)=>{"use strict";var Ae=Re(),Ia=require("path"),cM=vt().mkdirsSync,lM=xd().utimesMillisSync,_a=Aa();function fM(e,t,r){typeof r=="function"&&(r={filter:r}),r=r||{},r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&console.warn(`fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;

    see https://github.com/jprichardson/node-fs-extra/issues/269`);let{srcStat:n,destStat:o}=_a.checkPathsSync(e,t,"copy");return _a.checkParentPathsSync(e,n,t,"copy"),pM(o,e,t,r)}function pM(e,t,r,n){if(n.filter&&!n.filter(t,r))return;let o=Ia.dirname(r);return Ae.existsSync(o)||cM(o),w0(e,t,r,n)}function w0(e,t,r,n){if(!(n.filter&&!n.filter(t,r)))return dM(e,t,r,n)}function dM(e,t,r,n){let i=(n.dereference?Ae.statSync:Ae.lstatSync)(t);if(i.isDirectory())return yM(i,e,t,r,n);if(i.isFile()||i.isCharacterDevice()||i.isBlockDevice())return mM(i,e,t,r,n);if(i.isSymbolicLink())return wM(e,t,r,n)}function mM(e,t,r,n,o){return t?hM(e,r,n,o):x0(e,r,n,o)}function hM(e,t,r,n){if(n.overwrite)return Ae.unlinkSync(r),x0(e,t,r,n);if(n.errorOnExist)throw new Error(`'${r}' already exists`)}function x0(e,t,r,n){return typeof Ae.copyFileSync=="function"?(Ae.copyFileSync(t,r),Ae.chmodSync(r,e.mode),n.preserveTimestamps?lM(r,e.atime,e.mtime):void 0):gM(e,t,r,n)}function gM(e,t,r,n){let i=v0()(65536),a=Ae.openSync(t,"r"),s=Ae.openSync(r,"w",e.mode),u=0;for(;u<e.size;){let l=Ae.readSync(a,i,0,65536,u);Ae.writeSync(s,i,0,l),u+=l}n.preserveTimestamps&&Ae.futimesSync(s,e.atime,e.mtime),Ae.closeSync(a),Ae.closeSync(s)}function yM(e,t,r,n,o){if(!t)return bM(e,r,n,o);if(t&&!t.isDirectory())throw new Error(`Cannot overwrite non-directory '${n}' with directory '${r}'.`);return E0(r,n,o)}function bM(e,t,r,n){return Ae.mkdirSync(r),E0(t,r,n),Ae.chmodSync(r,e.mode)}function E0(e,t,r){Ae.readdirSync(e).forEach(n=>vM(n,e,t,r))}function vM(e,t,r,n){let o=Ia.join(t,e),i=Ia.join(r,e),{destStat:a}=_a.checkPathsSync(o,i,"copy");return w0(a,o,i,n)}function wM(e,t,r,n){let o=Ae.readlinkSync(t);if(n.dereference&&(o=Ia.resolve(process.cwd(),o)),e){let i;try{i=Ae.readlinkSync(r)}catch(a){if(a.code==="EINVAL"||a.code==="UNKNOWN")return Ae.symlinkSync(o,r);throw a}if(n.dereference&&(i=Ia.resolve(process.cwd(),i)),_a.isSrcSubdir(o,i))throw new Error(`Cannot copy '${o}' to a subdirectory of itself, '${i}'.`);if(Ae.statSync(r).isDirectory()&&_a.isSrcSubdir(i,o))throw new Error(`Cannot overwrite '${i}' with '${o}'.`);return xM(o,r)}else return Ae.symlinkSync(o,r)}function xM(e,t){return Ae.unlinkSync(t),Ae.symlinkSync(e,t)}S0.exports=fM});var Ad=b((cQ,A0)=>{"use strict";A0.exports={copySync:k0()}});var or=b((lQ,_0)=>{"use strict";var EM=ut().fromPromise,I0=pd();function SM(e){return I0.access(e).then(()=>!0).catch(()=>!1)}_0.exports={pathExists:EM(SM),pathExistsSync:I0.existsSync}});var M0=b((fQ,R0)=>{"use strict";var Ze=Re(),Ca=require("path"),kM=vt().mkdirs,AM=or().pathExists,IM=xd().utimesMillis,Ta=Aa();function _M(e,t,r,n){typeof r=="function"&&!n?(n=r,r={}):typeof r=="function"&&(r={filter:r}),n=n||function(){},r=r||{},r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&console.warn(`fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;

    see https://github.com/jprichardson/node-fs-extra/issues/269`),Ta.checkPaths(e,t,"copy",(o,i)=>{if(o)return n(o);let{srcStat:a,destStat:s}=i;Ta.checkParentPaths(e,a,t,"copy",u=>u?n(u):r.filter?O0(C0,s,e,t,r,n):C0(s,e,t,r,n))})}function C0(e,t,r,n,o){let i=Ca.dirname(r);AM(i,(a,s)=>{if(a)return o(a);if(s)return Id(e,t,r,n,o);kM(i,u=>u?o(u):Id(e,t,r,n,o))})}function O0(e,t,r,n,o,i){Promise.resolve(o.filter(r,n)).then(a=>a?e(t,r,n,o,i):i(),a=>i(a))}function Id(e,t,r,n,o){return n.filter?O0(T0,e,t,r,n,o):T0(e,t,r,n,o)}function T0(e,t,r,n,o){(n.dereference?Ze.stat:Ze.lstat)(t,(a,s)=>{if(a)return o(a);if(s.isDirectory())return DM(s,e,t,r,n,o);if(s.isFile()||s.isCharacterDevice()||s.isBlockDevice())return CM(s,e,t,r,n,o);if(s.isSymbolicLink())return PM(e,t,r,n,o)})}function CM(e,t,r,n,o,i){return t?TM(e,r,n,o,i):D0(e,r,n,o,i)}function TM(e,t,r,n,o){if(n.overwrite)Ze.unlink(r,i=>i?o(i):D0(e,t,r,n,o));else return n.errorOnExist?o(new Error(`'${r}' already exists`)):o()}function D0(e,t,r,n,o){return typeof Ze.copyFile=="function"?Ze.copyFile(t,r,i=>i?o(i):F0(e,r,n,o)):OM(e,t,r,n,o)}function OM(e,t,r,n,o){let i=Ze.createReadStream(t);i.on("error",a=>o(a)).once("open",()=>{let a=Ze.createWriteStream(r,{mode:e.mode});a.on("error",s=>o(s)).on("open",()=>i.pipe(a)).once("close",()=>F0(e,r,n,o))})}function F0(e,t,r,n){Ze.chmod(t,e.mode,o=>o?n(o):r.preserveTimestamps?IM(t,e.atime,e.mtime,n):n())}function DM(e,t,r,n,o,i){return t?t&&!t.isDirectory()?i(new Error(`Cannot overwrite non-directory '${n}' with directory '${r}'.`)):N0(r,n,o,i):FM(e,r,n,o,i)}function FM(e,t,r,n,o){Ze.mkdir(r,i=>{if(i)return o(i);N0(t,r,n,a=>a?o(a):Ze.chmod(r,e.mode,o))})}function N0(e,t,r,n){Ze.readdir(e,(o,i)=>o?n(o):P0(i,e,t,r,n))}function P0(e,t,r,n,o){let i=e.pop();return i?NM(e,i,t,r,n,o):o()}function NM(e,t,r,n,o,i){let a=Ca.join(r,t),s=Ca.join(n,t);Ta.checkPaths(a,s,"copy",(u,l)=>{if(u)return i(u);let{destStat:c}=l;Id(c,a,s,o,f=>f?i(f):P0(e,r,n,o,i))})}function PM(e,t,r,n,o){Ze.readlink(t,(i,a)=>{if(i)return o(i);if(n.dereference&&(a=Ca.resolve(process.cwd(),a)),e)Ze.readlink(r,(s,u)=>s?s.code==="EINVAL"||s.code==="UNKNOWN"?Ze.symlink(a,r,o):o(s):(n.dereference&&(u=Ca.resolve(process.cwd(),u)),Ta.isSrcSubdir(a,u)?o(new Error(`Cannot copy '${a}' to a subdirectory of itself, '${u}'.`)):e.isDirectory()&&Ta.isSrcSubdir(u,a)?o(new Error(`Cannot overwrite '${u}' with '${a}'.`)):RM(a,r,o)));else return Ze.symlink(a,r,o)})}function RM(e,t,r){Ze.unlink(t,n=>n?r(n):Ze.symlink(e,t,r))}R0.exports=_M});var _d=b((pQ,$0)=>{"use strict";var MM=ut().fromCallback;$0.exports={copy:MM(M0())}});var V0=b((dQ,H0)=>{"use strict";var L0=Re(),z0=require("path"),ge=require("assert"),Oa=process.platform==="win32";function W0(e){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(r=>{e[r]=e[r]||L0[r],r=r+"Sync",e[r]=e[r]||L0[r]}),e.maxBusyTries=e.maxBusyTries||3}function Cd(e,t,r){let n=0;typeof t=="function"&&(r=t,t={}),ge(e,"rimraf: missing path"),ge.strictEqual(typeof e,"string","rimraf: path should be a string"),ge.strictEqual(typeof r,"function","rimraf: callback function required"),ge(t,"rimraf: invalid options argument provided"),ge.strictEqual(typeof t,"object","rimraf: options should be object"),W0(t),q0(e,t,function o(i){if(i){if((i.code==="EBUSY"||i.code==="ENOTEMPTY"||i.code==="EPERM")&&n<t.maxBusyTries){n++;let a=n*100;return setTimeout(()=>q0(e,t,o),a)}i.code==="ENOENT"&&(i=null)}r(i)})}function q0(e,t,r){ge(e),ge(t),ge(typeof r=="function"),t.lstat(e,(n,o)=>{if(n&&n.code==="ENOENT")return r(null);if(n&&n.code==="EPERM"&&Oa)return B0(e,t,n,r);if(o&&o.isDirectory())return Yu(e,t,n,r);t.unlink(e,i=>{if(i){if(i.code==="ENOENT")return r(null);if(i.code==="EPERM")return Oa?B0(e,t,i,r):Yu(e,t,i,r);if(i.code==="EISDIR")return Yu(e,t,i,r)}return r(i)})})}function B0(e,t,r,n){ge(e),ge(t),ge(typeof n=="function"),r&&ge(r instanceof Error),t.chmod(e,438,o=>{o?n(o.code==="ENOENT"?null:r):t.stat(e,(i,a)=>{i?n(i.code==="ENOENT"?null:r):a.isDirectory()?Yu(e,t,r,n):t.unlink(e,n)})})}function j0(e,t,r){let n;ge(e),ge(t),r&&ge(r instanceof Error);try{t.chmodSync(e,438)}catch(o){if(o.code==="ENOENT")return;throw r}try{n=t.statSync(e)}catch(o){if(o.code==="ENOENT")return;throw r}n.isDirectory()?Qu(e,t,r):t.unlinkSync(e)}function Yu(e,t,r,n){ge(e),ge(t),r&&ge(r instanceof Error),ge(typeof n=="function"),t.rmdir(e,o=>{o&&(o.code==="ENOTEMPTY"||o.code==="EEXIST"||o.code==="EPERM")?$M(e,t,n):o&&o.code==="ENOTDIR"?n(r):n(o)})}function $M(e,t,r){ge(e),ge(t),ge(typeof r=="function"),t.readdir(e,(n,o)=>{if(n)return r(n);let i=o.length,a;if(i===0)return t.rmdir(e,r);o.forEach(s=>{Cd(z0.join(e,s),t,u=>{if(!a){if(u)return r(a=u);--i===0&&t.rmdir(e,r)}})})})}function U0(e,t){let r;t=t||{},W0(t),ge(e,"rimraf: missing path"),ge.strictEqual(typeof e,"string","rimraf: path should be a string"),ge(t,"rimraf: missing options"),ge.strictEqual(typeof t,"object","rimraf: options should be object");try{r=t.lstatSync(e)}catch(n){if(n.code==="ENOENT")return;n.code==="EPERM"&&Oa&&j0(e,t,n)}try{r&&r.isDirectory()?Qu(e,t,null):t.unlinkSync(e)}catch(n){if(n.code==="ENOENT")return;if(n.code==="EPERM")return Oa?j0(e,t,n):Qu(e,t,n);if(n.code!=="EISDIR")throw n;Qu(e,t,n)}}function Qu(e,t,r){ge(e),ge(t),r&&ge(r instanceof Error);try{t.rmdirSync(e)}catch(n){if(n.code==="ENOTDIR")throw r;if(n.code==="ENOTEMPTY"||n.code==="EEXIST"||n.code==="EPERM")LM(e,t);else if(n.code!=="ENOENT")throw n}}function LM(e,t){if(ge(e),ge(t),t.readdirSync(e).forEach(r=>U0(z0.join(e,r),t)),Oa){let r=Date.now();do try{return t.rmdirSync(e,t)}catch{}while(Date.now()-r<500)}else return t.rmdirSync(e,t)}H0.exports=Cd;Cd.sync=U0});var Da=b((mQ,K0)=>{"use strict";var qM=ut().fromCallback,G0=V0();K0.exports={remove:qM(G0),removeSync:G0.sync}});var rw=b((hQ,tw)=>{"use strict";var BM=ut().fromCallback,Y0=Re(),Q0=require("path"),X0=vt(),ew=Da(),J0=BM(function(t,r){r=r||function(){},Y0.readdir(t,(n,o)=>{if(n)return X0.mkdirs(t,r);o=o.map(a=>Q0.join(t,a)),i();function i(){let a=o.pop();if(!a)return r();ew.remove(a,s=>{if(s)return r(s);i()})}})});function Z0(e){let t;try{t=Y0.readdirSync(e)}catch{return X0.mkdirsSync(e)}t.forEach(r=>{r=Q0.join(e,r),ew.removeSync(r)})}tw.exports={emptyDirSync:Z0,emptydirSync:Z0,emptyDir:J0,emptydir:J0}});var aw=b((gQ,iw)=>{"use strict";var jM=ut().fromCallback,nw=require("path"),Fa=Re(),ow=vt(),zM=or().pathExists;function WM(e,t){function r(){Fa.writeFile(e,"",n=>{if(n)return t(n);t()})}Fa.stat(e,(n,o)=>{if(!n&&o.isFile())return t();let i=nw.dirname(e);zM(i,(a,s)=>{if(a)return t(a);if(s)return r();ow.mkdirs(i,u=>{if(u)return t(u);r()})})})}function UM(e){let t;try{t=Fa.statSync(e)}catch{}if(t&&t.isFile())return;let r=nw.dirname(e);Fa.existsSync(r)||ow.mkdirsSync(r),Fa.writeFileSync(e,"")}iw.exports={createFile:jM(WM),createFileSync:UM}});var fw=b((yQ,lw)=>{"use strict";var HM=ut().fromCallback,uw=require("path"),Mn=Re(),cw=vt(),sw=or().pathExists;function VM(e,t,r){function n(o,i){Mn.link(o,i,a=>{if(a)return r(a);r(null)})}sw(t,(o,i)=>{if(o)return r(o);if(i)return r(null);Mn.lstat(e,a=>{if(a)return a.message=a.message.replace("lstat","ensureLink"),r(a);let s=uw.dirname(t);sw(s,(u,l)=>{if(u)return r(u);if(l)return n(e,t);cw.mkdirs(s,c=>{if(c)return r(c);n(e,t)})})})})}function GM(e,t){if(Mn.existsSync(t))return;try{Mn.lstatSync(e)}catch(i){throw i.message=i.message.replace("lstat","ensureLink"),i}let n=uw.dirname(t);return Mn.existsSync(n)||cw.mkdirsSync(n),Mn.linkSync(e,t)}lw.exports={createLink:HM(VM),createLinkSync:GM}});var dw=b((bQ,pw)=>{"use strict";var rn=require("path"),Na=Re(),KM=or().pathExists;function JM(e,t,r){if(rn.isAbsolute(e))return Na.lstat(e,n=>n?(n.message=n.message.replace("lstat","ensureSymlink"),r(n)):r(null,{toCwd:e,toDst:e}));{let n=rn.dirname(t),o=rn.join(n,e);return KM(o,(i,a)=>i?r(i):a?r(null,{toCwd:o,toDst:e}):Na.lstat(e,s=>s?(s.message=s.message.replace("lstat","ensureSymlink"),r(s)):r(null,{toCwd:e,toDst:rn.relative(n,e)})))}}function ZM(e,t){let r;if(rn.isAbsolute(e)){if(r=Na.existsSync(e),!r)throw new Error("absolute srcpath does not exist");return{toCwd:e,toDst:e}}else{let n=rn.dirname(t),o=rn.join(n,e);if(r=Na.existsSync(o),r)return{toCwd:o,toDst:e};if(r=Na.existsSync(e),!r)throw new Error("relative srcpath does not exist");return{toCwd:e,toDst:rn.relative(n,e)}}}pw.exports={symlinkPaths:JM,symlinkPathsSync:ZM}});var gw=b((vQ,hw)=>{"use strict";var mw=Re();function YM(e,t,r){if(r=typeof t=="function"?t:r,t=typeof t=="function"?!1:t,t)return r(null,t);mw.lstat(e,(n,o)=>{if(n)return r(null,"file");t=o&&o.isDirectory()?"dir":"file",r(null,t)})}function QM(e,t){let r;if(t)return t;try{r=mw.lstatSync(e)}catch{return"file"}return r&&r.isDirectory()?"dir":"file"}hw.exports={symlinkType:YM,symlinkTypeSync:QM}});var Sw=b((wQ,Ew)=>{"use strict";var XM=ut().fromCallback,bw=require("path"),qo=Re(),vw=vt(),e$=vw.mkdirs,t$=vw.mkdirsSync,ww=dw(),r$=ww.symlinkPaths,n$=ww.symlinkPathsSync,xw=gw(),o$=xw.symlinkType,i$=xw.symlinkTypeSync,yw=or().pathExists;function a$(e,t,r,n){n=typeof r=="function"?r:n,r=typeof r=="function"?!1:r,yw(t,(o,i)=>{if(o)return n(o);if(i)return n(null);r$(e,t,(a,s)=>{if(a)return n(a);e=s.toDst,o$(s.toCwd,r,(u,l)=>{if(u)return n(u);let c=bw.dirname(t);yw(c,(f,p)=>{if(f)return n(f);if(p)return qo.symlink(e,t,l,n);e$(c,d=>{if(d)return n(d);qo.symlink(e,t,l,n)})})})})})}function s$(e,t,r){if(qo.existsSync(t))return;let o=n$(e,t);e=o.toDst,r=i$(o.toCwd,r);let i=bw.dirname(t);return qo.existsSync(i)||t$(i),qo.symlinkSync(e,t,r)}Ew.exports={createSymlink:XM(a$),createSymlinkSync:s$}});var Aw=b((xQ,kw)=>{"use strict";var Xu=aw(),ec=fw(),tc=Sw();kw.exports={createFile:Xu.createFile,createFileSync:Xu.createFileSync,ensureFile:Xu.createFile,ensureFileSync:Xu.createFileSync,createLink:ec.createLink,createLinkSync:ec.createLinkSync,ensureLink:ec.createLink,ensureLinkSync:ec.createLinkSync,createSymlink:tc.createSymlink,createSymlinkSync:tc.createSymlinkSync,ensureSymlink:tc.createSymlink,ensureSymlinkSync:tc.createSymlinkSync}});var Tw=b((EQ,Cw)=>{var Bo;try{Bo=Re()}catch{Bo=require("fs")}function u$(e,t,r){r==null&&(r=t,t={}),typeof t=="string"&&(t={encoding:t}),t=t||{};var n=t.fs||Bo,o=!0;"throws"in t&&(o=t.throws),n.readFile(e,t,function(i,a){if(i)return r(i);a=_w(a);var s;try{s=JSON.parse(a,t?t.reviver:null)}catch(u){return o?(u.message=e+": "+u.message,r(u)):r(null,null)}r(null,s)})}function c$(e,t){t=t||{},typeof t=="string"&&(t={encoding:t});var r=t.fs||Bo,n=!0;"throws"in t&&(n=t.throws);try{var o=r.readFileSync(e,t);return o=_w(o),JSON.parse(o,t.reviver)}catch(i){if(n)throw i.message=e+": "+i.message,i;return null}}function Iw(e,t){var r,n=`
`;typeof t=="object"&&t!==null&&(t.spaces&&(r=t.spaces),t.EOL&&(n=t.EOL));var o=JSON.stringify(e,t?t.replacer:null,r);return o.replace(/\n/g,n)+n}function l$(e,t,r,n){n==null&&(n=r,r={}),r=r||{};var o=r.fs||Bo,i="";try{i=Iw(t,r)}catch(a){n&&n(a,null);return}o.writeFile(e,i,r,n)}function f$(e,t,r){r=r||{};var n=r.fs||Bo,o=Iw(t,r);return n.writeFileSync(e,o,r)}function _w(e){return Buffer.isBuffer(e)&&(e=e.toString("utf8")),e=e.replace(/^\uFEFF/,""),e}var p$={readFile:u$,readFileSync:c$,writeFile:l$,writeFileSync:f$};Cw.exports=p$});var nc=b((SQ,Dw)=>{"use strict";var Ow=ut().fromCallback,rc=Tw();Dw.exports={readJson:Ow(rc.readFile),readJsonSync:rc.readFileSync,writeJson:Ow(rc.writeFile),writeJsonSync:rc.writeFileSync}});var Pw=b((kQ,Nw)=>{"use strict";var d$=require("path"),m$=vt(),h$=or().pathExists,Fw=nc();function g$(e,t,r,n){typeof r=="function"&&(n=r,r={});let o=d$.dirname(e);h$(o,(i,a)=>{if(i)return n(i);if(a)return Fw.writeJson(e,t,r,n);m$.mkdirs(o,s=>{if(s)return n(s);Fw.writeJson(e,t,r,n)})})}Nw.exports=g$});var Mw=b((AQ,Rw)=>{"use strict";var y$=Re(),b$=require("path"),v$=vt(),w$=nc();function x$(e,t,r){let n=b$.dirname(e);y$.existsSync(n)||v$.mkdirsSync(n),w$.writeJsonSync(e,t,r)}Rw.exports=x$});var Lw=b((IQ,$w)=>{"use strict";var E$=ut().fromCallback,nt=nc();nt.outputJson=E$(Pw());nt.outputJsonSync=Mw();nt.outputJSON=nt.outputJson;nt.outputJSONSync=nt.outputJsonSync;nt.writeJSON=nt.writeJson;nt.writeJSONSync=nt.writeJsonSync;nt.readJSON=nt.readJson;nt.readJSONSync=nt.readJsonSync;$w.exports=nt});var Uw=b((_Q,Ww)=>{"use strict";var jw=Re(),S$=require("path"),k$=Ad().copySync,zw=Da().removeSync,A$=vt().mkdirpSync,qw=Aa();function I$(e,t,r){r=r||{};let n=r.overwrite||r.clobber||!1,{srcStat:o}=qw.checkPathsSync(e,t,"move");return qw.checkParentPathsSync(e,o,t,"move"),A$(S$.dirname(t)),_$(e,t,n)}function _$(e,t,r){if(r)return zw(t),Bw(e,t,r);if(jw.existsSync(t))throw new Error("dest already exists.");return Bw(e,t,r)}function Bw(e,t,r){try{jw.renameSync(e,t)}catch(n){if(n.code!=="EXDEV")throw n;return C$(e,t,r)}}function C$(e,t,r){return k$(e,t,{overwrite:r,errorOnExist:!0}),zw(e)}Ww.exports=I$});var Vw=b((CQ,Hw)=>{"use strict";Hw.exports={moveSync:Uw()}});var Yw=b((TQ,Zw)=>{"use strict";var T$=Re(),O$=require("path"),D$=_d().copy,Jw=Da().remove,F$=vt().mkdirp,N$=or().pathExists,Gw=Aa();function P$(e,t,r,n){typeof r=="function"&&(n=r,r={});let o=r.overwrite||r.clobber||!1;Gw.checkPaths(e,t,"move",(i,a)=>{if(i)return n(i);let{srcStat:s}=a;Gw.checkParentPaths(e,s,t,"move",u=>{if(u)return n(u);F$(O$.dirname(t),l=>l?n(l):R$(e,t,o,n))})})}function R$(e,t,r,n){if(r)return Jw(t,o=>o?n(o):Kw(e,t,r,n));N$(t,(o,i)=>o?n(o):i?n(new Error("dest already exists.")):Kw(e,t,r,n))}function Kw(e,t,r,n){T$.rename(e,t,o=>o?o.code!=="EXDEV"?n(o):M$(e,t,r,n):n())}function M$(e,t,r,n){D$(e,t,{overwrite:r,errorOnExist:!0},i=>i?n(i):Jw(e,n))}Zw.exports=P$});var Xw=b((OQ,Qw)=>{"use strict";var $$=ut().fromCallback;Qw.exports={move:$$(Yw())}});var nx=b((DQ,rx)=>{"use strict";var L$=ut().fromCallback,Pa=Re(),ex=require("path"),tx=vt(),q$=or().pathExists;function B$(e,t,r,n){typeof r=="function"&&(n=r,r="utf8");let o=ex.dirname(e);q$(o,(i,a)=>{if(i)return n(i);if(a)return Pa.writeFile(e,t,r,n);tx.mkdirs(o,s=>{if(s)return n(s);Pa.writeFile(e,t,r,n)})})}function j$(e,...t){let r=ex.dirname(e);if(Pa.existsSync(r))return Pa.writeFileSync(e,...t);tx.mkdirsSync(r),Pa.writeFileSync(e,...t)}rx.exports={outputFile:L$(B$),outputFileSync:j$}});var Od=b((FQ,Td)=>{"use strict";Td.exports=Object.assign({},pd(),Ad(),_d(),rw(),Aw(),Lw(),vt(),Vw(),Xw(),nx(),or(),Da());var ox=require("fs");Object.getOwnPropertyDescriptor(ox,"promises")&&Object.defineProperty(Td.exports,"promises",{get(){return ox.promises}})});var ax=b((NQ,ix)=>{ix.exports=()=>new Date});var ux=b((PQ,sx)=>{var z$=We()("streamroller:fileNameFormatter"),W$=require("path"),U$=".gz",H$=".";sx.exports=({file:e,keepFileExt:t,needsIndex:r,alwaysIncludeDate:n,compress:o,fileNameSep:i})=>{let a=i||H$,s=W$.join(e.dir,e.name),u=d=>d+e.ext,l=(d,h,g)=>(r||!g)&&h?d+a+h:d,c=(d,h,g)=>(h>0||n)&&g?d+a+g:d,f=(d,h)=>h&&o?d+U$:d,p=t?[c,l,u,f]:[u,c,l,f];return({date:d,index:h})=>(z$(`_formatFileName: date=${d}, index=${h}`),p.reduce((g,y)=>y(g,h,d),s))}});var px=b((RQ,fx)=>{var $n=We()("streamroller:fileNameParser"),cx=".gz",lx=ju(),V$=".";fx.exports=({file:e,keepFileExt:t,pattern:r,fileNameSep:n})=>{let o=n||V$,i=(p,d)=>p.endsWith(cx)?($n("it is gzipped"),d.isCompressed=!0,p.slice(0,-1*cx.length)):p,a="__NOT_MATCHING__",f=[i,t?p=>p.startsWith(e.name)&&p.endsWith(e.ext)?($n("it starts and ends with the right things"),p.slice(e.name.length+1,-1*e.ext.length)):a:p=>p.startsWith(e.base)?($n("it starts with the right things"),p.slice(e.base.length+1)):a,r?(p,d)=>{let h=p.split(o),g=h[h.length-1];$n("items: ",h,", indexStr: ",g);let y=p;g!==void 0&&g.match(/^\d+$/)?(y=p.slice(0,-1*(g.length+1)),$n(`dateStr is ${y}`),r&&!y&&(y=g,g="0")):g="0";try{let w=lx.parse(r,y,new Date(0,0));return lx.asString(r,w)!==y?p:(d.index=parseInt(g,10),d.date=y,d.timestamp=w.getTime(),"")}catch(w){return $n(`Problem parsing ${y} as ${r}, error was: `,w),p}}:(p,d)=>p.match(/^\d+$/)?($n("it has an index"),d.index=parseInt(p,10),""):p];return p=>{let d={filename:p,index:0,isCompressed:!1};return f.reduce((g,y)=>y(g,d),p)?null:d}}});var mx=b((MQ,dx)=>{var lt=We()("streamroller:moveAndMaybeCompressFile"),Nr=Od(),G$=require("zlib"),K$=function(e){let t={mode:parseInt("0600",8),compress:!1},r=Object.assign({},t,e);return lt(`_parseOption: moveAndMaybeCompressFile called with option=${JSON.stringify(r)}`),r},J$=async(e,t,r)=>{if(r=K$(r),e===t){lt("moveAndMaybeCompressFile: source and target are the same, not doing anything");return}if(await Nr.pathExists(e))if(lt(`moveAndMaybeCompressFile: moving file from ${e} to ${t} ${r.compress?"with":"without"} compress`),r.compress)await new Promise((n,o)=>{let i=!1,a=Nr.createWriteStream(t,{mode:r.mode,flags:"wx"}).on("open",()=>{i=!0;let s=Nr.createReadStream(e).on("open",()=>{s.pipe(G$.createGzip()).pipe(a)}).on("error",u=>{lt(`moveAndMaybeCompressFile: error reading ${e}`,u),a.destroy(u)})}).on("finish",()=>{lt(`moveAndMaybeCompressFile: finished compressing ${t}, deleting ${e}`),Nr.unlink(e).then(n).catch(s=>{lt(`moveAndMaybeCompressFile: error deleting ${e}, truncating instead`,s),Nr.truncate(e).then(n).catch(u=>{lt(`moveAndMaybeCompressFile: error truncating ${e}`,u),o(u)})})}).on("error",s=>{i?(lt(`moveAndMaybeCompressFile: error writing ${t}, deleting`,s),Nr.unlink(t).then(()=>{o(s)}).catch(u=>{lt(`moveAndMaybeCompressFile: error deleting ${t}`,u),o(u)})):(lt(`moveAndMaybeCompressFile: error creating ${t}`,s),o(s))})}).catch(()=>{});else{lt(`moveAndMaybeCompressFile: renaming ${e} to ${t}`);try{await Nr.move(e,t,{overwrite:!0})}catch(n){if(lt(`moveAndMaybeCompressFile: error renaming ${e} to ${t}`,n),n.code!=="ENOENT"){lt("moveAndMaybeCompressFile: trying copy+truncate instead");try{await Nr.copy(e,t,{overwrite:!0}),await Nr.truncate(e)}catch(o){lt("moveAndMaybeCompressFile: error copy+truncate",o)}}}}};dx.exports=J$});var ac=b(($Q,hx)=>{var wt=We()("streamroller:RollingFileWriteStream"),qn=Od(),Ln=require("path"),Z$=require("os"),oc=ax(),ic=ju(),{Writable:Y$}=require("stream"),Q$=ux(),X$=px(),eL=mx(),tL=e=>(wt(`deleteFiles: files to delete: ${e}`),Promise.all(e.map(t=>qn.unlink(t).catch(r=>{wt(`deleteFiles: error when unlinking ${t}, ignoring. Error was ${r}`)})))),Dd=class extends Y${constructor(t,r){if(wt(`constructor: creating RollingFileWriteStream. path=${t}`),typeof t!="string"||t.length===0)throw new Error(`Invalid filename: ${t}`);if(t.endsWith(Ln.sep))throw new Error(`Filename is a directory: ${t}`);t.indexOf(`~${Ln.sep}`)===0&&(t=t.replace("~",Z$.homedir())),super(r),this.options=this._parseOption(r),this.fileObject=Ln.parse(t),this.fileObject.dir===""&&(this.fileObject=Ln.parse(Ln.join(process.cwd(),t))),this.fileFormatter=Q$({file:this.fileObject,alwaysIncludeDate:this.options.alwaysIncludePattern,needsIndex:this.options.maxSize<Number.MAX_SAFE_INTEGER,compress:this.options.compress,keepFileExt:this.options.keepFileExt,fileNameSep:this.options.fileNameSep}),this.fileNameParser=X$({file:this.fileObject,keepFileExt:this.options.keepFileExt,pattern:this.options.pattern,fileNameSep:this.options.fileNameSep}),this.state={currentSize:0},this.options.pattern&&(this.state.currentDate=ic(this.options.pattern,oc())),this.filename=this.fileFormatter({index:0,date:this.state.currentDate}),["a","a+","as","as+"].includes(this.options.flags)&&this._setExistingSizeAndDate(),wt(`constructor: create new file ${this.filename}, state=${JSON.stringify(this.state)}`),this._renewWriteStream()}_setExistingSizeAndDate(){try{let t=qn.statSync(this.filename);this.state.currentSize=t.size,this.options.pattern&&(this.state.currentDate=ic(this.options.pattern,t.mtime))}catch{return}}_parseOption(t){let r={maxSize:0,numToKeep:Number.MAX_SAFE_INTEGER,encoding:"utf8",mode:parseInt("0600",8),flags:"a",compress:!1,keepFileExt:!1,alwaysIncludePattern:!1},n=Object.assign({},r,t);if(!n.maxSize)delete n.maxSize;else if(n.maxSize<=0)throw new Error(`options.maxSize (${n.maxSize}) should be > 0`);if(n.numBackups||n.numBackups===0){if(n.numBackups<0)throw new Error(`options.numBackups (${n.numBackups}) should be >= 0`);if(n.numBackups>=Number.MAX_SAFE_INTEGER)throw new Error(`options.numBackups (${n.numBackups}) should be < Number.MAX_SAFE_INTEGER`);n.numToKeep=n.numBackups+1}else if(n.numToKeep<=0)throw new Error(`options.numToKeep (${n.numToKeep}) should be > 0`);return wt(`_parseOption: creating stream with option=${JSON.stringify(n)}`),n}_final(t){this.currentFileStream.end("",this.options.encoding,t)}_write(t,r,n){this._shouldRoll().then(()=>{wt(`_write: writing chunk. file=${this.currentFileStream.path} state=${JSON.stringify(this.state)} chunk=${t}`),this.currentFileStream.write(t,r,o=>{this.state.currentSize+=t.length,n(o)})})}async _shouldRoll(){(this._dateChanged()||this._tooBig())&&(wt(`_shouldRoll: rolling because dateChanged? ${this._dateChanged()} or tooBig? ${this._tooBig()}`),await this._roll())}_dateChanged(){return this.state.currentDate&&this.state.currentDate!==ic(this.options.pattern,oc())}_tooBig(){return this.state.currentSize>=this.options.maxSize}_roll(){return wt("_roll: closing the current stream"),new Promise((t,r)=>{this.currentFileStream.end("",this.options.encoding,()=>{this._moveOldFiles().then(t).catch(r)})})}async _moveOldFiles(){let t=await this._getExistingFiles(),r=this.state.currentDate?t.filter(n=>n.date===this.state.currentDate):t;for(let n=r.length;n>=0;n--){wt(`_moveOldFiles: i = ${n}`);let o=this.fileFormatter({date:this.state.currentDate,index:n}),i=this.fileFormatter({date:this.state.currentDate,index:n+1}),a={compress:this.options.compress&&n===0,mode:this.options.mode};await eL(o,i,a)}this.state.currentSize=0,this.state.currentDate=this.state.currentDate?ic(this.options.pattern,oc()):null,wt(`_moveOldFiles: finished rolling files. state=${JSON.stringify(this.state)}`),this._renewWriteStream(),await new Promise((n,o)=>{this.currentFileStream.write("","utf8",()=>{this._clean().then(n).catch(o)})})}async _getExistingFiles(){let t=await qn.readdir(this.fileObject.dir).catch(()=>[]);wt(`_getExistingFiles: files=${t}`);let r=t.map(o=>this.fileNameParser(o)).filter(o=>o),n=o=>(o.timestamp?o.timestamp:oc().getTime())-o.index;return r.sort((o,i)=>n(o)-n(i)),r}_renewWriteStream(){let t=this.fileFormatter({date:this.state.currentDate,index:0}),r=i=>{try{return qn.mkdirSync(i,{recursive:!0})}catch(a){if(a.code==="ENOENT")return r(Ln.dirname(i)),r(i);if(a.code!=="EEXIST"&&a.code!=="EROFS")throw a;try{if(qn.statSync(i).isDirectory())return i;throw a}catch{throw a}}};r(this.fileObject.dir);let n={flags:this.options.flags,encoding:this.options.encoding,mode:this.options.mode},o=function(i,a,s){return i[s]=i[a],delete i[a],i};qn.appendFileSync(t,"",o({...n},"flags","flag")),this.currentFileStream=qn.createWriteStream(t,n),this.currentFileStream.on("error",i=>{this.emit("error",i)})}async _clean(){let t=await this._getExistingFiles();if(wt(`_clean: numToKeep = ${this.options.numToKeep}, existingFiles = ${t.length}`),wt("_clean: existing files are: ",t),this._tooManyFiles(t.length)){let r=t.slice(0,t.length-this.options.numToKeep).map(n=>Ln.format({dir:this.fileObject.dir,base:n.filename}));await tL(r)}}_tooManyFiles(t){return this.options.numToKeep>0&&t>this.options.numToKeep}};hx.exports=Dd});var yx=b((LQ,gx)=>{var rL=ac(),Fd=class extends rL{constructor(t,r,n,o){o||(o={}),r&&(o.maxSize=r),!o.numBackups&&o.numBackups!==0&&(!n&&n!==0&&(n=1),o.numBackups=n),super(t,o),this.backups=o.numBackups,this.size=this.options.maxSize}get theStream(){return this.currentFileStream}};gx.exports=Fd});var vx=b((qQ,bx)=>{var nL=ac(),Nd=class extends nL{constructor(t,r,n){r&&typeof r=="object"&&(n=r,r=null),n||(n={}),r||(r="yyyy-MM-dd"),n.pattern=r,!n.numBackups&&n.numBackups!==0?(!n.daysToKeep&&n.daysToKeep!==0?n.daysToKeep=1:process.emitWarning("options.daysToKeep is deprecated due to the confusion it causes when used together with file size rolling. Please use options.numBackups instead.","DeprecationWarning","streamroller-DEP0001"),n.numBackups=n.daysToKeep):n.daysToKeep=n.numBackups,super(t,n),this.mode=this.options.mode}get theStream(){return this.currentFileStream}};bx.exports=Nd});var Pd=b((BQ,wx)=>{wx.exports={RollingFileWriteStream:ac(),RollingFileStream:yx(),DateRollingFileStream:vx()}});var Ax=b((jQ,kx)=>{var xx=We()("log4js:file"),Rd=require("path"),oL=Pd(),Sx=require("os"),iL=Sx.EOL,sc=!1,uc=new Set;function Ex(){uc.forEach(e=>{e.sighupHandler()})}function aL(e,t,r,n,o,i){if(typeof e!="string"||e.length===0)throw new Error(`Invalid filename: ${e}`);if(e.endsWith(Rd.sep))throw new Error(`Filename is a directory: ${e}`);e=e.replace(new RegExp(`^~(?=${Rd.sep}.+)`),Sx.homedir()),e=Rd.normalize(e),n=!n&&n!==0?5:n,xx("Creating file appender (",e,", ",r,", ",n,", ",o,", ",i,")");function a(l,c,f,p){let d=new oL.RollingFileStream(l,c,f,p);return d.on("error",h=>{console.error("log4js.fileAppender - Writing to file %s, error happened ",l,h)}),d.on("drain",()=>{process.emit("log4js:pause",!1)}),d}let s=a(e,r,n,o),u=function(l){if(s.writable){if(o.removeColor===!0){let c=/\x1b[[0-9;]*m/g;l.data=l.data.map(f=>typeof f=="string"?f.replace(c,""):f)}s.write(t(l,i)+iL,"utf8")||process.emit("log4js:pause",!0)}};return u.reopen=function(){s.end(()=>{s=a(e,r,n,o)})},u.sighupHandler=function(){xx("SIGHUP handler called."),u.reopen()},u.shutdown=function(l){uc.delete(u),uc.size===0&&sc&&(process.removeListener("SIGHUP",Ex),sc=!1),s.end("","utf-8",l)},uc.add(u),sc||(process.on("SIGHUP",Ex),sc=!0),u}function sL(e,t){let r=t.basicLayout;return e.layout&&(r=t.layout(e.layout.type,e.layout)),e.mode=e.mode||384,aL(e.filename,r,e.maxLogSize,e.backups,e,e.timezoneOffset)}kx.exports.configure=sL});var _x=b((zQ,Ix)=>{var uL=Pd(),cL=require("os"),lL=cL.EOL;function fL(e,t,r){let n=new uL.DateRollingFileStream(e,t,r);return n.on("error",o=>{console.error("log4js.dateFileAppender - Writing to file %s, error happened ",e,o)}),n.on("drain",()=>{process.emit("log4js:pause",!1)}),n}function pL(e,t,r,n,o){n.maxSize=n.maxLogSize;let i=fL(e,t,n),a=function(s){i.writable&&(i.write(r(s,o)+lL,"utf8")||process.emit("log4js:pause",!0))};return a.shutdown=function(s){i.end("","utf-8",s)},a}function dL(e,t){let r=t.basicLayout;return e.layout&&(r=t.layout(e.layout.type,e.layout)),e.alwaysIncludePattern||(e.alwaysIncludePattern=!1),e.mode=e.mode||384,pL(e.filename,e.pattern,r,e,e.timezoneOffset)}Ix.exports.configure=dL});var Dx=b((WQ,Ox)=>{var Pr=We()("log4js:fileSync"),ar=require("path"),ir=require("fs"),Cx=require("os"),mL=Cx.EOL;function Tx(e,t){let r=n=>{try{return ir.mkdirSync(n,{recursive:!0})}catch(o){if(o.code==="ENOENT")return r(ar.dirname(n)),r(n);if(o.code!=="EEXIST"&&o.code!=="EROFS")throw o;try{if(ir.statSync(n).isDirectory())return n;throw o}catch{throw o}}};r(ar.dirname(e)),ir.appendFileSync(e,"",{mode:t.mode,flag:t.flags})}var Md=class{constructor(t,r,n,o){if(Pr("In RollingFileStream"),r<0)throw new Error(`maxLogSize (${r}) should be > 0`);this.filename=t,this.size=r,this.backups=n,this.options=o,this.currentSize=0;function i(a){let s=0;try{s=ir.statSync(a).size}catch{Tx(a,o)}return s}this.currentSize=i(this.filename)}shouldRoll(){return Pr("should roll with current size %d, and max size %d",this.currentSize,this.size),this.currentSize>=this.size}roll(t){let r=this,n=new RegExp(`^${ar.basename(t)}`);function o(l){return n.test(l)}function i(l){return parseInt(l.slice(`${ar.basename(t)}.`.length),10)||0}function a(l,c){return i(l)-i(c)}function s(l){let c=i(l);if(Pr(`Index of ${l} is ${c}`),r.backups===0)ir.truncateSync(t,0);else if(c<r.backups){try{ir.unlinkSync(`${t}.${c+1}`)}catch{}Pr(`Renaming ${l} -> ${t}.${c+1}`),ir.renameSync(ar.join(ar.dirname(t),l),`${t}.${c+1}`)}}function u(){Pr("Renaming the old files"),ir.readdirSync(ar.dirname(t)).filter(o).sort(a).reverse().forEach(s)}Pr("Rolling, rolling, rolling"),u()}write(t,r){let n=this;function o(){Pr("writing the chunk to the file"),n.currentSize+=t.length,ir.appendFileSync(n.filename,t)}Pr("in write"),this.shouldRoll()&&(this.currentSize=0,this.roll(this.filename)),o()}};function hL(e,t,r,n,o,i){if(typeof e!="string"||e.length===0)throw new Error(`Invalid filename: ${e}`);if(e.endsWith(ar.sep))throw new Error(`Filename is a directory: ${e}`);e=e.replace(new RegExp(`^~(?=${ar.sep}.+)`),Cx.homedir()),e=ar.normalize(e),n=!n&&n!==0?5:n,Pr("Creating fileSync appender (",e,", ",r,", ",n,", ",o,", ",i,")");function a(u,l,c){let f;return l?f=new Md(u,l,c,o):f=(p=>(Tx(p,o),{write(d){ir.appendFileSync(p,d)}}))(u),f}let s=a(e,r,n);return u=>{s.write(t(u,i)+mL)}}function gL(e,t){let r=t.basicLayout;e.layout&&(r=t.layout(e.layout.type,e.layout));let n={flags:e.flags||"a",encoding:e.encoding||"utf8",mode:e.mode||384};return hL(e.filename,r,e.maxLogSize,e.backups,n,e.timezoneOffset)}Ox.exports.configure=gL});var Nx=b((UQ,Fx)=>{var sr=We()("log4js:tcp"),yL=require("net");function bL(e,t){let r=!1,n=[],o,i=3,a="__LOG4JS__";function s(f){sr("Writing log event to socket"),r=o.write(`${t(f)}${a}`,"utf8")}function u(){let f;for(sr("emptying buffer");f=n.shift();)s(f)}function l(){sr(`appender creating socket to ${e.host||"localhost"}:${e.port||5e3}`),a=`${e.endMsg||"__LOG4JS__"}`,o=yL.createConnection(e.port||5e3,e.host||"localhost"),o.on("connect",()=>{sr("socket connected"),u(),r=!0}),o.on("drain",()=>{sr("drain event received, emptying buffer"),r=!0,u()}),o.on("timeout",o.end.bind(o)),o.on("error",f=>{sr("connection error",f),r=!1,u()}),o.on("close",l)}l();function c(f){r?s(f):(sr("buffering log event because it cannot write at the moment"),n.push(f))}return c.shutdown=function(f){sr("shutdown called"),n.length&&i?(sr("buffer has items, waiting 100ms to empty"),i-=1,setTimeout(()=>{c.shutdown(f)},100)):(o.removeAllListeners("close"),o.end(f))},c}function vL(e,t){sr(`configure with config = ${e}`);let r=function(n){return n.serialise()};return e.layout&&(r=t.layout(e.layout.type,e.layout)),bL(e,r)}Fx.exports.configure=vL});var qd=b((HQ,Ld)=>{var $d=require("path"),nn=We()("log4js:appenders"),Wt=Dn(),Px=Hu(),wL=Nn(),xL=rd(),EL=Dv(),Yt=new Map;Yt.set("console",Nv());Yt.set("stdout",Rv());Yt.set("stderr",$v());Yt.set("logLevelFilter",qv());Yt.set("categoryFilter",zv());Yt.set("noLogFilter",Hv());Yt.set("file",Ax());Yt.set("dateFile",_x());Yt.set("fileSync",Dx());Yt.set("tcp",Nx());var Ra=new Map,cc=(e,t)=>{let r;try{let n=`${e}.cjs`;r=require.resolve(n),nn("Loading module from ",n)}catch{r=e,nn("Loading module from ",e)}try{return require(r)}catch(n){Wt.throwExceptionIf(t,n.code!=="MODULE_NOT_FOUND",`appender "${e}" could not be loaded (error was: ${n})`);return}},SL=(e,t)=>Yt.get(e)||cc(`./${e}`,t)||cc(e,t)||require.main&&require.main.filename&&cc($d.join($d.dirname(require.main.filename),e),t)||cc($d.join(process.cwd(),e),t),lc=new Set,Rx=(e,t)=>{if(Ra.has(e))return Ra.get(e);if(!t.appenders[e])return!1;if(lc.has(e))throw new Error(`Dependency loop detected for appender ${e}.`);lc.add(e),nn(`Creating appender ${e}`);let r=kL(e,t);return lc.delete(e),Ra.set(e,r),r},kL=(e,t)=>{let r=t.appenders[e],n=r.type.configure?r.type:SL(r.type,t);return Wt.throwExceptionIf(t,Wt.not(n),`appender "${e}" is not valid (type "${r.type}" could not be found)`),n.appender&&(process.emitWarning(`Appender ${r.type} exports an appender function.`,"DeprecationWarning","log4js-node-DEP0001"),nn("[log4js-node-DEP0001]",`DEPRECATION: Appender ${r.type} exports an appender function.`)),n.shutdown&&(process.emitWarning(`Appender ${r.type} exports a shutdown function.`,"DeprecationWarning","log4js-node-DEP0002"),nn("[log4js-node-DEP0002]",`DEPRECATION: Appender ${r.type} exports a shutdown function.`)),nn(`${e}: clustering.isMaster ? ${Px.isMaster()}`),nn(`${e}: appenderModule is ${require("util").inspect(n)}`),Px.onlyOnMaster(()=>(nn(`calling appenderModule.configure for ${e} / ${r.type}`),n.configure(EL.modifyConfig(r),xL,o=>Rx(o,t),wL)),()=>{})},Mx=e=>{if(Ra.clear(),lc.clear(),!e)return;let t=[];Object.values(e.categories).forEach(r=>{t.push(...r.appenders)}),Object.keys(e.appenders).forEach(r=>{(t.includes(r)||e.appenders[r].type==="tcp-server"||e.appenders[r].type==="multiprocess")&&Rx(r,e)})},$x=()=>{Mx()};$x();Wt.addListener(e=>{Wt.throwExceptionIf(e,Wt.not(Wt.anObject(e.appenders)),'must have a property "appenders" of type object.');let t=Object.keys(e.appenders);Wt.throwExceptionIf(e,Wt.not(t.length),"must define at least one appender."),t.forEach(r=>{Wt.throwExceptionIf(e,Wt.not(e.appenders[r].type),`appender "${r}" is not valid (must be an object with property "type")`)})});Wt.addListener(Mx);Ld.exports=Ra;Ld.exports.init=$x});var zd=b((VQ,fc)=>{var Ma=We()("log4js:categories"),_e=Dn(),Bd=Nn(),Lx=qd(),on=new Map;function qx(e,t,r){if(t.inherit===!1)return;let n=r.lastIndexOf(".");if(n<0)return;let o=r.slice(0,n),i=e.categories[o];i||(i={inherit:!0,appenders:[]}),qx(e,i,o),!e.categories[o]&&i.appenders&&i.appenders.length&&i.level&&(e.categories[o]=i),t.appenders=t.appenders||[],t.level=t.level||i.level,i.appenders.forEach(a=>{t.appenders.includes(a)||t.appenders.push(a)}),t.parent=i}function AL(e){if(!e.categories)return;Object.keys(e.categories).forEach(r=>{let n=e.categories[r];qx(e,n,r)})}_e.addPreProcessingListener(e=>AL(e));_e.addListener(e=>{_e.throwExceptionIf(e,_e.not(_e.anObject(e.categories)),'must have a property "categories" of type object.');let t=Object.keys(e.categories);_e.throwExceptionIf(e,_e.not(t.length),"must define at least one category."),t.forEach(r=>{let n=e.categories[r];_e.throwExceptionIf(e,[_e.not(n.appenders),_e.not(n.level)],`category "${r}" is not valid (must be an object with properties "appenders" and "level")`),_e.throwExceptionIf(e,_e.not(Array.isArray(n.appenders)),`category "${r}" is not valid (appenders must be an array of appender names)`),_e.throwExceptionIf(e,_e.not(n.appenders.length),`category "${r}" is not valid (appenders must contain at least one appender name)`),Object.prototype.hasOwnProperty.call(n,"enableCallStack")&&_e.throwExceptionIf(e,typeof n.enableCallStack!="boolean",`category "${r}" is not valid (enableCallStack must be boolean type)`),n.appenders.forEach(o=>{_e.throwExceptionIf(e,_e.not(Lx.get(o)),`category "${r}" is not valid (appender "${o}" is not defined)`)}),_e.throwExceptionIf(e,_e.not(Bd.getLevel(n.level)),`category "${r}" is not valid (level "${n.level}" not recognised; valid levels are ${Bd.levels.join(", ")})`)}),_e.throwExceptionIf(e,_e.not(e.categories.default),'must define a "default" category.')});var jd=e=>{if(on.clear(),!e)return;Object.keys(e.categories).forEach(r=>{let n=e.categories[r],o=[];n.appenders.forEach(i=>{o.push(Lx.get(i)),Ma(`Creating category ${r}`),on.set(r,{appenders:o,level:Bd.getLevel(n.level),enableCallStack:n.enableCallStack||!1})})})},Bx=()=>{jd()};Bx();_e.addListener(jd);var jo=e=>{if(Ma(`configForCategory: searching for config for ${e}`),on.has(e))return Ma(`configForCategory: ${e} exists in config, returning it`),on.get(e);let t;return e.indexOf(".")>0?(Ma(`configForCategory: ${e} has hierarchy, cloning from parents`),t={...jo(e.slice(0,e.lastIndexOf(".")))}):(on.has("default")||jd({categories:{default:{appenders:["out"],level:"OFF"}}}),Ma("configForCategory: cloning default category"),t={...on.get("default")}),on.set(e,t),t},IL=e=>jo(e).appenders,_L=e=>jo(e).level,CL=(e,t)=>{jo(e).level=t},TL=e=>jo(e).enableCallStack===!0,OL=(e,t)=>{jo(e).enableCallStack=t};fc.exports=on;fc.exports=Object.assign(fc.exports,{appendersForCategory:IL,getLevelForCategory:_L,setLevelForCategory:CL,getEnableCallStackForCategory:TL,setEnableCallStackForCategory:OL,init:Bx})});var Hx=b((GQ,Ux)=>{var jx=We()("log4js:logger"),DL=nd(),ur=Nn(),FL=Hu(),pc=zd(),zx=Dn(),NL=/at (?:(.+)\s+\()?(?:(.+?):(\d+)(?::(\d+))?|([^)]+))\)?/;function PL(e,t=4){try{let r=e.stack.split(`
`).slice(t),n=NL.exec(r[0]);if(n&&n.length===6)return{functionName:n[1],fileName:n[2],lineNumber:parseInt(n[3],10),columnNumber:parseInt(n[4],10),callStack:r.join(`
`)};console.error("log4js.logger - defaultParseCallStack error")}catch(r){console.error("log4js.logger - defaultParseCallStack error",r)}return null}var $a=class{constructor(t){if(!t)throw new Error("No category provided.");this.category=t,this.context={},this.parseCallStack=PL,jx(`Logger created (${this.category}, ${this.level})`)}get level(){return ur.getLevel(pc.getLevelForCategory(this.category),ur.OFF)}set level(t){pc.setLevelForCategory(this.category,ur.getLevel(t,this.level))}get useCallStack(){return pc.getEnableCallStackForCategory(this.category)}set useCallStack(t){pc.setEnableCallStackForCategory(this.category,t===!0)}log(t,...r){let n=ur.getLevel(t);n?this.isLevelEnabled(n)&&this._log(n,r):zx.validIdentifier(t)&&r.length>0?(this.log(ur.WARN,"log4js:logger.log: valid log-level not found as first parameter given:",t),this.log(ur.INFO,`[${t}]`,...r)):this.log(ur.INFO,t,...r)}isLevelEnabled(t){return this.level.isLessThanOrEqualTo(t)}_log(t,r){jx(`sending log data (${t}) to appenders`);let n=new DL(this.category,t,r,this.context,this.useCallStack&&this.parseCallStack(new Error));FL.send(n)}addContext(t,r){this.context[t]=r}removeContext(t){delete this.context[t]}clearContext(){this.context={}}setParseCallStackFunction(t){this.parseCallStack=t}};function Wx(e){let t=ur.getLevel(e),n=t.toString().toLowerCase().replace(/_([a-z])/g,i=>i[1].toUpperCase()),o=n[0].toUpperCase()+n.slice(1);$a.prototype[`is${o}Enabled`]=function(){return this.isLevelEnabled(t)},$a.prototype[n]=function(...i){this.log(t,...i)}}ur.levels.forEach(Wx);zx.addListener(()=>{ur.levels.forEach(Wx)});Ux.exports=$a});var Kx=b((KQ,Gx)=>{var zo=Nn(),RL=':remote-addr - - ":method :url HTTP/:http-version" :status :content-length ":referrer" ":user-agent"';function ML(e){return e.originalUrl||e.url}function $L(e,t,r){let n=i=>{let a=i.concat();for(let s=0;s<a.length;++s)for(let u=s+1;u<a.length;++u)a[s].token==a[u].token&&a.splice(u--,1);return a},o=[];return o.push({token:":url",replacement:ML(e)}),o.push({token:":protocol",replacement:e.protocol}),o.push({token:":hostname",replacement:e.hostname}),o.push({token:":method",replacement:e.method}),o.push({token:":status",replacement:t.__statusCode||t.statusCode}),o.push({token:":response-time",replacement:t.responseTime}),o.push({token:":date",replacement:new Date().toUTCString()}),o.push({token:":referrer",replacement:e.headers.referer||e.headers.referrer||""}),o.push({token:":http-version",replacement:`${e.httpVersionMajor}.${e.httpVersionMinor}`}),o.push({token:":remote-addr",replacement:e.headers["x-forwarded-for"]||e.ip||e._remoteAddress||e.socket&&(e.socket.remoteAddress||e.socket.socket&&e.socket.socket.remoteAddress)}),o.push({token:":user-agent",replacement:e.headers["user-agent"]}),o.push({token:":content-length",replacement:t.getHeader("content-length")||t.__headers&&t.__headers["Content-Length"]||"-"}),o.push({token:/:req\[([^\]]+)]/g,replacement(i,a){return e.headers[a.toLowerCase()]}}),o.push({token:/:res\[([^\]]+)]/g,replacement(i,a){return t.getHeader(a.toLowerCase())||t.__headers&&t.__headers[a]}}),n(r.concat(o))}function Vx(e,t){for(let r=0;r<t.length;r++)e=e.replace(t[r].token,t[r].replacement);return e}function LL(e){let t=null;if(e instanceof RegExp&&(t=e),typeof e=="string"&&(t=new RegExp(e)),Array.isArray(e)){let r=e.map(n=>n.source?n.source:n);t=new RegExp(r.join("|"))}return t}function qL(e,t,r){let n=t;if(r){let o=r.find(i=>{let a=!1;return i.from&&i.to?a=e>=i.from&&e<=i.to:a=i.codes.indexOf(e)!==-1,a});o&&(n=zo.getLevel(o.level,n))}return n}Gx.exports=function(t,r){typeof r=="string"||typeof r=="function"?r={format:r}:r=r||{};let n=t,o=zo.getLevel(r.level,zo.INFO),i=r.format||RL;return(a,s,u)=>{if(a._logging!==void 0)return u();if(typeof r.nolog!="function"){let l=LL(r.nolog);if(l&&l.test(a.originalUrl))return u()}if(n.isLevelEnabled(o)||r.level==="auto"){let l=new Date,{writeHead:c}=s;a._logging=!0,s.writeHead=(d,h)=>{s.writeHead=c,s.writeHead(d,h),s.__statusCode=d,s.__headers=h||{}};let f=!1,p=()=>{if(f)return;if(f=!0,typeof r.nolog=="function"&&r.nolog(a,s)===!0){a._logging=!1;return}s.responseTime=new Date-l,s.statusCode&&r.level==="auto"&&(o=zo.INFO,s.statusCode>=300&&(o=zo.WARN),s.statusCode>=400&&(o=zo.ERROR)),o=qL(s.statusCode,o,r.statusRules);let d=$L(a,s,r.tokens||[]);if(r.context&&n.addContext("res",s),typeof i=="function"){let h=i(a,s,g=>Vx(g,d));h&&n.log(o,h)}else n.log(o,Vx(i,d));r.context&&n.removeContext("res")};s.on("end",p),s.on("finish",p),s.on("error",p),s.on("close",p)}return u()}}});var Xx=b((JQ,Qx)=>{var Jx=We()("log4js:recording"),dc=[];function BL(){return function(e){Jx(`received logEvent, number of events now ${dc.length+1}`),Jx("log event was ",e),dc.push(e)}}function Zx(){return dc.slice()}function Yx(){dc.length=0}Qx.exports={configure:BL,replay:Zx,playback:Zx,reset:Yx,erase:Yx}});var a1=b((ZQ,i1)=>{var an=We()("log4js:main"),jL=require("fs"),zL=Vb()({proto:!0}),WL=Dn(),UL=rd(),HL=Nn(),e1=qd(),t1=zd(),VL=Hx(),GL=Hu(),KL=Kx(),JL=Xx(),La=!1;function ZL(e){if(!La)return;an("Received log event ",e),t1.appendersForCategory(e.categoryName).forEach(r=>{r(e)})}function YL(e){an(`Loading configuration from ${e}`);try{return JSON.parse(jL.readFileSync(e,"utf8"))}catch(t){throw new Error(`Problem reading config from file "${e}". Error was ${t.message}`,t)}}function r1(e){La&&n1();let t=e;return typeof t=="string"&&(t=YL(e)),an(`Configuration is ${t}`),WL.configure(zL(t)),GL.onMessage(ZL),La=!0,o1}function QL(){return JL}function n1(e){an("Shutdown called. Disabling all log writing."),La=!1;let t=Array.from(e1.values());e1.init(),t1.init();let r=t.reduceRight((a,s)=>s.shutdown?a+1:a,0);if(r===0)return an("No appenders with shutdown functions found."),e!==void 0&&e();let n=0,o;an(`Found ${r} appenders with shutdown functions.`);function i(a){o=o||a,n+=1,an(`Appender shutdowns complete: ${n} / ${r}`),n>=r&&(an("All shutdown functions completed."),e&&e(o))}return t.filter(a=>a.shutdown).forEach(a=>a.shutdown(i)),null}function XL(e){return La||r1(process.env.LOG4JS_CONFIG||{appenders:{out:{type:"stdout"}},categories:{default:{appenders:["out"],level:"OFF"}}}),new VL(e||"default")}var o1={getLogger:XL,configure:r1,shutdown:n1,connectLogger:KL,levels:HL,addLayout:UL.addLayout,recording:QL};i1.exports=o1});var Wd=b((exports,module)=>{(function(t,r){typeof exports=="object"&&typeof module=="object"?module.exports=r():typeof define=="function"&&define.amd?define("workerpool",[],r):typeof exports=="object"?exports.workerpool=r():t.workerpool=r()})(typeof self<"u"?self:exports,function(){return function(){var __webpack_modules__={162:function(e,t,r){"use strict";r.r(t),r.d(t,{IFrameWorker:function(){return o}});function n(){let i=document.createElement("iframe");return i.width=i.height=i.frameBorder="0",i.classList.add("iframe-worker"),i.style.display="contents",i}class o{constructor(a,s){if(this.scriptText=a,this.onerror=null,this.onmessage=null,this.onmessageerror=null,this.handleMessage=l=>{l.source===this.worker&&(l.stopImmediatePropagation(),this.dispatchEvent(new MessageEvent("message",{data:l.data})),this.onmessage&&this.onmessage(l))},this.handleError=(l,c,f,p,d)=>{if(c===this.scriptText.toString()){let h=new ErrorEvent("error",{message:l,filename:c,lineno:f,colno:p,error:d});this.dispatchEvent(h),this.onerror&&this.onerror(h)}},typeof s<"u")throw new TypeError("Options are not supported for iframe workers");let u=new EventTarget;this.addEventListener=u.addEventListener.bind(u),this.removeEventListener=u.removeEventListener.bind(u),this.dispatchEvent=u.dispatchEvent.bind(u),document.body.appendChild(this.iframe=n()),this.worker.document.open(),this.worker.document.write(`<html><body><script>window.postMessage=
(message, origin) => {
  parent.postMessage(message, origin || "*")
};window.importScripts=
(...urls) => urls.reduce((promise, url) => (
  promise.then(() => new Promise(resolve => {
    const script = document.createElement("script")
    script.src = url
    script.addEventListener("load", () => resolve())
    document.body.appendChild(script)
  }))
), Promise.resolve());addEventListener("error",ev=>{parent.dispatchEvent(new ErrorEvent("error",{filename:"${a.substring(0,50)}",error:ev.error}))})</script><script type="module">${a}</script></body></html>`),this.worker.document.close(),window.addEventListener("message",this.handleMessage),window.onerror=this.handleError,this.ready=new Promise((l,c)=>{this.worker.onload=l,this.worker.onerror=c})}terminate(){document.body.removeChild(this.iframe),window.removeEventListener("message",this.handleMessage),window.onerror=null}postMessage(a){(async()=>{try{await this.ready}catch{}finally{this.worker.dispatchEvent(new MessageEvent("message",{data:a}))}})()}get worker(){return this.iframe.contentWindow}}},799:function(e,t,r){var n=r(446),o=r(518),i=r(722),a=r(393),s=new a;function u(d,h){typeof d=="string"?this.script=d||null:(this.script=null,h=d),this.workers=[],this.tasks=[],h=h||{},this.name=h.name,this.forkArgs=Object.freeze(h.forkArgs||[]),this.forkOpts=Object.freeze(h.forkOpts||{}),this.debugPortStart=h.debugPortStart||43210,this.nodeWorker=h.nodeWorker,this.workerType=h.workerType||h.nodeWorker||"auto",this.maxQueueSize=h.maxQueueSize||1/0,this.onCreateWorker=h.onCreateWorker||function(){return null},this.onTerminateWorker=h.onTerminateWorker||function(){return null},h&&"maxWorkers"in h?(l(h.maxWorkers),this.maxWorkers=h.maxWorkers):this.maxWorkers=Math.max((i.cpus||4)-1,1),h&&"minWorkers"in h&&(h.minWorkers==="max"?this.minWorkers=this.maxWorkers:(c(h.minWorkers),this.minWorkers=h.minWorkers,this.maxWorkers=Math.max(this.minWorkers,this.maxWorkers)),this._ensureMinWorkers()),this._boundNext=this._next.bind(this),this.workerType==="thread"&&o.ensureWorkerThreads()}u.prototype.exec=function(d,h,g){if(h&&!Array.isArray(h))throw new TypeError('Array expected as argument "params"');if(typeof d=="string"){var y=n.defer();if(this.tasks.length>=this.maxQueueSize)throw new Error("Max queue size of "+this.maxQueueSize+" reached");var w=this.tasks,x={method:d,params:h,resolver:y,timeout:null,options:g};w.push(x);var S=y.promise.timeout;return y.promise.timeout=function(F){return w.indexOf(x)!==-1?(x.timeout=F,y.promise):S.call(y.promise,F)},this._next(),y.promise}else{if(typeof d=="function")return this.exec("run",[String(d),h]);throw new TypeError('Function or string expected as argument "method"')}},u.prototype.proxy=function(){if(arguments.length>0)throw new Error("No arguments expected");var d=this;return this.exec("methods").then(function(h){var g={};return h.forEach(function(y){g[y]=function(){return d.exec(y,Array.prototype.slice.call(arguments))}}),g})},u.prototype._next=function(){if(this.tasks.length>0){var d=this._getWorker();if(d){var h=this,g=this.tasks.shift();if(g.resolver.promise.pending){var y=d.exec(g.method,g.params,g.resolver,g.options).then(h._boundNext).catch(function(){if(d.terminated)return h._removeWorker(d)}).then(function(){h._next()});typeof g.timeout=="number"&&y.timeout(g.timeout)}else h._next()}}},u.prototype._getWorker=function(){for(var d=this.workers,h=0;h<d.length;h++){var g=d[h];if(g.busy()===!1)return g}return d.length<this.maxWorkers?(g=this._createWorkerHandler(),d.push(g),g):null},u.prototype._removeWorker=function(d){var h=this;return s.releasePort(d.debugPort),this._removeWorkerFromList(d),this._ensureMinWorkers(),new n(function(g,y){d.terminate(!1,function(w){h.onTerminateWorker({forkArgs:d.forkArgs,forkOpts:d.forkOpts,script:d.script}),w?y(w):g(d)})})},u.prototype._removeWorkerFromList=function(d){var h=this.workers.indexOf(d);h!==-1&&this.workers.splice(h,1)},u.prototype.terminate=function(d,h){var g=this;this.tasks.forEach(function(O){O.resolver.reject(new Error("Pool terminated"))}),this.tasks.length=0;var y=function(F){this._removeWorkerFromList(F)},w=y.bind(this),x=[],S=this.workers.slice();return S.forEach(function(O){var F=O.terminateAndNotify(d,h).then(w).always(function(){g.onTerminateWorker({forkArgs:O.forkArgs,forkOpts:O.forkOpts,script:O.script})});x.push(F)}),n.all(x)},u.prototype.stats=function(){var d=this.workers.length,h=this.workers.filter(function(g){return g.busy()}).length;return{totalWorkers:d,busyWorkers:h,idleWorkers:d-h,pendingTasks:this.tasks.length,activeTasks:h}},u.prototype._ensureMinWorkers=function(){if(this.minWorkers)for(var d=this.workers.length;d<this.minWorkers;d++)this.workers.push(this._createWorkerHandler())},u.prototype._createWorkerHandler=function(){var d=this.onCreateWorker({forkArgs:this.forkArgs,forkOpts:this.forkOpts,script:this.script})||{};return new o(d.script||this.script,{forkArgs:d.forkArgs||this.forkArgs,forkOpts:d.forkOpts||this.forkOpts,debugPort:s.nextAvailableStartingAt(this.debugPortStart),workerType:this.workerType,name:this.name})};function l(d){if(!f(d)||!p(d)||d<1)throw new TypeError("Option maxWorkers must be an integer number >= 1")}function c(d){if(!f(d)||!p(d)||d<0)throw new TypeError("Option minWorkers must be an integer number >= 0")}function f(d){return typeof d=="number"}function p(d){return Math.round(d)==d}e.exports=u},446:function(e){"use strict";function t(i,a){var s=this;if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");if(typeof i!="function")throw new SyntaxError("Function parameter handler(resolve, reject) missing");var u=[],l=[];this.resolved=!1,this.rejected=!1,this.pending=!0;var c=function(h,g){u.push(h),l.push(g)};this.then=function(d,h){return new t(function(g,y){var w=d?r(d,g,y):g,x=h?r(h,g,y):y;c(w,x)},s)};var f=function(h){return s.resolved=!0,s.rejected=!1,s.pending=!1,u.forEach(function(g){g(h)}),c=function(y,w){y(h)},f=p=function(){},s},p=function(h){return s.resolved=!1,s.rejected=!0,s.pending=!1,l.forEach(function(g){g(h)}),c=function(y,w){w(h)},f=p=function(){},s};this.cancel=function(){return a?a.cancel():p(new n),s},this.timeout=function(d){if(a)a.timeout(d);else{var h=setTimeout(function(){p(new o("Promise timed out after "+d+" ms"))},d);s.always(function(){clearTimeout(h)})}return s},i(function(d){f(d)},function(d){p(d)})}function r(i,a,s){return function(u){try{var l=i(u);l&&typeof l.then=="function"&&typeof l.catch=="function"?l.then(a,s):a(l)}catch(c){s(c)}}}t.prototype.catch=function(i){return this.then(null,i)},t.prototype.always=function(i){return this.then(i,i)},t.all=function(i){return new t(function(a,s){var u=i.length,l=[];u?i.forEach(function(c,f){c.then(function(p){l[f]=p,u--,u==0&&a(l)},function(p){u=0,s(p)})}):a(l)})},t.defer=function(){var i={};return i.promise=new t(function(a,s){i.resolve=a,i.reject=s}),i};function n(i){this.message=i||"promise cancelled",this.stack=new Error().stack}n.prototype=new Error,n.prototype.constructor=Error,n.prototype.name="CancellationError",t.CancellationError=n;function o(i){this.message=i||"timeout exceeded",this.stack=new Error().stack}o.prototype=new Error,o.prototype.constructor=Error,o.prototype.name="TimeoutError",t.TimeoutError=o,e.exports=t},518:function(e,t,r){"use strict";function n(E,T){var v=typeof Symbol<"u"&&E[Symbol.iterator]||E["@@iterator"];if(!v){if(Array.isArray(E)||(v=o(E))||T&&E&&typeof E.length=="number"){v&&(E=v);var A=0,I=function(){};return{s:I,n:function(){return A>=E.length?{done:!0}:{done:!1,value:E[A++]}},e:function(re){throw re},f:I}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var j=!0,z=!1,H;return{s:function(){v=v.call(E)},n:function(){var re=v.next();return j=re.done,re},e:function(re){z=!0,H=re},f:function(){try{!j&&v.return!=null&&v.return()}finally{if(z)throw H}}}}function o(E,T){if(E){if(typeof E=="string")return i(E,T);var v=Object.prototype.toString.call(E).slice(8,-1);if(v==="Object"&&E.constructor&&(v=E.constructor.name),v==="Map"||v==="Set")return Array.from(E);if(v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))return i(E,T)}}function i(E,T){(T==null||T>E.length)&&(T=E.length);for(var v=0,A=new Array(T);v<T;v++)A[v]=E[v];return A}function a(E){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},a(E)}var s=r(446),u=r(722),l=r(781),c=r(162),f=c.IFrameWorker,p="__workerpool-terminate__",d=1e3;function h(){var E=y();if(!E)throw new Error("WorkerPool: workerType = 'thread' is not supported, Node >= 11.7.0 required");return E}function g(){if(typeof Worker!="function"&&((typeof Worker>"u"?"undefined":a(Worker))!=="object"||typeof Worker.prototype.constructor!="function"))throw new Error("WorkerPool: Web Workers not supported")}function y(){try{return l("worker_threads")}catch(E){if(a(E)==="object"&&E!==null&&E.code==="MODULE_NOT_FOUND")return null;throw E}}function w(){if(u.platform==="browser"){if(typeof Blob>"u")throw new Error("Blob not supported by the browser");if(!window.URL||typeof window.URL.createObjectURL!="function")throw new Error("URL.createObjectURL not supported by the browser");var E=new Blob([r(710)],{type:"text/javascript"});return window.URL.createObjectURL(E)}else return __dirname+"/worker.js"}function x(E,T){if(T.workerType==="iframe")return S(E,f,T);if(T.workerType==="web")return g(),S(E,Worker,T);if(T.workerType==="thread")return v=h(),O(E,v);if(T.workerType==="process"||!T.workerType)return F(E,D(T),l("child_process"));if(u.platform==="browser")return g(),S(E,Worker);var v=y();return v?O(E,v):F(E,D(T),l("child_process"))}function S(E,T,v){var A=new T(E,v!=null&&v.name?{name:"".concat(v.name,"-").concat(Date.now())}:void 0);return A.isBrowserWorker=!0,A.on=function(I,j){this.addEventListener(I,function(z){j(z.data)})},A.send=function(I){this.postMessage(I)},A}function O(E,T){var v=new T.Worker(E,{stdout:!1,stderr:!1});return v.isWorkerThread=!0,v.send=function(A){this.postMessage(A)},v.kill=function(){return this.terminate(),!0},v.disconnect=function(){this.terminate()},v}function F(E,T,v){var A=v.fork(E,T.forkArgs,T.forkOpts);return A.isChildProcess=!0,A}function D(E){E=E||{};var T=process.execArgv.join(" "),v=T.indexOf("--inspect")!==-1,A=T.indexOf("--debug-brk")!==-1,I=[];return v&&(I.push("--inspect="+E.debugPort),A&&I.push("--debug-brk")),process.execArgv.forEach(function(j){j.indexOf("--max-old-space-size")>-1&&I.push(j)}),Object.assign({},E,{forkArgs:E.forkArgs,forkOpts:Object.assign({},E.forkOpts,{execArgv:(E.forkOpts&&E.forkOpts.execArgv||[]).concat(I)})})}function P(E){for(var T=new Error(""),v=Object.keys(E),A=0;A<v.length;A++)T[v[A]]=E[v[A]];return T}function R(E,T){var v=this,A=T||{};this.script=E||w(),this.worker=x(this.script,A),this.debugPort=A.debugPort,this.forkOpts=A.forkOpts,this.forkArgs=A.forkArgs,E||(this.worker.ready=!0),this.requestQueue=[],this.worker.on("message",function(H){if(!v.terminated)if(typeof H=="string"&&H==="ready")v.worker.ready=!0,j();else{var G=H.id,re=v.processing[G];re!==void 0&&(H.isEvent?re.options&&typeof re.options.on=="function"&&re.options.on(H.payload):(delete v.processing[G],v.terminating===!0&&v.terminate(),H.error?re.resolver.reject(P(H.error)):re.resolver.resolve(H.result)))}});function I(H){v.terminated=!0;for(var G in v.processing)v.processing[G]!==void 0&&v.processing[G].resolver.reject(H);v.processing=Object.create(null)}function j(){var H=n(v.requestQueue.splice(0)),G;try{for(H.s();!(G=H.n()).done;){var re=G.value;v.worker.send(re)}}catch(ie){H.e(ie)}finally{H.f()}}var z=this.worker;this.worker.on("error",I),this.worker.on("exit",function(H,G){var re=`Workerpool Worker terminated Unexpectedly
`;re+="    exitCode: `"+H+"`\n",re+="    signalCode: `"+G+"`\n",re+="    workerpool.script: `"+v.script+"`\n",re+="    spawnArgs: `"+z.spawnargs+"`\n",re+="    spawnfile: `"+z.spawnfile+"`\n",re+="    stdout: `"+z.stdout+"`\n",re+="    stderr: `"+z.stderr+"`\n",I(new Error(re))}),this.processing=Object.create(null),this.terminating=!1,this.terminated=!1,this.terminationHandler=null,this.lastId=0}R.prototype.methods=function(){return this.exec("methods")},R.prototype.exec=function(E,T,v,A){v||(v=s.defer());var I=++this.lastId;this.processing[I]={id:I,resolver:v,options:A};var j={id:I,method:E,params:T};this.terminated?v.reject(new Error("Worker is terminated")):this.worker.ready?this.worker.send(j):this.requestQueue.push(j);var z=this;return v.promise.catch(function(H){if(H instanceof s.CancellationError||H instanceof s.TimeoutError)return delete z.processing[I],z.terminateAndNotify(!0).then(function(){throw H},function(G){throw G});throw H})},R.prototype.busy=function(){return Object.keys(this.processing).length>0},R.prototype.terminate=function(E,T){var v=this;if(E){for(var A in this.processing)this.processing[A]!==void 0&&this.processing[A].resolver.reject(new Error("Worker terminated"));this.processing=Object.create(null)}if(typeof T=="function"&&(this.terminationHandler=T),this.busy())this.terminating=!0;else{var I=function(H){if(v.terminated=!0,v.worker!=null&&v.worker.removeAllListeners&&v.worker.removeAllListeners("message"),v.worker=null,v.terminating=!1,v.terminationHandler)v.terminationHandler(H,v);else if(H)throw H};if(this.worker)if(typeof this.worker.kill=="function"){if(this.worker.killed){I(new Error("worker already killed!"));return}if(this.worker.isChildProcess){var j=setTimeout(function(){v.worker&&v.worker.kill()},d);this.worker.once("exit",function(){clearTimeout(j),v.worker&&(v.worker.killed=!0),I()}),this.worker.ready?this.worker.send(p):this.requestQueue.push(p)}else this.worker.kill(),this.worker.killed=!0,I();return}else if(typeof this.worker.terminate=="function")this.worker.terminate(),this.worker.killed=!0;else throw new Error("Failed to terminate worker");I()}},R.prototype.terminateAndNotify=function(E,T){var v=s.defer();return T&&(v.promise.timeout=T),this.terminate(E,function(A,I){A?v.reject(A):v.resolve(I)}),v.promise},e.exports=R,e.exports._tryRequireWorkerThreads=y,e.exports._setupProcessWorker=F,e.exports._setupBrowserWorker=S,e.exports._setupWorkerThreadWorker=O,e.exports.ensureWorkerThreads=h},393:function(e){"use strict";var t=65535;e.exports=r;function r(){this.ports=Object.create(null),this.length=0}r.prototype.nextAvailableStartingAt=function(n){for(;this.ports[n]===!0;)n++;if(n>=t)throw new Error("WorkerPool debug port limit reached: "+n+">= "+t);return this.ports[n]=!0,this.length++,n},r.prototype.releasePort=function(n){delete this.ports[n],this.length--}},722:function(e,t,r){var n=r(781),o=function(u){return typeof u<"u"&&u.versions!=null&&u.versions.node!=null};e.exports.isNode=o,e.exports.platform=typeof process<"u"&&o(process)?"node":"browser";var i=a("worker_threads");e.exports.isMainThread=e.exports.platform==="node"?(!i||i.isMainThread)&&!process.connected:typeof Window<"u",e.exports.cpus=e.exports.platform==="browser"?self.navigator.hardwareConcurrency:n("os").cpus().length;function a(s){try{return n(s)}catch{return null}}},710:function(e){e.exports=`!function(){var __webpack_exports__={};!function(){var exports=__webpack_exports__,__webpack_unused_export__;function _typeof(r){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}var requireFoolWebpack=eval("typeof require !== 'undefined' ? require : function (module) { throw new Error('Module \\" + module + \\" not found.') }"),TERMINATE_METHOD_ID="__workerpool-terminate__",worker={exit:function(){}},WorkerThreads,parentPort;if("undefined"!=typeof self&&"function"==typeof postMessage&&"function"==typeof addEventListener)worker.on=function(r,e){addEventListener(r,function(r){e(r.data)})},worker.send=function(r){postMessage(r)};else{if("undefined"==typeof process)throw new Error("Script must be executed as a worker");try{WorkerThreads=requireFoolWebpack("worker_threads")}catch(error){if("object"!==_typeof(error)||null===error||"MODULE_NOT_FOUND"!==error.code)throw error}WorkerThreads&&null!==WorkerThreads.parentPort?(parentPort=WorkerThreads.parentPort,worker.send=parentPort.postMessage.bind(parentPort),worker.on=parentPort.on.bind(parentPort)):(worker.on=process.on.bind(process),worker.send=process.send.bind(process),worker.on("disconnect",function(){process.exit(1)}),worker.exit=process.exit.bind(process))}function convertError(o){return Object.getOwnPropertyNames(o).reduce(function(r,e){return Object.defineProperty(r,e,{value:o[e],enumerable:!0})},{})}function isPromise(r){return r&&"function"==typeof r.then&&"function"==typeof r.catch}worker.methods={},worker.methods.run=function(r,e){r=new Function("return ("+r+").apply(null, arguments);");return r.apply(r,e)},worker.methods.methods=function(){return Object.keys(worker.methods)};var currentRequestId=null;worker.on("message",function(e){if(e===TERMINATE_METHOD_ID)return worker.exit(0);try{var r=worker.methods[e.method];if(!r)throw new Error('Unknown method "'+e.method+'"');currentRequestId=e.id;var o=r.apply(r,e.params);isPromise(o)?o.then(function(r){worker.send({id:e.id,result:r,error:null}),currentRequestId=null}).catch(function(r){worker.send({id:e.id,result:null,error:convertError(r)}),currentRequestId=null}):(worker.send({id:e.id,result:o,error:null}),currentRequestId=null)}catch(r){worker.send({id:e.id,result:null,error:convertError(r)})}}),worker.register=function(r){if(r)for(var e in r)r.hasOwnProperty(e)&&(worker.methods[e]=r[e]);worker.send("ready")},worker.emit=function(r){currentRequestId&&worker.send({id:currentRequestId,isEvent:!0,payload:r})},__webpack_unused_export__=worker.register,worker.emit}()}();`},781:function(module){var requireFoolWebpack=eval(`typeof require !== 'undefined' ? require : function (module) { throw new Error('Module " + module + " not found.') }`);module.exports=requireFoolWebpack},52:function(__unused_webpack_module,exports){function _typeof(e){return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(e)}var requireFoolWebpack=eval(`typeof require !== 'undefined' ? require : function (module) { throw new Error('Module " + module + " not found.') }`),TERMINATE_METHOD_ID="__workerpool-terminate__",worker={exit:function e(){}};if(typeof self<"u"&&typeof postMessage=="function"&&typeof addEventListener=="function")worker.on=function(e,t){addEventListener(e,function(r){t(r.data)})},worker.send=function(e){postMessage(e)};else if(typeof process<"u"){var WorkerThreads;try{WorkerThreads=requireFoolWebpack("worker_threads")}catch(e){if(!(_typeof(e)==="object"&&e!==null&&e.code==="MODULE_NOT_FOUND"))throw e}if(WorkerThreads&&WorkerThreads.parentPort!==null){var parentPort=WorkerThreads.parentPort;worker.send=parentPort.postMessage.bind(parentPort),worker.on=parentPort.on.bind(parentPort)}else worker.on=process.on.bind(process),worker.send=process.send.bind(process),worker.on("disconnect",function(){process.exit(1)}),worker.exit=process.exit.bind(process)}else throw new Error("Script must be executed as a worker");function convertError(e){return Object.getOwnPropertyNames(e).reduce(function(t,r){return Object.defineProperty(t,r,{value:e[r],enumerable:!0})},{})}function isPromise(e){return e&&typeof e.then=="function"&&typeof e.catch=="function"}worker.methods={},worker.methods.run=function e(t,r){var n=new Function("return ("+t+").apply(null, arguments);");return n.apply(n,r)},worker.methods.methods=function e(){return Object.keys(worker.methods)};var currentRequestId=null;worker.on("message",function(e){if(e===TERMINATE_METHOD_ID)return worker.exit(0);try{var t=worker.methods[e.method];if(t){currentRequestId=e.id;var r=t.apply(t,e.params);isPromise(r)?r.then(function(n){worker.send({id:e.id,result:n,error:null}),currentRequestId=null}).catch(function(n){worker.send({id:e.id,result:null,error:convertError(n)}),currentRequestId=null}):(worker.send({id:e.id,result:r,error:null}),currentRequestId=null)}else throw new Error('Unknown method "'+e.method+'"')}catch(n){worker.send({id:e.id,result:null,error:convertError(n)})}}),worker.register=function(e){if(e)for(var t in e)e.hasOwnProperty(t)&&(worker.methods[t]=e[t]);worker.send("ready")},worker.emit=function(e){currentRequestId&&worker.send({id:currentRequestId,isEvent:!0,payload:e})},exports.add=worker.register,exports.emit=worker.emit}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(t!==void 0)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](r,r.exports,__webpack_require__),r.exports}(function(){__webpack_require__.d=function(e,t){for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}})(),function(){__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){__webpack_require__.r=function(e){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}();var __webpack_exports__={};return function(){var e=__webpack_exports__,t=__webpack_require__(722);e.pool=function(n,o){var i=__webpack_require__(799);return new i(n,o)},e.worker=function(n){var o=__webpack_require__(52);o.add(n)},e.workerEmit=function(n){var o=__webpack_require__(52);o.emit(n)},e.Promise=__webpack_require__(446),e.platform=t.platform,e.isMainThread=t.isMainThread,e.cpus=t.cpus}(),__webpack_exports__}()})});var c1=b((QQ,u1)=>{"use strict";var eq=["h","min","s","ms","\u03BCs","ns"],tq=["hour","minute","second","millisecond","microsecond","nanosecond"],s1=[3600,60,1,1e6,1e3,1];u1.exports=function(e,t){var r,n,o,i,a,s,u,l,c,f;if(r=!1,n=!1,t&&(r=t.verbose||!1,n=t.precise||!1),!Array.isArray(e)||e.length!==2||typeof e[0]!="number"||typeof e[1]!="number")return"";for(e[1]<0&&(f=e[0]+e[1]/1e9,e[0]=parseInt(f),e[1]=parseFloat((f%1).toPrecision(9))*1e9),c="",o=0;o<6&&(i=o<3?0:1,a=e[i],o!==3&&o!==0&&(a=a%s1[o-1]),o===2&&(a+=e[1]/1e9),s=a/s1[o],!(s>=1&&(r&&(s=Math.floor(s)),n?l=s.toString():(u=s>=10?0:2,l=s.toFixed(u)),l.indexOf(".")>-1&&l[l.length-1]==="0"&&(l=l.replace(/\.?0+$/,"")),c&&(c+=" "),c+=l,r?(c+=" "+tq[o],l!=="1"&&(c+="s")):c+=" "+eq[o],!r)));o++);return c}});function Rr(e,t){for(var r in t)e[r]=t[r];return e}function w2(e){var t=e.parentNode;t&&t.removeChild(e)}function Q(e,t,r){var n,o,i,a={};for(i in t)i=="key"?n=t[i]:i=="ref"?o=t[i]:a[i]=t[i];if(arguments.length>2&&(a.children=arguments.length>3?Ka.call(arguments,2):r),typeof e=="function"&&e.defaultProps!=null)for(i in e.defaultProps)a[i]===void 0&&(a[i]=e.defaultProps[i]);return Va(e,a,n,o,null)}function Va(e,t,r,n,o){var i={type:e,props:t,key:r,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:o??++y2};return o==null&&ee.vnode!=null&&ee.vnode(i),i}function Cc(){return{current:null}}function Y(e){return e.children}function Et(e,t){this.props=e,this.context=t}function Ga(e,t){if(t==null)return e.__?Ga(e.__,e.__.__k.indexOf(e)+1):null;for(var r;t<e.__k.length;t++)if((r=e.__k[t])!=null&&r.__e!=null)return r.__e;return typeof e.type=="function"?Ga(e):null}function x2(e){var t,r;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((r=e.__k[t])!=null&&r.__e!=null){e.__e=e.__c.base=r.__e;break}return x2(e)}}function rm(e){(!e.__d&&(e.__d=!0)&&Ha.push(e)&&!Ic.__r++||d2!==ee.debounceRendering)&&((d2=ee.debounceRendering)||setTimeout)(Ic)}function Ic(){for(var e;Ic.__r=Ha.length;)e=Ha.sort(function(t,r){return t.__v.__b-r.__v.__b}),Ha=[],e.some(function(t){var r,n,o,i,a,s;t.__d&&(a=(i=(r=t).__v).__e,(s=r.__P)&&(n=[],(o=Rr({},i)).__v=i.__v+1,nm(s,i,o,r.__n,s.ownerSVGElement!==void 0,i.__h!=null?[a]:null,n,a??Ga(i),i.__h),A2(n,i),i.__e!=a&&x2(i)))})}function E2(e,t,r,n,o,i,a,s,u,l){var c,f,p,d,h,g,y,w=n&&n.__k||v2,x=w.length;for(r.__k=[],c=0;c<t.length;c++)if((d=r.__k[c]=(d=t[c])==null||typeof d=="boolean"?null:typeof d=="string"||typeof d=="number"||typeof d=="bigint"?Va(null,d,null,null,d):Array.isArray(d)?Va(Y,{children:d},null,null,null):d.__b>0?Va(d.type,d.props,d.key,d.ref?d.ref:null,d.__v):d)!=null){if(d.__=r,d.__b=r.__b+1,(p=w[c])===null||p&&d.key==p.key&&d.type===p.type)w[c]=void 0;else for(f=0;f<x;f++){if((p=w[f])&&d.key==p.key&&d.type===p.type){w[f]=void 0;break}p=null}nm(e,d,p=p||Ac,o,i,a,s,u,l),h=d.__e,(f=d.ref)&&p.ref!=f&&(y||(y=[]),p.ref&&y.push(p.ref,null,d),y.push(f,d.__c||h,d)),h!=null?(g==null&&(g=h),typeof d.type=="function"&&d.__k===p.__k?d.__d=u=S2(d,u,e):u=k2(e,d,p,w,h,u),typeof r.type=="function"&&(r.__d=u)):u&&p.__e==u&&u.parentNode!=e&&(u=Ga(p))}for(r.__e=g,c=x;c--;)w[c]!=null&&_2(w[c],w[c]);if(y)for(c=0;c<y.length;c++)I2(y[c],y[++c],y[++c])}function S2(e,t,r){for(var n,o=e.__k,i=0;o&&i<o.length;i++)(n=o[i])&&(n.__=e,t=typeof n.type=="function"?S2(n,t,r):k2(r,n,n,o,n.__e,t));return t}function fr(e,t){return t=t||[],e==null||typeof e=="boolean"||(Array.isArray(e)?e.some(function(r){fr(r,t)}):t.push(e)),t}function k2(e,t,r,n,o,i){var a,s,u;if(t.__d!==void 0)a=t.__d,t.__d=void 0;else if(r==null||o!=i||o.parentNode==null)e:if(i==null||i.parentNode!==e)e.appendChild(o),a=null;else{for(s=i,u=0;(s=s.nextSibling)&&u<n.length;u+=1)if(s==o)break e;e.insertBefore(o,i),a=i}return a!==void 0?a:o.nextSibling}function uq(e,t,r,n,o){var i;for(i in r)i==="children"||i==="key"||i in t||_c(e,i,null,r[i],n);for(i in t)o&&typeof t[i]!="function"||i==="children"||i==="key"||i==="value"||i==="checked"||r[i]===t[i]||_c(e,i,t[i],r[i],n)}function m2(e,t,r){t[0]==="-"?e.setProperty(t,r):e[t]=r==null?"":typeof r!="number"||sq.test(t)?r:r+"px"}function _c(e,t,r,n,o){var i;e:if(t==="style")if(typeof r=="string")e.style.cssText=r;else{if(typeof n=="string"&&(e.style.cssText=n=""),n)for(t in n)r&&t in r||m2(e.style,t,"");if(r)for(t in r)n&&r[t]===n[t]||m2(e.style,t,r[t])}else if(t[0]==="o"&&t[1]==="n")i=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=r,r?n||e.addEventListener(t,i?g2:h2,i):e.removeEventListener(t,i?g2:h2,i);else if(t!=="dangerouslySetInnerHTML"){if(o)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!=="href"&&t!=="list"&&t!=="form"&&t!=="tabIndex"&&t!=="download"&&t in e)try{e[t]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&t.indexOf("-")==-1?e.removeAttribute(t):e.setAttribute(t,r))}}function h2(e){this.l[e.type+!1](ee.event?ee.event(e):e)}function g2(e){this.l[e.type+!0](ee.event?ee.event(e):e)}function nm(e,t,r,n,o,i,a,s,u){var l,c,f,p,d,h,g,y,w,x,S,O,F,D,P,R=t.type;if(t.constructor!==void 0)return null;r.__h!=null&&(u=r.__h,s=t.__e=r.__e,t.__h=null,i=[s]),(l=ee.__b)&&l(t);try{e:if(typeof R=="function"){if(y=t.props,w=(l=R.contextType)&&n[l.__c],x=l?w?w.props.value:l.__:n,r.__c?g=(c=t.__c=r.__c).__=c.__E:("prototype"in R&&R.prototype.render?t.__c=c=new R(y,x):(t.__c=c=new Et(y,x),c.constructor=R,c.render=lq),w&&w.sub(c),c.props=y,c.state||(c.state={}),c.context=x,c.__n=n,f=c.__d=!0,c.__h=[],c._sb=[]),c.__s==null&&(c.__s=c.state),R.getDerivedStateFromProps!=null&&(c.__s==c.state&&(c.__s=Rr({},c.__s)),Rr(c.__s,R.getDerivedStateFromProps(y,c.__s))),p=c.props,d=c.state,f)R.getDerivedStateFromProps==null&&c.componentWillMount!=null&&c.componentWillMount(),c.componentDidMount!=null&&c.__h.push(c.componentDidMount);else{if(R.getDerivedStateFromProps==null&&y!==p&&c.componentWillReceiveProps!=null&&c.componentWillReceiveProps(y,x),!c.__e&&c.shouldComponentUpdate!=null&&c.shouldComponentUpdate(y,c.__s,x)===!1||t.__v===r.__v){for(c.props=y,c.state=c.__s,t.__v!==r.__v&&(c.__d=!1),c.__v=t,t.__e=r.__e,t.__k=r.__k,t.__k.forEach(function(E){E&&(E.__=t)}),S=0;S<c._sb.length;S++)c.__h.push(c._sb[S]);c._sb=[],c.__h.length&&a.push(c);break e}c.componentWillUpdate!=null&&c.componentWillUpdate(y,c.__s,x),c.componentDidUpdate!=null&&c.__h.push(function(){c.componentDidUpdate(p,d,h)})}if(c.context=x,c.props=y,c.__v=t,c.__P=e,O=ee.__r,F=0,"prototype"in R&&R.prototype.render){for(c.state=c.__s,c.__d=!1,O&&O(t),l=c.render(c.props,c.state,c.context),D=0;D<c._sb.length;D++)c.__h.push(c._sb[D]);c._sb=[]}else do c.__d=!1,O&&O(t),l=c.render(c.props,c.state,c.context),c.state=c.__s;while(c.__d&&++F<25);c.state=c.__s,c.getChildContext!=null&&(n=Rr(Rr({},n),c.getChildContext())),f||c.getSnapshotBeforeUpdate==null||(h=c.getSnapshotBeforeUpdate(p,d)),P=l!=null&&l.type===Y&&l.key==null?l.props.children:l,E2(e,Array.isArray(P)?P:[P],t,r,n,o,i,a,s,u),c.base=t.__e,t.__h=null,c.__h.length&&a.push(c),g&&(c.__E=c.__=null),c.__e=!1}else i==null&&t.__v===r.__v?(t.__k=r.__k,t.__e=r.__e):t.__e=cq(r.__e,t,r,n,o,i,a,u);(l=ee.diffed)&&l(t)}catch(E){t.__v=null,(u||i!=null)&&(t.__e=s,t.__h=!!u,i[i.indexOf(s)]=null),ee.__e(E,t,r)}}function A2(e,t){ee.__c&&ee.__c(t,e),e.some(function(r){try{e=r.__h,r.__h=[],e.some(function(n){n.call(r)})}catch(n){ee.__e(n,r.__v)}})}function cq(e,t,r,n,o,i,a,s){var u,l,c,f=r.props,p=t.props,d=t.type,h=0;if(d==="svg"&&(o=!0),i!=null){for(;h<i.length;h++)if((u=i[h])&&"setAttribute"in u==!!d&&(d?u.localName===d:u.nodeType===3)){e=u,i[h]=null;break}}if(e==null){if(d===null)return document.createTextNode(p);e=o?document.createElementNS("http://www.w3.org/2000/svg",d):document.createElement(d,p.is&&p),i=null,s=!1}if(d===null)f===p||s&&e.data===p||(e.data=p);else{if(i=i&&Ka.call(e.childNodes),l=(f=r.props||Ac).dangerouslySetInnerHTML,c=p.dangerouslySetInnerHTML,!s){if(i!=null)for(f={},h=0;h<e.attributes.length;h++)f[e.attributes[h].name]=e.attributes[h].value;(c||l)&&(c&&(l&&c.__html==l.__html||c.__html===e.innerHTML)||(e.innerHTML=c&&c.__html||""))}if(uq(e,p,f,o,s),c)t.__k=[];else if(h=t.props.children,E2(e,Array.isArray(h)?h:[h],t,r,n,o&&d!=="foreignObject",i,a,i?i[0]:r.__k&&Ga(r,0),s),i!=null)for(h=i.length;h--;)i[h]!=null&&w2(i[h]);s||("value"in p&&(h=p.value)!==void 0&&(h!==e.value||d==="progress"&&!h||d==="option"&&h!==f.value)&&_c(e,"value",h,f.value,!1),"checked"in p&&(h=p.checked)!==void 0&&h!==e.checked&&_c(e,"checked",h,f.checked,!1))}return e}function I2(e,t,r){try{typeof e=="function"?e(t):e.current=t}catch(n){ee.__e(n,r)}}function _2(e,t,r){var n,o;if(ee.unmount&&ee.unmount(e),(n=e.ref)&&(n.current&&n.current!==e.__e||I2(n,null,t)),(n=e.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(i){ee.__e(i,t)}n.base=n.__P=null,e.__c=void 0}if(n=e.__k)for(o=0;o<n.length;o++)n[o]&&_2(n[o],t,r||typeof e.type!="function");r||e.__e==null||w2(e.__e),e.__=e.__e=e.__d=void 0}function lq(e,t,r){return this.constructor(e,r)}function Zo(e,t,r){var n,o,i;ee.__&&ee.__(e,t),o=(n=typeof r=="function")?null:r&&r.__k||t.__k,i=[],nm(t,e=(!n&&r||t).__k=Q(Y,null,[e]),o||Ac,Ac,t.ownerSVGElement!==void 0,!n&&r?[r]:o?null:t.firstChild?Ka.call(t.childNodes):null,i,!n&&r?r:o?o.__e:t.firstChild,n),A2(i,e)}function om(e,t){Zo(e,t,om)}function C2(e,t,r){var n,o,i,a=Rr({},e.props);for(i in t)i=="key"?n=t[i]:i=="ref"?o=t[i]:a[i]=t[i];return arguments.length>2&&(a.children=arguments.length>3?Ka.call(arguments,2):r),Va(e.type,a,n||e.key,o||e.ref,null)}function we(e,t){var r={__c:t="__cC"+b2++,__:e,Consumer:function(n,o){return n.children(o)},Provider:function(n){var o,i;return this.getChildContext||(o=[],(i={})[t]=this,this.getChildContext=function(){return i},this.shouldComponentUpdate=function(a){this.props.value!==a.value&&o.some(rm)},this.sub=function(a){o.push(a);var s=a.componentWillUnmount;a.componentWillUnmount=function(){o.splice(o.indexOf(a),1),s&&s.call(a)}}),n.children}};return r.Provider.__=r.Consumer.contextType=r}var Ka,ee,y2,aq,Ha,d2,b2,Ac,v2,sq,Yo=Fu(()=>{Ac={},v2=[],sq=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;Ka=v2.slice,ee={__e:function(e,t,r,n){for(var o,i,a;t=t.__;)if((o=t.__c)&&!o.__)try{if((i=o.constructor)&&i.getDerivedStateFromError!=null&&(o.setState(i.getDerivedStateFromError(e)),a=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(e,n||{}),a=o.__d),a)return o.__E=o}catch(s){e=s}throw e}},y2=0,aq=function(e){return e!=null&&e.constructor===void 0},Et.prototype.setState=function(e,t){var r;r=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Rr({},this.state),typeof e=="function"&&(e=e(Rr({},r),this.props)),e&&Rr(r,e),e!=null&&this.__v&&(t&&this._sb.push(t),rm(this))},Et.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),rm(this))},Et.prototype.render=Y,Ha=[],Ic.__r=0,b2=0});function Wn(e,t){ee.__h&&ee.__h(Ee,e,Qo||t),Qo=0;var r=Ee.__H||(Ee.__H={__:[],__h:[]});return e>=r.__.length&&r.__.push({__V:Tc}),r.__[e]}function $(e){return Qo=1,pt($2,e)}function pt(e,t,r){var n=Wn(un++,2);if(n.t=e,!n.__c&&(n.__=[r?r(t):$2(void 0,t),function(i){var a=n.__N?n.__N[0]:n.__[0],s=n.t(a,i);a!==s&&(n.__N=[s,n.__[1]],n.__c.setState({}))}],n.__c=Ee,!Ee.u)){Ee.u=!0;var o=Ee.shouldComponentUpdate;Ee.shouldComponentUpdate=function(i,a,s){if(!n.__c.__H)return!0;var u=n.__c.__H.__.filter(function(c){return c.__c});if(u.every(function(c){return!c.__N}))return!o||o.call(this,i,a,s);var l=!1;return u.forEach(function(c){if(c.__N){var f=c.__[0];c.__=c.__N,c.__N=void 0,f!==c.__[0]&&(l=!0)}}),!(!l&&n.__c.props===i)&&(!o||o.call(this,i,a,s))}}return n.__N||n.__}function L(e,t){var r=Wn(un++,3);!ee.__s&&cm(r.__H,t)&&(r.__=e,r.i=t,Ee.__H.__h.push(r))}function et(e,t){var r=Wn(un++,4);!ee.__s&&cm(r.__H,t)&&(r.__=e,r.i=t,Ee.__h.push(r))}function N(e){return Qo=5,K(function(){return{current:e}},[])}function sm(e,t,r){Qo=6,et(function(){return typeof e=="function"?(e(t()),function(){return e(null)}):e?(e.current=t(),function(){return e.current=null}):void 0},r==null?r:r.concat(e))}function K(e,t){var r=Wn(un++,7);return cm(r.__H,t)?(r.__V=e(),r.i=t,r.__h=e,r.__V):r.__}function J(e,t){return Qo=8,K(function(){return e},t)}function V(e){var t=Ee.context[e.__c],r=Wn(un++,9);return r.c=e,t?(r.__==null&&(r.__=!0,t.sub(Ee)),t.props.value):e.__}function Un(e,t){ee.useDebugValue&&ee.useDebugValue(t?t(e):e)}function fq(e){var t=Wn(un++,10),r=$();return t.__=e,Ee.componentDidCatch||(Ee.componentDidCatch=function(n,o){t.__&&t.__(n,o),r[1](n)}),[r[0],function(){r[1](void 0)}]}function um(){var e=Wn(un++,11);if(!e.__){for(var t=Ee.__v;t!==null&&!t.__m&&t.__!==null;)t=t.__;var r=t.__m||(t.__m=[0,0]);e.__="P"+r[0]+"-"+r[1]++}return e.__}function pq(){for(var e;e=M2.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(Oc),e.__H.__h.forEach(am),e.__H.__h=[]}catch(t){e.__H.__h=[],ee.__e(t,e.__v)}}function dq(e){var t,r=function(){clearTimeout(n),R2&&cancelAnimationFrame(t),setTimeout(e)},n=setTimeout(r,100);R2&&(t=requestAnimationFrame(r))}function Oc(e){var t=Ee,r=e.__c;typeof r=="function"&&(e.__c=void 0,r()),Ee=t}function am(e){var t=Ee;e.__c=e.__(),Ee=t}function cm(e,t){return!e||e.length!==t.length||t.some(function(r,n){return r!==e[n]})}function $2(e,t){return typeof t=="function"?t(e):t}var un,Ee,im,T2,Qo,M2,Tc,O2,D2,F2,N2,P2,R2,lm=Fu(()=>{Yo();Qo=0,M2=[],Tc=[],O2=ee.__b,D2=ee.__r,F2=ee.diffed,N2=ee.__c,P2=ee.unmount;ee.__b=function(e){Ee=null,O2&&O2(e)},ee.__r=function(e){D2&&D2(e),un=0;var t=(Ee=e.__c).__H;t&&(im===Ee?(t.__h=[],Ee.__h=[],t.__.forEach(function(r){r.__N&&(r.__=r.__N),r.__V=Tc,r.__N=r.i=void 0})):(t.__h.forEach(Oc),t.__h.forEach(am),t.__h=[])),im=Ee},ee.diffed=function(e){F2&&F2(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(M2.push(t)!==1&&T2===ee.requestAnimationFrame||((T2=ee.requestAnimationFrame)||dq)(pq)),t.__H.__.forEach(function(r){r.i&&(r.__H=r.i),r.__V!==Tc&&(r.__=r.__V),r.i=void 0,r.__V=Tc})),im=Ee=null},ee.__c=function(e,t){t.some(function(r){try{r.__h.forEach(Oc),r.__h=r.__h.filter(function(n){return!n.__||am(n)})}catch(n){t.some(function(o){o.__h&&(o.__h=[])}),t=[],ee.__e(n,r.__v)}}),N2&&N2(e,t)},ee.unmount=function(e){P2&&P2(e);var t,r=e.__c;r&&r.__H&&(r.__H.__.forEach(function(n){try{Oc(n)}catch(o){t=o}}),r.__H=void 0,t&&ee.__e(t,r.__v))};R2=typeof requestAnimationFrame=="function"});function V2(e,t){for(var r in t)e[r]=t[r];return e}function pm(e,t){for(var r in e)if(r!=="__source"&&!(r in t))return!0;for(var n in t)if(n!=="__source"&&e[n]!==t[n])return!0;return!1}function fm(e,t){return e===t&&(e!==0||1/e==1/t)||e!=e&&t!=t}function Dc(e){this.props=e}function Ue(e,t){function r(o){var i=this.props.ref,a=i==o.ref;return!a&&i&&(i.call?i(null):i.current=null),t?!t(this.props,o)||!a:pm(this.props,o)}function n(o){return this.shouldComponentUpdate=r,Q(e,o)}return n.displayName="Memo("+(e.displayName||e.name)+")",n.prototype.isReactComponent=!0,n.__f=!0,n}function te(e){function t(r){var n=V2({},r);return delete n.ref,e(n,r.ref||null)}return t.$$typeof=mq,t.render=t,t.prototype.isReactComponent=t.__f=!0,t.displayName="ForwardRef("+(e.displayName||e.name)+")",t}function G2(e,t,r){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach(function(n){typeof n.__c=="function"&&n.__c()}),e.__c.__H=null),(e=V2({},e)).__c!=null&&(e.__c.__P===r&&(e.__c.__P=t),e.__c=null),e.__k=e.__k&&e.__k.map(function(n){return G2(n,t,r)})),e}function K2(e,t,r){return e&&(e.__v=null,e.__k=e.__k&&e.__k.map(function(n){return K2(n,t,r)}),e.__c&&e.__c.__P===t&&(e.__e&&r.insertBefore(e.__e,e.__d),e.__c.__e=!0,e.__c.__P=r)),e}function Ja(){this.__u=0,this.t=null,this.__b=null}function J2(e){var t=e.__.__c;return t&&t.__a&&t.__a(e)}function Z2(e){var t,r,n;function o(i){if(t||(t=e()).then(function(a){r=a.default||a},function(a){n=a}),n)throw n;if(!r)throw t;return Q(r,i)}return o.displayName="Lazy",o.__f=!0,o}function Xo(){this.u=null,this.o=null}function gq(e){return this.getChildContext=function(){return e.context},e.children}function yq(e){var t=this,r=e.i;t.componentWillUnmount=function(){Zo(null,t.l),t.l=null,t.i=null},t.i&&t.i!==r&&t.componentWillUnmount(),e.__v?(t.l||(t.i=r,t.l={nodeType:1,parentNode:r,childNodes:[],appendChild:function(n){this.childNodes.push(n),t.i.appendChild(n)},insertBefore:function(n,o){this.childNodes.push(n),t.i.appendChild(n)},removeChild:function(n){this.childNodes.splice(this.childNodes.indexOf(n)>>>1,1),t.i.removeChild(n)}}),Zo(Q(gq,{context:t.context},e.__v),t.l)):t.l&&t.componentWillUnmount()}function Fc(e,t){var r=Q(yq,{__v:e,i:t});return r.containerInfo=t,r}function Q2(e,t,r){return t.__k==null&&(t.textContent=""),Zo(e,t),typeof r=="function"&&r(),e?e.__c:null}function X2(e,t,r){return om(e,t),typeof r=="function"&&r(),e?e.__c:null}function xq(){}function Eq(){return this.cancelBubble}function Sq(){return this.defaultPrevented}function rE(e){return Q.bind(null,e)}function St(e){return!!e&&e.$$typeof===Y2}function kt(e){return St(e)?C2.apply(null,arguments):e}function nE(e){return!!e.__k&&(Zo(null,e),!0)}function oE(e){return e&&(e.base||e.nodeType===1&&e)||null}function dm(e){e()}function aE(e){return e}function sE(){return[!1,dm]}function cE(e,t){var r=t(),n=$({h:{__:r,v:t}}),o=n[0].h,i=n[1];return et(function(){o.__=r,o.v=t,fm(o.__,t())||i({h:o})},[e,r,t]),L(function(){return fm(o.__,o.v())||i({h:o}),e(function(){fm(o.__,o.v())||i({h:o})})},[e]),r}var L2,mq,q2,He,hq,B2,j2,Y2,bq,vq,wq,z2,eE,W2,U2,H2,tE,kq,cn,pr,iE,uE,q,mm=Fu(()=>{Yo();Yo();lm();lm();(Dc.prototype=new Et).isPureReactComponent=!0,Dc.prototype.shouldComponentUpdate=function(e,t){return pm(this.props,e)||pm(this.state,t)};L2=ee.__b;ee.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),L2&&L2(e)};mq=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;q2=function(e,t){return e==null?null:fr(fr(e).map(t))},He={map:q2,forEach:q2,count:function(e){return e?fr(e).length:0},only:function(e){var t=fr(e);if(t.length!==1)throw"Children.only";return t[0]},toArray:fr},hq=ee.__e;ee.__e=function(e,t,r,n){if(e.then){for(var o,i=t;i=i.__;)if((o=i.__c)&&o.__c)return t.__e==null&&(t.__e=r.__e,t.__k=r.__k),o.__c(e,t)}hq(e,t,r,n)};B2=ee.unmount;ee.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&e.__h===!0&&(e.type=null),B2&&B2(e)},(Ja.prototype=new Et).__c=function(e,t){var r=t.__c,n=this;n.t==null&&(n.t=[]),n.t.push(r);var o=J2(n.__v),i=!1,a=function(){i||(i=!0,r.__R=null,o?o(s):s())};r.__R=a;var s=function(){if(!--n.__u){if(n.state.__a){var l=n.state.__a;n.__v.__k[0]=K2(l,l.__c.__P,l.__c.__O)}var c;for(n.setState({__a:n.__b=null});c=n.t.pop();)c.forceUpdate()}},u=t.__h===!0;n.__u++||u||n.setState({__a:n.__b=n.__v.__k[0]}),e.then(a,a)},Ja.prototype.componentWillUnmount=function(){this.t=[]},Ja.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var r=document.createElement("div"),n=this.__v.__k[0].__c;this.__v.__k[0]=G2(this.__b,r,n.__O=n.__P)}this.__b=null}var o=t.__a&&Q(Y,null,e.fallback);return o&&(o.__h=null),[Q(Y,null,t.__a?null:e.children),o]};j2=function(e,t,r){if(++r[1]===r[0]&&e.o.delete(t),e.props.revealOrder&&(e.props.revealOrder[0]!=="t"||!e.o.size))for(r=e.u;r;){for(;r.length>3;)r.pop()();if(r[1]<r[0])break;e.u=r=r[2]}};(Xo.prototype=new Et).__a=function(e){var t=this,r=J2(t.__v),n=t.o.get(e);return n[0]++,function(o){var i=function(){t.props.revealOrder?(n.push(o),j2(t,e,n)):o()};r?r(i):i()}},Xo.prototype.render=function(e){this.u=null,this.o=new Map;var t=fr(e.children);e.revealOrder&&e.revealOrder[0]==="b"&&t.reverse();for(var r=t.length;r--;)this.o.set(t[r],this.u=[1,0,this.u]);return e.children},Xo.prototype.componentDidUpdate=Xo.prototype.componentDidMount=function(){var e=this;this.o.forEach(function(t,r){j2(e,r,t)})};Y2=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,bq=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,vq=typeof document<"u",wq=function(e){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(e)};Et.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(Et.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})});z2=ee.event;ee.event=function(e){return z2&&(e=z2(e)),e.persist=xq,e.isPropagationStopped=Eq,e.isDefaultPrevented=Sq,e.nativeEvent=e};W2={configurable:!0,get:function(){return this.class}},U2=ee.vnode;ee.vnode=function(e){var t=e.type,r=e.props,n=r;if(typeof t=="string"){var o=t.indexOf("-")===-1;for(var i in n={},r){var a=r[i];vq&&i==="children"&&t==="noscript"||i==="value"&&"defaultValue"in r&&a==null||(i==="defaultValue"&&"value"in r&&r.value==null?i="value":i==="download"&&a===!0?a="":/ondoubleclick/i.test(i)?i="ondblclick":/^onchange(textarea|input)/i.test(i+t)&&!wq(r.type)?i="oninput":/^onfocus$/i.test(i)?i="onfocusin":/^onblur$/i.test(i)?i="onfocusout":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(i)?i=i.toLowerCase():o&&bq.test(i)?i=i.replace(/[A-Z0-9]/g,"-$&").toLowerCase():a===null&&(a=void 0),/^oninput$/i.test(i)&&(i=i.toLowerCase(),n[i]&&(i="oninputCapture")),n[i]=a)}t=="select"&&n.multiple&&Array.isArray(n.value)&&(n.value=fr(r.children).forEach(function(s){s.props.selected=n.value.indexOf(s.props.value)!=-1})),t=="select"&&n.defaultValue!=null&&(n.value=fr(r.children).forEach(function(s){s.props.selected=n.multiple?n.defaultValue.indexOf(s.props.value)!=-1:n.defaultValue==s.props.value})),e.props=n,r.class!=r.className&&(W2.enumerable="className"in r,r.className!=null&&(n.class=r.className),Object.defineProperty(n,"className",W2))}e.$$typeof=Y2,U2&&U2(e)};H2=ee.__r;ee.__r=function(e){H2&&H2(e),eE=e.__c};tE={ReactCurrentDispatcher:{current:{readContext:function(e){return eE.__n[e.__c].props.value}}}},kq="17.0.2";cn=function(e,t){return e(t)},pr=function(e,t){return e(t)},iE=Y;uE=et;q={useState:$,useId:um,useReducer:pt,useEffect:L,useLayoutEffect:et,useInsertionEffect:uE,useTransition:sE,useDeferredValue:aE,useSyncExternalStore:cE,startTransition:dm,useRef:N,useImperativeHandle:sm,useMemo:K,useCallback:J,useContext:V,useDebugValue:Un,version:"17.0.2",Children:He,render:Q2,hydrate:X2,unmountComponentAtNode:nE,createPortal:Fc,createElement:Q,createContext:we,createFactory:rE,cloneElement:kt,createRef:Cc,Fragment:Y,isValidElement:St,findDOMNode:oE,Component:Et,PureComponent:Dc,memo:Ue,forwardRef:te,flushSync:pr,unstable_batchedUpdates:cn,StrictMode:iE,Suspense:Ja,SuspenseList:Xo,lazy:Z2,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:tE}});var At={};xb(At,{Children:()=>He,Component:()=>Et,Fragment:()=>Y,PureComponent:()=>Dc,StrictMode:()=>iE,Suspense:()=>Ja,SuspenseList:()=>Xo,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:()=>tE,cloneElement:()=>kt,createContext:()=>we,createElement:()=>Q,createFactory:()=>rE,createPortal:()=>Fc,createRef:()=>Cc,default:()=>q,findDOMNode:()=>oE,flushSync:()=>pr,forwardRef:()=>te,hydrate:()=>X2,isValidElement:()=>St,lazy:()=>Z2,memo:()=>Ue,render:()=>Q2,startTransition:()=>dm,unmountComponentAtNode:()=>nE,unstable_batchedUpdates:()=>cn,useCallback:()=>J,useContext:()=>V,useDebugValue:()=>Un,useDeferredValue:()=>aE,useEffect:()=>L,useErrorBoundary:()=>fq,useId:()=>um,useImperativeHandle:()=>sm,useInsertionEffect:()=>uE,useLayoutEffect:()=>et,useMemo:()=>K,useReducer:()=>pt,useRef:()=>N,useState:()=>$,useSyncExternalStore:()=>cE,useTransition:()=>sE,version:()=>kq});var C=Fu(()=>{mm();mm()});var Em=b((Qee,SE)=>{function Mq(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}SE.exports=Mq});var AE=b((Xee,kE)=>{var $q=typeof global=="object"&&global&&global.Object===Object&&global;kE.exports=$q});var Sm=b((ete,IE)=>{var Lq=AE(),qq=typeof self=="object"&&self&&self.Object===Object&&self,Bq=Lq||qq||Function("return this")();IE.exports=Bq});var CE=b((tte,_E)=>{var jq=Sm(),zq=function(){return jq.Date.now()};_E.exports=zq});var OE=b((rte,TE)=>{var Wq=/\s/;function Uq(e){for(var t=e.length;t--&&Wq.test(e.charAt(t)););return t}TE.exports=Uq});var FE=b((nte,DE)=>{var Hq=OE(),Vq=/^\s+/;function Gq(e){return e&&e.slice(0,Hq(e)+1).replace(Vq,"")}DE.exports=Gq});var km=b((ote,NE)=>{var Kq=Sm(),Jq=Kq.Symbol;NE.exports=Jq});var $E=b((ite,ME)=>{var PE=km(),RE=Object.prototype,Zq=RE.hasOwnProperty,Yq=RE.toString,Xa=PE?PE.toStringTag:void 0;function Qq(e){var t=Zq.call(e,Xa),r=e[Xa];try{e[Xa]=void 0;var n=!0}catch{}var o=Yq.call(e);return n&&(t?e[Xa]=r:delete e[Xa]),o}ME.exports=Qq});var qE=b((ate,LE)=>{var Xq=Object.prototype,e4=Xq.toString;function t4(e){return e4.call(e)}LE.exports=t4});var WE=b((ste,zE)=>{var BE=km(),r4=$E(),n4=qE(),o4="[object Null]",i4="[object Undefined]",jE=BE?BE.toStringTag:void 0;function a4(e){return e==null?e===void 0?i4:o4:jE&&jE in Object(e)?r4(e):n4(e)}zE.exports=a4});var HE=b((ute,UE)=>{function s4(e){return e!=null&&typeof e=="object"}UE.exports=s4});var GE=b((cte,VE)=>{var u4=WE(),c4=HE(),l4="[object Symbol]";function f4(e){return typeof e=="symbol"||c4(e)&&u4(e)==l4}VE.exports=f4});var YE=b((lte,ZE)=>{var p4=FE(),KE=Em(),d4=GE(),JE=0/0,m4=/^[-+]0x[0-9a-f]+$/i,h4=/^0b[01]+$/i,g4=/^0o[0-7]+$/i,y4=parseInt;function b4(e){if(typeof e=="number")return e;if(d4(e))return JE;if(KE(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=KE(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=p4(e);var r=h4.test(e);return r||g4.test(e)?y4(e.slice(2),r?2:8):m4.test(e)?JE:+e}ZE.exports=b4});var eS=b((fte,XE)=>{var v4=Em(),Am=CE(),QE=YE(),w4="Expected a function",x4=Math.max,E4=Math.min;function S4(e,t,r){var n,o,i,a,s,u,l=0,c=!1,f=!1,p=!0;if(typeof e!="function")throw new TypeError(w4);t=QE(t)||0,v4(r)&&(c=!!r.leading,f="maxWait"in r,i=f?x4(QE(r.maxWait)||0,t):i,p="trailing"in r?!!r.trailing:p);function d(D){var P=n,R=o;return n=o=void 0,l=D,a=e.apply(R,P),a}function h(D){return l=D,s=setTimeout(w,t),c?d(D):a}function g(D){var P=D-u,R=D-l,E=t-P;return f?E4(E,i-R):E}function y(D){var P=D-u,R=D-l;return u===void 0||P>=t||P<0||f&&R>=i}function w(){var D=Am();if(y(D))return x(D);s=setTimeout(w,g(D))}function x(D){return s=void 0,p&&n?d(D):(n=o=void 0,a)}function S(){s!==void 0&&clearTimeout(s),l=0,n=u=o=s=void 0}function O(){return s===void 0?a:x(Am())}function F(){var D=Am(),P=y(D);if(n=arguments,o=this,u=D,P){if(s===void 0)return h(u);if(f)return clearTimeout(s),s=setTimeout(w,t),d(u)}return s===void 0&&(s=setTimeout(w,t)),a}return F.cancel=S,F.flush=O,F}XE.exports=S4});var YS=b((use,ZS)=>{"use strict";ZS.exports=e=>encodeURIComponent(e).replace(/[!'()*]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`)});var rk=b((cse,tk)=>{"use strict";var ek="%[a-f0-9]{2}",QS=new RegExp("("+ek+")|([^%]+?)","gi"),XS=new RegExp("("+ek+")+","gi");function Km(e,t){try{return[decodeURIComponent(e.join(""))]}catch{}if(e.length===1)return e;t=t||1;var r=e.slice(0,t),n=e.slice(t);return Array.prototype.concat.call([],Km(r),Km(n))}function S6(e){try{return decodeURIComponent(e)}catch{for(var t=e.match(QS)||[],r=1;r<t.length;r++)e=Km(t,r).join(""),t=e.match(QS)||[];return e}}function k6(e){for(var t={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},r=XS.exec(e);r;){try{t[r[0]]=decodeURIComponent(r[0])}catch{var n=S6(r[0]);n!==r[0]&&(t[r[0]]=n)}r=XS.exec(e)}t["%C2"]="\uFFFD";for(var o=Object.keys(t),i=0;i<o.length;i++){var a=o[i];e=e.replace(new RegExp(a,"g"),t[a])}return e}tk.exports=function(e){if(typeof e!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch{return k6(e)}}});var ok=b((lse,nk)=>{"use strict";nk.exports=(e,t)=>{if(!(typeof e=="string"&&typeof t=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(t==="")return[e];let r=e.indexOf(t);return r===-1?[e]:[e.slice(0,r),e.slice(r+t.length)]}});var ak=b((fse,ik)=>{"use strict";ik.exports=function(e,t){for(var r={},n=Object.keys(e),o=Array.isArray(t),i=0;i<n.length;i++){var a=n[i],s=e[a];(o?t.indexOf(a)!==-1:t(a,s,e))&&(r[a]=s)}return r}});var Zm=b(dt=>{"use strict";var A6=YS(),I6=rk(),uk=ok(),_6=ak(),C6=e=>e==null,Jm=Symbol("encodeFragmentIdentifier");function T6(e){switch(e.arrayFormat){case"index":return t=>(r,n)=>{let o=r.length;return n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?r:n===null?[...r,[De(t,e),"[",o,"]"].join("")]:[...r,[De(t,e),"[",De(o,e),"]=",De(n,e)].join("")]};case"bracket":return t=>(r,n)=>n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?r:n===null?[...r,[De(t,e),"[]"].join("")]:[...r,[De(t,e),"[]=",De(n,e)].join("")];case"colon-list-separator":return t=>(r,n)=>n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?r:n===null?[...r,[De(t,e),":list="].join("")]:[...r,[De(t,e),":list=",De(n,e)].join("")];case"comma":case"separator":case"bracket-separator":{let t=e.arrayFormat==="bracket-separator"?"[]=":"=";return r=>(n,o)=>o===void 0||e.skipNull&&o===null||e.skipEmptyString&&o===""?n:(o=o===null?"":o,n.length===0?[[De(r,e),t,De(o,e)].join("")]:[[n,De(o,e)].join(e.arrayFormatSeparator)])}default:return t=>(r,n)=>n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?r:n===null?[...r,De(t,e)]:[...r,[De(t,e),"=",De(n,e)].join("")]}}function O6(e){let t;switch(e.arrayFormat){case"index":return(r,n,o)=>{if(t=/\[(\d*)\]$/.exec(r),r=r.replace(/\[\d*\]$/,""),!t){o[r]=n;return}o[r]===void 0&&(o[r]={}),o[r][t[1]]=n};case"bracket":return(r,n,o)=>{if(t=/(\[\])$/.exec(r),r=r.replace(/\[\]$/,""),!t){o[r]=n;return}if(o[r]===void 0){o[r]=[n];return}o[r]=[].concat(o[r],n)};case"colon-list-separator":return(r,n,o)=>{if(t=/(:list)$/.exec(r),r=r.replace(/:list$/,""),!t){o[r]=n;return}if(o[r]===void 0){o[r]=[n];return}o[r]=[].concat(o[r],n)};case"comma":case"separator":return(r,n,o)=>{let i=typeof n=="string"&&n.includes(e.arrayFormatSeparator),a=typeof n=="string"&&!i&&Lr(n,e).includes(e.arrayFormatSeparator);n=a?Lr(n,e):n;let s=i||a?n.split(e.arrayFormatSeparator).map(u=>Lr(u,e)):n===null?n:Lr(n,e);o[r]=s};case"bracket-separator":return(r,n,o)=>{let i=/(\[\])$/.test(r);if(r=r.replace(/\[\]$/,""),!i){o[r]=n&&Lr(n,e);return}let a=n===null?[]:n.split(e.arrayFormatSeparator).map(s=>Lr(s,e));if(o[r]===void 0){o[r]=a;return}o[r]=[].concat(o[r],a)};default:return(r,n,o)=>{if(o[r]===void 0){o[r]=n;return}o[r]=[].concat(o[r],n)}}}function ck(e){if(typeof e!="string"||e.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function De(e,t){return t.encode?t.strict?A6(e):encodeURIComponent(e):e}function Lr(e,t){return t.decode?I6(e):e}function lk(e){return Array.isArray(e)?e.sort():typeof e=="object"?lk(Object.keys(e)).sort((t,r)=>Number(t)-Number(r)).map(t=>e[t]):e}function fk(e){let t=e.indexOf("#");return t!==-1&&(e=e.slice(0,t)),e}function D6(e){let t="",r=e.indexOf("#");return r!==-1&&(t=e.slice(r)),t}function pk(e){e=fk(e);let t=e.indexOf("?");return t===-1?"":e.slice(t+1)}function sk(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&typeof e=="string"&&e.trim()!==""?e=Number(e):t.parseBooleans&&e!==null&&(e.toLowerCase()==="true"||e.toLowerCase()==="false")&&(e=e.toLowerCase()==="true"),e}function dk(e,t){t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t),ck(t.arrayFormatSeparator);let r=O6(t),n=Object.create(null);if(typeof e!="string"||(e=e.trim().replace(/^[?#&]/,""),!e))return n;for(let o of e.split("&")){if(o==="")continue;let[i,a]=uk(t.decode?o.replace(/\+/g," "):o,"=");a=a===void 0?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?a:Lr(a,t),r(Lr(i,t),a,n)}for(let o of Object.keys(n)){let i=n[o];if(typeof i=="object"&&i!==null)for(let a of Object.keys(i))i[a]=sk(i[a],t);else n[o]=sk(i,t)}return t.sort===!1?n:(t.sort===!0?Object.keys(n).sort():Object.keys(n).sort(t.sort)).reduce((o,i)=>{let a=n[i];return a&&typeof a=="object"&&!Array.isArray(a)?o[i]=lk(a):o[i]=a,o},Object.create(null))}dt.extract=pk;dt.parse=dk;dt.stringify=(e,t)=>{if(!e)return"";t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t),ck(t.arrayFormatSeparator);let r=a=>t.skipNull&&C6(e[a])||t.skipEmptyString&&e[a]==="",n=T6(t),o={};for(let a of Object.keys(e))r(a)||(o[a]=e[a]);let i=Object.keys(o);return t.sort!==!1&&i.sort(t.sort),i.map(a=>{let s=e[a];return s===void 0?"":s===null?De(a,t):Array.isArray(s)?s.length===0&&t.arrayFormat==="bracket-separator"?De(a,t)+"[]":s.reduce(n(a),[]).join("&"):De(a,t)+"="+De(s,t)}).filter(a=>a.length>0).join("&")};dt.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);let[r,n]=uk(e,"#");return Object.assign({url:r.split("?")[0]||"",query:dk(pk(e),t)},t&&t.parseFragmentIdentifier&&n?{fragmentIdentifier:Lr(n,t)}:{})};dt.stringifyUrl=(e,t)=>{t=Object.assign({encode:!0,strict:!0,[Jm]:!0},t);let r=fk(e.url).split("?")[0]||"",n=dt.extract(e.url),o=dt.parse(n,{sort:!1}),i=Object.assign(o,e.query),a=dt.stringify(i,t);a&&(a=`?${a}`);let s=D6(e.url);return e.fragmentIdentifier&&(s=`#${t[Jm]?De(e.fragmentIdentifier,t):e.fragmentIdentifier}`),`${r}${a}${s}`};dt.pick=(e,t,r)=>{r=Object.assign({parseFragmentIdentifier:!0,[Jm]:!1},r);let{url:n,query:o,fragmentIdentifier:i}=dt.parseUrl(e,r);return dt.stringifyUrl({url:n,query:_6(o,t),fragmentIdentifier:i},r)};dt.exclude=(e,t,r)=>{let n=Array.isArray(t)?o=>!t.includes(o):(o,i)=>!t(o,i);return dt.pick(e,n,r)}});var uh=b((oue,xk)=>{"use strict";var wk=Object.prototype.toString;xk.exports=function(t){var r=wk.call(t),n=r==="[object Arguments]";return n||(n=r!=="[object Array]"&&t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&wk.call(t.callee)==="[object Function]"),n}});var Ok=b((iue,Tk)=>{"use strict";var Ck;Object.keys||(bs=Object.prototype.hasOwnProperty,ch=Object.prototype.toString,Ek=uh(),lh=Object.prototype.propertyIsEnumerable,Sk=!lh.call({toString:null},"toString"),kk=lh.call(function(){},"prototype"),vs=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],dl=function(e){var t=e.constructor;return t&&t.prototype===e},Ak={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},Ik=function(){if(typeof window>"u")return!1;for(var e in window)try{if(!Ak["$"+e]&&bs.call(window,e)&&window[e]!==null&&typeof window[e]=="object")try{dl(window[e])}catch{return!0}}catch{return!0}return!1}(),_k=function(e){if(typeof window>"u"||!Ik)return dl(e);try{return dl(e)}catch{return!1}},Ck=function(t){var r=t!==null&&typeof t=="object",n=ch.call(t)==="[object Function]",o=Ek(t),i=r&&ch.call(t)==="[object String]",a=[];if(!r&&!n&&!o)throw new TypeError("Object.keys called on a non-object");var s=kk&&n;if(i&&t.length>0&&!bs.call(t,0))for(var u=0;u<t.length;++u)a.push(String(u));if(o&&t.length>0)for(var l=0;l<t.length;++l)a.push(String(l));else for(var c in t)!(s&&c==="prototype")&&bs.call(t,c)&&a.push(String(c));if(Sk)for(var f=_k(t),p=0;p<vs.length;++p)!(f&&vs[p]==="constructor")&&bs.call(t,vs[p])&&a.push(vs[p]);return a});var bs,ch,Ek,lh,Sk,kk,vs,dl,Ak,Ik,_k;Tk.exports=Ck});var Pk=b((aue,Nk)=>{"use strict";var R6=Array.prototype.slice,M6=uh(),Dk=Object.keys,ml=Dk?function(t){return Dk(t)}:Ok(),Fk=Object.keys;ml.shim=function(){if(Object.keys){var t=function(){var r=Object.keys(arguments);return r&&r.length===arguments.length}(1,2);t||(Object.keys=function(n){return M6(n)?Fk(R6.call(n)):Fk(n)})}else Object.keys=ml;return Object.keys||ml};Nk.exports=ml});var fh=b((sue,Rk)=>{"use strict";Rk.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var o=42;t[r]=o;for(r in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var i=Object.getOwnPropertySymbols(t);if(i.length!==1||i[0]!==r||!Object.prototype.propertyIsEnumerable.call(t,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(t,r);if(a.value!==o||a.enumerable!==!0)return!1}return!0}});var ph=b((uue,$k)=>{"use strict";var Mk=typeof Symbol<"u"&&Symbol,$6=fh();$k.exports=function(){return typeof Mk!="function"||typeof Symbol!="function"||typeof Mk("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:$6()}});var qk=b((cue,Lk)=>{"use strict";var L6="Function.prototype.bind called on incompatible ",dh=Array.prototype.slice,q6=Object.prototype.toString,B6="[object Function]";Lk.exports=function(t){var r=this;if(typeof r!="function"||q6.call(r)!==B6)throw new TypeError(L6+r);for(var n=dh.call(arguments,1),o,i=function(){if(this instanceof o){var c=r.apply(this,n.concat(dh.call(arguments)));return Object(c)===c?c:this}else return r.apply(t,n.concat(dh.call(arguments)))},a=Math.max(0,r.length-n.length),s=[],u=0;u<a;u++)s.push("$"+u);if(o=Function("binder","return function ("+s.join(",")+"){ return binder.apply(this,arguments); }")(i),r.prototype){var l=function(){};l.prototype=r.prototype,o.prototype=new l,l.prototype=null}return o}});var hl=b((lue,Bk)=>{"use strict";var j6=qk();Bk.exports=Function.prototype.bind||j6});var br=b((fue,jk)=>{"use strict";var z6=hl();jk.exports=z6.call(Function.call,Object.prototype.hasOwnProperty)});var he=b((pue,Vk)=>{"use strict";var pe,hi=SyntaxError,Hk=Function,mi=TypeError,mh=function(e){try{return Hk('"use strict"; return ('+e+").constructor;")()}catch{}},Kn=Object.getOwnPropertyDescriptor;if(Kn)try{Kn({},"")}catch{Kn=null}var hh=function(){throw new mi},W6=Kn?function(){try{return arguments.callee,hh}catch{try{return Kn(arguments,"callee").get}catch{return hh}}}():hh,pi=ph()(),vr=Object.getPrototypeOf||function(e){return e.__proto__},di={},U6=typeof Uint8Array>"u"?pe:vr(Uint8Array),Jn={"%AggregateError%":typeof AggregateError>"u"?pe:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?pe:ArrayBuffer,"%ArrayIteratorPrototype%":pi?vr([][Symbol.iterator]()):pe,"%AsyncFromSyncIteratorPrototype%":pe,"%AsyncFunction%":di,"%AsyncGenerator%":di,"%AsyncGeneratorFunction%":di,"%AsyncIteratorPrototype%":di,"%Atomics%":typeof Atomics>"u"?pe:Atomics,"%BigInt%":typeof BigInt>"u"?pe:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?pe:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?pe:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?pe:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?pe:Float32Array,"%Float64Array%":typeof Float64Array>"u"?pe:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?pe:FinalizationRegistry,"%Function%":Hk,"%GeneratorFunction%":di,"%Int8Array%":typeof Int8Array>"u"?pe:Int8Array,"%Int16Array%":typeof Int16Array>"u"?pe:Int16Array,"%Int32Array%":typeof Int32Array>"u"?pe:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":pi?vr(vr([][Symbol.iterator]())):pe,"%JSON%":typeof JSON=="object"?JSON:pe,"%Map%":typeof Map>"u"?pe:Map,"%MapIteratorPrototype%":typeof Map>"u"||!pi?pe:vr(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?pe:Promise,"%Proxy%":typeof Proxy>"u"?pe:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?pe:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?pe:Set,"%SetIteratorPrototype%":typeof Set>"u"||!pi?pe:vr(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?pe:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":pi?vr(""[Symbol.iterator]()):pe,"%Symbol%":pi?Symbol:pe,"%SyntaxError%":hi,"%ThrowTypeError%":W6,"%TypedArray%":U6,"%TypeError%":mi,"%Uint8Array%":typeof Uint8Array>"u"?pe:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?pe:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?pe:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?pe:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?pe:WeakMap,"%WeakRef%":typeof WeakRef>"u"?pe:WeakRef,"%WeakSet%":typeof WeakSet>"u"?pe:WeakSet};try{null.error}catch(e){zk=vr(vr(e)),Jn["%Error.prototype%"]=zk}var zk,H6=function e(t){var r;if(t==="%AsyncFunction%")r=mh("async function () {}");else if(t==="%GeneratorFunction%")r=mh("function* () {}");else if(t==="%AsyncGeneratorFunction%")r=mh("async function* () {}");else if(t==="%AsyncGenerator%"){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(t==="%AsyncIteratorPrototype%"){var o=e("%AsyncGenerator%");o&&(r=vr(o.prototype))}return Jn[t]=r,r},Wk={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},ws=hl(),gl=br(),V6=ws.call(Function.call,Array.prototype.concat),G6=ws.call(Function.apply,Array.prototype.splice),Uk=ws.call(Function.call,String.prototype.replace),yl=ws.call(Function.call,String.prototype.slice),K6=ws.call(Function.call,RegExp.prototype.exec),J6=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Z6=/\\(\\)?/g,Y6=function(t){var r=yl(t,0,1),n=yl(t,-1);if(r==="%"&&n!=="%")throw new hi("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new hi("invalid intrinsic syntax, expected opening `%`");var o=[];return Uk(t,J6,function(i,a,s,u){o[o.length]=s?Uk(u,Z6,"$1"):a||i}),o},Q6=function(t,r){var n=t,o;if(gl(Wk,n)&&(o=Wk[n],n="%"+o[0]+"%"),gl(Jn,n)){var i=Jn[n];if(i===di&&(i=H6(n)),typeof i>"u"&&!r)throw new mi("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:o,name:n,value:i}}throw new hi("intrinsic "+t+" does not exist!")};Vk.exports=function(t,r){if(typeof t!="string"||t.length===0)throw new mi("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new mi('"allowMissing" argument must be a boolean');if(K6(/^%?[^%]*%?$/,t)===null)throw new hi("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=Y6(t),o=n.length>0?n[0]:"",i=Q6("%"+o+"%",r),a=i.name,s=i.value,u=!1,l=i.alias;l&&(o=l[0],G6(n,V6([0,1],l)));for(var c=1,f=!0;c<n.length;c+=1){var p=n[c],d=yl(p,0,1),h=yl(p,-1);if((d==='"'||d==="'"||d==="`"||h==='"'||h==="'"||h==="`")&&d!==h)throw new hi("property names with quotes must have matching quotes");if((p==="constructor"||!f)&&(u=!0),o+="."+p,a="%"+o+"%",gl(Jn,a))s=Jn[a];else if(s!=null){if(!(p in s)){if(!r)throw new mi("base intrinsic for "+t+" exists, but the property is not available.");return}if(Kn&&c+1>=n.length){var g=Kn(s,p);f=!!g,f&&"get"in g&&!("originalValue"in g.get)?s=g.get:s=s[p]}else f=gl(s,p),s=s[p];f&&!u&&(Jn[a]=s)}}return s}});var bh=b((due,Gk)=>{"use strict";var X6=he(),gh=X6("%Object.defineProperty%",!0),yh=function(){if(gh)try{return gh({},"a",{value:1}),!0}catch{return!1}return!1};yh.hasArrayLengthDefineBug=function(){if(!yh())return null;try{return gh([],"length",{value:1}).length!==1}catch{return!0}};Gk.exports=yh});var bl=b((mue,Yk)=>{"use strict";var e9=Pk(),t9=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",r9=Object.prototype.toString,n9=Array.prototype.concat,Kk=Object.defineProperty,o9=function(e){return typeof e=="function"&&r9.call(e)==="[object Function]"},i9=bh()(),Jk=Kk&&i9,a9=function(e,t,r,n){if(t in e){if(n===!0){if(e[t]===r)return}else if(!o9(n)||!n())return}Jk?Kk(e,t,{configurable:!0,enumerable:!1,value:r,writable:!0}):e[t]=r},Zk=function(e,t){var r=arguments.length>2?arguments[2]:{},n=e9(t);t9&&(n=n9.call(n,Object.getOwnPropertySymbols(t)));for(var o=0;o<n.length;o+=1)a9(e,n[o],t[n[o]],r[n[o]])};Zk.supportsDescriptors=!!Jk;Yk.exports=Zk});var tA=b((hue,eA)=>{"use strict";var s9=br(),Xk=typeof Symbol=="function"&&typeof Symbol.unscopables=="symbol",u9=Xk&&Array.prototype[Symbol.unscopables],Qk=TypeError;eA.exports=function(t){if(typeof t!="string"||!t)throw new Qk("method must be a non-empty string");if(!s9(Array.prototype,t))throw new Qk("method must be on Array.prototype");Xk&&(u9[t]=!0)}});var wh=b((gue,vl)=>{"use strict";var vh=hl(),gi=he(),oA=gi("%Function.prototype.apply%"),iA=gi("%Function.prototype.call%"),aA=gi("%Reflect.apply%",!0)||vh.call(iA,oA),rA=gi("%Object.getOwnPropertyDescriptor%",!0),Zn=gi("%Object.defineProperty%",!0),c9=gi("%Math.max%");if(Zn)try{Zn({},"a",{value:1})}catch{Zn=null}vl.exports=function(t){var r=aA(vh,iA,arguments);if(rA&&Zn){var n=rA(r,"length");n.configurable&&Zn(r,"length",{value:1+c9(0,t.length-(arguments.length-1))})}return r};var nA=function(){return aA(vh,oA,arguments)};Zn?Zn(vl.exports,"apply",{value:nA}):vl.exports.apply=nA});var wr=b((yue,cA)=>{"use strict";var sA=he(),uA=wh(),l9=uA(sA("String.prototype.indexOf"));cA.exports=function(t,r){var n=sA(t,!!r);return typeof n=="function"&&l9(t,".prototype.")>-1?uA(n):n}});var xh=b((bue,fA)=>{"use strict";var f9=he(),lA=f9("%Array%"),p9=!lA.isArray&&wr()("Object.prototype.toString");fA.exports=lA.isArray||function(t){return p9(t)==="[object Array]"}});var Eh=b((vue,pA)=>{"use strict";pA.exports=xh()});var hA=b((wue,mA)=>{"use strict";var dA=he(),d9=wr(),m9=dA("%TypeError%"),h9=Eh(),g9=dA("%Reflect.apply%",!0)||d9("Function.prototype.apply");mA.exports=function(t,r){var n=arguments.length>2?arguments[2]:[];if(!h9(n))throw new m9("Assertion failed: optional `argumentsList`, if provided, must be a List");return g9(t,r,n)}});var yi=b((xue,gA)=>{"use strict";gA.exports=function(t){return typeof t=="string"||typeof t=="symbol"}});var bA=b((Eue,yA)=>{"use strict";var y9=he(),wl=y9("%Object.getOwnPropertyDescriptor%",!0);if(wl)try{wl([],"length")}catch{wl=null}yA.exports=wl});var Sh=b((Sue,vA)=>{"use strict";var b9=he(),v9=br(),w9=b9("%TypeError%");vA.exports=function(t,r){if(t.Type(r)!=="Object")return!1;var n={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};for(var o in r)if(v9(r,o)&&!n[o])return!1;if(t.IsDataDescriptor(r)&&t.IsAccessorDescriptor(r))throw new w9("Property Descriptors may not be both accessor and data descriptors");return!0}});var xA=b((kue,wA)=>{"use strict";wA.exports=function(t){if(t===null)return"Null";if(typeof t>"u")return"Undefined";if(typeof t=="function"||typeof t=="object")return"Object";if(typeof t=="number")return"Number";if(typeof t=="boolean")return"Boolean";if(typeof t=="string")return"String"}});var it=b((Aue,EA)=>{"use strict";var x9=xA();EA.exports=function(t){return typeof t=="symbol"?"Symbol":typeof t=="bigint"?"BigInt":x9(t)}});var AA=b((Iue,kA)=>{"use strict";var SA=br();kA.exports=function(t){return SA(t,"[[StartIndex]]")&&SA(t,"[[EndIndex]]")&&t["[[StartIndex]]"]>=0&&t["[[EndIndex]]"]>=t["[[StartIndex]]"]&&String(parseInt(t["[[StartIndex]]"],10))===String(t["[[StartIndex]]"])&&String(parseInt(t["[[EndIndex]]"],10))===String(t["[[EndIndex]]"])}});var xs=b((_ue,TA)=>{"use strict";var IA=he(),_A=IA("%TypeError%"),E9=IA("%SyntaxError%"),Ht=br(),S9=AA(),CA={"Property Descriptor":function(t){var r={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};if(!t)return!1;for(var n in t)if(Ht(t,n)&&!r[n])return!1;var o=Ht(t,"[[Value]]"),i=Ht(t,"[[Get]]")||Ht(t,"[[Set]]");if(o&&i)throw new _A("Property Descriptors may not be both accessor and data descriptors");return!0},"Match Record":S9,"Iterator Record":function(t){return Ht(t,"[[Iterator]]")&&Ht(t,"[[NextMethod]]")&&Ht(t,"[[Done]]")},"PromiseCapability Record":function(t){return!!t&&Ht(t,"[[Resolve]]")&&typeof t["[[Resolve]]"]=="function"&&Ht(t,"[[Reject]]")&&typeof t["[[Reject]]"]=="function"&&Ht(t,"[[Promise]]")&&t["[[Promise]]"]&&typeof t["[[Promise]]"].then=="function"},"AsyncGeneratorRequest Record":function(t){return!!t&&Ht(t,"[[Completion]]")&&Ht(t,"[[Capability]]")&&CA["PromiseCapability Record"](t["[[Capability]]"])}};TA.exports=function(t,r,n,o){var i=CA[r];if(typeof i!="function")throw new E9("unknown record type: "+r);if(t(o)!=="Object"||!i(o))throw new _A(n+" must be a "+r)}});var xl=b((Cue,DA)=>{"use strict";var OA=br(),k9=it(),A9=xs();DA.exports=function(t){return!(typeof t>"u"||(A9(k9,"Property Descriptor","Desc",t),!OA(t,"[[Get]]")&&!OA(t,"[[Set]]")))}});var El=b((Tue,NA)=>{"use strict";var FA=br(),I9=it(),_9=xs();NA.exports=function(t){return!(typeof t>"u"||(_9(I9,"Property Descriptor","Desc",t),!FA(t,"[[Value]]")&&!FA(t,"[[Writable]]")))}});var kh=b((Oue,PA)=>{"use strict";PA.exports=function(t){return t===null||typeof t!="function"&&typeof t!="object"}});var LA=b((Due,$A)=>{"use strict";var MA=he(),C9=MA("%Object.preventExtensions%",!0),T9=MA("%Object.isExtensible%",!0),RA=kh();$A.exports=C9?function(t){return!RA(t)&&T9(t)}:function(t){return!RA(t)}});var BA=b((Fue,qA)=>{"use strict";qA.exports=function(t){return!!t}});var Th=b((Nue,WA)=>{"use strict";var zA=Function.prototype.toString,bi=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,Ih,Sl;if(typeof bi=="function"&&typeof Object.defineProperty=="function")try{Ih=Object.defineProperty({},"length",{get:function(){throw Sl}}),Sl={},bi(function(){throw 42},null,Ih)}catch(e){e!==Sl&&(bi=null)}else bi=null;var O9=/^\s*class\b/,_h=function(t){try{var r=zA.call(t);return O9.test(r)}catch{return!1}},Ah=function(t){try{return _h(t)?!1:(zA.call(t),!0)}catch{return!1}},kl=Object.prototype.toString,D9="[object Object]",F9="[object Function]",N9="[object GeneratorFunction]",P9="[object HTMLAllCollection]",R9="[object HTML document.all class]",M9="[object HTMLCollection]",$9=typeof Symbol=="function"&&!!Symbol.toStringTag,L9=!(0 in[,]),Ch=function(){return!1};typeof document=="object"&&(jA=document.all,kl.call(jA)===kl.call(document.all)&&(Ch=function(t){if((L9||!t)&&(typeof t>"u"||typeof t=="object"))try{var r=kl.call(t);return(r===P9||r===R9||r===M9||r===D9)&&t("")==null}catch{}return!1}));var jA;WA.exports=bi?function(t){if(Ch(t))return!0;if(!t||typeof t!="function"&&typeof t!="object")return!1;try{bi(t,null,Ih)}catch(r){if(r!==Sl)return!1}return!_h(t)&&Ah(t)}:function(t){if(Ch(t))return!0;if(!t||typeof t!="function"&&typeof t!="object")return!1;if($9)return Ah(t);if(_h(t))return!1;var r=kl.call(t);return r!==F9&&r!==N9&&!/^\[object HTML/.test(r)?!1:Ah(t)}});var Oh=b((Pue,UA)=>{"use strict";UA.exports=Th()});var GA=b((Rue,VA)=>{"use strict";var xr=br(),q9=he(),Al=q9("%TypeError%"),B9=it(),Dh=BA(),HA=Oh();VA.exports=function(t){if(B9(t)!=="Object")throw new Al("ToPropertyDescriptor requires an object");var r={};if(xr(t,"enumerable")&&(r["[[Enumerable]]"]=Dh(t.enumerable)),xr(t,"configurable")&&(r["[[Configurable]]"]=Dh(t.configurable)),xr(t,"value")&&(r["[[Value]]"]=t.value),xr(t,"writable")&&(r["[[Writable]]"]=Dh(t.writable)),xr(t,"get")){var n=t.get;if(typeof n<"u"&&!HA(n))throw new Al("getter must be a function");r["[[Get]]"]=n}if(xr(t,"set")){var o=t.set;if(typeof o<"u"&&!HA(o))throw new Al("setter must be a function");r["[[Set]]"]=o}if((xr(r,"[[Get]]")||xr(r,"[[Set]]"))&&(xr(r,"[[Value]]")||xr(r,"[[Writable]]")))throw new Al("Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");return r}});var Es=b((Mue,KA)=>{"use strict";KA.exports=Number.isNaN||function(t){return t!==t}});var Fh=b(($ue,ZA)=>{"use strict";var JA=Es();ZA.exports=function(t,r){return t===r?t===0?1/t===1/r:!0:JA(t)&&JA(r)}});var tI=b((Lue,eI)=>{"use strict";var QA=bh(),j9=he(),YA=QA()&&j9("%Object.defineProperty%",!0),XA=QA.hasArrayLengthDefineBug(),z9=XA&&xh(),W9=wr(),U9=W9("Object.prototype.propertyIsEnumerable");eI.exports=function(t,r,n,o,i,a){if(!YA){if(!t(a)||!a["[[Configurable]]"]||!a["[[Writable]]"]||i in o&&U9(o,i)!==!!a["[[Enumerable]]"])return!1;var s=a["[[Value]]"];return o[i]=s,r(o[i],s)}return XA&&i==="length"&&"[[Value]]"in a&&z9(o)&&o.length!==a["[[Value]]"]?(o.length=a["[[Value]]"],o.length===a["[[Value]]"]):(YA(o,i,n(a)),!0)}});var nI=b((que,rI)=>{"use strict";rI.exports=function(t,r){return!!r&&typeof r=="object"&&"[[Enumerable]]"in r&&"[[Configurable]]"in r&&(t.IsAccessorDescriptor(r)||t.IsDataDescriptor(r))}});var iI=b((Bue,oI)=>{"use strict";oI.exports=function(t){if(typeof t>"u")return t;var r={};return"[[Value]]"in t&&(r.value=t["[[Value]]"]),"[[Writable]]"in t&&(r.writable=!!t["[[Writable]]"]),"[[Get]]"in t&&(r.get=t["[[Get]]"]),"[[Set]]"in t&&(r.set=t["[[Set]]"]),"[[Enumerable]]"in t&&(r.enumerable=!!t["[[Enumerable]]"]),"[[Configurable]]"in t&&(r.configurable=!!t["[[Configurable]]"]),r}});var sI=b((jue,aI)=>{"use strict";var H9=xs(),V9=iI(),G9=it();aI.exports=function(t){return typeof t<"u"&&H9(G9,"Property Descriptor","Desc",t),V9(t)}});var cI=b((zue,uI)=>{"use strict";var K9=xs(),J9=xl(),Z9=El(),Y9=it();uI.exports=function(t){return typeof t>"u"?!1:(K9(Y9,"Property Descriptor","Desc",t),!J9(t)&&!Z9(t))}});var pI=b((Wue,fI)=>{"use strict";var Q9=he(),vi=Q9("%TypeError%"),Ss=tI(),X9=nI(),lI=Sh(),ks=sI(),qr=xl(),Er=El(),eB=cI(),tB=yi(),Sr=Fh(),wi=it();fI.exports=function(t,r,n,o,i){var a=wi(t);if(a!=="Undefined"&&a!=="Object")throw new vi("Assertion failed: O must be undefined or an Object");if(!tB(r))throw new vi("Assertion failed: P must be a Property Key");if(wi(n)!=="Boolean")throw new vi("Assertion failed: extensible must be a Boolean");if(!lI({Type:wi,IsDataDescriptor:Er,IsAccessorDescriptor:qr},o))throw new vi("Assertion failed: Desc must be a Property Descriptor");if(wi(i)!=="Undefined"&&!lI({Type:wi,IsDataDescriptor:Er,IsAccessorDescriptor:qr},i))throw new vi("Assertion failed: current must be a Property Descriptor, or undefined");if(wi(i)==="Undefined")return n?a==="Undefined"?!0:qr(o)?Ss(Er,Sr,ks,t,r,o):Ss(Er,Sr,ks,t,r,{"[[Configurable]]":!!o["[[Configurable]]"],"[[Enumerable]]":!!o["[[Enumerable]]"],"[[Value]]":o["[[Value]]"],"[[Writable]]":!!o["[[Writable]]"]}):!1;if(!X9({IsAccessorDescriptor:qr,IsDataDescriptor:Er},i))throw new vi("`current`, when present, must be a fully populated and valid Property Descriptor");if(!i["[[Configurable]]"]){if("[[Configurable]]"in o&&o["[[Configurable]]"]||"[[Enumerable]]"in o&&!Sr(o["[[Enumerable]]"],i["[[Enumerable]]"])||!eB(o)&&!Sr(qr(o),qr(i)))return!1;if(qr(i)){if("[[Get]]"in o&&!Sr(o["[[Get]]"],i["[[Get]]"])||"[[Set]]"in o&&!Sr(o["[[Set]]"],i["[[Set]]"]))return!1}else if(!i["[[Writable]]"]&&("[[Writable]]"in o&&o["[[Writable]]"]||"[[Value]]"in o&&!Sr(o["[[Value]]"],i["[[Value]]"])))return!1}if(a!=="Undefined"){var s,u;return Er(i)&&qr(o)?(s=("[[Configurable]]"in o?o:i)["[[Configurable]]"],u=("[[Enumerable]]"in o?o:i)["[[Enumerable]]"],Ss(Er,Sr,ks,t,r,{"[[Configurable]]":!!s,"[[Enumerable]]":!!u,"[[Get]]":("[[Get]]"in o?o:i)["[[Get]]"],"[[Set]]":("[[Set]]"in o?o:i)["[[Set]]"]})):qr(i)&&Er(o)?(s=("[[Configurable]]"in o?o:i)["[[Configurable]]"],u=("[[Enumerable]]"in o?o:i)["[[Enumerable]]"],Ss(Er,Sr,ks,t,r,{"[[Configurable]]":!!s,"[[Enumerable]]":!!u,"[[Value]]":("[[Value]]"in o?o:i)["[[Value]]"],"[[Writable]]":!!("[[Writable]]"in o?o:i)["[[Writable]]"]})):Ss(Er,Sr,ks,t,r,o)}return!0}});var vI=b((Uue,bI)=>{"use strict";var yI=he(),dI=bA(),mI=yI("%SyntaxError%"),Nh=yI("%TypeError%"),rB=Sh(),hI=xl(),nB=El(),oB=LA(),iB=yi(),aB=GA(),sB=Fh(),gI=it(),uB=pI();bI.exports=function(t,r,n){if(gI(t)!=="Object")throw new Nh("Assertion failed: O must be an Object");if(!iB(r))throw new Nh("Assertion failed: P must be a Property Key");if(!rB({Type:gI,IsDataDescriptor:nB,IsAccessorDescriptor:hI},n))throw new Nh("Assertion failed: Desc must be a Property Descriptor");if(!dI){if(hI(n))throw new mI("This environment does not support accessor property descriptors.");var o=!(r in t)&&n["[[Writable]]"]&&n["[[Enumerable]]"]&&n["[[Configurable]]"]&&"[[Value]]"in n,i=r in t&&(!("[[Configurable]]"in n)||n["[[Configurable]]"])&&(!("[[Enumerable]]"in n)||n["[[Enumerable]]"])&&(!("[[Writable]]"in n)||n["[[Writable]]"])&&"[[Value]]"in n;if(o||i)return t[r]=n["[[Value]]"],sB(t[r],n["[[Value]]"]);throw new mI("This environment does not support defining non-writable, non-enumerable, or non-configurable properties")}var a=dI(t,r),s=a&&aB(a),u=oB(t);return uB(t,r,u,n,s)}});var EI=b((Hue,xI)=>{"use strict";var cB=he(),wI=cB("%TypeError%"),lB=yi(),fB=vI(),pB=it();xI.exports=function(t,r,n){if(pB(t)!=="Object")throw new wI("Assertion failed: Type(O) is not Object");if(!lB(r))throw new wI("Assertion failed: IsPropertyKey(P) is not true");var o={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Value]]":n,"[[Writable]]":!0};return fB(t,r,o)}});var kI=b((Vue,SI)=>{"use strict";var dB=he(),Ph=dB("%TypeError%"),mB=EI(),hB=yi(),gB=it();SI.exports=function(t,r,n){if(gB(t)!=="Object")throw new Ph("Assertion failed: Type(O) is not Object");if(!hB(r))throw new Ph("Assertion failed: IsPropertyKey(P) is not true");var o=mB(t,r,n);if(!o)throw new Ph("unable to create data property");return o}});var II=b((Gue,AI)=>{AI.exports=require("util").inspect});var Gh=b((Kue,HI)=>{var Uh=typeof Map=="function"&&Map.prototype,Rh=Object.getOwnPropertyDescriptor&&Uh?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,_l=Uh&&Rh&&typeof Rh.get=="function"?Rh.get:null,_I=Uh&&Map.prototype.forEach,Hh=typeof Set=="function"&&Set.prototype,Mh=Object.getOwnPropertyDescriptor&&Hh?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Cl=Hh&&Mh&&typeof Mh.get=="function"?Mh.get:null,CI=Hh&&Set.prototype.forEach,yB=typeof WeakMap=="function"&&WeakMap.prototype,Is=yB?WeakMap.prototype.has:null,bB=typeof WeakSet=="function"&&WeakSet.prototype,_s=bB?WeakSet.prototype.has:null,vB=typeof WeakRef=="function"&&WeakRef.prototype,TI=vB?WeakRef.prototype.deref:null,wB=Boolean.prototype.valueOf,xB=Object.prototype.toString,EB=Function.prototype.toString,SB=String.prototype.match,Vh=String.prototype.slice,mn=String.prototype.replace,kB=String.prototype.toUpperCase,OI=String.prototype.toLowerCase,qI=RegExp.prototype.test,DI=Array.prototype.concat,kr=Array.prototype.join,AB=Array.prototype.slice,FI=Math.floor,qh=typeof BigInt=="function"?BigInt.prototype.valueOf:null,$h=Object.getOwnPropertySymbols,Bh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,xi=typeof Symbol=="function"&&typeof Symbol.iterator=="object",tt=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===xi||"symbol")?Symbol.toStringTag:null,BI=Object.prototype.propertyIsEnumerable,NI=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function PI(e,t){if(e===1/0||e===-1/0||e!==e||e&&e>-1e3&&e<1e3||qI.call(/e/,t))return t;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof e=="number"){var n=e<0?-FI(-e):FI(e);if(n!==e){var o=String(n),i=Vh.call(t,o.length+1);return mn.call(o,r,"$&_")+"."+mn.call(mn.call(i,/([0-9]{3})/g,"$&_"),/_$/,"")}}return mn.call(t,r,"$&_")}var jh=II(),RI=jh.custom,MI=zI(RI)?RI:null;HI.exports=function e(t,r,n,o){var i=r||{};if(dn(i,"quoteStyle")&&i.quoteStyle!=="single"&&i.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(dn(i,"maxStringLength")&&(typeof i.maxStringLength=="number"?i.maxStringLength<0&&i.maxStringLength!==1/0:i.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var a=dn(i,"customInspect")?i.customInspect:!0;if(typeof a!="boolean"&&a!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(dn(i,"indent")&&i.indent!==null&&i.indent!=="	"&&!(parseInt(i.indent,10)===i.indent&&i.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(dn(i,"numericSeparator")&&typeof i.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var s=i.numericSeparator;if(typeof t>"u")return"undefined";if(t===null)return"null";if(typeof t=="boolean")return t?"true":"false";if(typeof t=="string")return UI(t,i);if(typeof t=="number"){if(t===0)return 1/0/t>0?"0":"-0";var u=String(t);return s?PI(t,u):u}if(typeof t=="bigint"){var l=String(t)+"n";return s?PI(t,l):l}var c=typeof i.depth>"u"?5:i.depth;if(typeof n>"u"&&(n=0),n>=c&&c>0&&typeof t=="object")return zh(t)?"[Array]":"[Object]";var f=WB(i,n);if(typeof o>"u")o=[];else if(WI(o,t)>=0)return"[Circular]";function p(I,j,z){if(j&&(o=AB.call(o),o.push(j)),z){var H={depth:i.depth};return dn(i,"quoteStyle")&&(H.quoteStyle=i.quoteStyle),e(I,H,n+1,o)}return e(I,i,n+1,o)}if(typeof t=="function"&&!$I(t)){var d=PB(t),h=Il(t,p);return"[Function"+(d?": "+d:" (anonymous)")+"]"+(h.length>0?" { "+kr.call(h,", ")+" }":"")}if(zI(t)){var g=xi?mn.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):Bh.call(t);return typeof t=="object"&&!xi?As(g):g}if(BB(t)){for(var y="<"+OI.call(String(t.nodeName)),w=t.attributes||[],x=0;x<w.length;x++)y+=" "+w[x].name+"="+jI(IB(w[x].value),"double",i);return y+=">",t.childNodes&&t.childNodes.length&&(y+="..."),y+="</"+OI.call(String(t.nodeName))+">",y}if(zh(t)){if(t.length===0)return"[]";var S=Il(t,p);return f&&!zB(S)?"["+Wh(S,f)+"]":"[ "+kr.call(S,", ")+" ]"}if(CB(t)){var O=Il(t,p);return!("cause"in Error.prototype)&&"cause"in t&&!BI.call(t,"cause")?"{ ["+String(t)+"] "+kr.call(DI.call("[cause]: "+p(t.cause),O),", ")+" }":O.length===0?"["+String(t)+"]":"{ ["+String(t)+"] "+kr.call(O,", ")+" }"}if(typeof t=="object"&&a){if(MI&&typeof t[MI]=="function"&&jh)return jh(t,{depth:c-n});if(a!=="symbol"&&typeof t.inspect=="function")return t.inspect()}if(RB(t)){var F=[];return _I&&_I.call(t,function(I,j){F.push(p(j,t,!0)+" => "+p(I,t))}),LI("Map",_l.call(t),F,f)}if(LB(t)){var D=[];return CI&&CI.call(t,function(I){D.push(p(I,t))}),LI("Set",Cl.call(t),D,f)}if(MB(t))return Lh("WeakMap");if(qB(t))return Lh("WeakSet");if($B(t))return Lh("WeakRef");if(OB(t))return As(p(Number(t)));if(FB(t))return As(p(qh.call(t)));if(DB(t))return As(wB.call(t));if(TB(t))return As(p(String(t)));if(!_B(t)&&!$I(t)){var P=Il(t,p),R=NI?NI(t)===Object.prototype:t instanceof Object||t.constructor===Object,E=t instanceof Object?"":"null prototype",T=!R&&tt&&Object(t)===t&&tt in t?Vh.call(hn(t),8,-1):E?"Object":"",v=R||typeof t.constructor!="function"?"":t.constructor.name?t.constructor.name+" ":"",A=v+(T||E?"["+kr.call(DI.call([],T||[],E||[]),": ")+"] ":"");return P.length===0?A+"{}":f?A+"{"+Wh(P,f)+"}":A+"{ "+kr.call(P,", ")+" }"}return String(t)};function jI(e,t,r){var n=(r.quoteStyle||t)==="double"?'"':"'";return n+e+n}function IB(e){return mn.call(String(e),/"/g,"&quot;")}function zh(e){return hn(e)==="[object Array]"&&(!tt||!(typeof e=="object"&&tt in e))}function _B(e){return hn(e)==="[object Date]"&&(!tt||!(typeof e=="object"&&tt in e))}function $I(e){return hn(e)==="[object RegExp]"&&(!tt||!(typeof e=="object"&&tt in e))}function CB(e){return hn(e)==="[object Error]"&&(!tt||!(typeof e=="object"&&tt in e))}function TB(e){return hn(e)==="[object String]"&&(!tt||!(typeof e=="object"&&tt in e))}function OB(e){return hn(e)==="[object Number]"&&(!tt||!(typeof e=="object"&&tt in e))}function DB(e){return hn(e)==="[object Boolean]"&&(!tt||!(typeof e=="object"&&tt in e))}function zI(e){if(xi)return e&&typeof e=="object"&&e instanceof Symbol;if(typeof e=="symbol")return!0;if(!e||typeof e!="object"||!Bh)return!1;try{return Bh.call(e),!0}catch{}return!1}function FB(e){if(!e||typeof e!="object"||!qh)return!1;try{return qh.call(e),!0}catch{}return!1}var NB=Object.prototype.hasOwnProperty||function(e){return e in this};function dn(e,t){return NB.call(e,t)}function hn(e){return xB.call(e)}function PB(e){if(e.name)return e.name;var t=SB.call(EB.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}function WI(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}function RB(e){if(!_l||!e||typeof e!="object")return!1;try{_l.call(e);try{Cl.call(e)}catch{return!0}return e instanceof Map}catch{}return!1}function MB(e){if(!Is||!e||typeof e!="object")return!1;try{Is.call(e,Is);try{_s.call(e,_s)}catch{return!0}return e instanceof WeakMap}catch{}return!1}function $B(e){if(!TI||!e||typeof e!="object")return!1;try{return TI.call(e),!0}catch{}return!1}function LB(e){if(!Cl||!e||typeof e!="object")return!1;try{Cl.call(e);try{_l.call(e)}catch{return!0}return e instanceof Set}catch{}return!1}function qB(e){if(!_s||!e||typeof e!="object")return!1;try{_s.call(e,_s);try{Is.call(e,Is)}catch{return!0}return e instanceof WeakSet}catch{}return!1}function BB(e){return!e||typeof e!="object"?!1:typeof HTMLElement<"u"&&e instanceof HTMLElement?!0:typeof e.nodeName=="string"&&typeof e.getAttribute=="function"}function UI(e,t){if(e.length>t.maxStringLength){var r=e.length-t.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return UI(Vh.call(e,0,t.maxStringLength),t)+n}var o=mn.call(mn.call(e,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,jB);return jI(o,"single",t)}function jB(e){var t=e.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return r?"\\"+r:"\\x"+(t<16?"0":"")+kB.call(t.toString(16))}function As(e){return"Object("+e+")"}function Lh(e){return e+" { ? }"}function LI(e,t,r,n){var o=n?Wh(r,n):kr.call(r,", ");return e+" ("+t+") {"+o+"}"}function zB(e){for(var t=0;t<e.length;t++)if(WI(e[t],`
`)>=0)return!1;return!0}function WB(e,t){var r;if(e.indent==="	")r="	";else if(typeof e.indent=="number"&&e.indent>0)r=kr.call(Array(e.indent+1)," ");else return null;return{base:r,prev:kr.call(Array(t+1),r)}}function Wh(e,t){if(e.length===0)return"";var r=`
`+t.prev+t.base;return r+kr.call(e,","+r)+`
`+t.prev}function Il(e,t){var r=zh(e),n=[];if(r){n.length=e.length;for(var o=0;o<e.length;o++)n[o]=dn(e,o)?t(e[o],e):""}var i=typeof $h=="function"?$h(e):[],a;if(xi){a={};for(var s=0;s<i.length;s++)a["$"+i[s]]=i[s]}for(var u in e)dn(e,u)&&(r&&String(Number(u))===u&&u<e.length||xi&&a["$"+u]instanceof Symbol||(qI.call(/[^\w$]/,u)?n.push(t(u,e)+": "+t(e[u],e)):n.push(u+": "+t(e[u],e))));if(typeof $h=="function")for(var l=0;l<i.length;l++)BI.call(e,i[l])&&n.push("["+t(i[l])+"]: "+t(e[i[l]],e));return n}});var Kh=b((Jue,GI)=>{"use strict";var UB=he(),VI=UB("%TypeError%"),HB=Gh(),VB=yi(),GB=it();GI.exports=function(t,r){if(GB(t)!=="Object")throw new VI("Assertion failed: Type(O) is not Object");if(!VB(r))throw new VI("Assertion failed: IsPropertyKey(P) is not true, got "+HB(r));return t[r]}});var ZI=b((Zue,JI)=>{"use strict";var KI=he(),KB=KI("%Math%"),JB=KI("%Number%");JI.exports=JB.MAX_SAFE_INTEGER||KB.pow(2,53)-1});var QI=b((Yue,YI)=>{"use strict";var ZB=he(),YB=ZB("%Math.abs%");YI.exports=function(t){return YB(t)}});var e_=b((Que,XI)=>{"use strict";var QB=it(),XB=Math.floor;XI.exports=function(t){return QB(t)==="BigInt"?t:XB(t)}});var r_=b((Xue,t_)=>{"use strict";t_.exports=function(t){return t===null||typeof t!="function"&&typeof t!="object"}});var Jh=b((ece,n_)=>{"use strict";var ej=fh();n_.exports=function(){return ej()&&!!Symbol.toStringTag}});var i_=b((tce,o_)=>{"use strict";var tj=Date.prototype.getDay,rj=function(t){try{return tj.call(t),!0}catch{return!1}},nj=Object.prototype.toString,oj="[object Date]",ij=Jh()();o_.exports=function(t){return typeof t!="object"||t===null?!1:ij?rj(t):nj.call(t)===oj}});var c_=b((rce,Zh)=>{"use strict";var aj=Object.prototype.toString,sj=ph()();sj?(a_=Symbol.prototype.toString,s_=/^Symbol\(.*\)$/,u_=function(t){return typeof t.valueOf()!="symbol"?!1:s_.test(a_.call(t))},Zh.exports=function(t){if(typeof t=="symbol")return!0;if(aj.call(t)!=="[object Symbol]")return!1;try{return u_(t)}catch{return!1}}):Zh.exports=function(t){return!1};var a_,s_,u_});var d_=b((nce,p_)=>{"use strict";var uj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol",Yh=r_(),f_=Th(),cj=i_(),l_=c_(),lj=function(t,r){if(typeof t>"u"||t===null)throw new TypeError("Cannot call method on "+t);if(typeof r!="string"||r!=="number"&&r!=="string")throw new TypeError('hint must be "string" or "number"');var n=r==="string"?["toString","valueOf"]:["valueOf","toString"],o,i,a;for(a=0;a<n.length;++a)if(o=t[n[a]],f_(o)&&(i=o.call(t),Yh(i)))return i;throw new TypeError("No default value")},fj=function(t,r){var n=t[r];if(n!==null&&typeof n<"u"){if(!f_(n))throw new TypeError(n+" returned for property "+r+" of object "+t+" is not a function");return n}};p_.exports=function(t){if(Yh(t))return t;var r="default";arguments.length>1&&(arguments[1]===String?r="string":arguments[1]===Number&&(r="number"));var n;if(uj&&(Symbol.toPrimitive?n=fj(t,Symbol.toPrimitive):l_(t)&&(n=Symbol.prototype.valueOf)),typeof n<"u"){var o=n.call(t,r);if(Yh(o))return o;throw new TypeError("unable to convert exotic object to primitive")}return r==="default"&&(cj(t)||l_(t))&&(r="string"),lj(t,r==="default"?"number":r)}});var Qh=b((oce,h_)=>{"use strict";var m_=d_();h_.exports=function(t){return arguments.length>1?m_(t,arguments[1]):m_(t)}});var w_=b((ice,v_)=>{"use strict";var Xh=wr(),g_=Jh()(),y_,b_,eg,tg;g_&&(y_=Xh("Object.prototype.hasOwnProperty"),b_=Xh("RegExp.prototype.exec"),eg={},Tl=function(){throw eg},tg={toString:Tl,valueOf:Tl},typeof Symbol.toPrimitive=="symbol"&&(tg[Symbol.toPrimitive]=Tl));var Tl,pj=Xh("Object.prototype.toString"),dj=Object.getOwnPropertyDescriptor,mj="[object RegExp]";v_.exports=g_?function(t){if(!t||typeof t!="object")return!1;var r=dj(t,"lastIndex"),n=r&&y_(r,"value");if(!n)return!1;try{b_(t,tg)}catch(o){return o===eg}}:function(t){return!t||typeof t!="object"&&typeof t!="function"?!1:pj(t)===mj}});var E_=b((ace,x_)=>{"use strict";var hj=wr(),gj=he(),yj=w_(),bj=hj("RegExp.prototype.exec"),vj=gj("%TypeError%");x_.exports=function(t){if(!yj(t))throw new vj("`regex` must be a RegExp");return function(n){return bj(t,n)!==null}}});var k_=b((sce,S_)=>{"use strict";var wj=he(),xj=wj("%TypeError%");S_.exports=function(t,r){if(t==null)throw new xj(r||"Cannot call method on "+t);return t}});var Ol=b((uce,A_)=>{"use strict";A_.exports=k_()});var Dl=b((cce,__)=>{"use strict";var I_=he(),Ej=I_("%String%"),Sj=I_("%TypeError%");__.exports=function(t){if(typeof t=="symbol")throw new Sj("Cannot convert a Symbol value to a string");return Ej(t)}});var rg=b((lce,O_)=>{"use strict";var kj=Ol(),Aj=Dl(),Ij=wr(),C_=Ij("String.prototype.replace"),T_=/^\s$/.test("\u180E"),_j=T_?/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+/:/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+/,Cj=T_?/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+$/:/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+$/;O_.exports=function(){var t=Aj(kj(this));return C_(C_(t,_j,""),Cj,"")}});var ng=b((fce,F_)=>{"use strict";var Tj=rg(),D_="\u200B",Ei="\u180E";F_.exports=function(){return String.prototype.trim&&D_.trim()===D_&&Ei.trim()===Ei&&("_"+Ei).trim()==="_"+Ei&&(Ei+"_").trim()===Ei+"_"?String.prototype.trim:Tj}});var P_=b((pce,N_)=>{"use strict";var Oj=bl(),Dj=ng();N_.exports=function(){var t=Dj();return Oj(String.prototype,{trim:t},{trim:function(){return String.prototype.trim!==t}}),t}});var L_=b((dce,$_)=>{"use strict";var Fj=wh(),Nj=bl(),Pj=Ol(),Rj=rg(),R_=ng(),Mj=P_(),$j=Fj(R_()),M_=function(t){return Pj(t),$j(t)};Nj(M_,{getPolyfill:R_,implementation:Rj,shim:Mj});$_.exports=M_});var z_=b((mce,j_)=>{"use strict";var Fl=he(),og=Fl("%Number%"),Lj=Fl("%RegExp%"),qj=Fl("%TypeError%"),q_=Fl("%parseInt%"),Bj=wr(),Nl=E_(),B_=Bj("String.prototype.slice"),jj=Nl(/^0b[01]+$/i),zj=Nl(/^0o[0-7]+$/i),Wj=Nl(/^[-+]0x[0-9a-f]+$/i),Uj=["\x85","\u200B","\uFFFE"].join(""),Hj=new Lj("["+Uj+"]","g"),Vj=Nl(Hj),Gj=L_(),Kj=it();j_.exports=function e(t){if(Kj(t)!=="String")throw new qj("Assertion failed: `argument` is not a String");if(jj(t))return og(q_(B_(t,2),2));if(zj(t))return og(q_(B_(t,2),8));if(Vj(t)||Wj(t))return NaN;var r=Gj(t);return r!==t?e(r):og(t)}});var G_=b((hce,V_)=>{"use strict";var H_=he(),W_=H_("%TypeError%"),U_=H_("%Number%"),Jj=kh(),Zj=Qh(),Yj=z_();V_.exports=function(t){var r=Jj(t)?t:Zj(t,U_);if(typeof r=="symbol")throw new W_("Cannot convert a Symbol value to a number");if(typeof r=="bigint")throw new W_("Conversion from 'BigInt' to 'number' is not allowed.");return typeof r=="string"?Yj(r):U_(r)}});var J_=b((gce,K_)=>{"use strict";var Qj=Es();K_.exports=function(e){return(typeof e=="number"||typeof e=="bigint")&&!Qj(e)&&e!==1/0&&e!==-1/0}});var Y_=b((yce,Z_)=>{"use strict";Z_.exports=function(t){return t>=0?1:-1}});var X_=b((bce,Q_)=>{"use strict";var Xj=QI(),e8=e_(),t8=G_(),r8=Es(),n8=J_(),o8=Y_();Q_.exports=function(t){var r=t8(t);if(r8(r)||r===0)return 0;if(!n8(r))return r;var n=e8(Xj(r));return n===0?0:o8(r)*n}});var rC=b((vce,tC)=>{"use strict";var eC=ZI(),i8=X_();tC.exports=function(t){var r=i8(t);return r<=0?0:r>eC?eC:r}});var oC=b((wce,nC)=>{"use strict";var a8=he(),s8=a8("%TypeError%"),u8=Kh(),c8=rC(),l8=it();nC.exports=function(t){if(l8(t)!=="Object")throw new s8("Assertion failed: `obj` must be an Object");return c8(u8(t,"length"))}});var ig=b((xce,iC)=>{"use strict";iC.exports=function(t,r){for(var n=0;n<t.length;n+=1)r(t[n],n,t)}});var sC=b((Ece,aC)=>{"use strict";var ag=he(),Si=wr(),f8=Gh(),p8=ag("%TypeError%"),Pl=ag("%WeakMap%",!0),Rl=ag("%Map%",!0),d8=Si("WeakMap.prototype.get",!0),m8=Si("WeakMap.prototype.set",!0),h8=Si("WeakMap.prototype.has",!0),g8=Si("Map.prototype.get",!0),y8=Si("Map.prototype.set",!0),b8=Si("Map.prototype.has",!0),sg=function(e,t){for(var r=e,n;(n=r.next)!==null;r=n)if(n.key===t)return r.next=n.next,n.next=e.next,e.next=n,n},v8=function(e,t){var r=sg(e,t);return r&&r.value},w8=function(e,t,r){var n=sg(e,t);n?n.value=r:e.next={key:t,next:e.next,value:r}},x8=function(e,t){return!!sg(e,t)};aC.exports=function(){var t,r,n,o={assert:function(i){if(!o.has(i))throw new p8("Side channel does not contain "+f8(i))},get:function(i){if(Pl&&i&&(typeof i=="object"||typeof i=="function")){if(t)return d8(t,i)}else if(Rl){if(r)return g8(r,i)}else if(n)return v8(n,i)},has:function(i){if(Pl&&i&&(typeof i=="object"||typeof i=="function")){if(t)return h8(t,i)}else if(Rl){if(r)return b8(r,i)}else if(n)return x8(n,i);return!1},set:function(i,a){Pl&&i&&(typeof i=="object"||typeof i=="function")?(t||(t=new Pl),m8(t,i,a)):Rl?(r||(r=new Rl),y8(r,i,a)):(n||(n={key:{},next:null}),w8(n,i,a))}};return o}});var cC=b((Sce,uC)=>{"use strict";var E8=he(),S8=br(),Cs=sC()(),Br=E8("%TypeError%"),ug={assert:function(e,t){if(!e||typeof e!="object"&&typeof e!="function")throw new Br("`O` is not an object");if(typeof t!="string")throw new Br("`slot` must be a string");if(Cs.assert(e),!ug.has(e,t))throw new Br("`"+t+"` is not present on `O`")},get:function(e,t){if(!e||typeof e!="object"&&typeof e!="function")throw new Br("`O` is not an object");if(typeof t!="string")throw new Br("`slot` must be a string");var r=Cs.get(e);return r&&r["$"+t]},has:function(e,t){if(!e||typeof e!="object"&&typeof e!="function")throw new Br("`O` is not an object");if(typeof t!="string")throw new Br("`slot` must be a string");var r=Cs.get(e);return!!r&&S8(r,"$"+t)},set:function(e,t,r){if(!e||typeof e!="object"&&typeof e!="function")throw new Br("`O` is not an object");if(typeof t!="string")throw new Br("`slot` must be a string");var n=Cs.get(e);n||(n={},Cs.set(e,n)),n["$"+t]=r}};Object.freeze&&Object.freeze(ug);uC.exports=ug});var pC=b((kce,fC)=>{"use strict";var lC={foo:{}},k8=Object;fC.exports=function(){return{__proto__:lC}.foo===lC.foo&&!({__proto__:null}instanceof k8)}});var gC=b((Ace,hC)=>{"use strict";var cg=he(),dC=cg("%Object.create%",!0),mC=cg("%TypeError%"),A8=cg("%SyntaxError%"),I8=Eh(),_8=it(),C8=ig(),T8=cC(),O8=pC()();hC.exports=function(t){if(t!==null&&_8(t)!=="Object")throw new mC("Assertion failed: `proto` must be null or an object");var r=arguments.length<2?[]:arguments[1];if(!I8(r))throw new mC("Assertion failed: `additionalInternalSlotsList` must be an Array");var n;if(dC)n=dC(t);else if(O8)n={__proto__:t};else{if(t===null)throw new A8("native Object.create support is required to create null objects");var o=function(){};o.prototype=t,n=new o}return r.length>0&&C8(r,function(i){T8.set(n,i,void 0)}),n}});var bC=b((Ice,yC)=>{"use strict";var D8=he(),F8=D8("%Object%"),N8=Ol();yC.exports=function(t){return N8(t),F8(t)}});var wC=b((_ce,vC)=>{"use strict";var P8=he(),R8=P8("%String%"),M8=Qh(),$8=Dl();vC.exports=function(t){var r=M8(t,R8);return typeof r=="symbol"?r:$8(r)}});var SC=b((Cce,EC)=>{"use strict";var xC=Es();EC.exports=function(t,r){return t===r?t===0?1/t===1/r:!0:xC(t)&&xC(r)}});var _C=b((Tce,IC)=>{"use strict";var AC=wr(),L8=he(),q8=SC(),B8=L8("%TypeError%"),j8=AC("Array.prototype.filter"),kC=AC("Array.prototype.push");IC.exports=function(t,r,n){var o=j8(t,function(s){return q8(s.Key,r)});if(o.length>0){var i=o[0];if(o.length!==1)throw new B8("Assertion failed: more than 1 Record inside `groups` has a `[[Key]]` that is SameValue to `key`");kC(i.Elements,n)}else{var a={Key:r,Elements:[n]};kC(t,a)}}});var TC=b((Oce,CC)=>{"use strict";var z8=he(),W8=hA(),U8=kI(),H8=Kh(),V8=Oh(),G8=oC(),K8=gC(),J8=bC(),Z8=wC(),Y8=Dl(),Q8=z8("%TypeError%"),X8=ig(),ez=_C();CC.exports=function(t){var r=J8(this),n=G8(r);if(!V8(t))throw new Q8("callbackfn must be a function");var o;arguments.length>1&&(o=arguments[1]);for(var i=0,a=[];i<n;){var s=Y8(i),u=H8(r,s),l=Z8(W8(t,o,[u,i,r]));ez(a,l,u),i+=1}var c=K8(null);return X8(a,function(f){U8(c,f.Key,f.Elements)}),c}});var DC=b((Dce,OC)=>{"use strict";var tz=TC();OC.exports=function(){return Array.prototype.group||tz}});var NC=b((Fce,FC)=>{"use strict";var rz=bl(),nz=tA(),oz=DC();FC.exports=function(){var t=oz();return rz(Array.prototype,{group:t},{group:function(){return Array.prototype.group!==t}}),nz("group"),t}});var KC=b(GC=>{"use strict";var Ai=(C(),Nu(At));function hz(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var gz=typeof Object.is=="function"?Object.is:hz,yz=Ai.useState,bz=Ai.useEffect,vz=Ai.useLayoutEffect,wz=Ai.useDebugValue;function xz(e,t){var r=t(),n=yz({inst:{value:r,getSnapshot:t}}),o=n[0].inst,i=n[1];return vz(function(){o.value=r,o.getSnapshot=t,dg(o)&&i({inst:o})},[e,r,t]),bz(function(){return dg(o)&&i({inst:o}),e(function(){dg(o)&&i({inst:o})})},[e]),wz(r),r}function dg(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!gz(e,r)}catch{return!0}}function Ez(e,t){return t()}var Sz=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Ez:xz;GC.useSyncExternalStore=Ai.useSyncExternalStore!==void 0?Ai.useSyncExternalStore:Sz});var ZC=b((Hle,JC)=>{"use strict";JC.exports=KC()});var QC=b(YC=>{"use strict";var ql=(C(),Nu(At)),kz=ZC();function Az(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Iz=typeof Object.is=="function"?Object.is:Az,_z=kz.useSyncExternalStore,Cz=ql.useRef,Tz=ql.useEffect,Oz=ql.useMemo,Dz=ql.useDebugValue;YC.useSyncExternalStoreWithSelector=function(e,t,r,n,o){var i=Cz(null);if(i.current===null){var a={hasValue:!1,value:null};i.current=a}else a=i.current;i=Oz(function(){function u(d){if(!l){if(l=!0,c=d,d=n(d),o!==void 0&&a.hasValue){var h=a.value;if(o(h,d))return f=h}return f=d}if(h=f,Iz(c,d))return h;var g=n(d);return o!==void 0&&o(h,g)?h:(c=d,f=g)}var l=!1,c,f,p=r===void 0?null:r;return[function(){return u(t())},p===null?void 0:function(){return u(p())}]},[t,r,n,o]);var s=_z(e,i[0],i[1]);return Tz(function(){a.hasValue=!0,a.value=s},[s]),Dz(s),s}});var eT=b((Gle,XC)=>{"use strict";XC.exports=QC()});var vn=b((Ibe,Hr)=>{function Vg(){return Hr.exports=Vg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Hr.exports.__esModule=!0,Hr.exports.default=Hr.exports,Vg.apply(this,arguments)}Hr.exports=Vg,Hr.exports.__esModule=!0,Hr.exports.default=Hr.exports});var of=b((ove,Vr)=>{function ey(e){return Vr.exports=ey=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vr.exports.__esModule=!0,Vr.exports.default=Vr.exports,ey(e)}Vr.exports=ey,Vr.exports.__esModule=!0,Vr.exports.default=Vr.exports});var tD=b((ive,Gs)=>{var eD=of().default;function yU(e,t){if(eD(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(eD(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}Gs.exports=yU,Gs.exports.__esModule=!0,Gs.exports.default=Gs.exports});var rD=b((ave,Ks)=>{var bU=of().default,vU=tD();function wU(e){var t=vU(e,"string");return bU(t)==="symbol"?t:String(t)}Ks.exports=wU,Ks.exports.__esModule=!0,Ks.exports.default=Ks.exports});var nD=b((sve,Js)=>{var xU=rD();function EU(e,t,r){return t=xU(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Js.exports=EU,Js.exports.__esModule=!0,Js.exports.default=Js.exports});var oD=b((uve,Zs)=>{function SU(e){if(Array.isArray(e))return e}Zs.exports=SU,Zs.exports.__esModule=!0,Zs.exports.default=Zs.exports});var iD=b((cve,Ys)=>{function kU(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,i,a,s=[],u=!0,l=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);u=!0);}catch(c){l=!0,o=c}finally{try{if(!u&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}Ys.exports=kU,Ys.exports.__esModule=!0,Ys.exports.default=Ys.exports});var aD=b((lve,Qs)=>{function AU(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Qs.exports=AU,Qs.exports.__esModule=!0,Qs.exports.default=Qs.exports});var uD=b((fve,Xs)=>{var sD=aD();function IU(e,t){if(e){if(typeof e=="string")return sD(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return sD(e,t)}}Xs.exports=IU,Xs.exports.__esModule=!0,Xs.exports.default=Xs.exports});var cD=b((pve,eu)=>{function _U(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}eu.exports=_U,eu.exports.__esModule=!0,eu.exports.default=eu.exports});var lD=b((dve,tu)=>{var CU=oD(),TU=iD(),OU=uD(),DU=cD();function FU(e,t){return CU(e)||TU(e,t)||OU(e,t)||DU()}tu.exports=FU,tu.exports.__esModule=!0,tu.exports.default=tu.exports});var pD=b((af,fD)=>{"use strict";af.__esModule=!0;af.default={scheme:"threezerotwofour",author:"jan t. sott (http://github.com/idleberg)",base00:"#090300",base01:"#3a3432",base02:"#4a4543",base03:"#5c5855",base04:"#807d7c",base05:"#a5a2a2",base06:"#d6d5d4",base07:"#f7f7f7",base08:"#db2d20",base09:"#e8bbd0",base0A:"#fded02",base0B:"#01a252",base0C:"#b5e4f4",base0D:"#01a0e4",base0E:"#a16a94",base0F:"#cdab53"};fD.exports=af.default});var mD=b((sf,dD)=>{"use strict";sf.__esModule=!0;sf.default={scheme:"apathy",author:"jannik siebert (https://github.com/janniks)",base00:"#031A16",base01:"#0B342D",base02:"#184E45",base03:"#2B685E",base04:"#5F9C92",base05:"#81B5AC",base06:"#A7CEC8",base07:"#D2E7E4",base08:"#3E9688",base09:"#3E7996",base0A:"#3E4C96",base0B:"#883E96",base0C:"#963E4C",base0D:"#96883E",base0E:"#4C963E",base0F:"#3E965B"};dD.exports=sf.default});var gD=b((uf,hD)=>{"use strict";uf.__esModule=!0;uf.default={scheme:"ashes",author:"jannik siebert (https://github.com/janniks)",base00:"#1C2023",base01:"#393F45",base02:"#565E65",base03:"#747C84",base04:"#ADB3BA",base05:"#C7CCD1",base06:"#DFE2E5",base07:"#F3F4F5",base08:"#C7AE95",base09:"#C7C795",base0A:"#AEC795",base0B:"#95C7AE",base0C:"#95AEC7",base0D:"#AE95C7",base0E:"#C795AE",base0F:"#C79595"};hD.exports=uf.default});var bD=b((cf,yD)=>{"use strict";cf.__esModule=!0;cf.default={scheme:"atelier dune",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/dune)",base00:"#20201d",base01:"#292824",base02:"#6e6b5e",base03:"#7d7a68",base04:"#999580",base05:"#a6a28c",base06:"#e8e4cf",base07:"#fefbec",base08:"#d73737",base09:"#b65611",base0A:"#cfb017",base0B:"#60ac39",base0C:"#1fad83",base0D:"#6684e1",base0E:"#b854d4",base0F:"#d43552"};yD.exports=cf.default});var wD=b((lf,vD)=>{"use strict";lf.__esModule=!0;lf.default={scheme:"atelier forest",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/forest)",base00:"#1b1918",base01:"#2c2421",base02:"#68615e",base03:"#766e6b",base04:"#9c9491",base05:"#a8a19f",base06:"#e6e2e0",base07:"#f1efee",base08:"#f22c40",base09:"#df5320",base0A:"#d5911a",base0B:"#5ab738",base0C:"#00ad9c",base0D:"#407ee7",base0E:"#6666ea",base0F:"#c33ff3"};vD.exports=lf.default});var ED=b((ff,xD)=>{"use strict";ff.__esModule=!0;ff.default={scheme:"atelier heath",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/heath)",base00:"#1b181b",base01:"#292329",base02:"#695d69",base03:"#776977",base04:"#9e8f9e",base05:"#ab9bab",base06:"#d8cad8",base07:"#f7f3f7",base08:"#ca402b",base09:"#a65926",base0A:"#bb8a35",base0B:"#379a37",base0C:"#159393",base0D:"#516aec",base0E:"#7b59c0",base0F:"#cc33cc"};xD.exports=ff.default});var kD=b((pf,SD)=>{"use strict";pf.__esModule=!0;pf.default={scheme:"atelier lakeside",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/lakeside/)",base00:"#161b1d",base01:"#1f292e",base02:"#516d7b",base03:"#5a7b8c",base04:"#7195a8",base05:"#7ea2b4",base06:"#c1e4f6",base07:"#ebf8ff",base08:"#d22d72",base09:"#935c25",base0A:"#8a8a0f",base0B:"#568c3b",base0C:"#2d8f6f",base0D:"#257fad",base0E:"#5d5db1",base0F:"#b72dd2"};SD.exports=pf.default});var ID=b((df,AD)=>{"use strict";df.__esModule=!0;df.default={scheme:"atelier seaside",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/seaside/)",base00:"#131513",base01:"#242924",base02:"#5e6e5e",base03:"#687d68",base04:"#809980",base05:"#8ca68c",base06:"#cfe8cf",base07:"#f0fff0",base08:"#e6193c",base09:"#87711d",base0A:"#c3c322",base0B:"#29a329",base0C:"#1999b3",base0D:"#3d62f5",base0E:"#ad2bee",base0F:"#e619c3"};AD.exports=df.default});var CD=b((mf,_D)=>{"use strict";mf.__esModule=!0;mf.default={scheme:"bespin",author:"jan t. sott",base00:"#28211c",base01:"#36312e",base02:"#5e5d5c",base03:"#666666",base04:"#797977",base05:"#8a8986",base06:"#9d9b97",base07:"#baae9e",base08:"#cf6a4c",base09:"#cf7d34",base0A:"#f9ee98",base0B:"#54be0d",base0C:"#afc4db",base0D:"#5ea6ea",base0E:"#9b859d",base0F:"#937121"};_D.exports=mf.default});var OD=b((hf,TD)=>{"use strict";hf.__esModule=!0;hf.default={scheme:"brewer",author:"timoth\xE9e poisot (http://github.com/tpoisot)",base00:"#0c0d0e",base01:"#2e2f30",base02:"#515253",base03:"#737475",base04:"#959697",base05:"#b7b8b9",base06:"#dadbdc",base07:"#fcfdfe",base08:"#e31a1c",base09:"#e6550d",base0A:"#dca060",base0B:"#31a354",base0C:"#80b1d3",base0D:"#3182bd",base0E:"#756bb1",base0F:"#b15928"};TD.exports=hf.default});var FD=b((gf,DD)=>{"use strict";gf.__esModule=!0;gf.default={scheme:"bright",author:"chris kempson (http://chriskempson.com)",base00:"#000000",base01:"#303030",base02:"#505050",base03:"#b0b0b0",base04:"#d0d0d0",base05:"#e0e0e0",base06:"#f5f5f5",base07:"#ffffff",base08:"#fb0120",base09:"#fc6d24",base0A:"#fda331",base0B:"#a1c659",base0C:"#76c7b7",base0D:"#6fb3d2",base0E:"#d381c3",base0F:"#be643c"};DD.exports=gf.default});var PD=b((yf,ND)=>{"use strict";yf.__esModule=!0;yf.default={scheme:"chalk",author:"chris kempson (http://chriskempson.com)",base00:"#151515",base01:"#202020",base02:"#303030",base03:"#505050",base04:"#b0b0b0",base05:"#d0d0d0",base06:"#e0e0e0",base07:"#f5f5f5",base08:"#fb9fb1",base09:"#eda987",base0A:"#ddb26f",base0B:"#acc267",base0C:"#12cfc0",base0D:"#6fc2ef",base0E:"#e1a3ee",base0F:"#deaf8f"};ND.exports=yf.default});var MD=b((bf,RD)=>{"use strict";bf.__esModule=!0;bf.default={scheme:"codeschool",author:"brettof86",base00:"#232c31",base01:"#1c3657",base02:"#2a343a",base03:"#3f4944",base04:"#84898c",base05:"#9ea7a6",base06:"#a7cfa3",base07:"#b5d8f6",base08:"#2a5491",base09:"#43820d",base0A:"#a03b1e",base0B:"#237986",base0C:"#b02f30",base0D:"#484d79",base0E:"#c59820",base0F:"#c98344"};RD.exports=bf.default});var LD=b((vf,$D)=>{"use strict";vf.__esModule=!0;vf.default={scheme:"colors",author:"mrmrs (http://clrs.cc)",base00:"#111111",base01:"#333333",base02:"#555555",base03:"#777777",base04:"#999999",base05:"#bbbbbb",base06:"#dddddd",base07:"#ffffff",base08:"#ff4136",base09:"#ff851b",base0A:"#ffdc00",base0B:"#2ecc40",base0C:"#7fdbff",base0D:"#0074d9",base0E:"#b10dc9",base0F:"#85144b"};$D.exports=vf.default});var BD=b((wf,qD)=>{"use strict";wf.__esModule=!0;wf.default={scheme:"default",author:"chris kempson (http://chriskempson.com)",base00:"#181818",base01:"#282828",base02:"#383838",base03:"#585858",base04:"#b8b8b8",base05:"#d8d8d8",base06:"#e8e8e8",base07:"#f8f8f8",base08:"#ab4642",base09:"#dc9656",base0A:"#f7ca88",base0B:"#a1b56c",base0C:"#86c1b9",base0D:"#7cafc2",base0E:"#ba8baf",base0F:"#a16946"};qD.exports=wf.default});var zD=b((xf,jD)=>{"use strict";xf.__esModule=!0;xf.default={scheme:"eighties",author:"chris kempson (http://chriskempson.com)",base00:"#2d2d2d",base01:"#393939",base02:"#515151",base03:"#747369",base04:"#a09f93",base05:"#d3d0c8",base06:"#e8e6df",base07:"#f2f0ec",base08:"#f2777a",base09:"#f99157",base0A:"#ffcc66",base0B:"#99cc99",base0C:"#66cccc",base0D:"#6699cc",base0E:"#cc99cc",base0F:"#d27b53"};jD.exports=xf.default});var UD=b((Ef,WD)=>{"use strict";Ef.__esModule=!0;Ef.default={scheme:"embers",author:"jannik siebert (https://github.com/janniks)",base00:"#16130F",base01:"#2C2620",base02:"#433B32",base03:"#5A5047",base04:"#8A8075",base05:"#A39A90",base06:"#BEB6AE",base07:"#DBD6D1",base08:"#826D57",base09:"#828257",base0A:"#6D8257",base0B:"#57826D",base0C:"#576D82",base0D:"#6D5782",base0E:"#82576D",base0F:"#825757"};WD.exports=Ef.default});var VD=b((Sf,HD)=>{"use strict";Sf.__esModule=!0;Sf.default={scheme:"flat",author:"chris kempson (http://chriskempson.com)",base00:"#2C3E50",base01:"#34495E",base02:"#7F8C8D",base03:"#95A5A6",base04:"#BDC3C7",base05:"#e0e0e0",base06:"#f5f5f5",base07:"#ECF0F1",base08:"#E74C3C",base09:"#E67E22",base0A:"#F1C40F",base0B:"#2ECC71",base0C:"#1ABC9C",base0D:"#3498DB",base0E:"#9B59B6",base0F:"#be643c"};HD.exports=Sf.default});var KD=b((kf,GD)=>{"use strict";kf.__esModule=!0;kf.default={scheme:"google",author:"seth wright (http://sethawright.com)",base00:"#1d1f21",base01:"#282a2e",base02:"#373b41",base03:"#969896",base04:"#b4b7b4",base05:"#c5c8c6",base06:"#e0e0e0",base07:"#ffffff",base08:"#CC342B",base09:"#F96A38",base0A:"#FBA922",base0B:"#198844",base0C:"#3971ED",base0D:"#3971ED",base0E:"#A36AC7",base0F:"#3971ED"};GD.exports=kf.default});var ZD=b((Af,JD)=>{"use strict";Af.__esModule=!0;Af.default={scheme:"grayscale",author:"alexandre gavioli (https://github.com/alexx2/)",base00:"#101010",base01:"#252525",base02:"#464646",base03:"#525252",base04:"#ababab",base05:"#b9b9b9",base06:"#e3e3e3",base07:"#f7f7f7",base08:"#7c7c7c",base09:"#999999",base0A:"#a0a0a0",base0B:"#8e8e8e",base0C:"#868686",base0D:"#686868",base0E:"#747474",base0F:"#5e5e5e"};JD.exports=Af.default});var QD=b((If,YD)=>{"use strict";If.__esModule=!0;If.default={scheme:"green screen",author:"chris kempson (http://chriskempson.com)",base00:"#001100",base01:"#003300",base02:"#005500",base03:"#007700",base04:"#009900",base05:"#00bb00",base06:"#00dd00",base07:"#00ff00",base08:"#007700",base09:"#009900",base0A:"#007700",base0B:"#00bb00",base0C:"#005500",base0D:"#009900",base0E:"#00bb00",base0F:"#005500"};YD.exports=If.default});var eF=b((_f,XD)=>{"use strict";_f.__esModule=!0;_f.default={scheme:"harmonic16",author:"jannik siebert (https://github.com/janniks)",base00:"#0b1c2c",base01:"#223b54",base02:"#405c79",base03:"#627e99",base04:"#aabcce",base05:"#cbd6e2",base06:"#e5ebf1",base07:"#f7f9fb",base08:"#bf8b56",base09:"#bfbf56",base0A:"#8bbf56",base0B:"#56bf8b",base0C:"#568bbf",base0D:"#8b56bf",base0E:"#bf568b",base0F:"#bf5656"};XD.exports=_f.default});var rF=b((Cf,tF)=>{"use strict";Cf.__esModule=!0;Cf.default={scheme:"hopscotch",author:"jan t. sott",base00:"#322931",base01:"#433b42",base02:"#5c545b",base03:"#797379",base04:"#989498",base05:"#b9b5b8",base06:"#d5d3d5",base07:"#ffffff",base08:"#dd464c",base09:"#fd8b19",base0A:"#fdcc59",base0B:"#8fc13e",base0C:"#149b93",base0D:"#1290bf",base0E:"#c85e7c",base0F:"#b33508"};tF.exports=Cf.default});var oF=b((Tf,nF)=>{"use strict";Tf.__esModule=!0;Tf.default={scheme:"isotope",author:"jan t. sott",base00:"#000000",base01:"#404040",base02:"#606060",base03:"#808080",base04:"#c0c0c0",base05:"#d0d0d0",base06:"#e0e0e0",base07:"#ffffff",base08:"#ff0000",base09:"#ff9900",base0A:"#ff0099",base0B:"#33ff00",base0C:"#00ffff",base0D:"#0066ff",base0E:"#cc00ff",base0F:"#3300ff"};nF.exports=Tf.default});var aF=b((Of,iF)=>{"use strict";Of.__esModule=!0;Of.default={scheme:"marrakesh",author:"alexandre gavioli (http://github.com/alexx2/)",base00:"#201602",base01:"#302e00",base02:"#5f5b17",base03:"#6c6823",base04:"#86813b",base05:"#948e48",base06:"#ccc37a",base07:"#faf0a5",base08:"#c35359",base09:"#b36144",base0A:"#a88339",base0B:"#18974e",base0C:"#75a738",base0D:"#477ca1",base0E:"#8868b3",base0F:"#b3588e"};iF.exports=Of.default});var uF=b((Df,sF)=>{"use strict";Df.__esModule=!0;Df.default={scheme:"mocha",author:"chris kempson (http://chriskempson.com)",base00:"#3B3228",base01:"#534636",base02:"#645240",base03:"#7e705a",base04:"#b8afad",base05:"#d0c8c6",base06:"#e9e1dd",base07:"#f5eeeb",base08:"#cb6077",base09:"#d28b71",base0A:"#f4bc87",base0B:"#beb55b",base0C:"#7bbda4",base0D:"#8ab3b5",base0E:"#a89bb9",base0F:"#bb9584"};sF.exports=Df.default});var lF=b((Ff,cF)=>{"use strict";Ff.__esModule=!0;Ff.default={scheme:"monokai",author:"wimer hazenberg (http://www.monokai.nl)",base00:"#272822",base01:"#383830",base02:"#49483e",base03:"#75715e",base04:"#a59f85",base05:"#f8f8f2",base06:"#f5f4f1",base07:"#f9f8f5",base08:"#f92672",base09:"#fd971f",base0A:"#f4bf75",base0B:"#a6e22e",base0C:"#a1efe4",base0D:"#66d9ef",base0E:"#ae81ff",base0F:"#cc6633"};cF.exports=Ff.default});var pF=b((Nf,fF)=>{"use strict";Nf.__esModule=!0;Nf.default={scheme:"ocean",author:"chris kempson (http://chriskempson.com)",base00:"#2b303b",base01:"#343d46",base02:"#4f5b66",base03:"#65737e",base04:"#a7adba",base05:"#c0c5ce",base06:"#dfe1e8",base07:"#eff1f5",base08:"#bf616a",base09:"#d08770",base0A:"#ebcb8b",base0B:"#a3be8c",base0C:"#96b5b4",base0D:"#8fa1b3",base0E:"#b48ead",base0F:"#ab7967"};fF.exports=Nf.default});var mF=b((Pf,dF)=>{"use strict";Pf.__esModule=!0;Pf.default={scheme:"paraiso",author:"jan t. sott",base00:"#2f1e2e",base01:"#41323f",base02:"#4f424c",base03:"#776e71",base04:"#8d8687",base05:"#a39e9b",base06:"#b9b6b0",base07:"#e7e9db",base08:"#ef6155",base09:"#f99b15",base0A:"#fec418",base0B:"#48b685",base0C:"#5bc4bf",base0D:"#06b6ef",base0E:"#815ba4",base0F:"#e96ba8"};dF.exports=Pf.default});var gF=b((Rf,hF)=>{"use strict";Rf.__esModule=!0;Rf.default={scheme:"pop",author:"chris kempson (http://chriskempson.com)",base00:"#000000",base01:"#202020",base02:"#303030",base03:"#505050",base04:"#b0b0b0",base05:"#d0d0d0",base06:"#e0e0e0",base07:"#ffffff",base08:"#eb008a",base09:"#f29333",base0A:"#f8ca12",base0B:"#37b349",base0C:"#00aabb",base0D:"#0e5a94",base0E:"#b31e8d",base0F:"#7a2d00"};hF.exports=Rf.default});var bF=b((Mf,yF)=>{"use strict";Mf.__esModule=!0;Mf.default={scheme:"railscasts",author:"ryan bates (http://railscasts.com)",base00:"#2b2b2b",base01:"#272935",base02:"#3a4055",base03:"#5a647e",base04:"#d4cfc9",base05:"#e6e1dc",base06:"#f4f1ed",base07:"#f9f7f3",base08:"#da4939",base09:"#cc7833",base0A:"#ffc66d",base0B:"#a5c261",base0C:"#519f50",base0D:"#6d9cbe",base0E:"#b6b3eb",base0F:"#bc9458"};yF.exports=Mf.default});var wF=b(($f,vF)=>{"use strict";$f.__esModule=!0;$f.default={scheme:"shapeshifter",author:"tyler benziger (http://tybenz.com)",base00:"#000000",base01:"#040404",base02:"#102015",base03:"#343434",base04:"#555555",base05:"#ababab",base06:"#e0e0e0",base07:"#f9f9f9",base08:"#e92f2f",base09:"#e09448",base0A:"#dddd13",base0B:"#0ed839",base0C:"#23edda",base0D:"#3b48e3",base0E:"#f996e2",base0F:"#69542d"};vF.exports=$f.default});var EF=b((Lf,xF)=>{"use strict";Lf.__esModule=!0;Lf.default={scheme:"solarized",author:"ethan schoonover (http://ethanschoonover.com/solarized)",base00:"#002b36",base01:"#073642",base02:"#586e75",base03:"#657b83",base04:"#839496",base05:"#93a1a1",base06:"#eee8d5",base07:"#fdf6e3",base08:"#dc322f",base09:"#cb4b16",base0A:"#b58900",base0B:"#859900",base0C:"#2aa198",base0D:"#268bd2",base0E:"#6c71c4",base0F:"#d33682"};xF.exports=Lf.default});var kF=b((qf,SF)=>{"use strict";qf.__esModule=!0;qf.default={scheme:"summerfruit",author:"christopher corley (http://cscorley.github.io/)",base00:"#151515",base01:"#202020",base02:"#303030",base03:"#505050",base04:"#B0B0B0",base05:"#D0D0D0",base06:"#E0E0E0",base07:"#FFFFFF",base08:"#FF0086",base09:"#FD8900",base0A:"#ABA800",base0B:"#00C918",base0C:"#1faaaa",base0D:"#3777E6",base0E:"#AD00A1",base0F:"#cc6633"};SF.exports=qf.default});var IF=b((Bf,AF)=>{"use strict";Bf.__esModule=!0;Bf.default={scheme:"tomorrow",author:"chris kempson (http://chriskempson.com)",base00:"#1d1f21",base01:"#282a2e",base02:"#373b41",base03:"#969896",base04:"#b4b7b4",base05:"#c5c8c6",base06:"#e0e0e0",base07:"#ffffff",base08:"#cc6666",base09:"#de935f",base0A:"#f0c674",base0B:"#b5bd68",base0C:"#8abeb7",base0D:"#81a2be",base0E:"#b294bb",base0F:"#a3685a"};AF.exports=Bf.default});var CF=b((jf,_F)=>{"use strict";jf.__esModule=!0;jf.default={scheme:"london tube",author:"jan t. sott",base00:"#231f20",base01:"#1c3f95",base02:"#5a5758",base03:"#737171",base04:"#959ca1",base05:"#d9d8d8",base06:"#e7e7e8",base07:"#ffffff",base08:"#ee2e24",base09:"#f386a1",base0A:"#ffd204",base0B:"#00853e",base0C:"#85cebc",base0D:"#009ddc",base0E:"#98005d",base0F:"#b06110"};_F.exports=jf.default});var OF=b((zf,TF)=>{"use strict";zf.__esModule=!0;zf.default={scheme:"twilight",author:"david hart (http://hart-dev.com)",base00:"#1e1e1e",base01:"#323537",base02:"#464b50",base03:"#5f5a60",base04:"#838184",base05:"#a7a7a7",base06:"#c3c3c3",base07:"#ffffff",base08:"#cf6a4c",base09:"#cda869",base0A:"#f9ee98",base0B:"#8f9d6a",base0C:"#afc4db",base0D:"#7587a6",base0E:"#9b859d",base0F:"#9b703f"};TF.exports=zf.default});var DF=b(ue=>{"use strict";ue.__esModule=!0;function fe(e){return e&&e.__esModule?e.default:e}var NU=pD();ue.threezerotwofour=fe(NU);var PU=mD();ue.apathy=fe(PU);var RU=gD();ue.ashes=fe(RU);var MU=bD();ue.atelierDune=fe(MU);var $U=wD();ue.atelierForest=fe($U);var LU=ED();ue.atelierHeath=fe(LU);var qU=kD();ue.atelierLakeside=fe(qU);var BU=ID();ue.atelierSeaside=fe(BU);var jU=CD();ue.bespin=fe(jU);var zU=OD();ue.brewer=fe(zU);var WU=FD();ue.bright=fe(WU);var UU=PD();ue.chalk=fe(UU);var HU=MD();ue.codeschool=fe(HU);var VU=LD();ue.colors=fe(VU);var GU=BD();ue.default=fe(GU);var KU=zD();ue.eighties=fe(KU);var JU=UD();ue.embers=fe(JU);var ZU=VD();ue.flat=fe(ZU);var YU=KD();ue.google=fe(YU);var QU=ZD();ue.grayscale=fe(QU);var XU=QD();ue.greenscreen=fe(XU);var eH=eF();ue.harmonic=fe(eH);var tH=rF();ue.hopscotch=fe(tH);var rH=oF();ue.isotope=fe(rH);var nH=aF();ue.marrakesh=fe(nH);var oH=uF();ue.mocha=fe(oH);var iH=lF();ue.monokai=fe(iH);var aH=pF();ue.ocean=fe(aH);var sH=mF();ue.paraiso=fe(sH);var uH=gF();ue.pop=fe(uH);var cH=bF();ue.railscasts=fe(cH);var lH=wF();ue.shapeshifter=fe(lH);var fH=EF();ue.solarized=fe(fH);var pH=kF();ue.summerfruit=fe(pH);var dH=IF();ue.tomorrow=fe(dH);var mH=CF();ue.tube=fe(mH);var hH=OF();ue.twilight=fe(hH)});var NF=b((hve,FF)=>{"use strict";FF.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}});var RF=b((gve,PF)=>{PF.exports=function(t){return!t||typeof t=="string"?!1:t instanceof Array||Array.isArray(t)||t.length>=0&&(t.splice instanceof Function||Object.getOwnPropertyDescriptor(t,t.length-1)&&t.constructor.name!=="String")}});var LF=b((yve,$F)=>{"use strict";var gH=RF(),yH=Array.prototype.concat,bH=Array.prototype.slice,MF=$F.exports=function(t){for(var r=[],n=0,o=t.length;n<o;n++){var i=t[n];gH(i)?r=yH.call(r,bH.call(i)):r.push(i)}return r};MF.wrap=function(e){return function(){return e(MF(arguments))}}});var zF=b((bve,jF)=>{var ru=NF(),nu=LF(),qF=Object.hasOwnProperty,BF=Object.create(null);for(Wf in ru)qF.call(ru,Wf)&&(BF[ru[Wf]]=Wf);var Wf,Tt=jF.exports={to:{},get:{}};Tt.get=function(e){var t=e.substring(0,3).toLowerCase(),r,n;switch(t){case"hsl":r=Tt.get.hsl(e),n="hsl";break;case"hwb":r=Tt.get.hwb(e),n="hwb";break;default:r=Tt.get.rgb(e),n="rgb";break}return r?{model:n,value:r}:null};Tt.get.rgb=function(e){if(!e)return null;var t=/^#([a-f0-9]{3,4})$/i,r=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,n=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,o=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,i=/^(\w+)$/,a=[0,0,0,1],s,u,l;if(s=e.match(r)){for(l=s[2],s=s[1],u=0;u<3;u++){var c=u*2;a[u]=parseInt(s.slice(c,c+2),16)}l&&(a[3]=parseInt(l,16)/255)}else if(s=e.match(t)){for(s=s[1],l=s[3],u=0;u<3;u++)a[u]=parseInt(s[u]+s[u],16);l&&(a[3]=parseInt(l+l,16)/255)}else if(s=e.match(n)){for(u=0;u<3;u++)a[u]=parseInt(s[u+1],0);s[4]&&(s[5]?a[3]=parseFloat(s[4])*.01:a[3]=parseFloat(s[4]))}else if(s=e.match(o)){for(u=0;u<3;u++)a[u]=Math.round(parseFloat(s[u+1])*2.55);s[4]&&(s[5]?a[3]=parseFloat(s[4])*.01:a[3]=parseFloat(s[4]))}else return(s=e.match(i))?s[1]==="transparent"?[0,0,0,0]:qF.call(ru,s[1])?(a=ru[s[1]],a[3]=1,a):null:null;for(u=0;u<3;u++)a[u]=xn(a[u],0,255);return a[3]=xn(a[3],0,1),a};Tt.get.hsl=function(e){if(!e)return null;var t=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,r=e.match(t);if(r){var n=parseFloat(r[4]),o=(parseFloat(r[1])%360+360)%360,i=xn(parseFloat(r[2]),0,100),a=xn(parseFloat(r[3]),0,100),s=xn(isNaN(n)?1:n,0,1);return[o,i,a,s]}return null};Tt.get.hwb=function(e){if(!e)return null;var t=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,r=e.match(t);if(r){var n=parseFloat(r[4]),o=(parseFloat(r[1])%360+360)%360,i=xn(parseFloat(r[2]),0,100),a=xn(parseFloat(r[3]),0,100),s=xn(isNaN(n)?1:n,0,1);return[o,i,a,s]}return null};Tt.to.hex=function(){var e=nu(arguments);return"#"+Uf(e[0])+Uf(e[1])+Uf(e[2])+(e[3]<1?Uf(Math.round(e[3]*255)):"")};Tt.to.rgb=function(){var e=nu(arguments);return e.length<4||e[3]===1?"rgb("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+")":"rgba("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+", "+e[3]+")"};Tt.to.rgb.percent=function(){var e=nu(arguments),t=Math.round(e[0]/255*100),r=Math.round(e[1]/255*100),n=Math.round(e[2]/255*100);return e.length<4||e[3]===1?"rgb("+t+"%, "+r+"%, "+n+"%)":"rgba("+t+"%, "+r+"%, "+n+"%, "+e[3]+")"};Tt.to.hsl=function(){var e=nu(arguments);return e.length<4||e[3]===1?"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)":"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+e[3]+")"};Tt.to.hwb=function(){var e=nu(arguments),t="";return e.length>=4&&e[3]!==1&&(t=", "+e[3]),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+t+")"};Tt.to.keyword=function(e){return BF[e.slice(0,3)]};function xn(e,t,r){return Math.min(Math.max(t,e),r)}function Uf(e){var t=Math.round(e).toString(16).toUpperCase();return t.length<2?"0"+t:t}});var UF=b((vve,WF)=>{"use strict";WF.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}});var ty=b((wve,KF)=>{var ao=UF(),GF={};for(Hf in ao)ao.hasOwnProperty(Hf)&&(GF[ao[Hf]]=Hf);var Hf,X=KF.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(at in X)if(X.hasOwnProperty(at)){if(!("channels"in X[at]))throw new Error("missing channels property: "+at);if(!("labels"in X[at]))throw new Error("missing channel labels property: "+at);if(X[at].labels.length!==X[at].channels)throw new Error("channel and label counts mismatch: "+at);HF=X[at].channels,VF=X[at].labels,delete X[at].channels,delete X[at].labels,Object.defineProperty(X[at],"channels",{value:HF}),Object.defineProperty(X[at],"labels",{value:VF})}var HF,VF,at;X.rgb.hsl=function(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,o=Math.min(t,r,n),i=Math.max(t,r,n),a=i-o,s,u,l;return i===o?s=0:t===i?s=(r-n)/a:r===i?s=2+(n-t)/a:n===i&&(s=4+(t-r)/a),s=Math.min(s*60,360),s<0&&(s+=360),l=(o+i)/2,i===o?u=0:l<=.5?u=a/(i+o):u=a/(2-i-o),[s,u*100,l*100]};X.rgb.hsv=function(e){var t,r,n,o,i,a=e[0]/255,s=e[1]/255,u=e[2]/255,l=Math.max(a,s,u),c=l-Math.min(a,s,u),f=function(p){return(l-p)/6/c+1/2};return c===0?o=i=0:(i=c/l,t=f(a),r=f(s),n=f(u),a===l?o=n-r:s===l?o=1/3+t-n:u===l&&(o=2/3+r-t),o<0?o+=1:o>1&&(o-=1)),[o*360,i*100,l*100]};X.rgb.hwb=function(e){var t=e[0],r=e[1],n=e[2],o=X.rgb.hsl(e)[0],i=1/255*Math.min(t,Math.min(r,n));return n=1-1/255*Math.max(t,Math.max(r,n)),[o,i*100,n*100]};X.rgb.cmyk=function(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,o,i,a,s;return s=Math.min(1-t,1-r,1-n),o=(1-t-s)/(1-s)||0,i=(1-r-s)/(1-s)||0,a=(1-n-s)/(1-s)||0,[o*100,i*100,a*100,s*100]};function vH(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)+Math.pow(e[2]-t[2],2)}X.rgb.keyword=function(e){var t=GF[e];if(t)return t;var r=1/0,n;for(var o in ao)if(ao.hasOwnProperty(o)){var i=ao[o],a=vH(e,i);a<r&&(r=a,n=o)}return n};X.keyword.rgb=function(e){return ao[e]};X.rgb.xyz=function(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255;t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92,n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92;var o=t*.4124+r*.3576+n*.1805,i=t*.2126+r*.7152+n*.0722,a=t*.0193+r*.1192+n*.9505;return[o*100,i*100,a*100]};X.rgb.lab=function(e){var t=X.rgb.xyz(e),r=t[0],n=t[1],o=t[2],i,a,s;return r/=95.047,n/=100,o/=108.883,r=r>.008856?Math.pow(r,1/3):7.787*r+16/116,n=n>.008856?Math.pow(n,1/3):7.787*n+16/116,o=o>.008856?Math.pow(o,1/3):7.787*o+16/116,i=116*n-16,a=500*(r-n),s=200*(n-o),[i,a,s]};X.hsl.rgb=function(e){var t=e[0]/360,r=e[1]/100,n=e[2]/100,o,i,a,s,u;if(r===0)return u=n*255,[u,u,u];n<.5?i=n*(1+r):i=n+r-n*r,o=2*n-i,s=[0,0,0];for(var l=0;l<3;l++)a=t+1/3*-(l-1),a<0&&a++,a>1&&a--,6*a<1?u=o+(i-o)*6*a:2*a<1?u=i:3*a<2?u=o+(i-o)*(2/3-a)*6:u=o,s[l]=u*255;return s};X.hsl.hsv=function(e){var t=e[0],r=e[1]/100,n=e[2]/100,o=r,i=Math.max(n,.01),a,s;return n*=2,r*=n<=1?n:2-n,o*=i<=1?i:2-i,s=(n+r)/2,a=n===0?2*o/(i+o):2*r/(n+r),[t,a*100,s*100]};X.hsv.rgb=function(e){var t=e[0]/60,r=e[1]/100,n=e[2]/100,o=Math.floor(t)%6,i=t-Math.floor(t),a=255*n*(1-r),s=255*n*(1-r*i),u=255*n*(1-r*(1-i));switch(n*=255,o){case 0:return[n,u,a];case 1:return[s,n,a];case 2:return[a,n,u];case 3:return[a,s,n];case 4:return[u,a,n];case 5:return[n,a,s]}};X.hsv.hsl=function(e){var t=e[0],r=e[1]/100,n=e[2]/100,o=Math.max(n,.01),i,a,s;return s=(2-r)*n,i=(2-r)*o,a=r*o,a/=i<=1?i:2-i,a=a||0,s/=2,[t,a*100,s*100]};X.hwb.rgb=function(e){var t=e[0]/360,r=e[1]/100,n=e[2]/100,o=r+n,i,a,s,u;o>1&&(r/=o,n/=o),i=Math.floor(6*t),a=1-n,s=6*t-i,i&1&&(s=1-s),u=r+s*(a-r);var l,c,f;switch(i){default:case 6:case 0:l=a,c=u,f=r;break;case 1:l=u,c=a,f=r;break;case 2:l=r,c=a,f=u;break;case 3:l=r,c=u,f=a;break;case 4:l=u,c=r,f=a;break;case 5:l=a,c=r,f=u;break}return[l*255,c*255,f*255]};X.cmyk.rgb=function(e){var t=e[0]/100,r=e[1]/100,n=e[2]/100,o=e[3]/100,i,a,s;return i=1-Math.min(1,t*(1-o)+o),a=1-Math.min(1,r*(1-o)+o),s=1-Math.min(1,n*(1-o)+o),[i*255,a*255,s*255]};X.xyz.rgb=function(e){var t=e[0]/100,r=e[1]/100,n=e[2]/100,o,i,a;return o=t*3.2406+r*-1.5372+n*-.4986,i=t*-.9689+r*1.8758+n*.0415,a=t*.0557+r*-.204+n*1.057,o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o*12.92,i=i>.0031308?1.055*Math.pow(i,1/2.4)-.055:i*12.92,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:a*12.92,o=Math.min(Math.max(0,o),1),i=Math.min(Math.max(0,i),1),a=Math.min(Math.max(0,a),1),[o*255,i*255,a*255]};X.xyz.lab=function(e){var t=e[0],r=e[1],n=e[2],o,i,a;return t/=95.047,r/=100,n/=108.883,t=t>.008856?Math.pow(t,1/3):7.787*t+16/116,r=r>.008856?Math.pow(r,1/3):7.787*r+16/116,n=n>.008856?Math.pow(n,1/3):7.787*n+16/116,o=116*r-16,i=500*(t-r),a=200*(r-n),[o,i,a]};X.lab.xyz=function(e){var t=e[0],r=e[1],n=e[2],o,i,a;i=(t+16)/116,o=r/500+i,a=i-n/200;var s=Math.pow(i,3),u=Math.pow(o,3),l=Math.pow(a,3);return i=s>.008856?s:(i-16/116)/7.787,o=u>.008856?u:(o-16/116)/7.787,a=l>.008856?l:(a-16/116)/7.787,o*=95.047,i*=100,a*=108.883,[o,i,a]};X.lab.lch=function(e){var t=e[0],r=e[1],n=e[2],o,i,a;return o=Math.atan2(n,r),i=o*360/2/Math.PI,i<0&&(i+=360),a=Math.sqrt(r*r+n*n),[t,a,i]};X.lch.lab=function(e){var t=e[0],r=e[1],n=e[2],o,i,a;return a=n/360*2*Math.PI,o=r*Math.cos(a),i=r*Math.sin(a),[t,o,i]};X.rgb.ansi16=function(e){var t=e[0],r=e[1],n=e[2],o=1 in arguments?arguments[1]:X.rgb.hsv(e)[2];if(o=Math.round(o/50),o===0)return 30;var i=30+(Math.round(n/255)<<2|Math.round(r/255)<<1|Math.round(t/255));return o===2&&(i+=60),i};X.hsv.ansi16=function(e){return X.rgb.ansi16(X.hsv.rgb(e),e[2])};X.rgb.ansi256=function(e){var t=e[0],r=e[1],n=e[2];if(t===r&&r===n)return t<8?16:t>248?231:Math.round((t-8)/247*24)+232;var o=16+36*Math.round(t/255*5)+6*Math.round(r/255*5)+Math.round(n/255*5);return o};X.ansi16.rgb=function(e){var t=e%10;if(t===0||t===7)return e>50&&(t+=3.5),t=t/10.5*255,[t,t,t];var r=(~~(e>50)+1)*.5,n=(t&1)*r*255,o=(t>>1&1)*r*255,i=(t>>2&1)*r*255;return[n,o,i]};X.ansi256.rgb=function(e){if(e>=232){var t=(e-232)*10+8;return[t,t,t]}e-=16;var r,n=Math.floor(e/36)/5*255,o=Math.floor((r=e%36)/6)/5*255,i=r%6/5*255;return[n,o,i]};X.rgb.hex=function(e){var t=((Math.round(e[0])&255)<<16)+((Math.round(e[1])&255)<<8)+(Math.round(e[2])&255),r=t.toString(16).toUpperCase();return"000000".substring(r.length)+r};X.hex.rgb=function(e){var t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];var r=t[0];t[0].length===3&&(r=r.split("").map(function(s){return s+s}).join(""));var n=parseInt(r,16),o=n>>16&255,i=n>>8&255,a=n&255;return[o,i,a]};X.rgb.hcg=function(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,o=Math.max(Math.max(t,r),n),i=Math.min(Math.min(t,r),n),a=o-i,s,u;return a<1?s=i/(1-a):s=0,a<=0?u=0:o===t?u=(r-n)/a%6:o===r?u=2+(n-t)/a:u=4+(t-r)/a+4,u/=6,u%=1,[u*360,a*100,s*100]};X.hsl.hcg=function(e){var t=e[1]/100,r=e[2]/100,n=1,o=0;return r<.5?n=2*t*r:n=2*t*(1-r),n<1&&(o=(r-.5*n)/(1-n)),[e[0],n*100,o*100]};X.hsv.hcg=function(e){var t=e[1]/100,r=e[2]/100,n=t*r,o=0;return n<1&&(o=(r-n)/(1-n)),[e[0],n*100,o*100]};X.hcg.rgb=function(e){var t=e[0]/360,r=e[1]/100,n=e[2]/100;if(r===0)return[n*255,n*255,n*255];var o=[0,0,0],i=t%1*6,a=i%1,s=1-a,u=0;switch(Math.floor(i)){case 0:o[0]=1,o[1]=a,o[2]=0;break;case 1:o[0]=s,o[1]=1,o[2]=0;break;case 2:o[0]=0,o[1]=1,o[2]=a;break;case 3:o[0]=0,o[1]=s,o[2]=1;break;case 4:o[0]=a,o[1]=0,o[2]=1;break;default:o[0]=1,o[1]=0,o[2]=s}return u=(1-r)*n,[(r*o[0]+u)*255,(r*o[1]+u)*255,(r*o[2]+u)*255]};X.hcg.hsv=function(e){var t=e[1]/100,r=e[2]/100,n=t+r*(1-t),o=0;return n>0&&(o=t/n),[e[0],o*100,n*100]};X.hcg.hsl=function(e){var t=e[1]/100,r=e[2]/100,n=r*(1-t)+.5*t,o=0;return n>0&&n<.5?o=t/(2*n):n>=.5&&n<1&&(o=t/(2*(1-n))),[e[0],o*100,n*100]};X.hcg.hwb=function(e){var t=e[1]/100,r=e[2]/100,n=t+r*(1-t);return[e[0],(n-t)*100,(1-n)*100]};X.hwb.hcg=function(e){var t=e[1]/100,r=e[2]/100,n=1-r,o=n-t,i=0;return o<1&&(i=(n-o)/(1-o)),[e[0],o*100,i*100]};X.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]};X.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]};X.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]};X.gray.hsl=X.gray.hsv=function(e){return[0,0,e[0]]};X.gray.hwb=function(e){return[0,100,e[0]]};X.gray.cmyk=function(e){return[0,0,0,e[0]]};X.gray.lab=function(e){return[e[0],0,0]};X.gray.hex=function(e){var t=Math.round(e[0]/100*255)&255,r=(t<<16)+(t<<8)+t,n=r.toString(16).toUpperCase();return"000000".substring(n.length)+n};X.rgb.gray=function(e){var t=(e[0]+e[1]+e[2])/3;return[t/255*100]}});var ZF=b((xve,JF)=>{var Vf=ty();function wH(){for(var e={},t=Object.keys(Vf),r=t.length,n=0;n<r;n++)e[t[n]]={distance:-1,parent:null};return e}function xH(e){var t=wH(),r=[e];for(t[e].distance=0;r.length;)for(var n=r.pop(),o=Object.keys(Vf[n]),i=o.length,a=0;a<i;a++){var s=o[a],u=t[s];u.distance===-1&&(u.distance=t[n].distance+1,u.parent=n,r.unshift(s))}return t}function EH(e,t){return function(r){return t(e(r))}}function SH(e,t){for(var r=[t[e].parent,e],n=Vf[t[e].parent][e],o=t[e].parent;t[o].parent;)r.unshift(t[o].parent),n=EH(Vf[t[o].parent][o],n),o=t[o].parent;return n.conversion=r,n}JF.exports=function(e){for(var t=xH(e),r={},n=Object.keys(t),o=n.length,i=0;i<o;i++){var a=n[i],s=t[a];s.parent!==null&&(r[a]=SH(a,t))}return r}});var QF=b((Eve,YF)=>{var ry=ty(),kH=ZF(),Pi={},AH=Object.keys(ry);function IH(e){var t=function(r){return r==null?r:(arguments.length>1&&(r=Array.prototype.slice.call(arguments)),e(r))};return"conversion"in e&&(t.conversion=e.conversion),t}function _H(e){var t=function(r){if(r==null)return r;arguments.length>1&&(r=Array.prototype.slice.call(arguments));var n=e(r);if(typeof n=="object")for(var o=n.length,i=0;i<o;i++)n[i]=Math.round(n[i]);return n};return"conversion"in e&&(t.conversion=e.conversion),t}AH.forEach(function(e){Pi[e]={},Object.defineProperty(Pi[e],"channels",{value:ry[e].channels}),Object.defineProperty(Pi[e],"labels",{value:ry[e].labels});var t=kH(e),r=Object.keys(t);r.forEach(function(n){var o=t[n];Pi[e][n]=_H(o),Pi[e][n].raw=IH(o)})});YF.exports=Pi});var tN=b((Sve,eN)=>{"use strict";var ou=zF(),Ot=QF(),iy=[].slice,XF=["keyword","gray","hex"],ny={};Object.keys(Ot).forEach(function(e){ny[iy.call(Ot[e].labels).sort().join("")]=e});var Gf={};function Ye(e,t){if(!(this instanceof Ye))return new Ye(e,t);if(t&&t in XF&&(t=null),t&&!(t in Ot))throw new Error("Unknown model: "+t);var r,n;if(e==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(e instanceof Ye)this.model=e.model,this.color=e.color.slice(),this.valpha=e.valpha;else if(typeof e=="string"){var o=ou.get(e);if(o===null)throw new Error("Unable to parse color from string: "+e);this.model=o.model,n=Ot[this.model].channels,this.color=o.value.slice(0,n),this.valpha=typeof o.value[n]=="number"?o.value[n]:1}else if(e.length){this.model=t||"rgb",n=Ot[this.model].channels;var i=iy.call(e,0,n);this.color=oy(i,n),this.valpha=typeof e[n]=="number"?e[n]:1}else if(typeof e=="number")e&=16777215,this.model="rgb",this.color=[e>>16&255,e>>8&255,e&255],this.valpha=1;else{this.valpha=1;var a=Object.keys(e);"alpha"in e&&(a.splice(a.indexOf("alpha"),1),this.valpha=typeof e.alpha=="number"?e.alpha:0);var s=a.sort().join("");if(!(s in ny))throw new Error("Unable to parse color from object: "+JSON.stringify(e));this.model=ny[s];var u=Ot[this.model].labels,l=[];for(r=0;r<u.length;r++)l.push(e[u[r]]);this.color=oy(l)}if(Gf[this.model])for(n=Ot[this.model].channels,r=0;r<n;r++){var c=Gf[this.model][r];c&&(this.color[r]=c(this.color[r]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}Ye.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(e){var t=this.model in ou.to?this:this.rgb();t=t.round(typeof e=="number"?e:1);var r=t.valpha===1?t.color:t.color.concat(this.valpha);return ou.to[t.model](r)},percentString:function(e){var t=this.rgb().round(typeof e=="number"?e:1),r=t.valpha===1?t.color:t.color.concat(this.valpha);return ou.to.rgb.percent(r)},array:function(){return this.valpha===1?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var e={},t=Ot[this.model].channels,r=Ot[this.model].labels,n=0;n<t;n++)e[r[n]]=this.color[n];return this.valpha!==1&&(e.alpha=this.valpha),e},unitArray:function(){var e=this.rgb().color;return e[0]/=255,e[1]/=255,e[2]/=255,this.valpha!==1&&e.push(this.valpha),e},unitObject:function(){var e=this.rgb().object();return e.r/=255,e.g/=255,e.b/=255,this.valpha!==1&&(e.alpha=this.valpha),e},round:function(e){return e=Math.max(e||0,0),new Ye(this.color.map(TH(e)).concat(this.valpha),this.model)},alpha:function(e){return arguments.length?new Ye(this.color.concat(Math.max(0,Math.min(1,e))),this.model):this.valpha},red:Ce("rgb",0,je(255)),green:Ce("rgb",1,je(255)),blue:Ce("rgb",2,je(255)),hue:Ce(["hsl","hsv","hsl","hwb","hcg"],0,function(e){return(e%360+360)%360}),saturationl:Ce("hsl",1,je(100)),lightness:Ce("hsl",2,je(100)),saturationv:Ce("hsv",1,je(100)),value:Ce("hsv",2,je(100)),chroma:Ce("hcg",1,je(100)),gray:Ce("hcg",2,je(100)),white:Ce("hwb",1,je(100)),wblack:Ce("hwb",2,je(100)),cyan:Ce("cmyk",0,je(100)),magenta:Ce("cmyk",1,je(100)),yellow:Ce("cmyk",2,je(100)),black:Ce("cmyk",3,je(100)),x:Ce("xyz",0,je(100)),y:Ce("xyz",1,je(100)),z:Ce("xyz",2,je(100)),l:Ce("lab",0,je(100)),a:Ce("lab",1),b:Ce("lab",2),keyword:function(e){return arguments.length?new Ye(e):Ot[this.model].keyword(this.color)},hex:function(e){return arguments.length?new Ye(e):ou.to.hex(this.rgb().round().color)},rgbNumber:function(){var e=this.rgb().color;return(e[0]&255)<<16|(e[1]&255)<<8|e[2]&255},luminosity:function(){for(var e=this.rgb().color,t=[],r=0;r<e.length;r++){var n=e[r]/255;t[r]=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4)}return .2126*t[0]+.7152*t[1]+.0722*t[2]},contrast:function(e){var t=this.luminosity(),r=e.luminosity();return t>r?(t+.05)/(r+.05):(r+.05)/(t+.05)},level:function(e){var t=this.contrast(e);return t>=7.1?"AAA":t>=4.5?"AA":""},isDark:function(){var e=this.rgb().color,t=(e[0]*299+e[1]*587+e[2]*114)/1e3;return t<128},isLight:function(){return!this.isDark()},negate:function(){for(var e=this.rgb(),t=0;t<3;t++)e.color[t]=255-e.color[t];return e},lighten:function(e){var t=this.hsl();return t.color[2]+=t.color[2]*e,t},darken:function(e){var t=this.hsl();return t.color[2]-=t.color[2]*e,t},saturate:function(e){var t=this.hsl();return t.color[1]+=t.color[1]*e,t},desaturate:function(e){var t=this.hsl();return t.color[1]-=t.color[1]*e,t},whiten:function(e){var t=this.hwb();return t.color[1]+=t.color[1]*e,t},blacken:function(e){var t=this.hwb();return t.color[2]+=t.color[2]*e,t},grayscale:function(){var e=this.rgb().color,t=e[0]*.3+e[1]*.59+e[2]*.11;return Ye.rgb(t,t,t)},fade:function(e){return this.alpha(this.valpha-this.valpha*e)},opaquer:function(e){return this.alpha(this.valpha+this.valpha*e)},rotate:function(e){var t=this.hsl(),r=t.color[0];return r=(r+e)%360,r=r<0?360+r:r,t.color[0]=r,t},mix:function(e,t){if(!e||!e.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof e);var r=e.rgb(),n=this.rgb(),o=t===void 0?.5:t,i=2*o-1,a=r.alpha()-n.alpha(),s=((i*a===-1?i:(i+a)/(1+i*a))+1)/2,u=1-s;return Ye.rgb(s*r.red()+u*n.red(),s*r.green()+u*n.green(),s*r.blue()+u*n.blue(),r.alpha()*o+n.alpha()*(1-o))}};Object.keys(Ot).forEach(function(e){if(XF.indexOf(e)===-1){var t=Ot[e].channels;Ye.prototype[e]=function(){if(this.model===e)return new Ye(this);if(arguments.length)return new Ye(arguments,e);var r=typeof arguments[t]=="number"?t:this.valpha;return new Ye(OH(Ot[this.model][e].raw(this.color)).concat(r),e)},Ye[e]=function(r){return typeof r=="number"&&(r=oy(iy.call(arguments),t)),new Ye(r,e)}}});function CH(e,t){return Number(e.toFixed(t))}function TH(e){return function(t){return CH(t,e)}}function Ce(e,t,r){return e=Array.isArray(e)?e:[e],e.forEach(function(n){(Gf[n]||(Gf[n]=[]))[t]=r}),e=e[0],function(n){var o;return arguments.length?(r&&(n=r(n)),o=this[e](),o.color[t]=n,o):(o=this[e]().color[t],r&&(o=r(o)),o)}}function je(e){return function(t){return Math.max(0,Math.min(e,t))}}function OH(e){return Array.isArray(e)?e:[e]}function oy(e,t){for(var r=0;r<t;r++)typeof e[r]!="number"&&(e[r]=0);return e}eN.exports=Ye});var wN=b((kve,vN)=>{var DH="Expected a function",rN="__lodash_placeholder__",uo=1,Jf=2,FH=4,so=8,iu=16,Ri=32,au=64,cN=128,NH=256,lN=512,nN=1/0,PH=9007199254740991,RH=17976931348623157e292,oN=0/0,MH=[["ary",cN],["bind",uo],["bindKey",Jf],["curry",so],["curryRight",iu],["flip",lN],["partial",Ri],["partialRight",au],["rearg",NH]],$H="[object Function]",LH="[object GeneratorFunction]",qH="[object Symbol]",BH=/[\\^$.*+?()[\]{}|]/g,jH=/^\s+|\s+$/g,zH=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,WH=/\{\n\/\* \[wrapped with (.+)\] \*/,UH=/,? & /,HH=/^[-+]0x[0-9a-f]+$/i,VH=/^0b[01]+$/i,GH=/^\[object .+?Constructor\]$/,KH=/^0o[0-7]+$/i,JH=/^(?:0|[1-9]\d*)$/,ZH=parseInt,YH=typeof global=="object"&&global&&global.Object===Object&&global,QH=typeof self=="object"&&self&&self.Object===Object&&self,uu=YH||QH||Function("return this")();function fN(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function XH(e,t){for(var r=-1,n=e?e.length:0;++r<n&&t(e[r],r,e)!==!1;);return e}function eV(e,t){var r=e?e.length:0;return!!r&&rV(e,t,0)>-1}function tV(e,t,r,n){for(var o=e.length,i=r+(n?1:-1);n?i--:++i<o;)if(t(e[i],i,e))return i;return-1}function rV(e,t,r){if(t!==t)return tV(e,nV,r);for(var n=r-1,o=e.length;++n<o;)if(e[n]===t)return n;return-1}function nV(e){return e!==e}function oV(e,t){for(var r=e.length,n=0;r--;)e[r]===t&&n++;return n}function iV(e,t){return e?.[t]}function aV(e){var t=!1;if(e!=null&&typeof e.toString!="function")try{t=!!(e+"")}catch{}return t}function pN(e,t){for(var r=-1,n=e.length,o=0,i=[];++r<n;){var a=e[r];(a===t||a===rN)&&(e[r]=rN,i[o++]=r)}return i}var sV=Function.prototype,dN=Object.prototype,ay=uu["__core-js_shared__"],iN=function(){var e=/[^.]+$/.exec(ay&&ay.keys&&ay.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),mN=sV.toString,uV=dN.hasOwnProperty,hN=dN.toString,cV=RegExp("^"+mN.call(uV).replace(BH,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),lV=Object.create,Kf=Math.max,fV=Math.min,aN=function(){var e=sN(Object,"defineProperty"),t=sN.name;return t&&t.length>2?e:void 0}();function pV(e){return Mi(e)?lV(e):{}}function dV(e){if(!Mi(e)||kV(e))return!1;var t=CV(e)||aV(e)?cV:GH;return t.test(IV(e))}function mV(e,t,r,n){for(var o=-1,i=e.length,a=r.length,s=-1,u=t.length,l=Kf(i-a,0),c=Array(u+l),f=!n;++s<u;)c[s]=t[s];for(;++o<a;)(f||o<i)&&(c[r[o]]=e[o]);for(;l--;)c[s++]=e[o++];return c}function hV(e,t,r,n){for(var o=-1,i=e.length,a=-1,s=r.length,u=-1,l=t.length,c=Kf(i-s,0),f=Array(c+l),p=!n;++o<c;)f[o]=e[o];for(var d=o;++u<l;)f[d+u]=t[u];for(;++a<s;)(p||o<i)&&(f[d+r[a]]=e[o++]);return f}function gV(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}function yV(e,t,r){var n=t&uo,o=su(e);function i(){var a=this&&this!==uu&&this instanceof i?o:e;return a.apply(n?r:this,arguments)}return i}function su(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=pV(e.prototype),n=e.apply(r,t);return Mi(n)?n:r}}function bV(e,t,r){var n=su(e);function o(){for(var i=arguments.length,a=Array(i),s=i,u=yN(o);s--;)a[s]=arguments[s];var l=i<3&&a[0]!==u&&a[i-1]!==u?[]:pN(a,u);if(i-=l.length,i<r)return gN(e,t,sy,o.placeholder,void 0,a,l,void 0,void 0,r-i);var c=this&&this!==uu&&this instanceof o?n:e;return fN(c,this,a)}return o}function sy(e,t,r,n,o,i,a,s,u,l){var c=t&cN,f=t&uo,p=t&Jf,d=t&(so|iu),h=t&lN,g=p?void 0:su(e);function y(){for(var w=arguments.length,x=Array(w),S=w;S--;)x[S]=arguments[S];if(d)var O=yN(y),F=oV(x,O);if(n&&(x=mV(x,n,o,d)),i&&(x=hV(x,i,a,d)),w-=F,d&&w<l){var D=pN(x,O);return gN(e,t,sy,y.placeholder,r,x,D,s,u,l-w)}var P=f?r:this,R=p?P[e]:e;return w=x.length,s?x=AV(x,s):h&&w>1&&x.reverse(),c&&u<w&&(x.length=u),this&&this!==uu&&this instanceof y&&(R=g||su(R)),R.apply(P,x)}return y}function vV(e,t,r,n){var o=t&uo,i=su(e);function a(){for(var s=-1,u=arguments.length,l=-1,c=n.length,f=Array(c+u),p=this&&this!==uu&&this instanceof a?i:e;++l<c;)f[l]=n[l];for(;u--;)f[l++]=arguments[++s];return fN(p,o?r:this,f)}return a}function gN(e,t,r,n,o,i,a,s,u,l){var c=t&so,f=c?a:void 0,p=c?void 0:a,d=c?i:void 0,h=c?void 0:i;t|=c?Ri:au,t&=~(c?au:Ri),t&FH||(t&=~(uo|Jf));var g=r(e,t,o,d,f,h,p,s,u,l);return g.placeholder=n,bN(g,e,t)}function wV(e,t,r,n,o,i,a,s){var u=t&Jf;if(!u&&typeof e!="function")throw new TypeError(DH);var l=n?n.length:0;if(l||(t&=~(Ri|au),n=o=void 0),a=a===void 0?a:Kf(uN(a),0),s=s===void 0?s:uN(s),l-=o?o.length:0,t&au){var c=n,f=o;n=o=void 0}var p=[e,t,r,n,o,c,f,i,a,s];if(e=p[0],t=p[1],r=p[2],n=p[3],o=p[4],s=p[9]=p[9]==null?u?0:e.length:Kf(p[9]-l,0),!s&&t&(so|iu)&&(t&=~(so|iu)),!t||t==uo)var d=yV(e,t,r);else t==so||t==iu?d=bV(e,t,s):(t==Ri||t==(uo|Ri))&&!o.length?d=vV(e,t,r,n):d=sy.apply(void 0,p);return bN(d,e,t)}function yN(e){var t=e;return t.placeholder}function sN(e,t){var r=iV(e,t);return dV(r)?r:void 0}function xV(e){var t=e.match(WH);return t?t[1].split(UH):[]}function EV(e,t){var r=t.length,n=r-1;return t[n]=(r>1?"& ":"")+t[n],t=t.join(r>2?", ":" "),e.replace(zH,`{
/* [wrapped with `+t+`] */
`)}function SV(e,t){return t=t??PH,!!t&&(typeof e=="number"||JH.test(e))&&e>-1&&e%1==0&&e<t}function kV(e){return!!iN&&iN in e}function AV(e,t){for(var r=e.length,n=fV(t.length,r),o=gV(e);n--;){var i=t[n];e[n]=SV(i,r)?o[i]:void 0}return e}var bN=aN?function(e,t,r){var n=t+"";return aN(e,"toString",{configurable:!0,enumerable:!1,value:NV(EV(n,_V(xV(n),r)))})}:PV;function IV(e){if(e!=null){try{return mN.call(e)}catch{}try{return e+""}catch{}}return""}function _V(e,t){return XH(MH,function(r){var n="_."+r[0];t&r[1]&&!eV(e,n)&&e.push(n)}),e.sort()}function uy(e,t,r){t=r?void 0:t;var n=wV(e,so,void 0,void 0,void 0,void 0,void 0,t);return n.placeholder=uy.placeholder,n}function CV(e){var t=Mi(e)?hN.call(e):"";return t==$H||t==LH}function Mi(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function TV(e){return!!e&&typeof e=="object"}function OV(e){return typeof e=="symbol"||TV(e)&&hN.call(e)==qH}function DV(e){if(!e)return e===0?e:0;if(e=FV(e),e===nN||e===-nN){var t=e<0?-1:1;return t*RH}return e===e?e:0}function uN(e){var t=DV(e),r=t%1;return t===t?r?t-r:t:0}function FV(e){if(typeof e=="number")return e;if(OV(e))return oN;if(Mi(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Mi(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(jH,"");var r=VH.test(e);return r||KH.test(e)?ZH(e.slice(2),r?2:8):HH.test(e)?oN:+e}function NV(e){return function(){return e}}function PV(e){return e}uy.placeholder={};vN.exports=uy});var yy=b((ip,rP)=>{(function(e,t){typeof ip=="object"&&typeof rP<"u"?t(ip,(C(),Nu(At))):typeof define=="function"&&define.amd?define(["exports","react"],t):(e=typeof globalThis<"u"?globalThis:e||self,t(e.ReactErrorBoundary={},e.React))})(ip,function(e,t){"use strict";function r(f){if(f&&f.__esModule)return f;var p=Object.create(null);return f&&Object.keys(f).forEach(function(d){if(d!=="default"){var h=Object.getOwnPropertyDescriptor(f,d);Object.defineProperty(p,d,h.get?h:{enumerable:!0,get:function(){return f[d]}})}}),p.default=f,Object.freeze(p)}var n=r(t);function o(f,p){return o=Object.setPrototypeOf||function(h,g){return h.__proto__=g,h},o(f,p)}function i(f,p){f.prototype=Object.create(p.prototype),f.prototype.constructor=f,o(f,p)}var a=function(p,d){return p===void 0&&(p=[]),d===void 0&&(d=[]),p.length!==d.length||p.some(function(h,g){return!Object.is(h,d[g])})},s={error:null},u=function(f){i(p,f);function p(){for(var h,g=arguments.length,y=new Array(g),w=0;w<g;w++)y[w]=arguments[w];return h=f.call.apply(f,[this].concat(y))||this,h.state=s,h.resetErrorBoundary=function(){for(var x,S=arguments.length,O=new Array(S),F=0;F<S;F++)O[F]=arguments[F];h.props.onReset==null||(x=h.props).onReset.apply(x,O),h.reset()},h}p.getDerivedStateFromError=function(g){return{error:g}};var d=p.prototype;return d.reset=function(){this.setState(s)},d.componentDidCatch=function(g,y){var w,x;(w=(x=this.props).onError)==null||w.call(x,g,y)},d.componentDidUpdate=function(g,y){var w=this.state.error,x=this.props.resetKeys;if(w!==null&&y.error!==null&&a(g.resetKeys,x)){var S,O;(S=(O=this.props).onResetKeysChange)==null||S.call(O,g.resetKeys,x),this.reset()}},d.render=function(){var g=this.state.error,y=this.props,w=y.fallbackRender,x=y.FallbackComponent,S=y.fallback;if(g!==null){var O={error:g,resetErrorBoundary:this.resetErrorBoundary};if(n.isValidElement(S))return S;if(typeof w=="function")return w(O);if(x)return n.createElement(x,O);throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},p}(n.Component);function l(f,p){var d=function(y){return n.createElement(u,p,n.createElement(f,y))},h=f.displayName||f.name||"Unknown";return d.displayName="withErrorBoundary("+h+")",d}function c(f){var p=n.useState(null),d=p[0],h=p[1];if(f!=null)throw f;if(d!=null)throw d;return h}e.ErrorBoundary=u,e.useErrorHandler=c,e.withErrorBoundary=l,Object.defineProperty(e,"__esModule",{value:!0})})});var cZ={};xb(cZ,{default:()=>be});module.exports=Nu(cZ);var ga=require("obsidian");var kb=require("obsidian"),Co=class extends kb.Component{async load(){if(!this._loaded){this._loaded=!0,await this.onload();for(var t=0,r=this._children.slice();t<r.length;t++)await r[t].load()}}async unload(){if(this._loaded){this._loaded=!1;for(var t=this._children,r=this._events;t.length>0;)await t.pop().unload();for(;r.length>0;)r.pop()();await this.onunload()}}async addChild(t){return this._children.push(t),this._loaded&&await t.load(),t}async removeChild(t){var r=this._children,n=r.indexOf(t);return n!==-1&&(r.splice(n,1),await t.unload()),t}};var Gp=Symbol.for("v1.to-use.peak-dev.org"),Kp=Symbol.for("v1.factory.to-use.peak-dev.org"),To,ha,Oe=function(){return Object.defineProperties(e(),{this:{get(){if(To)return To;throw new TypeError("No current context")}},me:{value:Gp},factory:{value:Kp}});function e(o){let i=new Map;i.prev=o;let a=Object.assign(o?u=>{let l=i.get(u);if(!l){for(let d=i.prev;d;d=d.prev)if(l=d.get(u)){l=Object.assign(Object.assign({},l),{s:l.s||1});break}l=l||{s:2,v:r},i.set(u,l)}let c,f,p;for(;;)switch(l.s){case 0:return To===a&&ha&&ha.push(u),l.v;case 1:if(c=l.d,!c||s(()=>c.k.every(d=>a(d)===c.c(d)))){l.s=0;break}l.v=c.f;case 2:l.s=4;try{t(i,u,0,s(f=l.v,u,p=[])),p.length&&(l.d={c:a,f,k:p});break}catch(d){l.s=3,l.v=d,l.d=null}case 3:throw l.v;case 4:throw new Error(`Factory ${String(l.v)} didn't resolve ${String(u)}`)}}:u=>Oe.this(u),{def(u,l){return t(i,u,2,l),a},set(u,l){return t(i,u,1,l),a},fork(u){let l=e(i);return u!=null?l(u):l}});return o?a.use=a:a;function s(u,l,c){let f=To,p=ha;try{return To=a,ha=c,u(l)}finally{To=f,ha=p}}}function t(o,i,a,s){if(o.has(i)){let u=o.get(i);if(!u.s)throw new Error(`Already read: ${String(i)}`);u.s=a,u.v=s,u.d=null}else o.set(i,{s:a,v:s})}function r(o){if(typeof o[Gp]=="function")return o[Gp](o);if(n(o))return typeof o.prototype[Kp]=="function"?o.prototype[Kp]():new o;throw new ReferenceError(`No config for ${String(o)}`)}function n(o){return typeof o=="function"&&o.prototype!==void 0&&(Object.getPrototypeOf(o.prototype)!==Object.prototype||Object.getOwnPropertyNames(o.prototype).length>1||o.toString().startsWith("class"))}}();Oe.def(ga.Plugin,()=>{throw new Error("Plugin not created yet")});var ce=class extends Co{constructor(){super(...arguments),this.use=Oe.service(this)}};Oe.service=function(e){return Oe(Pu).addChild(e),Oe.this};Oe.plugin=function(e){let t=Oe.fork().set(ga.Plugin,e).set(e.constructor,e);return e.addChild(t.use(Pu)),t};var Pu=class extends Co{constructor(){super(...arguments),this.children=new Set([this])}onload(){this.loaded=!0}onunload(){this.loaded=!1,this.children.clear()}async addChild(t){this.children.has(t)||(this.children.add(t),this.loaded?super.addChild(t):await super.addChild(t))}};function Ru(e,t){e._loaded&&e.removeChild(t)}function Ab(e,t){let r=new ga.Component;r.onload=()=>{Ru(e,r),t()},e.addChild(r)}function Rt(e,t){let r=Object.keys(t).map(n=>O3(e,n,t[n]));return r.length===1?r[0]:function(){r.forEach(n=>n())}}function O3(e,t,r){let n=e[t],o=e.hasOwnProperty(t),i=r(n);return n&&Object.setPrototypeOf(i,n),Object.setPrototypeOf(a,i),e[t]=a,s;function a(...u){return i===n&&e[t]===a&&s(),i.apply(this,u)}function s(){e[t]===a&&(o?e[t]=n:delete e[t]),i!==n&&(i=n,Object.setPrototypeOf(a,n||Function))}}var Cb=require("obsidian");var Ib=require("obsidian");function _b(e){let t=app.workspace;switch(e?.getRoot()){case t.rootSplit:case t.floatingSplit:case t.leftSplit:case t.rightSplit:return!0;default:return!1}}var Jp,Oo=(Jp=window.queueMicrotask)!==null&&Jp!==void 0?Jp:(e=>t=>e.then(t))(Promise.resolve());var Zp=2,PZ=Symbol.for(`v${Zp}.layout-storage-events.ophidian.peak-dev.org`);var RZ=`ophidian-layout-storage:v${Zp}:item-load`,MZ=`ophidian-layout-storage:v${Zp}:item-save`;var D3=require("obsidian");var Ob=require("obsidian");var Tb=class extends Ob.Component{constructor(t,r){super(),this.use=t,this.container=r,this.win=this.container.win}[Oe.factory](){return new Yp(this.constructor)}static onload(t){}static onunload(t){}},Yp=class extends ce{constructor(t){super(),this.factory=t,this.instances=new Map,this.watching=!1,this.layoutReadyCallbacks=[]}onload(){var t,r;this.registerEvent(app.workspace.on("layout-change",()=>{app.workspace.layoutReady&&this.layoutReadyCallbacks.length&&(this.layoutReadyCallbacks.forEach(Oo),this.layoutReadyCallbacks=[])})),(r=(t=this.factory).onload)===null||r===void 0||r.call(t,this.use)}onLeafChange(t,r){return this.onLayoutReady(()=>t.call(r,app.workspace.activeLeaf)),app.workspace.on("active-leaf-change",n=>{app.workspace.layoutReady&&t.call(r,n)})}onLayoutReady(t){app.workspace.layoutReady?Oo(t):this.layoutReadyCallbacks.push(t)}onunload(){var t,r;(r=(t=this.factory).onunload)===null||r===void 0||r.call(t,this.use)}watch(){if(!this._loaded)Ab(this,()=>this.watch());else if(!this.watching){let{workspace:t}=app,r=this;this.watching=!0,this.registerEvent(t.on("window-open",n=>{this.onLayoutReady(()=>this.forContainer(n))})),this.register(Rt(t,{clearLayout(n){return async function(){try{return await n.call(this)}finally{r.onLayoutReady(()=>r.forAll())}}}})),this.onLayoutReady(()=>this.forAll())}return this}forWindow(t,r){var n;t===void 0&&(t=(n=window.activeWindow)!==null&&n!==void 0?n:window),r===void 0&&(r=!0);let o=P3(t);if(o)return this.forContainer(o,r)}forContainer(t,r=!0){t=t.getContainer();let n=this.instances.get(t);return!n&&r&&(n=new this.factory(this.use,t),n&&(this.instances.set(t,n),this.addChild(n),t.component.addChild(n),n.register(()=>{Ru(this,n),Ru(t.component,n),this.instances.delete(t)}))),n}forDom(t,r=!0){return this.forWindow(N3(t),r)}forLeaf(t=app.workspace.activeLeaf,r=!0){if(_b(t))return this.forContainer(t.getContainer(),r)}forView(t,r=!0){return this.forLeaf(t.leaf,r)}forAll(t=!0){return F3().map(r=>this.forContainer(r,t)).filter(r=>r)}};function F3(){return[app.workspace.rootSplit].concat(app.workspace.floatingSplit.children)}function N3(e){return e.win||(e.ownerDocument||e).defaultView||window}function P3(e){if(e===window)return app.workspace.rootSplit;let{floatingSplit:t}=app.workspace;if(t){for(let r of t.children)if(e===r.win)return r}}var R3=require("obsidian");var M3=require("obsidian");var h3=require("obsidian");var Db=e=>`obsidian-zotero:${e}`;var Mt=({key:e,groupID:t,parentItem:r},n=!1)=>{let o=[e];return!n&&r&&o.push(`a${r}`),typeof t=="number"&&o.push(`g${t}`),o.join("")},Fb=(e,t,r=!0)=>(n,...o)=>{let i="";for(let a=0;a<n.length;a++)a>0&&(i+=e(o[a-1])),i+=(r?n.raw:n)[a];return t(i)},ed=(e=!0,t)=>Fb(r=>r,r=>new RegExp(e?"^"+r+"$":r,t),!0),Qp=String.raw`[23456789ABCDEFGHIJKLMNPQRSTUVWXYZ]{8}`,Xp=String.raw`\d+`,Nb=e=>{let t={annotKey:Qp,parentKey:Qp,groupID:Xp,page:Xp};if(e)for(let r in t)t[r]=`(${t[r]})`;return Fb(r=>t[r],r=>r)`${"annotKey"}a${"parentKey"}(?:g${"groupID"})?(?:p${"page"})?`},Pb=ed()`${Qp}(?:g${Xp})?`,Rb=ed()`${Nb(!0)}`,Mb=ed()`(?:${Nb(!1)}n?)+`,Do=(e,t)=>{if(e===null)return null;let r;return typeof e=="number"?r=e:r=parseInt(e,10),Number.isInteger(r)?t?r+1:r:null};var $b=(e,t,{getLogger:r,configure:n})=>{let o=Db(e);return n({appenders:{out:{type:"console"}},categories:{default:{appenders:["out"],level:t},[o]:{appenders:["out"],level:t}}}),r(o)},Lb={ALL:"ALL",TRACE:"TRACE",DEBUG:"DEBUG",INFO:"INFO",WARN:"WARN",ERROR:"ERROR",FATAL:"FATAL",MARK:"MARK",OFF:"OFF"};var $t=()=>(...e)=>e;var qb=e=>`better-sqlite3-${e}.node`;var l2=se(Qe(),1),kc=se(a1(),1);var mc=e=>{let t=new Blob([e],{type:"text/javascript"});return URL.createObjectURL(t)};var u2=se(Wd(),1);var tm=se(Qe(),1),Ko=require("obsidian"),c2=se(c1(),1);var l1='"use strict";var Ud=Object.create;var Rr=Object.defineProperty,zd=Object.defineProperties,Kd=Object.getOwnPropertyDescriptor,Gd=Object.getOwnPropertyDescriptors,Hd=Object.getOwnPropertyNames,Wo=Object.getOwnPropertySymbols,Jd=Object.getPrototypeOf,Bo=Object.prototype.hasOwnProperty,Vd=Object.prototype.propertyIsEnumerable;var ei=(e,t,r)=>t in e?Rr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,$e=(e,t)=>{for(var r in t||(t={}))Bo.call(t,r)&&ei(e,r,t[r]);if(Wo)for(var r of Wo(t))Vd.call(t,r)&&ei(e,r,t[r]);return e},ti=(e,t)=>zd(e,Gd(t));var A=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Yd=(e,t)=>{for(var r in t)Rr(e,r,{get:t[r],enumerable:!0})},Qd=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Hd(t))!Bo.call(e,i)&&i!==r&&Rr(e,i,{get:()=>t[i],enumerable:!(n=Kd(t,i))||n.enumerable});return e};var Et=(e,t,r)=>(r=e!=null?Ud(Jd(e)):{},Qd(t||!e||!e.__esModule?Rr(r,"default",{value:e,enumerable:!0}):r,e));var ee=(e,t,r)=>(ei(e,typeof t!="symbol"?t+"":t,r),r);var Uo=A((exports,module)=>{(function(t,r){typeof exports=="object"&&typeof module=="object"?module.exports=r():typeof define=="function"&&define.amd?define("workerpool",[],r):typeof exports=="object"?exports.workerpool=r():t.workerpool=r()})(typeof self!="undefined"?self:exports,function(){return function(){var __webpack_modules__={162:function(e,t,r){"use strict";r.r(t),r.d(t,{IFrameWorker:function(){return i}});function n(){let o=document.createElement("iframe");return o.width=o.height=o.frameBorder="0",o.classList.add("iframe-worker"),o.style.display="contents",o}class i{constructor(s,a){if(this.scriptText=s,this.onerror=null,this.onmessage=null,this.onmessageerror=null,this.handleMessage=p=>{p.source===this.worker&&(p.stopImmediatePropagation(),this.dispatchEvent(new MessageEvent("message",{data:p.data})),this.onmessage&&this.onmessage(p))},this.handleError=(p,f,h,l,m)=>{if(f===this.scriptText.toString()){let g=new ErrorEvent("error",{message:p,filename:f,lineno:h,colno:l,error:m});this.dispatchEvent(g),this.onerror&&this.onerror(g)}},typeof a!="undefined")throw new TypeError("Options are not supported for iframe workers");let u=new EventTarget;this.addEventListener=u.addEventListener.bind(u),this.removeEventListener=u.removeEventListener.bind(u),this.dispatchEvent=u.dispatchEvent.bind(u),document.body.appendChild(this.iframe=n()),this.worker.document.open(),this.worker.document.write(`<html><body><script>window.postMessage=\n(message, origin) => {\n  parent.postMessage(message, origin || "*")\n};window.importScripts=\n(...urls) => urls.reduce((promise, url) => (\n  promise.then(() => new Promise(resolve => {\n    const script = document.createElement("script")\n    script.src = url\n    script.addEventListener("load", () => resolve())\n    document.body.appendChild(script)\n  }))\n), Promise.resolve());addEventListener("error",ev=>{parent.dispatchEvent(new ErrorEvent("error",{filename:"${s.substring(0,50)}",error:ev.error}))})</script><script type="module">${s}</script></body></html>`),this.worker.document.close(),window.addEventListener("message",this.handleMessage),window.onerror=this.handleError,this.ready=new Promise((p,f)=>{this.worker.onload=p,this.worker.onerror=f})}terminate(){document.body.removeChild(this.iframe),window.removeEventListener("message",this.handleMessage),window.onerror=null}postMessage(s){(async()=>{try{await this.ready}catch(a){}finally{this.worker.dispatchEvent(new MessageEvent("message",{data:s}))}})()}get worker(){return this.iframe.contentWindow}}},799:function(e,t,r){var n=r(446),i=r(518),o=r(722),s=r(393),a=new s;function u(m,g){typeof m=="string"?this.script=m||null:(this.script=null,g=m),this.workers=[],this.tasks=[],g=g||{},this.name=g.name,this.forkArgs=Object.freeze(g.forkArgs||[]),this.forkOpts=Object.freeze(g.forkOpts||{}),this.debugPortStart=g.debugPortStart||43210,this.nodeWorker=g.nodeWorker,this.workerType=g.workerType||g.nodeWorker||"auto",this.maxQueueSize=g.maxQueueSize||1/0,this.onCreateWorker=g.onCreateWorker||function(){return null},this.onTerminateWorker=g.onTerminateWorker||function(){return null},g&&"maxWorkers"in g?(p(g.maxWorkers),this.maxWorkers=g.maxWorkers):this.maxWorkers=Math.max((o.cpus||4)-1,1),g&&"minWorkers"in g&&(g.minWorkers==="max"?this.minWorkers=this.maxWorkers:(f(g.minWorkers),this.minWorkers=g.minWorkers,this.maxWorkers=Math.max(this.minWorkers,this.maxWorkers)),this._ensureMinWorkers()),this._boundNext=this._next.bind(this),this.workerType==="thread"&&i.ensureWorkerThreads()}u.prototype.exec=function(m,g,E){if(g&&!Array.isArray(g))throw new TypeError(\'Array expected as argument "params"\');if(typeof m=="string"){var _=n.defer();if(this.tasks.length>=this.maxQueueSize)throw new Error("Max queue size of "+this.maxQueueSize+" reached");var C=this.tasks,$={method:m,params:g,resolver:_,timeout:null,options:E};C.push($);var L=_.promise.timeout;return _.promise.timeout=function(X){return C.indexOf($)!==-1?($.timeout=X,_.promise):L.call(_.promise,X)},this._next(),_.promise}else{if(typeof m=="function")return this.exec("run",[String(m),g]);throw new TypeError(\'Function or string expected as argument "method"\')}},u.prototype.proxy=function(){if(arguments.length>0)throw new Error("No arguments expected");var m=this;return this.exec("methods").then(function(g){var E={};return g.forEach(function(_){E[_]=function(){return m.exec(_,Array.prototype.slice.call(arguments))}}),E})},u.prototype._next=function(){if(this.tasks.length>0){var m=this._getWorker();if(m){var g=this,E=this.tasks.shift();if(E.resolver.promise.pending){var _=m.exec(E.method,E.params,E.resolver,E.options).then(g._boundNext).catch(function(){if(m.terminated)return g._removeWorker(m)}).then(function(){g._next()});typeof E.timeout=="number"&&_.timeout(E.timeout)}else g._next()}}},u.prototype._getWorker=function(){for(var m=this.workers,g=0;g<m.length;g++){var E=m[g];if(E.busy()===!1)return E}return m.length<this.maxWorkers?(E=this._createWorkerHandler(),m.push(E),E):null},u.prototype._removeWorker=function(m){var g=this;return a.releasePort(m.debugPort),this._removeWorkerFromList(m),this._ensureMinWorkers(),new n(function(E,_){m.terminate(!1,function(C){g.onTerminateWorker({forkArgs:m.forkArgs,forkOpts:m.forkOpts,script:m.script}),C?_(C):E(m)})})},u.prototype._removeWorkerFromList=function(m){var g=this.workers.indexOf(m);g!==-1&&this.workers.splice(g,1)},u.prototype.terminate=function(m,g){var E=this;this.tasks.forEach(function(G){G.resolver.reject(new Error("Pool terminated"))}),this.tasks.length=0;var _=function(X){this._removeWorkerFromList(X)},C=_.bind(this),$=[],L=this.workers.slice();return L.forEach(function(G){var X=G.terminateAndNotify(m,g).then(C).always(function(){E.onTerminateWorker({forkArgs:G.forkArgs,forkOpts:G.forkOpts,script:G.script})});$.push(X)}),n.all($)},u.prototype.stats=function(){var m=this.workers.length,g=this.workers.filter(function(E){return E.busy()}).length;return{totalWorkers:m,busyWorkers:g,idleWorkers:m-g,pendingTasks:this.tasks.length,activeTasks:g}},u.prototype._ensureMinWorkers=function(){if(this.minWorkers)for(var m=this.workers.length;m<this.minWorkers;m++)this.workers.push(this._createWorkerHandler())},u.prototype._createWorkerHandler=function(){var m=this.onCreateWorker({forkArgs:this.forkArgs,forkOpts:this.forkOpts,script:this.script})||{};return new i(m.script||this.script,{forkArgs:m.forkArgs||this.forkArgs,forkOpts:m.forkOpts||this.forkOpts,debugPort:a.nextAvailableStartingAt(this.debugPortStart),workerType:this.workerType,name:this.name})};function p(m){if(!h(m)||!l(m)||m<1)throw new TypeError("Option maxWorkers must be an integer number >= 1")}function f(m){if(!h(m)||!l(m)||m<0)throw new TypeError("Option minWorkers must be an integer number >= 0")}function h(m){return typeof m=="number"}function l(m){return Math.round(m)==m}e.exports=u},446:function(e){"use strict";function t(o,s){var a=this;if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");if(typeof o!="function")throw new SyntaxError("Function parameter handler(resolve, reject) missing");var u=[],p=[];this.resolved=!1,this.rejected=!1,this.pending=!0;var f=function(g,E){u.push(g),p.push(E)};this.then=function(m,g){return new t(function(E,_){var C=m?r(m,E,_):E,$=g?r(g,E,_):_;f(C,$)},a)};var h=function(g){return a.resolved=!0,a.rejected=!1,a.pending=!1,u.forEach(function(E){E(g)}),f=function(_,C){_(g)},h=l=function(){},a},l=function(g){return a.resolved=!1,a.rejected=!0,a.pending=!1,p.forEach(function(E){E(g)}),f=function(_,C){C(g)},h=l=function(){},a};this.cancel=function(){return s?s.cancel():l(new n),a},this.timeout=function(m){if(s)s.timeout(m);else{var g=setTimeout(function(){l(new i("Promise timed out after "+m+" ms"))},m);a.always(function(){clearTimeout(g)})}return a},o(function(m){h(m)},function(m){l(m)})}function r(o,s,a){return function(u){try{var p=o(u);p&&typeof p.then=="function"&&typeof p.catch=="function"?p.then(s,a):s(p)}catch(f){a(f)}}}t.prototype.catch=function(o){return this.then(null,o)},t.prototype.always=function(o){return this.then(o,o)},t.all=function(o){return new t(function(s,a){var u=o.length,p=[];u?o.forEach(function(f,h){f.then(function(l){p[h]=l,u--,u==0&&s(p)},function(l){u=0,a(l)})}):s(p)})},t.defer=function(){var o={};return o.promise=new t(function(s,a){o.resolve=s,o.reject=a}),o};function n(o){this.message=o||"promise cancelled",this.stack=new Error().stack}n.prototype=new Error,n.prototype.constructor=Error,n.prototype.name="CancellationError",t.CancellationError=n;function i(o){this.message=o||"timeout exceeded",this.stack=new Error().stack}i.prototype=new Error,i.prototype.constructor=Error,i.prototype.name="TimeoutError",t.TimeoutError=i,e.exports=t},518:function(e,t,r){"use strict";function n(S,T){var b=typeof Symbol!="undefined"&&S[Symbol.iterator]||S["@@iterator"];if(!b){if(Array.isArray(S)||(b=i(S))||T&&S&&typeof S.length=="number"){b&&(S=b);var O=0,k=function(){};return{s:k,n:function(){return O>=S.length?{done:!0}:{done:!1,value:S[O++]}},e:function(z){throw z},f:k}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var W=!0,M=!1,q;return{s:function(){b=b.call(S)},n:function(){var z=b.next();return W=z.done,z},e:function(z){M=!0,q=z},f:function(){try{!W&&b.return!=null&&b.return()}finally{if(M)throw q}}}}function i(S,T){if(S){if(typeof S=="string")return o(S,T);var b=Object.prototype.toString.call(S).slice(8,-1);if(b==="Object"&&S.constructor&&(b=S.constructor.name),b==="Map"||b==="Set")return Array.from(S);if(b==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return o(S,T)}}function o(S,T){(T==null||T>S.length)&&(T=S.length);for(var b=0,O=new Array(T);b<T;b++)O[b]=S[b];return O}function s(S){return s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},s(S)}var a=r(446),u=r(722),p=r(781),f=r(162),h=f.IFrameWorker,l="__workerpool-terminate__",m=1e3;function g(){var S=_();if(!S)throw new Error("WorkerPool: workerType = \'thread\' is not supported, Node >= 11.7.0 required");return S}function E(){if(typeof Worker!="function"&&((typeof Worker=="undefined"?"undefined":s(Worker))!=="object"||typeof Worker.prototype.constructor!="function"))throw new Error("WorkerPool: Web Workers not supported")}function _(){try{return p("worker_threads")}catch(S){if(s(S)==="object"&&S!==null&&S.code==="MODULE_NOT_FOUND")return null;throw S}}function C(){if(u.platform==="browser"){if(typeof Blob=="undefined")throw new Error("Blob not supported by the browser");if(!window.URL||typeof window.URL.createObjectURL!="function")throw new Error("URL.createObjectURL not supported by the browser");var S=new Blob([r(710)],{type:"text/javascript"});return window.URL.createObjectURL(S)}else return __dirname+"/worker.js"}function $(S,T){if(T.workerType==="iframe")return L(S,h,T);if(T.workerType==="web")return E(),L(S,Worker,T);if(T.workerType==="thread")return b=g(),G(S,b);if(T.workerType==="process"||!T.workerType)return X(S,R(T),p("child_process"));if(u.platform==="browser")return E(),L(S,Worker);var b=_();return b?G(S,b):X(S,R(T),p("child_process"))}function L(S,T,b){var O=new T(S,b!=null&&b.name?{name:"".concat(b.name,"-").concat(Date.now())}:void 0);return O.isBrowserWorker=!0,O.on=function(k,W){this.addEventListener(k,function(M){W(M.data)})},O.send=function(k){this.postMessage(k)},O}function G(S,T){var b=new T.Worker(S,{stdout:!1,stderr:!1});return b.isWorkerThread=!0,b.send=function(O){this.postMessage(O)},b.kill=function(){return this.terminate(),!0},b.disconnect=function(){this.terminate()},b}function X(S,T,b){var O=b.fork(S,T.forkArgs,T.forkOpts);return O.isChildProcess=!0,O}function R(S){S=S||{};var T=process.execArgv.join(" "),b=T.indexOf("--inspect")!==-1,O=T.indexOf("--debug-brk")!==-1,k=[];return b&&(k.push("--inspect="+S.debugPort),O&&k.push("--debug-brk")),process.execArgv.forEach(function(W){W.indexOf("--max-old-space-size")>-1&&k.push(W)}),Object.assign({},S,{forkArgs:S.forkArgs,forkOpts:Object.assign({},S.forkOpts,{execArgv:(S.forkOpts&&S.forkOpts.execArgv||[]).concat(k)})})}function K(S){for(var T=new Error(""),b=Object.keys(S),O=0;O<b.length;O++)T[b[O]]=S[b[O]];return T}function B(S,T){var b=this,O=T||{};this.script=S||C(),this.worker=$(this.script,O),this.debugPort=O.debugPort,this.forkOpts=O.forkOpts,this.forkArgs=O.forkArgs,S||(this.worker.ready=!0),this.requestQueue=[],this.worker.on("message",function(q){if(!b.terminated)if(typeof q=="string"&&q==="ready")b.worker.ready=!0,W();else{var U=q.id,z=b.processing[U];z!==void 0&&(q.isEvent?z.options&&typeof z.options.on=="function"&&z.options.on(q.payload):(delete b.processing[U],b.terminating===!0&&b.terminate(),q.error?z.resolver.reject(K(q.error)):z.resolver.resolve(q.result)))}});function k(q){b.terminated=!0;for(var U in b.processing)b.processing[U]!==void 0&&b.processing[U].resolver.reject(q);b.processing=Object.create(null)}function W(){var q=n(b.requestQueue.splice(0)),U;try{for(q.s();!(U=q.n()).done;){var z=U.value;b.worker.send(z)}}catch(J){q.e(J)}finally{q.f()}}var M=this.worker;this.worker.on("error",k),this.worker.on("exit",function(q,U){var z=`Workerpool Worker terminated Unexpectedly\n`;z+="    exitCode: `"+q+"`\\n",z+="    signalCode: `"+U+"`\\n",z+="    workerpool.script: `"+b.script+"`\\n",z+="    spawnArgs: `"+M.spawnargs+"`\\n",z+="    spawnfile: `"+M.spawnfile+"`\\n",z+="    stdout: `"+M.stdout+"`\\n",z+="    stderr: `"+M.stderr+"`\\n",k(new Error(z))}),this.processing=Object.create(null),this.terminating=!1,this.terminated=!1,this.terminationHandler=null,this.lastId=0}B.prototype.methods=function(){return this.exec("methods")},B.prototype.exec=function(S,T,b,O){b||(b=a.defer());var k=++this.lastId;this.processing[k]={id:k,resolver:b,options:O};var W={id:k,method:S,params:T};this.terminated?b.reject(new Error("Worker is terminated")):this.worker.ready?this.worker.send(W):this.requestQueue.push(W);var M=this;return b.promise.catch(function(q){if(q instanceof a.CancellationError||q instanceof a.TimeoutError)return delete M.processing[k],M.terminateAndNotify(!0).then(function(){throw q},function(U){throw U});throw q})},B.prototype.busy=function(){return Object.keys(this.processing).length>0},B.prototype.terminate=function(S,T){var b=this;if(S){for(var O in this.processing)this.processing[O]!==void 0&&this.processing[O].resolver.reject(new Error("Worker terminated"));this.processing=Object.create(null)}if(typeof T=="function"&&(this.terminationHandler=T),this.busy())this.terminating=!0;else{var k=function(q){if(b.terminated=!0,b.worker!=null&&b.worker.removeAllListeners&&b.worker.removeAllListeners("message"),b.worker=null,b.terminating=!1,b.terminationHandler)b.terminationHandler(q,b);else if(q)throw q};if(this.worker)if(typeof this.worker.kill=="function"){if(this.worker.killed){k(new Error("worker already killed!"));return}if(this.worker.isChildProcess){var W=setTimeout(function(){b.worker&&b.worker.kill()},m);this.worker.once("exit",function(){clearTimeout(W),b.worker&&(b.worker.killed=!0),k()}),this.worker.ready?this.worker.send(l):this.requestQueue.push(l)}else this.worker.kill(),this.worker.killed=!0,k();return}else if(typeof this.worker.terminate=="function")this.worker.terminate(),this.worker.killed=!0;else throw new Error("Failed to terminate worker");k()}},B.prototype.terminateAndNotify=function(S,T){var b=a.defer();return T&&(b.promise.timeout=T),this.terminate(S,function(O,k){O?b.reject(O):b.resolve(k)}),b.promise},e.exports=B,e.exports._tryRequireWorkerThreads=_,e.exports._setupProcessWorker=X,e.exports._setupBrowserWorker=L,e.exports._setupWorkerThreadWorker=G,e.exports.ensureWorkerThreads=g},393:function(e){"use strict";var t=65535;e.exports=r;function r(){this.ports=Object.create(null),this.length=0}r.prototype.nextAvailableStartingAt=function(n){for(;this.ports[n]===!0;)n++;if(n>=t)throw new Error("WorkerPool debug port limit reached: "+n+">= "+t);return this.ports[n]=!0,this.length++,n},r.prototype.releasePort=function(n){delete this.ports[n],this.length--}},722:function(e,t,r){var n=r(781),i=function(u){return typeof u!="undefined"&&u.versions!=null&&u.versions.node!=null};e.exports.isNode=i,e.exports.platform=typeof process!="undefined"&&i(process)?"node":"browser";var o=s("worker_threads");e.exports.isMainThread=e.exports.platform==="node"?(!o||o.isMainThread)&&!process.connected:typeof Window!="undefined",e.exports.cpus=e.exports.platform==="browser"?self.navigator.hardwareConcurrency:n("os").cpus().length;function s(a){try{return n(a)}catch(u){return null}}},710:function(e){e.exports=`!function(){var __webpack_exports__={};!function(){var exports=__webpack_exports__,__webpack_unused_export__;function _typeof(r){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}var requireFoolWebpack=eval("typeof require !== \'undefined\' ? require : function (module) { throw new Error(\'Module \\\\" + module + \\\\" not found.\') }"),TERMINATE_METHOD_ID="__workerpool-terminate__",worker={exit:function(){}},WorkerThreads,parentPort;if("undefined"!=typeof self&&"function"==typeof postMessage&&"function"==typeof addEventListener)worker.on=function(r,e){addEventListener(r,function(r){e(r.data)})},worker.send=function(r){postMessage(r)};else{if("undefined"==typeof process)throw new Error("Script must be executed as a worker");try{WorkerThreads=requireFoolWebpack("worker_threads")}catch(error){if("object"!==_typeof(error)||null===error||"MODULE_NOT_FOUND"!==error.code)throw error}WorkerThreads&&null!==WorkerThreads.parentPort?(parentPort=WorkerThreads.parentPort,worker.send=parentPort.postMessage.bind(parentPort),worker.on=parentPort.on.bind(parentPort)):(worker.on=process.on.bind(process),worker.send=process.send.bind(process),worker.on("disconnect",function(){process.exit(1)}),worker.exit=process.exit.bind(process))}function convertError(o){return Object.getOwnPropertyNames(o).reduce(function(r,e){return Object.defineProperty(r,e,{value:o[e],enumerable:!0})},{})}function isPromise(r){return r&&"function"==typeof r.then&&"function"==typeof r.catch}worker.methods={},worker.methods.run=function(r,e){r=new Function("return ("+r+").apply(null, arguments);");return r.apply(r,e)},worker.methods.methods=function(){return Object.keys(worker.methods)};var currentRequestId=null;worker.on("message",function(e){if(e===TERMINATE_METHOD_ID)return worker.exit(0);try{var r=worker.methods[e.method];if(!r)throw new Error(\'Unknown method "\'+e.method+\'"\');currentRequestId=e.id;var o=r.apply(r,e.params);isPromise(o)?o.then(function(r){worker.send({id:e.id,result:r,error:null}),currentRequestId=null}).catch(function(r){worker.send({id:e.id,result:null,error:convertError(r)}),currentRequestId=null}):(worker.send({id:e.id,result:o,error:null}),currentRequestId=null)}catch(r){worker.send({id:e.id,result:null,error:convertError(r)})}}),worker.register=function(r){if(r)for(var e in r)r.hasOwnProperty(e)&&(worker.methods[e]=r[e]);worker.send("ready")},worker.emit=function(r){currentRequestId&&worker.send({id:currentRequestId,isEvent:!0,payload:r})},__webpack_unused_export__=worker.register,worker.emit}()}();`},781:function(module){var requireFoolWebpack=eval(`typeof require !== \'undefined\' ? require : function (module) { throw new Error(\'Module " + module + " not found.\') }`);module.exports=requireFoolWebpack},52:function(__unused_webpack_module,exports){function _typeof(e){return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(e)}var requireFoolWebpack=eval(`typeof require !== \'undefined\' ? require : function (module) { throw new Error(\'Module " + module + " not found.\') }`),TERMINATE_METHOD_ID="__workerpool-terminate__",worker={exit:function e(){}};if(typeof self!="undefined"&&typeof postMessage=="function"&&typeof addEventListener=="function")worker.on=function(e,t){addEventListener(e,function(r){t(r.data)})},worker.send=function(e){postMessage(e)};else if(typeof process!="undefined"){var WorkerThreads;try{WorkerThreads=requireFoolWebpack("worker_threads")}catch(e){if(!(_typeof(e)==="object"&&e!==null&&e.code==="MODULE_NOT_FOUND"))throw e}if(WorkerThreads&&WorkerThreads.parentPort!==null){var parentPort=WorkerThreads.parentPort;worker.send=parentPort.postMessage.bind(parentPort),worker.on=parentPort.on.bind(parentPort)}else worker.on=process.on.bind(process),worker.send=process.send.bind(process),worker.on("disconnect",function(){process.exit(1)}),worker.exit=process.exit.bind(process)}else throw new Error("Script must be executed as a worker");function convertError(e){return Object.getOwnPropertyNames(e).reduce(function(t,r){return Object.defineProperty(t,r,{value:e[r],enumerable:!0})},{})}function isPromise(e){return e&&typeof e.then=="function"&&typeof e.catch=="function"}worker.methods={},worker.methods.run=function e(t,r){var n=new Function("return ("+t+").apply(null, arguments);");return n.apply(n,r)},worker.methods.methods=function e(){return Object.keys(worker.methods)};var currentRequestId=null;worker.on("message",function(e){if(e===TERMINATE_METHOD_ID)return worker.exit(0);try{var t=worker.methods[e.method];if(t){currentRequestId=e.id;var r=t.apply(t,e.params);isPromise(r)?r.then(function(n){worker.send({id:e.id,result:n,error:null}),currentRequestId=null}).catch(function(n){worker.send({id:e.id,result:null,error:convertError(n)}),currentRequestId=null}):(worker.send({id:e.id,result:r,error:null}),currentRequestId=null)}else throw new Error(\'Unknown method "\'+e.method+\'"\')}catch(n){worker.send({id:e.id,result:null,error:convertError(n)})}}),worker.register=function(e){if(e)for(var t in e)e.hasOwnProperty(t)&&(worker.methods[t]=e[t]);worker.send("ready")},worker.emit=function(e){currentRequestId&&worker.send({id:currentRequestId,isEvent:!0,payload:e})},exports.add=worker.register,exports.emit=worker.emit}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(t!==void 0)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](r,r.exports,__webpack_require__),r.exports}(function(){__webpack_require__.d=function(e,t){for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}})(),function(){__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){__webpack_require__.r=function(e){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}();var __webpack_exports__={};return function(){var e=__webpack_exports__,t=__webpack_require__(722);e.pool=function(n,i){var o=__webpack_require__(799);return new o(n,i)},e.worker=function(n){var i=__webpack_require__(52);i.add(n)},e.workerEmit=function(n){var i=__webpack_require__(52);i.emit(n)},e.Promise=__webpack_require__(446),e.platform=t.platform,e.isMainThread=t.isMainThread,e.cpus=t.cpus}(),__webpack_exports__}()})});var pi=A((es,mi)=>{(function(e){if(typeof es=="object"&&typeof mi!="undefined")mi.exports=e();else if(typeof define=="function"&&define.amd)define([],e);else{var t;typeof window!="undefined"?t=window:typeof global!="undefined"?t=global:typeof self!="undefined"?t=self:t=this,t.localforage=e()}})(function(){var e,t,r;return function n(i,o,s){function a(f,h){if(!o[f]){if(!i[f]){var l=typeof require=="function"&&require;if(!h&&l)return l(f,!0);if(u)return u(f,!0);var m=new Error("Cannot find module \'"+f+"\'");throw m.code="MODULE_NOT_FOUND",m}var g=o[f]={exports:{}};i[f][0].call(g.exports,function(E){var _=i[f][1][E];return a(_||E)},g,g.exports,n,i,o,s)}return o[f].exports}for(var u=typeof require=="function"&&require,p=0;p<s.length;p++)a(s[p]);return a}({1:[function(n,i,o){(function(s){"use strict";var a=s.MutationObserver||s.WebKitMutationObserver,u;if(a){var p=0,f=new a(E),h=s.document.createTextNode("");f.observe(h,{characterData:!0}),u=function(){h.data=p=++p%2}}else if(!s.setImmediate&&typeof s.MessageChannel!="undefined"){var l=new s.MessageChannel;l.port1.onmessage=E,u=function(){l.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?u=function(){var C=s.document.createElement("script");C.onreadystatechange=function(){E(),C.onreadystatechange=null,C.parentNode.removeChild(C),C=null},s.document.documentElement.appendChild(C)}:u=function(){setTimeout(E,0)};var m,g=[];function E(){m=!0;for(var C,$,L=g.length;L;){for($=g,g=[],C=-1;++C<L;)$[C]();L=g.length}m=!1}i.exports=_;function _(C){g.push(C)===1&&!m&&u()}}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],2:[function(n,i,o){"use strict";var s=n(1);function a(){}var u={},p=["REJECTED"],f=["FULFILLED"],h=["PENDING"];i.exports=l;function l(R){if(typeof R!="function")throw new TypeError("resolver must be a function");this.state=h,this.queue=[],this.outcome=void 0,R!==a&&_(this,R)}l.prototype.catch=function(R){return this.then(null,R)},l.prototype.then=function(R,K){if(typeof R!="function"&&this.state===f||typeof K!="function"&&this.state===p)return this;var B=new this.constructor(a);if(this.state!==h){var S=this.state===f?R:K;g(B,S,this.outcome)}else this.queue.push(new m(B,R,K));return B};function m(R,K,B){this.promise=R,typeof K=="function"&&(this.onFulfilled=K,this.callFulfilled=this.otherCallFulfilled),typeof B=="function"&&(this.onRejected=B,this.callRejected=this.otherCallRejected)}m.prototype.callFulfilled=function(R){u.resolve(this.promise,R)},m.prototype.otherCallFulfilled=function(R){g(this.promise,this.onFulfilled,R)},m.prototype.callRejected=function(R){u.reject(this.promise,R)},m.prototype.otherCallRejected=function(R){g(this.promise,this.onRejected,R)};function g(R,K,B){s(function(){var S;try{S=K(B)}catch(T){return u.reject(R,T)}S===R?u.reject(R,new TypeError("Cannot resolve promise with itself")):u.resolve(R,S)})}u.resolve=function(R,K){var B=C(E,K);if(B.status==="error")return u.reject(R,B.value);var S=B.value;if(S)_(R,S);else{R.state=f,R.outcome=K;for(var T=-1,b=R.queue.length;++T<b;)R.queue[T].callFulfilled(K)}return R},u.reject=function(R,K){R.state=p,R.outcome=K;for(var B=-1,S=R.queue.length;++B<S;)R.queue[B].callRejected(K);return R};function E(R){var K=R&&R.then;if(R&&(typeof R=="object"||typeof R=="function")&&typeof K=="function")return function(){K.apply(R,arguments)}}function _(R,K){var B=!1;function S(k){B||(B=!0,u.reject(R,k))}function T(k){B||(B=!0,u.resolve(R,k))}function b(){K(T,S)}var O=C(b);O.status==="error"&&S(O.value)}function C(R,K){var B={};try{B.value=R(K),B.status="success"}catch(S){B.status="error",B.value=S}return B}l.resolve=$;function $(R){return R instanceof this?R:u.resolve(new this(a),R)}l.reject=L;function L(R){var K=new this(a);return u.reject(K,R)}l.all=G;function G(R){var K=this;if(Object.prototype.toString.call(R)!=="[object Array]")return this.reject(new TypeError("must be an array"));var B=R.length,S=!1;if(!B)return this.resolve([]);for(var T=new Array(B),b=0,O=-1,k=new this(a);++O<B;)W(R[O],O);return k;function W(M,q){K.resolve(M).then(U,function(z){S||(S=!0,u.reject(k,z))});function U(z){T[q]=z,++b===B&&!S&&(S=!0,u.resolve(k,T))}}}l.race=X;function X(R){var K=this;if(Object.prototype.toString.call(R)!=="[object Array]")return this.reject(new TypeError("must be an array"));var B=R.length,S=!1;if(!B)return this.resolve([]);for(var T=-1,b=new this(a);++T<B;)O(R[T]);return b;function O(k){K.resolve(k).then(function(W){S||(S=!0,u.resolve(b,W))},function(W){S||(S=!0,u.reject(b,W))})}}},{1:1}],3:[function(n,i,o){(function(s){"use strict";typeof s.Promise!="function"&&(s.Promise=n(2))}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{2:2}],4:[function(n,i,o){"use strict";var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c};function a(c,y){if(!(c instanceof y))throw new TypeError("Cannot call a class as a function")}function u(){try{if(typeof indexedDB!="undefined")return indexedDB;if(typeof webkitIndexedDB!="undefined")return webkitIndexedDB;if(typeof mozIndexedDB!="undefined")return mozIndexedDB;if(typeof OIndexedDB!="undefined")return OIndexedDB;if(typeof msIndexedDB!="undefined")return msIndexedDB}catch(c){return}}var p=u();function f(){try{if(!p||!p.open)return!1;var c=typeof openDatabase!="undefined"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),y=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!c||y)&&typeof indexedDB!="undefined"&&typeof IDBKeyRange!="undefined"}catch(d){return!1}}function h(c,y){c=c||[],y=y||{};try{return new Blob(c,y)}catch(v){if(v.name!=="TypeError")throw v;for(var d=typeof BlobBuilder!="undefined"?BlobBuilder:typeof MSBlobBuilder!="undefined"?MSBlobBuilder:typeof MozBlobBuilder!="undefined"?MozBlobBuilder:WebKitBlobBuilder,w=new d,x=0;x<c.length;x+=1)w.append(c[x]);return w.getBlob(y.type)}}typeof Promise=="undefined"&&n(3);var l=Promise;function m(c,y){y&&c.then(function(d){y(null,d)},function(d){y(d)})}function g(c,y,d){typeof y=="function"&&c.then(y),typeof d=="function"&&c.catch(d)}function E(c){return typeof c!="string"&&(console.warn(c+" used as a key, but it is not a string."),c=String(c)),c}function _(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var C="local-forage-detect-blob-support",$=void 0,L={},G=Object.prototype.toString,X="readonly",R="readwrite";function K(c){for(var y=c.length,d=new ArrayBuffer(y),w=new Uint8Array(d),x=0;x<y;x++)w[x]=c.charCodeAt(x);return d}function B(c){return new l(function(y){var d=c.transaction(C,R),w=h([""]);d.objectStore(C).put(w,"key"),d.onabort=function(x){x.preventDefault(),x.stopPropagation(),y(!1)},d.oncomplete=function(){var x=navigator.userAgent.match(/Chrome\\/(\\d+)/),v=navigator.userAgent.match(/Edge\\//);y(v||!x||parseInt(x[1],10)>=43)}}).catch(function(){return!1})}function S(c){return typeof $=="boolean"?l.resolve($):B(c).then(function(y){return $=y,$})}function T(c){var y=L[c.name],d={};d.promise=new l(function(w,x){d.resolve=w,d.reject=x}),y.deferredOperations.push(d),y.dbReady?y.dbReady=y.dbReady.then(function(){return d.promise}):y.dbReady=d.promise}function b(c){var y=L[c.name],d=y.deferredOperations.pop();if(d)return d.resolve(),d.promise}function O(c,y){var d=L[c.name],w=d.deferredOperations.pop();if(w)return w.reject(y),w.promise}function k(c,y){return new l(function(d,w){if(L[c.name]=L[c.name]||xo(),c.db)if(y)T(c),c.db.close();else return d(c.db);var x=[c.name];y&&x.push(c.version);var v=p.open.apply(p,x);y&&(v.onupgradeneeded=function(I){var D=v.result;try{D.createObjectStore(c.storeName),I.oldVersion<=1&&D.createObjectStore(C)}catch(F){if(F.name==="ConstraintError")console.warn(\'The database "\'+c.name+\'" has been upgraded from version \'+I.oldVersion+" to version "+I.newVersion+\', but the storage "\'+c.storeName+\'" already exists.\');else throw F}}),v.onerror=function(I){I.preventDefault(),w(v.error)},v.onsuccess=function(){var I=v.result;I.onversionchange=function(D){D.target.close()},d(I),b(c)}})}function W(c){return k(c,!1)}function M(c){return k(c,!0)}function q(c,y){if(!c.db)return!0;var d=!c.db.objectStoreNames.contains(c.storeName),w=c.version<c.db.version,x=c.version>c.db.version;if(w&&(c.version!==y&&console.warn(\'The database "\'+c.name+`" can\'t be downgraded from version `+c.db.version+" to version "+c.version+"."),c.version=c.db.version),x||d){if(d){var v=c.db.version+1;v>c.version&&(c.version=v)}return!0}return!1}function U(c){return new l(function(y,d){var w=new FileReader;w.onerror=d,w.onloadend=function(x){var v=btoa(x.target.result||"");y({__local_forage_encoded_blob:!0,data:v,type:c.type})},w.readAsBinaryString(c)})}function z(c){var y=K(atob(c.data));return h([y],{type:c.type})}function J(c){return c&&c.__local_forage_encoded_blob}function Fr(c){var y=this,d=y._initReady().then(function(){var w=L[y._dbInfo.name];if(w&&w.dbReady)return w.dbReady});return g(d,c,c),d}function Kl(c){T(c);for(var y=L[c.name],d=y.forages,w=0;w<d.length;w++){var x=d[w];x._dbInfo.db&&(x._dbInfo.db.close(),x._dbInfo.db=null)}return c.db=null,W(c).then(function(v){return c.db=v,q(c)?M(c):v}).then(function(v){c.db=y.db=v;for(var I=0;I<d.length;I++)d[I]._dbInfo.db=v}).catch(function(v){throw O(c,v),v})}function Ge(c,y,d,w){w===void 0&&(w=1);try{var x=c.db.transaction(c.storeName,y);d(null,x)}catch(v){if(w>0&&(!c.db||v.name==="InvalidStateError"||v.name==="NotFoundError"))return l.resolve().then(function(){if(!c.db||v.name==="NotFoundError"&&!c.db.objectStoreNames.contains(c.storeName)&&c.version<=c.db.version)return c.db&&(c.version=c.db.version+1),M(c)}).then(function(){return Kl(c).then(function(){Ge(c,y,d,w-1)})}).catch(d);d(v)}}function xo(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function Gl(c){var y=this,d={db:null};if(c)for(var w in c)d[w]=c[w];var x=L[d.name];x||(x=xo(),L[d.name]=x),x.forages.push(y),y._initReady||(y._initReady=y.ready,y.ready=Fr);var v=[];function I(){return l.resolve()}for(var D=0;D<x.forages.length;D++){var F=x.forages[D];F!==y&&v.push(F._initReady().catch(I))}var N=x.forages.slice(0);return l.all(v).then(function(){return d.db=x.db,W(d)}).then(function(P){return d.db=P,q(d,y._defaultConfig.version)?M(d):P}).then(function(P){d.db=x.db=P,y._dbInfo=d;for(var j=0;j<N.length;j++){var H=N[j];H!==y&&(H._dbInfo.db=d.db,H._dbInfo.version=d.version)}})}function Hl(c,y){var d=this;c=E(c);var w=new l(function(x,v){d.ready().then(function(){Ge(d._dbInfo,X,function(I,D){if(I)return v(I);try{var F=D.objectStore(d._dbInfo.storeName),N=F.get(c);N.onsuccess=function(){var P=N.result;P===void 0&&(P=null),J(P)&&(P=z(P)),x(P)},N.onerror=function(){v(N.error)}}catch(P){v(P)}})}).catch(v)});return m(w,y),w}function Jl(c,y){var d=this,w=new l(function(x,v){d.ready().then(function(){Ge(d._dbInfo,X,function(I,D){if(I)return v(I);try{var F=D.objectStore(d._dbInfo.storeName),N=F.openCursor(),P=1;N.onsuccess=function(){var j=N.result;if(j){var H=j.value;J(H)&&(H=z(H));var Q=c(H,j.key,P++);Q!==void 0?x(Q):j.continue()}else x()},N.onerror=function(){v(N.error)}}catch(j){v(j)}})}).catch(v)});return m(w,y),w}function Vl(c,y,d){var w=this;c=E(c);var x=new l(function(v,I){var D;w.ready().then(function(){return D=w._dbInfo,G.call(y)==="[object Blob]"?S(D.db).then(function(F){return F?y:U(y)}):y}).then(function(F){Ge(w._dbInfo,R,function(N,P){if(N)return I(N);try{var j=P.objectStore(w._dbInfo.storeName);F===null&&(F=void 0);var H=j.put(F,c);P.oncomplete=function(){F===void 0&&(F=null),v(F)},P.onabort=P.onerror=function(){var Q=H.error?H.error:H.transaction.error;I(Q)}}catch(Q){I(Q)}})}).catch(I)});return m(x,d),x}function Yl(c,y){var d=this;c=E(c);var w=new l(function(x,v){d.ready().then(function(){Ge(d._dbInfo,R,function(I,D){if(I)return v(I);try{var F=D.objectStore(d._dbInfo.storeName),N=F.delete(c);D.oncomplete=function(){x()},D.onerror=function(){v(N.error)},D.onabort=function(){var P=N.error?N.error:N.transaction.error;v(P)}}catch(P){v(P)}})}).catch(v)});return m(w,y),w}function Ql(c){var y=this,d=new l(function(w,x){y.ready().then(function(){Ge(y._dbInfo,R,function(v,I){if(v)return x(v);try{var D=I.objectStore(y._dbInfo.storeName),F=D.clear();I.oncomplete=function(){w()},I.onabort=I.onerror=function(){var N=F.error?F.error:F.transaction.error;x(N)}}catch(N){x(N)}})}).catch(x)});return m(d,c),d}function Zl(c){var y=this,d=new l(function(w,x){y.ready().then(function(){Ge(y._dbInfo,X,function(v,I){if(v)return x(v);try{var D=I.objectStore(y._dbInfo.storeName),F=D.count();F.onsuccess=function(){w(F.result)},F.onerror=function(){x(F.error)}}catch(N){x(N)}})}).catch(x)});return m(d,c),d}function Xl(c,y){var d=this,w=new l(function(x,v){if(c<0){x(null);return}d.ready().then(function(){Ge(d._dbInfo,X,function(I,D){if(I)return v(I);try{var F=D.objectStore(d._dbInfo.storeName),N=!1,P=F.openKeyCursor();P.onsuccess=function(){var j=P.result;if(!j){x(null);return}c===0||N?x(j.key):(N=!0,j.advance(c))},P.onerror=function(){v(P.error)}}catch(j){v(j)}})}).catch(v)});return m(w,y),w}function ed(c){var y=this,d=new l(function(w,x){y.ready().then(function(){Ge(y._dbInfo,X,function(v,I){if(v)return x(v);try{var D=I.objectStore(y._dbInfo.storeName),F=D.openKeyCursor(),N=[];F.onsuccess=function(){var P=F.result;if(!P){w(N);return}N.push(P.key),P.continue()},F.onerror=function(){x(F.error)}}catch(P){x(P)}})}).catch(x)});return m(d,c),d}function td(c,y){y=_.apply(this,arguments);var d=this.config();c=typeof c!="function"&&c||{},c.name||(c.name=c.name||d.name,c.storeName=c.storeName||d.storeName);var w=this,x;if(!c.name)x=l.reject("Invalid arguments");else{var v=c.name===d.name&&w._dbInfo.db,I=v?l.resolve(w._dbInfo.db):W(c).then(function(D){var F=L[c.name],N=F.forages;F.db=D;for(var P=0;P<N.length;P++)N[P]._dbInfo.db=D;return D});c.storeName?x=I.then(function(D){if(D.objectStoreNames.contains(c.storeName)){var F=D.version+1;T(c);var N=L[c.name],P=N.forages;D.close();for(var j=0;j<P.length;j++){var H=P[j];H._dbInfo.db=null,H._dbInfo.version=F}var Q=new l(function(Z,ue){var se=p.open(c.name,F);se.onerror=function(De){var Wt=se.result;Wt.close(),ue(De)},se.onupgradeneeded=function(){var De=se.result;De.deleteObjectStore(c.storeName)},se.onsuccess=function(){var De=se.result;De.close(),Z(De)}});return Q.then(function(Z){N.db=Z;for(var ue=0;ue<P.length;ue++){var se=P[ue];se._dbInfo.db=Z,b(se._dbInfo)}}).catch(function(Z){throw(O(c,Z)||l.resolve()).catch(function(){}),Z})}}):x=I.then(function(D){T(c);var F=L[c.name],N=F.forages;D.close();for(var P=0;P<N.length;P++){var j=N[P];j._dbInfo.db=null}var H=new l(function(Q,Z){var ue=p.deleteDatabase(c.name);ue.onerror=function(){var se=ue.result;se&&se.close(),Z(ue.error)},ue.onblocked=function(){console.warn(\'dropInstance blocked for database "\'+c.name+\'" until all open connections are closed\')},ue.onsuccess=function(){var se=ue.result;se&&se.close(),Q(se)}});return H.then(function(Q){F.db=Q;for(var Z=0;Z<N.length;Z++){var ue=N[Z];b(ue._dbInfo)}}).catch(function(Q){throw(O(c,Q)||l.resolve()).catch(function(){}),Q})})}return m(x,y),x}var rd={_driver:"asyncStorage",_initStorage:Gl,_support:f(),iterate:Jl,getItem:Hl,setItem:Vl,removeItem:Yl,clear:Ql,length:Zl,key:Xl,keys:ed,dropInstance:td};function nd(){return typeof openDatabase=="function"}var Ve="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",id="~~local_forage_type~",Eo=/^~~local_forage_type~([^~]+)~/,Nr="__lfsc__:",Kn=Nr.length,Gn="arbf",Hn="blob",So="si08",_o="ui08",Io="uic8",ko="si16",Oo="si32",To="ur16",Do="ui32",Ao="fl32",Fo="fl64",No=Kn+Gn.length,Co=Object.prototype.toString;function Ro(c){var y=c.length*.75,d=c.length,w,x=0,v,I,D,F;c[c.length-1]==="="&&(y--,c[c.length-2]==="="&&y--);var N=new ArrayBuffer(y),P=new Uint8Array(N);for(w=0;w<d;w+=4)v=Ve.indexOf(c[w]),I=Ve.indexOf(c[w+1]),D=Ve.indexOf(c[w+2]),F=Ve.indexOf(c[w+3]),P[x++]=v<<2|I>>4,P[x++]=(I&15)<<4|D>>2,P[x++]=(D&3)<<6|F&63;return N}function Jn(c){var y=new Uint8Array(c),d="",w;for(w=0;w<y.length;w+=3)d+=Ve[y[w]>>2],d+=Ve[(y[w]&3)<<4|y[w+1]>>4],d+=Ve[(y[w+1]&15)<<2|y[w+2]>>6],d+=Ve[y[w+2]&63];return y.length%3===2?d=d.substring(0,d.length-1)+"=":y.length%3===1&&(d=d.substring(0,d.length-2)+"=="),d}function od(c,y){var d="";if(c&&(d=Co.call(c)),c&&(d==="[object ArrayBuffer]"||c.buffer&&Co.call(c.buffer)==="[object ArrayBuffer]")){var w,x=Nr;c instanceof ArrayBuffer?(w=c,x+=Gn):(w=c.buffer,d==="[object Int8Array]"?x+=So:d==="[object Uint8Array]"?x+=_o:d==="[object Uint8ClampedArray]"?x+=Io:d==="[object Int16Array]"?x+=ko:d==="[object Uint16Array]"?x+=To:d==="[object Int32Array]"?x+=Oo:d==="[object Uint32Array]"?x+=Do:d==="[object Float32Array]"?x+=Ao:d==="[object Float64Array]"?x+=Fo:y(new Error("Failed to get type for BinaryArray"))),y(x+Jn(w))}else if(d==="[object Blob]"){var v=new FileReader;v.onload=function(){var I=id+c.type+"~"+Jn(this.result);y(Nr+Hn+I)},v.readAsArrayBuffer(c)}else try{y(JSON.stringify(c))}catch(I){console.error("Couldn\'t convert value into a JSON string: ",c),y(null,I)}}function sd(c){if(c.substring(0,Kn)!==Nr)return JSON.parse(c);var y=c.substring(No),d=c.substring(Kn,No),w;if(d===Hn&&Eo.test(y)){var x=y.match(Eo);w=x[1],y=y.substring(x[0].length)}var v=Ro(y);switch(d){case Gn:return v;case Hn:return h([v],{type:w});case So:return new Int8Array(v);case _o:return new Uint8Array(v);case Io:return new Uint8ClampedArray(v);case ko:return new Int16Array(v);case To:return new Uint16Array(v);case Oo:return new Int32Array(v);case Do:return new Uint32Array(v);case Ao:return new Float32Array(v);case Fo:return new Float64Array(v);default:throw new Error("Unkown type: "+d)}}var Vn={serialize:od,deserialize:sd,stringToBuffer:Ro,bufferToString:Jn};function Po(c,y,d,w){c.executeSql("CREATE TABLE IF NOT EXISTS "+y.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],d,w)}function ad(c){var y=this,d={db:null};if(c)for(var w in c)d[w]=typeof c[w]!="string"?c[w].toString():c[w];var x=new l(function(v,I){try{d.db=openDatabase(d.name,String(d.version),d.description,d.size)}catch(D){return I(D)}d.db.transaction(function(D){Po(D,d,function(){y._dbInfo=d,v()},function(F,N){I(N)})},I)});return d.serializer=Vn,x}function Ye(c,y,d,w,x,v){c.executeSql(d,w,x,function(I,D){D.code===D.SYNTAX_ERR?I.executeSql("SELECT name FROM sqlite_master WHERE type=\'table\' AND name = ?",[y.storeName],function(F,N){N.rows.length?v(F,D):Po(F,y,function(){F.executeSql(d,w,x,v)},v)},v):v(I,D)},v)}function ud(c,y){var d=this;c=E(c);var w=new l(function(x,v){d.ready().then(function(){var I=d._dbInfo;I.db.transaction(function(D){Ye(D,I,"SELECT * FROM "+I.storeName+" WHERE key = ? LIMIT 1",[c],function(F,N){var P=N.rows.length?N.rows.item(0).value:null;P&&(P=I.serializer.deserialize(P)),x(P)},function(F,N){v(N)})})}).catch(v)});return m(w,y),w}function cd(c,y){var d=this,w=new l(function(x,v){d.ready().then(function(){var I=d._dbInfo;I.db.transaction(function(D){Ye(D,I,"SELECT * FROM "+I.storeName,[],function(F,N){for(var P=N.rows,j=P.length,H=0;H<j;H++){var Q=P.item(H),Z=Q.value;if(Z&&(Z=I.serializer.deserialize(Z)),Z=c(Z,Q.key,H+1),Z!==void 0){x(Z);return}}x()},function(F,N){v(N)})})}).catch(v)});return m(w,y),w}function qo(c,y,d,w){var x=this;c=E(c);var v=new l(function(I,D){x.ready().then(function(){y===void 0&&(y=null);var F=y,N=x._dbInfo;N.serializer.serialize(y,function(P,j){j?D(j):N.db.transaction(function(H){Ye(H,N,"INSERT OR REPLACE INTO "+N.storeName+" (key, value) VALUES (?, ?)",[c,P],function(){I(F)},function(Q,Z){D(Z)})},function(H){if(H.code===H.QUOTA_ERR){if(w>0){I(qo.apply(x,[c,F,d,w-1]));return}D(H)}})})}).catch(D)});return m(v,d),v}function fd(c,y,d){return qo.apply(this,[c,y,d,1])}function ld(c,y){var d=this;c=E(c);var w=new l(function(x,v){d.ready().then(function(){var I=d._dbInfo;I.db.transaction(function(D){Ye(D,I,"DELETE FROM "+I.storeName+" WHERE key = ?",[c],function(){x()},function(F,N){v(N)})})}).catch(v)});return m(w,y),w}function dd(c){var y=this,d=new l(function(w,x){y.ready().then(function(){var v=y._dbInfo;v.db.transaction(function(I){Ye(I,v,"DELETE FROM "+v.storeName,[],function(){w()},function(D,F){x(F)})})}).catch(x)});return m(d,c),d}function md(c){var y=this,d=new l(function(w,x){y.ready().then(function(){var v=y._dbInfo;v.db.transaction(function(I){Ye(I,v,"SELECT COUNT(key) as c FROM "+v.storeName,[],function(D,F){var N=F.rows.item(0).c;w(N)},function(D,F){x(F)})})}).catch(x)});return m(d,c),d}function pd(c,y){var d=this,w=new l(function(x,v){d.ready().then(function(){var I=d._dbInfo;I.db.transaction(function(D){Ye(D,I,"SELECT key FROM "+I.storeName+" WHERE id = ? LIMIT 1",[c+1],function(F,N){var P=N.rows.length?N.rows.item(0).key:null;x(P)},function(F,N){v(N)})})}).catch(v)});return m(w,y),w}function hd(c){var y=this,d=new l(function(w,x){y.ready().then(function(){var v=y._dbInfo;v.db.transaction(function(I){Ye(I,v,"SELECT key FROM "+v.storeName,[],function(D,F){for(var N=[],P=0;P<F.rows.length;P++)N.push(F.rows.item(P).key);w(N)},function(D,F){x(F)})})}).catch(x)});return m(d,c),d}function gd(c){return new l(function(y,d){c.transaction(function(w){w.executeSql("SELECT name FROM sqlite_master WHERE type=\'table\' AND name <> \'__WebKitDatabaseInfoTable__\'",[],function(x,v){for(var I=[],D=0;D<v.rows.length;D++)I.push(v.rows.item(D).name);y({db:c,storeNames:I})},function(x,v){d(v)})},function(w){d(w)})})}function yd(c,y){y=_.apply(this,arguments);var d=this.config();c=typeof c!="function"&&c||{},c.name||(c.name=c.name||d.name,c.storeName=c.storeName||d.storeName);var w=this,x;return c.name?x=new l(function(v){var I;c.name===d.name?I=w._dbInfo.db:I=openDatabase(c.name,"","",0),c.storeName?v({db:I,storeNames:[c.storeName]}):v(gd(I))}).then(function(v){return new l(function(I,D){v.db.transaction(function(F){function N(Q){return new l(function(Z,ue){F.executeSql("DROP TABLE IF EXISTS "+Q,[],function(){Z()},function(se,De){ue(De)})})}for(var P=[],j=0,H=v.storeNames.length;j<H;j++)P.push(N(v.storeNames[j]));l.all(P).then(function(){I()}).catch(function(Q){D(Q)})},function(F){D(F)})})}):x=l.reject("Invalid arguments"),m(x,y),x}var vd={_driver:"webSQLStorage",_initStorage:ad,_support:nd(),iterate:cd,getItem:ud,setItem:fd,removeItem:ld,clear:dd,length:md,key:pd,keys:hd,dropInstance:yd};function wd(){try{return typeof localStorage!="undefined"&&"setItem"in localStorage&&!!localStorage.setItem}catch(c){return!1}}function Lo(c,y){var d=c.name+"/";return c.storeName!==y.storeName&&(d+=c.storeName+"/"),d}function bd(){var c="_localforage_support_test";try{return localStorage.setItem(c,!0),localStorage.removeItem(c),!1}catch(y){return!0}}function xd(){return!bd()||localStorage.length>0}function Ed(c){var y=this,d={};if(c)for(var w in c)d[w]=c[w];return d.keyPrefix=Lo(c,y._defaultConfig),xd()?(y._dbInfo=d,d.serializer=Vn,l.resolve()):l.reject()}function Sd(c){var y=this,d=y.ready().then(function(){for(var w=y._dbInfo.keyPrefix,x=localStorage.length-1;x>=0;x--){var v=localStorage.key(x);v.indexOf(w)===0&&localStorage.removeItem(v)}});return m(d,c),d}function _d(c,y){var d=this;c=E(c);var w=d.ready().then(function(){var x=d._dbInfo,v=localStorage.getItem(x.keyPrefix+c);return v&&(v=x.serializer.deserialize(v)),v});return m(w,y),w}function Id(c,y){var d=this,w=d.ready().then(function(){for(var x=d._dbInfo,v=x.keyPrefix,I=v.length,D=localStorage.length,F=1,N=0;N<D;N++){var P=localStorage.key(N);if(P.indexOf(v)===0){var j=localStorage.getItem(P);if(j&&(j=x.serializer.deserialize(j)),j=c(j,P.substring(I),F++),j!==void 0)return j}}});return m(w,y),w}function kd(c,y){var d=this,w=d.ready().then(function(){var x=d._dbInfo,v;try{v=localStorage.key(c)}catch(I){v=null}return v&&(v=v.substring(x.keyPrefix.length)),v});return m(w,y),w}function Od(c){var y=this,d=y.ready().then(function(){for(var w=y._dbInfo,x=localStorage.length,v=[],I=0;I<x;I++){var D=localStorage.key(I);D.indexOf(w.keyPrefix)===0&&v.push(D.substring(w.keyPrefix.length))}return v});return m(d,c),d}function Td(c){var y=this,d=y.keys().then(function(w){return w.length});return m(d,c),d}function Dd(c,y){var d=this;c=E(c);var w=d.ready().then(function(){var x=d._dbInfo;localStorage.removeItem(x.keyPrefix+c)});return m(w,y),w}function Ad(c,y,d){var w=this;c=E(c);var x=w.ready().then(function(){y===void 0&&(y=null);var v=y;return new l(function(I,D){var F=w._dbInfo;F.serializer.serialize(y,function(N,P){if(P)D(P);else try{localStorage.setItem(F.keyPrefix+c,N),I(v)}catch(j){(j.name==="QuotaExceededError"||j.name==="NS_ERROR_DOM_QUOTA_REACHED")&&D(j),D(j)}})})});return m(x,d),x}function Fd(c,y){if(y=_.apply(this,arguments),c=typeof c!="function"&&c||{},!c.name){var d=this.config();c.name=c.name||d.name,c.storeName=c.storeName||d.storeName}var w=this,x;return c.name?x=new l(function(v){c.storeName?v(Lo(c,w._defaultConfig)):v(c.name+"/")}).then(function(v){for(var I=localStorage.length-1;I>=0;I--){var D=localStorage.key(I);D.indexOf(v)===0&&localStorage.removeItem(D)}}):x=l.reject("Invalid arguments"),m(x,y),x}var Nd={_driver:"localStorageWrapper",_initStorage:Ed,_support:wd(),iterate:Id,getItem:_d,setItem:Ad,removeItem:Dd,clear:Sd,length:Td,key:kd,keys:Od,dropInstance:Fd},Cd=function(y,d){return y===d||typeof y=="number"&&typeof d=="number"&&isNaN(y)&&isNaN(d)},Rd=function(y,d){for(var w=y.length,x=0;x<w;){if(Cd(y[x],d))return!0;x++}return!1},Mo=Array.isArray||function(c){return Object.prototype.toString.call(c)==="[object Array]"},jt={},$o={},xt={INDEXEDDB:rd,WEBSQL:vd,LOCALSTORAGE:Nd},Pd=[xt.INDEXEDDB._driver,xt.WEBSQL._driver,xt.LOCALSTORAGE._driver],Cr=["dropInstance"],Yn=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Cr),qd={description:"",driver:Pd.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Ld(c,y){c[y]=function(){var d=arguments;return c.ready().then(function(){return c[y].apply(c,d)})}}function Qn(){for(var c=1;c<arguments.length;c++){var y=arguments[c];if(y)for(var d in y)y.hasOwnProperty(d)&&(Mo(y[d])?arguments[0][d]=y[d].slice():arguments[0][d]=y[d])}return arguments[0]}var Md=function(){function c(y){a(this,c);for(var d in xt)if(xt.hasOwnProperty(d)){var w=xt[d],x=w._driver;this[d]=x,jt[x]||this.defineDriver(w)}this._defaultConfig=Qn({},qd),this._config=Qn({},this._defaultConfig,y),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return c.prototype.config=function(d){if((typeof d=="undefined"?"undefined":s(d))==="object"){if(this._ready)return new Error("Can\'t call config() after localforage has been used.");for(var w in d){if(w==="storeName"&&(d[w]=d[w].replace(/\\W/g,"_")),w==="version"&&typeof d[w]!="number")return new Error("Database version must be a number.");this._config[w]=d[w]}return"driver"in d&&d.driver?this.setDriver(this._config.driver):!0}else return typeof d=="string"?this._config[d]:this._config},c.prototype.defineDriver=function(d,w,x){var v=new l(function(I,D){try{var F=d._driver,N=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!d._driver){D(N);return}for(var P=Yn.concat("_initStorage"),j=0,H=P.length;j<H;j++){var Q=P[j],Z=!Rd(Cr,Q);if((Z||d[Q])&&typeof d[Q]!="function"){D(N);return}}var ue=function(){for(var Wt=function(Wd){return function(){var Bd=new Error("Method "+Wd+" is not implemented by the current driver"),jo=l.reject(Bd);return m(jo,arguments[arguments.length-1]),jo}},Zn=0,jd=Cr.length;Zn<jd;Zn++){var Xn=Cr[Zn];d[Xn]||(d[Xn]=Wt(Xn))}};ue();var se=function(Wt){jt[F]&&console.info("Redefining LocalForage driver: "+F),jt[F]=d,$o[F]=Wt,I()};"_support"in d?d._support&&typeof d._support=="function"?d._support().then(se,D):se(!!d._support):se(!0)}catch(De){D(De)}});return g(v,w,x),v},c.prototype.driver=function(){return this._driver||null},c.prototype.getDriver=function(d,w,x){var v=jt[d]?l.resolve(jt[d]):l.reject(new Error("Driver not found."));return g(v,w,x),v},c.prototype.getSerializer=function(d){var w=l.resolve(Vn);return g(w,d),w},c.prototype.ready=function(d){var w=this,x=w._driverSet.then(function(){return w._ready===null&&(w._ready=w._initDriver()),w._ready});return g(x,d,d),x},c.prototype.setDriver=function(d,w,x){var v=this;Mo(d)||(d=[d]);var I=this._getSupportedDrivers(d);function D(){v._config.driver=v.driver()}function F(j){return v._extend(j),D(),v._ready=v._initStorage(v._config),v._ready}function N(j){return function(){var H=0;function Q(){for(;H<j.length;){var Z=j[H];return H++,v._dbInfo=null,v._ready=null,v.getDriver(Z).then(F).catch(Q)}D();var ue=new Error("No available storage method found.");return v._driverSet=l.reject(ue),v._driverSet}return Q()}}var P=this._driverSet!==null?this._driverSet.catch(function(){return l.resolve()}):l.resolve();return this._driverSet=P.then(function(){var j=I[0];return v._dbInfo=null,v._ready=null,v.getDriver(j).then(function(H){v._driver=H._driver,D(),v._wrapLibraryMethodsWithReady(),v._initDriver=N(I)})}).catch(function(){D();var j=new Error("No available storage method found.");return v._driverSet=l.reject(j),v._driverSet}),g(this._driverSet,w,x),this._driverSet},c.prototype.supports=function(d){return!!$o[d]},c.prototype._extend=function(d){Qn(this,d)},c.prototype._getSupportedDrivers=function(d){for(var w=[],x=0,v=d.length;x<v;x++){var I=d[x];this.supports(I)&&w.push(I)}return w},c.prototype._wrapLibraryMethodsWithReady=function(){for(var d=0,w=Yn.length;d<w;d++)Ld(this,Yn[d])},c.prototype.createInstance=function(d){return new c(d)},c}(),$d=new Md;i.exports=$d},{3:3}]},{},[4])(4)})});var je=A(Kr=>{"use strict";Kr.getBooleanOption=(e,t)=>{let r=!1;if(t in e&&typeof(r=e[t])!="boolean")throw new TypeError(`Expected the "${t}" option to be a boolean`);return r};Kr.cppdb=Symbol();Kr.inspect=Symbol.for("nodejs.util.inspect.custom")});var gi=A((D0,ts)=>{"use strict";var hi={value:"SqliteError",writable:!0,enumerable:!1,configurable:!0};function at(e,t){if(new.target!==at)return new at(e,t);if(typeof t!="string")throw new TypeError("Expected second argument to be a string");Error.call(this,e),hi.value=""+e,Object.defineProperty(this,"message",hi),Error.captureStackTrace(this,at),this.code=t}Object.setPrototypeOf(at,Error);Object.setPrototypeOf(at.prototype,Error.prototype);Object.defineProperty(at.prototype,"name",hi);ts.exports=at});var ns=A((A0,rs)=>{var Gr=require("path").sep||"/";rs.exports=vm;function vm(e){if(typeof e!="string"||e.length<=7||e.substring(0,7)!="file://")throw new TypeError("must pass in a file:// URI to convert to a file path");var t=decodeURI(e.substring(7)),r=t.indexOf("/"),n=t.substring(0,r),i=t.substring(r+1);return n=="localhost"&&(n=""),n&&(n=Gr+Gr+n),i=i.replace(/^(.+)\\|/,"$1:"),Gr=="\\\\"&&(i=i.replace(/\\//g,"\\\\")),/^.+\\:/.test(i)||(i=Gr+i),n+i}});var as=A((_t,ss)=>{var yi=require("fs"),Jr=require("path"),wm=ns(),Hr=Jr.join,bm=Jr.dirname,is=yi.accessSync&&function(e){try{yi.accessSync(e)}catch(t){return!1}return!0}||yi.existsSync||Jr.existsSync,os={arrow:process.env.NODE_BINDINGS_ARROW||" \\u2192 ",compiled:process.env.NODE_BINDINGS_COMPILED_DIR||"compiled",platform:process.platform,arch:process.arch,nodePreGyp:"node-v"+process.versions.modules+"-"+process.platform+"-"+process.arch,version:process.versions.node,bindings:"bindings.node",try:[["module_root","build","bindings"],["module_root","build","Debug","bindings"],["module_root","build","Release","bindings"],["module_root","out","Debug","bindings"],["module_root","Debug","bindings"],["module_root","out","Release","bindings"],["module_root","Release","bindings"],["module_root","build","default","bindings"],["module_root","compiled","version","platform","arch","bindings"],["module_root","addon-build","release","install-root","bindings"],["module_root","addon-build","debug","install-root","bindings"],["module_root","addon-build","default","install-root","bindings"],["module_root","lib","binding","nodePreGyp","bindings"]]};function xm(e){typeof e=="string"?e={bindings:e}:e||(e={}),Object.keys(os).map(function(u){u in e||(e[u]=os[u])}),e.module_root||(e.module_root=_t.getRoot(_t.getFileName())),Jr.extname(e.bindings)!=".node"&&(e.bindings+=".node");for(var t=typeof __webpack_require__=="function"?__non_webpack_require__:require,r=[],n=0,i=e.try.length,o,s,a;n<i;n++){o=Hr.apply(null,e.try[n].map(function(u){return e[u]||u})),r.push(o);try{return s=e.path?t.resolve(o):t(o),e.path||(s.path=o),s}catch(u){if(u.code!=="MODULE_NOT_FOUND"&&u.code!=="QUALIFIED_PATH_RESOLUTION_FAILED"&&!/not find/i.test(u.message))throw u}}throw a=new Error(`Could not locate the bindings file. Tried:\n`+r.map(function(u){return e.arrow+u}).join(`\n`)),a.tries=r,a}ss.exports=_t=xm;_t.getFileName=function(t){var r=Error.prepareStackTrace,n=Error.stackTraceLimit,i={},o;Error.stackTraceLimit=10,Error.prepareStackTrace=function(a,u){for(var p=0,f=u.length;p<f;p++)if(o=u[p].getFileName(),o!==__filename)if(t){if(o!==t)return}else return},Error.captureStackTrace(i),i.stack,Error.prepareStackTrace=r,Error.stackTraceLimit=n;var s="file://";return o.indexOf(s)===0&&(o=wm(o)),o};_t.getRoot=function(t){for(var r=bm(t),n;;){if(r==="."&&(r=process.cwd()),is(Hr(r,"package.json"))||is(Hr(r,"node_modules")))return r;if(n===r)throw new Error(\'Could not find module root given file: "\'+t+\'". Do you have a `package.json` file? \');n=r,r=Hr(r,"..")}}});var us=A(Ze=>{"use strict";var{cppdb:Le}=je();Ze.prepare=function(t){return this[Le].prepare(t,this,!1)};Ze.exec=function(t){return this[Le].exec(t),this};Ze.close=function(){return this[Le].close(),this};Ze.loadExtension=function(...t){return this[Le].loadExtension(...t),this};Ze.defaultSafeIntegers=function(...t){return this[Le].defaultSafeIntegers(...t),this};Ze.unsafeMode=function(...t){return this[Le].unsafeMode(...t),this};Ze.getters={name:{get:function(){return this[Le].name},enumerable:!0},open:{get:function(){return this[Le].open},enumerable:!0},inTransaction:{get:function(){return this[Le].inTransaction},enumerable:!0},readonly:{get:function(){return this[Le].readonly},enumerable:!0},memory:{get:function(){return this[Le].memory},enumerable:!0}}});var ls=A((N0,fs)=>{"use strict";var{cppdb:Em}=je(),cs=new WeakMap;fs.exports=function(t){if(typeof t!="function")throw new TypeError("Expected first argument to be a function");let r=this[Em],n=Sm(r,this),{apply:i}=Function.prototype,o={default:{value:Vr(i,t,r,n.default)},deferred:{value:Vr(i,t,r,n.deferred)},immediate:{value:Vr(i,t,r,n.immediate)},exclusive:{value:Vr(i,t,r,n.exclusive)},database:{value:this,enumerable:!0}};return Object.defineProperties(o.default.value,o),Object.defineProperties(o.deferred.value,o),Object.defineProperties(o.immediate.value,o),Object.defineProperties(o.exclusive.value,o),o.default.value};var Sm=(e,t)=>{let r=cs.get(e);if(!r){let n={commit:e.prepare("COMMIT",t,!1),rollback:e.prepare("ROLLBACK",t,!1),savepoint:e.prepare("SAVEPOINT `	_bs3.	`",t,!1),release:e.prepare("RELEASE `	_bs3.	`",t,!1),rollbackTo:e.prepare("ROLLBACK TO `	_bs3.	`",t,!1)};cs.set(e,r={default:Object.assign({begin:e.prepare("BEGIN",t,!1)},n),deferred:Object.assign({begin:e.prepare("BEGIN DEFERRED",t,!1)},n),immediate:Object.assign({begin:e.prepare("BEGIN IMMEDIATE",t,!1)},n),exclusive:Object.assign({begin:e.prepare("BEGIN EXCLUSIVE",t,!1)},n)})}return r},Vr=(e,t,r,{begin:n,commit:i,rollback:o,savepoint:s,release:a,rollbackTo:u})=>function(){let f,h,l;r.inTransaction?(f=s,h=a,l=u):(f=n,h=i,l=o),f.run();try{let m=e.call(t,this,arguments);return h.run(),m}catch(m){throw r.inTransaction&&(l.run(),l!==o&&h.run()),m}}});var ms=A((C0,ds)=>{"use strict";var{getBooleanOption:_m,cppdb:Im}=je();ds.exports=function(t,r){if(r==null&&(r={}),typeof t!="string")throw new TypeError("Expected first argument to be a string");if(typeof r!="object")throw new TypeError("Expected second argument to be an options object");let n=_m(r,"simple"),i=this[Im].prepare(`PRAGMA ${t}`,this,!0);return n?i.pluck().get():i.all()}});var gs=A((R0,hs)=>{"use strict";var km=require("fs"),Om=require("path"),{promisify:Tm}=require("util"),{cppdb:Dm}=je(),ps=Tm(km.access);hs.exports=async function(t,r){if(r==null&&(r={}),typeof t!="string")throw new TypeError("Expected first argument to be a string");if(typeof r!="object")throw new TypeError("Expected second argument to be an options object");t=t.trim();let n="attached"in r?r.attached:"main",i="progress"in r?r.progress:null;if(!t)throw new TypeError("Backup filename cannot be an empty string");if(t===":memory:")throw new TypeError(\'Invalid backup filename ":memory:"\');if(typeof n!="string")throw new TypeError(\'Expected the "attached" option to be a string\');if(!n)throw new TypeError(\'The "attached" option cannot be an empty string\');if(i!=null&&typeof i!="function")throw new TypeError(\'Expected the "progress" option to be a function\');await ps(Om.dirname(t)).catch(()=>{throw new TypeError("Cannot save backup because the directory does not exist")});let o=await ps(t).then(()=>!1,()=>!0);return Am(this[Dm].backup(this,n,t,o),i||null)};var Am=(e,t)=>{let r=0,n=!0;return new Promise((i,o)=>{setImmediate(function s(){try{let a=e.transfer(r);if(!a.remainingPages){e.close(),i(a);return}if(n&&(n=!1,r=100),t){let u=t(a);if(u!==void 0)if(typeof u=="number"&&u===u)r=Math.max(0,Math.min(2147483647,Math.round(u)));else throw new TypeError("Expected progress callback to return a number or undefined")}setImmediate(s)}catch(a){e.close(),o(a)}})})}});var vs=A((P0,ys)=>{"use strict";var{cppdb:Fm}=je();ys.exports=function(t){if(t==null&&(t={}),typeof t!="object")throw new TypeError("Expected first argument to be an options object");let r="attached"in t?t.attached:"main";if(typeof r!="string")throw new TypeError(\'Expected the "attached" option to be a string\');if(!r)throw new TypeError(\'The "attached" option cannot be an empty string\');return this[Fm].serialize(r)}});var bs=A((q0,ws)=>{"use strict";var{getBooleanOption:Yr,cppdb:Nm}=je();ws.exports=function(t,r,n){if(r==null&&(r={}),typeof r=="function"&&(n=r,r={}),typeof t!="string")throw new TypeError("Expected first argument to be a string");if(typeof n!="function")throw new TypeError("Expected last argument to be a function");if(typeof r!="object")throw new TypeError("Expected second argument to be an options object");if(!t)throw new TypeError("User-defined function name cannot be an empty string");let i="safeIntegers"in r?+Yr(r,"safeIntegers"):2,o=Yr(r,"deterministic"),s=Yr(r,"directOnly"),a=Yr(r,"varargs"),u=-1;if(!a){if(u=n.length,!Number.isInteger(u)||u<0)throw new TypeError("Expected function.length to be a positive integer");if(u>100)throw new RangeError("User-defined functions cannot have more than 100 arguments")}return this[Nm].function(n,t,u,i,o,s),this}});var Ss=A((L0,Es)=>{"use strict";var{getBooleanOption:Qr,cppdb:Cm}=je();Es.exports=function(t,r){if(typeof t!="string")throw new TypeError("Expected first argument to be a string");if(typeof r!="object"||r===null)throw new TypeError("Expected second argument to be an options object");if(!t)throw new TypeError("User-defined function name cannot be an empty string");let n="start"in r?r.start:null,i=vi(r,"step",!0),o=vi(r,"inverse",!1),s=vi(r,"result",!1),a="safeIntegers"in r?+Qr(r,"safeIntegers"):2,u=Qr(r,"deterministic"),p=Qr(r,"directOnly"),f=Qr(r,"varargs"),h=-1;if(!f&&(h=Math.max(xs(i),o?xs(o):0),h>0&&(h-=1),h>100))throw new RangeError("User-defined functions cannot have more than 100 arguments");return this[Cm].aggregate(n,i,o,s,t,h,a,u,p),this};var vi=(e,t,r)=>{let n=t in e?e[t]:null;if(typeof n=="function")return n;if(n!=null)throw new TypeError(`Expected the "${t}" option to be a function`);if(r)throw new TypeError(`Missing required option "${t}"`);return null},xs=({length:e})=>{if(Number.isInteger(e)&&e>=0)return e;throw new TypeError("Expected function.length to be a positive integer")}});var Os=A((M0,ks)=>{"use strict";var{cppdb:Rm}=je();ks.exports=function(t,r){if(typeof t!="string")throw new TypeError("Expected first argument to be a string");if(!t)throw new TypeError("Virtual table module name cannot be an empty string");let n=!1;if(typeof r=="object"&&r!==null)n=!0,r=Bm(Is(r,"used",t));else{if(typeof r!="function")throw new TypeError("Expected second argument to be a function or a table definition object");r=Pm(r)}return this[Rm].table(r,t,n),this};function Pm(e){return function(r,n,i,...o){let s={module:r,database:n,table:i},a=jm.call(e,s,o);if(typeof a!="object"||a===null)throw new TypeError(`Virtual table module "${r}" did not return a table definition object`);return Is(a,"returned",r)}}function Is(e,t,r){if(!tr.call(e,"rows"))throw new TypeError(`Virtual table module "${r}" ${t} a table definition without a "rows" property`);if(!tr.call(e,"columns"))throw new TypeError(`Virtual table module "${r}" ${t} a table definition without a "columns" property`);let n=e.rows;if(typeof n!="function"||Object.getPrototypeOf(n)!==Wm)throw new TypeError(`Virtual table module "${r}" ${t} a table definition with an invalid "rows" property (should be a generator function)`);let i=e.columns;if(!Array.isArray(i)||!(i=[...i]).every(p=>typeof p=="string"))throw new TypeError(`Virtual table module "${r}" ${t} a table definition with an invalid "columns" property (should be an array of strings)`);if(i.length!==new Set(i).size)throw new TypeError(`Virtual table module "${r}" ${t} a table definition with duplicate column names`);if(!i.length)throw new RangeError(`Virtual table module "${r}" ${t} a table definition with zero columns`);let o;if(tr.call(e,"parameters")){if(o=e.parameters,!Array.isArray(o)||!(o=[...o]).every(p=>typeof p=="string"))throw new TypeError(`Virtual table module "${r}" ${t} a table definition with an invalid "parameters" property (should be an array of strings)`)}else o=$m(n);if(o.length!==new Set(o).size)throw new TypeError(`Virtual table module "${r}" ${t} a table definition with duplicate parameter names`);if(o.length>32)throw new RangeError(`Virtual table module "${r}" ${t} a table definition with more than the maximum number of 32 parameters`);for(let p of o)if(i.includes(p))throw new TypeError(`Virtual table module "${r}" ${t} a table definition with column "${p}" which was ambiguously defined as both a column and parameter`);let s=2;if(tr.call(e,"safeIntegers")){let p=e.safeIntegers;if(typeof p!="boolean")throw new TypeError(`Virtual table module "${r}" ${t} a table definition with an invalid "safeIntegers" property (should be a boolean)`);s=+p}let a=!1;if(tr.call(e,"directOnly")&&(a=e.directOnly,typeof a!="boolean"))throw new TypeError(`Virtual table module "${r}" ${t} a table definition with an invalid "directOnly" property (should be a boolean)`);return[`CREATE TABLE x(${[...o.map(_s).map(p=>`${p} HIDDEN`),...i.map(_s)].join(", ")});`,qm(n,new Map(i.map((p,f)=>[p,o.length+f])),r),o,s,a]}function qm(e,t,r){return function*(...i){let o=i.map(s=>Buffer.isBuffer(s)?Buffer.from(s):s);for(let s=0;s<t.size;++s)o.push(null);for(let s of e(...i))if(Array.isArray(s))Lm(s,o,t.size,r),yield o;else if(typeof s=="object"&&s!==null)Mm(s,o,t,r),yield o;else throw new TypeError(`Virtual table module "${r}" yielded something that isn\'t a valid row object`)}}function Lm(e,t,r,n){if(e.length!==r)throw new TypeError(`Virtual table module "${n}" yielded a row with an incorrect number of columns`);let i=t.length-r;for(let o=0;o<r;++o)t[o+i]=e[o]}function Mm(e,t,r,n){let i=0;for(let o of Object.keys(e)){let s=r.get(o);if(s===void 0)throw new TypeError(`Virtual table module "${n}" yielded a row with an undeclared column "${o}"`);t[s]=e[o],i+=1}if(i!==r.size)throw new TypeError(`Virtual table module "${n}" yielded a row with missing columns`)}function $m({length:e}){if(!Number.isInteger(e)||e<0)throw new TypeError("Expected function.length to be a positive integer");let t=[];for(let r=0;r<e;++r)t.push(`$${r+1}`);return t}var{hasOwnProperty:tr}=Object.prototype,{apply:jm}=Function.prototype,Wm=Object.getPrototypeOf(function*(){}),_s=e=>`"${e.replace(/"/g,\'""\')}"`,Bm=e=>()=>e});var Ds=A(($0,Ts)=>{"use strict";var Um=function(){};Ts.exports=function(t,r){return Object.assign(new Um,this)}});var Cs=A((j0,Ns)=>{"use strict";var zm=require("fs"),As=require("path"),rr=je(),Km=gi(),Fs;function ye(e,t){if(new.target==null)return new ye(e,t);let r;if(Buffer.isBuffer(e)&&(r=e,e=":memory:"),e==null&&(e=""),t==null&&(t={}),typeof e!="string")throw new TypeError("Expected first argument to be a string");if(typeof t!="object")throw new TypeError("Expected second argument to be an options object");if("readOnly"in t)throw new TypeError(\'Misspelled option "readOnly" should be "readonly"\');if("memory"in t)throw new TypeError(\'Option "memory" was removed in v7.0.0 (use ":memory:" filename instead)\');let n=e.trim(),i=n===""||n===":memory:",o=rr.getBooleanOption(t,"readonly"),s=rr.getBooleanOption(t,"fileMustExist"),a=rr.getBooleanOption(t,"uriPath"),u="timeout"in t?t.timeout:5e3,p="verbose"in t?t.verbose:null,f="nativeBinding"in t?t.nativeBinding:null;if(o&&i&&!r)throw new TypeError("In-memory/temporary databases cannot be readonly");if(!Number.isInteger(u)||u<0)throw new TypeError(\'Expected the "timeout" option to be a positive integer\');if(u>2147483647)throw new RangeError(\'Option "timeout" cannot be greater than 2147483647\');if(p!=null&&typeof p!="function")throw new TypeError(\'Expected the "verbose" option to be a function\');if(f!=null&&typeof f!="string")throw new TypeError(\'Expected the "nativeBinding" option to be a string\');let h;if(f==null?h=Fs||(Fs=as()("better_sqlite3.node")):h=require(As.resolve(f).replace(/(\\.node)?$/,".node")),h.isInitialized||(h.setErrorConstructor(Km),h.isInitialized=!0),!i&&!a&&!zm.existsSync(As.dirname(n)))throw new TypeError("Cannot open database because the directory does not exist");Object.defineProperties(this,$e({[rr.cppdb]:{value:new h.Database(n,e,i,o,s,a,u,p||null,r||null)}},ut.getters))}var ut=us();ye.prototype.prepare=ut.prepare;ye.prototype.transaction=ls();ye.prototype.pragma=ms();ye.prototype.backup=gs();ye.prototype.serialize=vs();ye.prototype.function=bs();ye.prototype.aggregate=Ss();ye.prototype.table=Os();ye.prototype.loadExtension=ut.loadExtension;ye.prototype.exec=ut.exec;ye.prototype.close=ut.close;ye.prototype.defaultSafeIntegers=ut.defaultSafeIntegers;ye.prototype.unsafeMode=ut.unsafeMode;ye.prototype[rr.inspect]=Ds();Ns.exports=ye});var Rs=A((B0,wi)=>{"use strict";wi.exports=Cs();wi.exports.SqliteError=gi()});var qs=A((U0,Ps)=>{var It=1e3,kt=It*60,Ot=kt*60,ct=Ot*24,Gm=ct*7,Hm=ct*365.25;Ps.exports=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return Jm(e);if(r==="number"&&isFinite(e))return t.long?Ym(e):Vm(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function Jm(e){if(e=String(e),!(e.length>100)){var t=/^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*Hm;case"weeks":case"week":case"w":return r*Gm;case"days":case"day":case"d":return r*ct;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Ot;case"minutes":case"minute":case"mins":case"min":case"m":return r*kt;case"seconds":case"second":case"secs":case"sec":case"s":return r*It;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function Vm(e){var t=Math.abs(e);return t>=ct?Math.round(e/ct)+"d":t>=Ot?Math.round(e/Ot)+"h":t>=kt?Math.round(e/kt)+"m":t>=It?Math.round(e/It)+"s":e+"ms"}function Ym(e){var t=Math.abs(e);return t>=ct?Zr(e,t,ct,"day"):t>=Ot?Zr(e,t,Ot,"hour"):t>=kt?Zr(e,t,kt,"minute"):t>=It?Zr(e,t,It,"second"):e+" ms"}function Zr(e,t,r,n){var i=t>=r*1.5;return Math.round(e/r)+" "+n+(i?"s":"")}});var Ms=A((z0,Ls)=>{function Qm(e){r.debug=r,r.default=r,r.coerce=u,r.disable=o,r.enable=i,r.enabled=s,r.humanize=qs(),r.destroy=p,Object.keys(e).forEach(f=>{r[f]=e[f]}),r.names=[],r.skips=[],r.formatters={};function t(f){let h=0;for(let l=0;l<f.length;l++)h=(h<<5)-h+f.charCodeAt(l),h|=0;return r.colors[Math.abs(h)%r.colors.length]}r.selectColor=t;function r(f){let h,l=null,m,g;function E(..._){if(!E.enabled)return;let C=E,$=Number(new Date),L=$-(h||$);C.diff=L,C.prev=h,C.curr=$,h=$,_[0]=r.coerce(_[0]),typeof _[0]!="string"&&_.unshift("%O");let G=0;_[0]=_[0].replace(/%([a-zA-Z%])/g,(R,K)=>{if(R==="%%")return"%";G++;let B=r.formatters[K];if(typeof B=="function"){let S=_[G];R=B.call(C,S),_.splice(G,1),G--}return R}),r.formatArgs.call(C,_),(C.log||r.log).apply(C,_)}return E.namespace=f,E.useColors=r.useColors(),E.color=r.selectColor(f),E.extend=n,E.destroy=r.destroy,Object.defineProperty(E,"enabled",{enumerable:!0,configurable:!1,get:()=>l!==null?l:(m!==r.namespaces&&(m=r.namespaces,g=r.enabled(f)),g),set:_=>{l=_}}),typeof r.init=="function"&&r.init(E),E}function n(f,h){let l=r(this.namespace+(typeof h=="undefined"?":":h)+f);return l.log=this.log,l}function i(f){r.save(f),r.namespaces=f,r.names=[],r.skips=[];let h,l=(typeof f=="string"?f:"").split(/[\\s,]+/),m=l.length;for(h=0;h<m;h++)l[h]&&(f=l[h].replace(/\\*/g,".*?"),f[0]==="-"?r.skips.push(new RegExp("^"+f.slice(1)+"$")):r.names.push(new RegExp("^"+f+"$")))}function o(){let f=[...r.names.map(a),...r.skips.map(a).map(h=>"-"+h)].join(",");return r.enable(""),f}function s(f){if(f[f.length-1]==="*")return!0;let h,l;for(h=0,l=r.skips.length;h<l;h++)if(r.skips[h].test(f))return!1;for(h=0,l=r.names.length;h<l;h++)if(r.names[h].test(f))return!0;return!1}function a(f){return f.toString().substring(2,f.toString().length-2).replace(/\\.\\*\\?$/,"*")}function u(f){return f instanceof Error?f.stack||f.message:f}function p(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}Ls.exports=Qm});var pe=A((ke,Xr)=>{ke.formatArgs=Xm;ke.save=ep;ke.load=tp;ke.useColors=Zm;ke.storage=rp();ke.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();ke.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Zm(){return typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/)}function Xm(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+Xr.exports.humanize(this.diff),!this.useColors)return;let t="color: "+this.color;e.splice(1,0,t,"color: inherit");let r=0,n=0;e[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),e.splice(n,0,t)}ke.log=console.debug||console.log||(()=>{});function ep(e){try{e?ke.storage.setItem("debug",e):ke.storage.removeItem("debug")}catch(t){}}function tp(){let e;try{e=ke.storage.getItem("debug")}catch(t){}return!e&&typeof process!="undefined"&&"env"in process&&(e=process.env.DEBUG),e}function rp(){try{return localStorage}catch(e){}}Xr.exports=Ms()(ke);var{formatters:np}=Xr.exports;np.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}});var js=A((K0,$s)=>{"use strict";$s.exports=ip;function Tt(e){return e instanceof Buffer?Buffer.from(e):new e.constructor(e.buffer.slice(),e.byteOffset,e.length)}function ip(e){if(e=e||{},e.circles)return op(e);return e.proto?n:r;function t(i,o){for(var s=Object.keys(i),a=new Array(s.length),u=0;u<s.length;u++){var p=s[u],f=i[p];typeof f!="object"||f===null?a[p]=f:f instanceof Date?a[p]=new Date(f):ArrayBuffer.isView(f)?a[p]=Tt(f):a[p]=o(f)}return a}function r(i){if(typeof i!="object"||i===null)return i;if(i instanceof Date)return new Date(i);if(Array.isArray(i))return t(i,r);if(i instanceof Map)return new Map(t(Array.from(i),r));if(i instanceof Set)return new Set(t(Array.from(i),r));var o={};for(var s in i)if(Object.hasOwnProperty.call(i,s)!==!1){var a=i[s];typeof a!="object"||a===null?o[s]=a:a instanceof Date?o[s]=new Date(a):a instanceof Map?o[s]=new Map(t(Array.from(a),r)):a instanceof Set?o[s]=new Set(t(Array.from(a),r)):ArrayBuffer.isView(a)?o[s]=Tt(a):o[s]=r(a)}return o}function n(i){if(typeof i!="object"||i===null)return i;if(i instanceof Date)return new Date(i);if(Array.isArray(i))return t(i,n);if(i instanceof Map)return new Map(t(Array.from(i),n));if(i instanceof Set)return new Set(t(Array.from(i),n));var o={};for(var s in i){var a=i[s];typeof a!="object"||a===null?o[s]=a:a instanceof Date?o[s]=new Date(a):a instanceof Map?o[s]=new Map(t(Array.from(a),n)):a instanceof Set?o[s]=new Set(t(Array.from(a),n)):ArrayBuffer.isView(a)?o[s]=Tt(a):o[s]=n(a)}return o}}function op(e){var t=[],r=[];return e.proto?o:i;function n(s,a){for(var u=Object.keys(s),p=new Array(u.length),f=0;f<u.length;f++){var h=u[f],l=s[h];if(typeof l!="object"||l===null)p[h]=l;else if(l instanceof Date)p[h]=new Date(l);else if(ArrayBuffer.isView(l))p[h]=Tt(l);else{var m=t.indexOf(l);m!==-1?p[h]=r[m]:p[h]=a(l)}}return p}function i(s){if(typeof s!="object"||s===null)return s;if(s instanceof Date)return new Date(s);if(Array.isArray(s))return n(s,i);if(s instanceof Map)return new Map(n(Array.from(s),i));if(s instanceof Set)return new Set(n(Array.from(s),i));var a={};t.push(s),r.push(a);for(var u in s)if(Object.hasOwnProperty.call(s,u)!==!1){var p=s[u];if(typeof p!="object"||p===null)a[u]=p;else if(p instanceof Date)a[u]=new Date(p);else if(p instanceof Map)a[u]=new Map(n(Array.from(p),i));else if(p instanceof Set)a[u]=new Set(n(Array.from(p),i));else if(ArrayBuffer.isView(p))a[u]=Tt(p);else{var f=t.indexOf(p);f!==-1?a[u]=r[f]:a[u]=i(p)}}return t.pop(),r.pop(),a}function o(s){if(typeof s!="object"||s===null)return s;if(s instanceof Date)return new Date(s);if(Array.isArray(s))return n(s,o);if(s instanceof Map)return new Map(n(Array.from(s),o));if(s instanceof Set)return new Set(n(Array.from(s),o));var a={};t.push(s),r.push(a);for(var u in s){var p=s[u];if(typeof p!="object"||p===null)a[u]=p;else if(p instanceof Date)a[u]=new Date(p);else if(p instanceof Map)a[u]=new Map(n(Array.from(p),o));else if(p instanceof Set)a[u]=new Set(n(Array.from(p),o));else if(ArrayBuffer.isView(p))a[u]=Tt(p);else{var f=t.indexOf(p);f!==-1?a[u]=r[f]:a[u]=o(p)}}return t.pop(),r.pop(),a}}});var lt=A((G0,zs)=>{var sp=require("util"),ft=pe()("log4js:configuration"),en=[],tn=[],Ws=e=>!e,Bs=e=>e&&typeof e=="object"&&!Array.isArray(e),ap=e=>/^[A-Za-z][A-Za-z0-9_]*$/g.test(e),up=e=>e&&typeof e=="number"&&Number.isInteger(e),cp=e=>{tn.push(e),ft(`Added listener, now ${tn.length} listeners`)},fp=e=>{en.push(e),ft(`Added pre-processing listener, now ${en.length} listeners`)},Us=(e,t,r)=>{(Array.isArray(t)?t:[t]).forEach(i=>{if(i)throw new Error(`Problem with log4js configuration: (${sp.inspect(e,{depth:5})}) - ${r}`)})},lp=e=>{ft("New configuration to be validated: ",e),Us(e,Ws(Bs(e)),"must be an object."),ft(`Calling pre-processing listeners (${en.length})`),en.forEach(t=>t(e)),ft("Configuration pre-processing finished."),ft(`Calling configuration listeners (${tn.length})`),tn.forEach(t=>t(e)),ft("Configuration finished.")};zs.exports={configure:lp,addListener:cp,addPreProcessingListener:fp,throwExceptionIf:Us,anObject:Bs,anInteger:up,validIdentifier:ap,not:Ws}});var rn=A((H0,Ae)=>{"use strict";function Ks(e,t){for(var r=e.toString();r.length<t;)r="0"+r;return r}function dt(e){return Ks(e,2)}function dp(e){var t=Math.abs(e),r=String(Math.floor(t/60)),n=String(t%60);return r=("0"+r).slice(-2),n=("0"+n).slice(-2),e===0?"Z":(e<0?"+":"-")+r+":"+n}function Gs(e,t){typeof e!="string"&&(t=e,e=Ae.exports.ISO8601_FORMAT),t||(t=Ae.exports.now());var r=dt(t.getDate()),n=dt(t.getMonth()+1),i=dt(t.getFullYear()),o=dt(i.substring(2,4)),s=e.indexOf("yyyy")>-1?i:o,a=dt(t.getHours()),u=dt(t.getMinutes()),p=dt(t.getSeconds()),f=Ks(t.getMilliseconds(),3),h=dp(t.getTimezoneOffset()),l=e.replace(/dd/g,r).replace(/MM/g,n).replace(/y{1,4}/g,s).replace(/hh/g,a).replace(/mm/g,u).replace(/ss/g,p).replace(/SSS/g,f).replace(/O/g,h);return l}function Xe(e,t,r,n){e["set"+(n?"":"UTC")+t](r)}function mp(e,t,r){var n=e.indexOf("O")<0,i=!1,o=[{pattern:/y{1,4}/,regexp:"\\\\d{1,4}",fn:function(h,l){Xe(h,"FullYear",l,n)}},{pattern:/MM/,regexp:"\\\\d{1,2}",fn:function(h,l){Xe(h,"Month",l-1,n),h.getMonth()!==l-1&&(i=!0)}},{pattern:/dd/,regexp:"\\\\d{1,2}",fn:function(h,l){i&&Xe(h,"Month",h.getMonth()-1,n),Xe(h,"Date",l,n)}},{pattern:/hh/,regexp:"\\\\d{1,2}",fn:function(h,l){Xe(h,"Hours",l,n)}},{pattern:/mm/,regexp:"\\\\d\\\\d",fn:function(h,l){Xe(h,"Minutes",l,n)}},{pattern:/ss/,regexp:"\\\\d\\\\d",fn:function(h,l){Xe(h,"Seconds",l,n)}},{pattern:/SSS/,regexp:"\\\\d\\\\d\\\\d",fn:function(h,l){Xe(h,"Milliseconds",l,n)}},{pattern:/O/,regexp:"[+-]\\\\d{1,2}:?\\\\d{2}?|Z",fn:function(h,l){l==="Z"?l=0:l=l.replace(":","");var m=Math.abs(l),g=(l>0?-1:1)*(m%100+Math.floor(m/100)*60);h.setUTCMinutes(h.getUTCMinutes()+g)}}],s=o.reduce(function(h,l){return l.pattern.test(h.regexp)?(l.index=h.regexp.match(l.pattern).index,h.regexp=h.regexp.replace(l.pattern,"("+l.regexp+")")):l.index=-1,h},{regexp:e,index:[]}),a=o.filter(function(h){return h.index>-1});a.sort(function(h,l){return h.index-l.index});var u=new RegExp(s.regexp),p=u.exec(t);if(p){var f=r||Ae.exports.now();return a.forEach(function(h,l){h.fn(f,p[l+1])}),f}throw new Error("String \'"+t+"\' could not be parsed as \'"+e+"\'")}function pp(e,t,r){if(!e)throw new Error("pattern must be supplied");return mp(e,t,r)}function hp(){return new Date}Ae.exports=Gs;Ae.exports.asString=Gs;Ae.exports.parse=pp;Ae.exports.now=hp;Ae.exports.ISO8601_FORMAT="yyyy-MM-ddThh:mm:ss.SSS";Ae.exports.ISO8601_WITH_TZ_OFFSET_FORMAT="yyyy-MM-ddThh:mm:ss.SSSO";Ae.exports.DATETIME_FORMAT="dd MM yyyy hh:mm:ss.SSS";Ae.exports.ABSOLUTETIME_FORMAT="hh:mm:ss.SSS"});var xi=A((J0,ia)=>{var et=rn(),Hs=require("os"),ir=require("util"),nr=require("path"),Js=require("url"),Vs=pe()("log4js:layouts"),Ys={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[90,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[91,39],yellow:[33,39]};function Qs(e){return e?`\\x1B[${Ys[e][0]}m`:""}function Zs(e){return e?`\\x1B[${Ys[e][1]}m`:""}function gp(e,t){return Qs(t)+e+Zs(t)}function Xs(e,t){return gp(ir.format("[%s] [%s] %s - ",et.asString(e.startTime),e.level.toString(),e.categoryName),t)}function ea(e){return Xs(e)+ir.format(...e.data)}function nn(e){return Xs(e,e.level.colour)+ir.format(...e.data)}function ta(e){return ir.format(...e.data)}function ra(e){return e.data[0]}function na(e,t){let r="%r %p %c - %m%n",n=/%(-?[0-9]+)?(\\.?-?[0-9]+)?([[\\]cdhmnprzxXyflos%])(\\{([^}]+)\\})?|([^%]+)/;e=e||r;function i(b,O){let k=b.categoryName;if(O){let W=parseInt(O,10),M=k.split(".");W<M.length&&(k=M.slice(M.length-W).join("."))}return k}function o(b,O){let k=et.ISO8601_FORMAT;if(O)switch(k=O,k){case"ISO8601":case"ISO8601_FORMAT":k=et.ISO8601_FORMAT;break;case"ISO8601_WITH_TZ_OFFSET":case"ISO8601_WITH_TZ_OFFSET_FORMAT":k=et.ISO8601_WITH_TZ_OFFSET_FORMAT;break;case"ABSOLUTE":process.emitWarning("Pattern %d{ABSOLUTE} is deprecated in favor of %d{ABSOLUTETIME}. Please use %d{ABSOLUTETIME} instead.","DeprecationWarning","log4js-node-DEP0003"),Vs("[log4js-node-DEP0003]","DEPRECATION: Pattern %d{ABSOLUTE} is deprecated and replaced by %d{ABSOLUTETIME}.");case"ABSOLUTETIME":case"ABSOLUTETIME_FORMAT":k=et.ABSOLUTETIME_FORMAT;break;case"DATE":process.emitWarning("Pattern %d{DATE} is deprecated due to the confusion it causes when used. Please use %d{DATETIME} instead.","DeprecationWarning","log4js-node-DEP0004"),Vs("[log4js-node-DEP0004]","DEPRECATION: Pattern %d{DATE} is deprecated and replaced by %d{DATETIME}.");case"DATETIME":case"DATETIME_FORMAT":k=et.DATETIME_FORMAT;break}return et.asString(k,b.startTime)}function s(){return Hs.hostname().toString()}function a(b){return ir.format(...b.data)}function u(){return Hs.EOL}function p(b){return b.level.toString()}function f(b){return et.asString("hh:mm:ss",b.startTime)}function h(b){return Qs(b.level.colour)}function l(b){return Zs(b.level.colour)}function m(){return"%"}function g(b){return b&&b.pid?b.pid.toString():process.pid.toString()}function E(){return g()}function _(b,O){return typeof t[O]!="undefined"?typeof t[O]=="function"?t[O](b):t[O]:null}function C(b,O){let k=b.context[O];return typeof k!="undefined"?typeof k=="function"?k(b):k:null}function $(b,O){let k=b.fileName||"";if(k=function(M){let q="file://";return M.startsWith(q)&&(typeof Js.fileURLToPath=="function"?M=Js.fileURLToPath(M):(M=nr.normalize(M.replace(new RegExp(`^${q}`),"")),process.platform==="win32"&&(M.startsWith("\\\\")?M=M.slice(1):M=nr.sep+nr.sep+M))),M}(k),O){let M=parseInt(O,10),q=k.split(nr.sep);q.length>M&&(k=q.slice(-M).join(nr.sep))}return k}function L(b){return b.lineNumber?`${b.lineNumber}`:""}function G(b){return b.columnNumber?`${b.columnNumber}`:""}function X(b){return b.callStack||""}let R={c:i,d:o,h:s,m:a,n:u,p,r:f,"[":h,"]":l,y:E,z:g,"%":m,x:_,X:C,f:$,l:L,o:G,s:X};function K(b,O,k){return R[b](O,k)}function B(b,O){let k;return b?(k=parseInt(b.slice(1),10),k>0?O.slice(0,k):O.slice(k)):O}function S(b,O){let k;if(b)if(b.charAt(0)==="-")for(k=parseInt(b.slice(1),10);O.length<k;)O+=" ";else for(k=parseInt(b,10);O.length<k;)O=` ${O}`;return O}function T(b,O,k){let W=b;return W=B(O,W),W=S(k,W),W}return function(b){let O="",k,W=e;for(;(k=n.exec(W))!==null;){let M=k[1],q=k[2],U=k[3],z=k[5],J=k[6];if(J)O+=J.toString();else{let Fr=K(U,b,z);O+=T(Fr,q,M)}W=W.slice(k.index+k[0].length)}return O}}var bi={messagePassThrough(){return ta},basic(){return ea},colored(){return nn},coloured(){return nn},pattern(e){return na(e&&e.pattern,e&&e.tokens)},dummy(){return ra}};ia.exports={basicLayout:ea,messagePassThroughLayout:ta,patternLayout:na,colouredLayout:nn,coloredLayout:nn,dummyLayout:ra,addLayout(e,t){bi[e]=t},layout(e,t){return bi[e]&&bi[e](t)}}});var mt=A((V0,sa)=>{var fe=lt(),oa=["white","grey","black","blue","cyan","green","magenta","red","yellow"],le=class{constructor(t,r,n){this.level=t,this.levelStr=r,this.colour=n}toString(){return this.levelStr}static getLevel(t,r){return t?t instanceof le?t:(t instanceof Object&&t.levelStr&&(t=t.levelStr),le[t.toString().toUpperCase()]||r):r}static addLevels(t){t&&(Object.keys(t).forEach(n=>{let i=n.toUpperCase();le[i]=new le(t[n].value,i,t[n].colour);let o=le.levels.findIndex(s=>s.levelStr===i);o>-1?le.levels[o]=le[i]:le.levels.push(le[i])}),le.levels.sort((n,i)=>n.level-i.level))}isLessThanOrEqualTo(t){return typeof t=="string"&&(t=le.getLevel(t)),this.level<=t.level}isGreaterThanOrEqualTo(t){return typeof t=="string"&&(t=le.getLevel(t)),this.level>=t.level}isEqualTo(t){return typeof t=="string"&&(t=le.getLevel(t)),this.level===t.level}};le.levels=[];le.addLevels({ALL:{value:Number.MIN_VALUE,colour:"grey"},TRACE:{value:5e3,colour:"blue"},DEBUG:{value:1e4,colour:"cyan"},INFO:{value:2e4,colour:"green"},WARN:{value:3e4,colour:"yellow"},ERROR:{value:4e4,colour:"red"},FATAL:{value:5e4,colour:"magenta"},MARK:{value:9007199254740992,colour:"grey"},OFF:{value:Number.MAX_VALUE,colour:"grey"}});fe.addListener(e=>{let t=e.levels;t&&(fe.throwExceptionIf(e,fe.not(fe.anObject(t)),"levels must be an object"),Object.keys(t).forEach(n=>{fe.throwExceptionIf(e,fe.not(fe.validIdentifier(n)),`level name "${n}" is not a valid identifier (must start with a letter, only contain A-Z,a-z,0-9,_)`),fe.throwExceptionIf(e,fe.not(fe.anObject(t[n])),`level "${n}" must be an object`),fe.throwExceptionIf(e,fe.not(t[n].value),`level "${n}" must have a \'value\' property`),fe.throwExceptionIf(e,fe.not(fe.anInteger(t[n].value)),`level "${n}".value must have an integer value`),fe.throwExceptionIf(e,fe.not(t[n].colour),`level "${n}" must have a \'colour\' property`),fe.throwExceptionIf(e,fe.not(oa.indexOf(t[n].colour)>-1),`level "${n}".colour must be one of ${oa.join(", ")}`)}))});fe.addListener(e=>{le.addLevels(e.levels)});sa.exports=le});var ga=A(sr=>{"use strict";var{parse:ca,stringify:fa}=JSON,{keys:yp}=Object,or=String,la="string",aa={},on="object",da=(e,t)=>t,vp=e=>e instanceof or?or(e):e,wp=(e,t)=>typeof t===la?new or(t):t,ma=(e,t,r,n)=>{let i=[];for(let o=yp(r),{length:s}=o,a=0;a<s;a++){let u=o[a],p=r[u];if(p instanceof or){let f=e[p];typeof f===on&&!t.has(f)?(t.add(f),r[u]=aa,i.push({k:u,a:[e,t,f,n]})):r[u]=n.call(r,u,f)}else r[u]!==aa&&(r[u]=n.call(r,u,p))}for(let{length:o}=i,s=0;s<o;s++){let{k:a,a:u}=i[s];r[a]=n.call(r,a,ma.apply(null,u))}return r},ua=(e,t,r)=>{let n=or(t.push(r)-1);return e.set(r,n),n},pa=(e,t)=>{let r=ca(e,wp).map(vp),n=r[0],i=t||da,o=typeof n===on&&n?ma(r,new Set,n,i):n;return i.call({"":o},"",o)};sr.parse=pa;var ha=(e,t,r)=>{let n=t&&typeof t===on?(f,h)=>f===""||-1<t.indexOf(f)?h:void 0:t||da,i=new Map,o=[],s=[],a=+ua(i,o,n.call({"":e},"",e)),u=!a;for(;a<o.length;)u=!0,s[a]=fa(o[a++],p,r);return"["+s.join(",")+"]";function p(f,h){if(u)return u=!u,h;let l=n.call(this,f,h);switch(typeof l){case on:if(l===null)return l;case la:return i.get(l)||ua(i,o,l)}return l}};sr.stringify=ha;var bp=e=>ca(ha(e));sr.toJSON=bp;var xp=e=>pa(fa(e));sr.fromJSON=xp});var Ei=A((Q0,wa)=>{var ya=ga(),va=mt(),Dt=class{constructor(t,r,n,i,o){this.startTime=new Date,this.categoryName=t,this.data=n,this.level=r,this.context=Object.assign({},i),this.pid=process.pid,o&&(this.functionName=o.functionName,this.fileName=o.fileName,this.lineNumber=o.lineNumber,this.columnNumber=o.columnNumber,this.callStack=o.callStack)}serialise(){return ya.stringify(this,(t,r)=>(r&&r.message&&r.stack?r=Object.assign({message:r.message,stack:r.stack},r):typeof r=="number"&&(Number.isNaN(r)||!Number.isFinite(r))?r=r.toString():typeof r=="undefined"&&(r=typeof r),r))}static deserialise(t){let r;try{let n=ya.parse(t,(i,o)=>{if(o&&o.message&&o.stack){let s=new Error(o);Object.keys(o).forEach(a=>{s[a]=o[a]}),o=s}return o});n.location={functionName:n.functionName,fileName:n.fileName,lineNumber:n.lineNumber,columnNumber:n.columnNumber,callStack:n.callStack},r=new Dt(n.categoryName,va.getLevel(n.level.levelStr),n.data,n.context,n.location),r.startTime=new Date(n.startTime),r.pid=n.pid,r.cluster=n.cluster}catch(n){r=new Dt("log4js",va.ERROR,["Unable to parse log:",t,"because: ",n])}return r}};wa.exports=Dt});var an=A((Z0,Ea)=>{var Fe=pe()("log4js:clustering"),Ep=Ei(),Sp=lt(),At=!1,Ne=null;try{Ne=require("cluster")}catch(e){Fe("cluster module not present"),At=!0}var _i=[],ur=!1,ar="NODE_APP_INSTANCE",ba=()=>ur&&process.env[ar]==="0",Si=()=>At||Ne&&Ne.isMaster||ba(),xa=e=>{_i.forEach(t=>t(e))},sn=(e,t)=>{if(Fe("cluster message received from worker ",e,": ",t),e.topic&&e.data&&(t=e,e=void 0),t&&t.topic&&t.topic==="log4js:message"){Fe("received message: ",t.data);let r=Ep.deserialise(t.data);xa(r)}};At||Sp.addListener(e=>{_i.length=0,{pm2:ur,disableClustering:At,pm2InstanceVar:ar="NODE_APP_INSTANCE"}=e,Fe(`clustering disabled ? ${At}`),Fe(`cluster.isMaster ? ${Ne&&Ne.isMaster}`),Fe(`pm2 enabled ? ${ur}`),Fe(`pm2InstanceVar = ${ar}`),Fe(`process.env[${ar}] = ${process.env[ar]}`),ur&&process.removeListener("message",sn),Ne&&Ne.removeListener&&Ne.removeListener("message",sn),At||e.disableClustering?Fe("Not listening for cluster messages, because clustering disabled."):ba()?(Fe("listening for PM2 broadcast messages"),process.on("message",sn)):Ne&&Ne.isMaster?(Fe("listening for cluster messages"),Ne.on("message",sn)):Fe("not listening for messages, because we are not a master process")});Ea.exports={onlyOnMaster:(e,t)=>Si()?e():t,isMaster:Si,send:e=>{Si()?xa(e):(ur||(e.cluster={workerId:Ne.worker.id,worker:process.pid}),process.send({topic:"log4js:message",data:e.serialise()}))},onMessage:e=>{_i.push(e)}}});var Ia=A((X0,_a)=>{function _p(e){if(typeof e=="number"&&Number.isInteger(e))return e;let t={K:1024,M:1024*1024,G:1024*1024*1024},r=Object.keys(t),n=e.slice(-1).toLocaleUpperCase(),i=e.slice(0,-1).trim();if(r.indexOf(n)<0||!Number.isInteger(Number(i)))throw Error(`maxLogSize: "${e}" is invalid`);return i*t[n]}function Ip(e,t){let r=Object.assign({},t);return Object.keys(e).forEach(n=>{r[n]&&(r[n]=e[n](t[n]))}),r}function Ii(e){return Ip({maxLogSize:_p},e)}var Sa={dateFile:Ii,file:Ii,fileSync:Ii};_a.exports.modifyConfig=e=>Sa[e.type]?Sa[e.type](e):e});var Oa=A((ex,ka)=>{var kp=console.log.bind(console);function Op(e,t){return r=>{kp(e(r,t))}}function Tp(e,t){let r=t.colouredLayout;return e.layout&&(r=t.layout(e.layout.type,e.layout)),Op(r,e.timezoneOffset)}ka.exports.configure=Tp});var Da=A(Ta=>{function Dp(e,t){return r=>{process.stdout.write(`${e(r,t)}\n`)}}function Ap(e,t){let r=t.colouredLayout;return e.layout&&(r=t.layout(e.layout.type,e.layout)),Dp(r,e.timezoneOffset)}Ta.configure=Ap});var Fa=A((rx,Aa)=>{function Fp(e,t){return r=>{process.stderr.write(`${e(r,t)}\n`)}}function Np(e,t){let r=t.colouredLayout;return e.layout&&(r=t.layout(e.layout.type,e.layout)),Fp(r,e.timezoneOffset)}Aa.exports.configure=Np});var Ca=A((nx,Na)=>{function Cp(e,t,r,n){let i=n.getLevel(e),o=n.getLevel(t,n.FATAL);return s=>{let a=s.level;i.isLessThanOrEqualTo(a)&&o.isGreaterThanOrEqualTo(a)&&r(s)}}function Rp(e,t,r,n){let i=r(e.appender);return Cp(e.level,e.maxLevel,i,n)}Na.exports.configure=Rp});var qa=A((ix,Pa)=>{var Ra=pe()("log4js:categoryFilter");function Pp(e,t){return typeof e=="string"&&(e=[e]),r=>{Ra(`Checking ${r.categoryName} against ${e}`),e.indexOf(r.categoryName)===-1&&(Ra("Not excluded, sending to appender"),t(r))}}function qp(e,t,r){let n=r(e.appender);return Pp(e.exclude,n)}Pa.exports.configure=qp});var $a=A((ox,Ma)=>{var La=pe()("log4js:noLogFilter");function Lp(e){return e.filter(r=>r!=null&&r!=="")}function Mp(e,t){return r=>{La(`Checking data: ${r.data} against filters: ${e}`),typeof e=="string"&&(e=[e]),e=Lp(e);let n=new RegExp(e.join("|"),"i");(e.length===0||r.data.findIndex(i=>n.test(i))<0)&&(La("Not excluded, sending to appender"),t(r))}}function $p(e,t,r){let n=r(e.appender);return Mp(e.exclude,n)}Ma.exports.configure=$p});var Ee=A(ki=>{"use strict";ki.fromCallback=function(e){return Object.defineProperty(function(){if(typeof arguments[arguments.length-1]=="function")e.apply(this,arguments);else return new Promise((t,r)=>{arguments[arguments.length]=(n,i)=>{if(n)return r(n);t(i)},arguments.length++,e.apply(this,arguments)})},"name",{value:e.name})};ki.fromPromise=function(e){return Object.defineProperty(function(){let t=arguments[arguments.length-1];if(typeof t!="function")return e.apply(this,arguments);e.apply(this,arguments).then(r=>t(null,r),t)},"name",{value:e.name})}});var Wa=A((ax,ja)=>{var tt=require("constants"),jp=process.cwd,un=null,Wp=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return un||(un=jp.call(process)),un};try{process.cwd()}catch(e){}typeof process.chdir=="function"&&(Oi=process.chdir,process.chdir=function(e){un=null,Oi.call(process,e)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,Oi));var Oi;ja.exports=Bp;function Bp(e){tt.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\\.6\\.[0-2]|^v0\\.5\\./)&&t(e),e.lutimes||r(e),e.chown=o(e.chown),e.fchown=o(e.fchown),e.lchown=o(e.lchown),e.chmod=n(e.chmod),e.fchmod=n(e.fchmod),e.lchmod=n(e.lchmod),e.chownSync=s(e.chownSync),e.fchownSync=s(e.fchownSync),e.lchownSync=s(e.lchownSync),e.chmodSync=i(e.chmodSync),e.fchmodSync=i(e.fchmodSync),e.lchmodSync=i(e.lchmodSync),e.stat=a(e.stat),e.fstat=a(e.fstat),e.lstat=a(e.lstat),e.statSync=u(e.statSync),e.fstatSync=u(e.fstatSync),e.lstatSync=u(e.lstatSync),e.chmod&&!e.lchmod&&(e.lchmod=function(f,h,l){l&&process.nextTick(l)},e.lchmodSync=function(){}),e.chown&&!e.lchown&&(e.lchown=function(f,h,l,m){m&&process.nextTick(m)},e.lchownSync=function(){}),Wp==="win32"&&(e.rename=typeof e.rename!="function"?e.rename:function(f){function h(l,m,g){var E=Date.now(),_=0;f(l,m,function C($){if($&&($.code==="EACCES"||$.code==="EPERM"||$.code==="EBUSY")&&Date.now()-E<6e4){setTimeout(function(){e.stat(m,function(L,G){L&&L.code==="ENOENT"?f(l,m,C):g($)})},_),_<100&&(_+=10);return}g&&g($)})}return Object.setPrototypeOf&&Object.setPrototypeOf(h,f),h}(e.rename)),e.read=typeof e.read!="function"?e.read:function(f){function h(l,m,g,E,_,C){var $;if(C&&typeof C=="function"){var L=0;$=function(G,X,R){if(G&&G.code==="EAGAIN"&&L<10)return L++,f.call(e,l,m,g,E,_,$);C.apply(this,arguments)}}return f.call(e,l,m,g,E,_,$)}return Object.setPrototypeOf&&Object.setPrototypeOf(h,f),h}(e.read),e.readSync=typeof e.readSync!="function"?e.readSync:function(f){return function(h,l,m,g,E){for(var _=0;;)try{return f.call(e,h,l,m,g,E)}catch(C){if(C.code==="EAGAIN"&&_<10){_++;continue}throw C}}}(e.readSync);function t(f){f.lchmod=function(h,l,m){f.open(h,tt.O_WRONLY|tt.O_SYMLINK,l,function(g,E){if(g){m&&m(g);return}f.fchmod(E,l,function(_){f.close(E,function(C){m&&m(_||C)})})})},f.lchmodSync=function(h,l){var m=f.openSync(h,tt.O_WRONLY|tt.O_SYMLINK,l),g=!0,E;try{E=f.fchmodSync(m,l),g=!1}finally{if(g)try{f.closeSync(m)}catch(_){}else f.closeSync(m)}return E}}function r(f){tt.hasOwnProperty("O_SYMLINK")&&f.futimes?(f.lutimes=function(h,l,m,g){f.open(h,tt.O_SYMLINK,function(E,_){if(E){g&&g(E);return}f.futimes(_,l,m,function(C){f.close(_,function($){g&&g(C||$)})})})},f.lutimesSync=function(h,l,m){var g=f.openSync(h,tt.O_SYMLINK),E,_=!0;try{E=f.futimesSync(g,l,m),_=!1}finally{if(_)try{f.closeSync(g)}catch(C){}else f.closeSync(g)}return E}):f.futimes&&(f.lutimes=function(h,l,m,g){g&&process.nextTick(g)},f.lutimesSync=function(){})}function n(f){return f&&function(h,l,m){return f.call(e,h,l,function(g){p(g)&&(g=null),m&&m.apply(this,arguments)})}}function i(f){return f&&function(h,l){try{return f.call(e,h,l)}catch(m){if(!p(m))throw m}}}function o(f){return f&&function(h,l,m,g){return f.call(e,h,l,m,function(E){p(E)&&(E=null),g&&g.apply(this,arguments)})}}function s(f){return f&&function(h,l,m){try{return f.call(e,h,l,m)}catch(g){if(!p(g))throw g}}}function a(f){return f&&function(h,l,m){typeof l=="function"&&(m=l,l=null);function g(E,_){_&&(_.uid<0&&(_.uid+=4294967296),_.gid<0&&(_.gid+=4294967296)),m&&m.apply(this,arguments)}return l?f.call(e,h,l,g):f.call(e,h,g)}}function u(f){return f&&function(h,l){var m=l?f.call(e,h,l):f.call(e,h);return m&&(m.uid<0&&(m.uid+=4294967296),m.gid<0&&(m.gid+=4294967296)),m}}function p(f){if(!f||f.code==="ENOSYS")return!0;var h=!process.getuid||process.getuid()!==0;return!!(h&&(f.code==="EINVAL"||f.code==="EPERM"))}}});var za=A((ux,Ua)=>{var Ba=require("stream").Stream;Ua.exports=Up;function Up(e){return{ReadStream:t,WriteStream:r};function t(n,i){if(!(this instanceof t))return new t(n,i);Ba.call(this);var o=this;this.path=n,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,i=i||{};for(var s=Object.keys(i),a=0,u=s.length;a<u;a++){var p=s[a];this[p]=i[p]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){o._read()});return}e.open(this.path,this.flags,this.mode,function(f,h){if(f){o.emit("error",f),o.readable=!1;return}o.fd=h,o.emit("open",h),o._read()})}function r(n,i){if(!(this instanceof r))return new r(n,i);Ba.call(this),this.path=n,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,i=i||{};for(var o=Object.keys(i),s=0,a=o.length;s<a;s++){var u=o[s];this[u]=i[u]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=e.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}});var Ga=A((cx,Ka)=>{"use strict";Ka.exports=Kp;var zp=Object.getPrototypeOf||function(e){return e.__proto__};function Kp(e){if(e===null||typeof e!="object")return e;if(e instanceof Object)var t={__proto__:zp(e)};else var t=Object.create(null);return Object.getOwnPropertyNames(e).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}),t}});var de=A((fx,Ai)=>{var re=require("fs"),Gp=Wa(),Hp=za(),Jp=Ga(),cn=require("util"),he,ln;typeof Symbol=="function"&&typeof Symbol.for=="function"?(he=Symbol.for("graceful-fs.queue"),ln=Symbol.for("graceful-fs.previous")):(he="___graceful-fs.queue",ln="___graceful-fs.previous");function Vp(){}function Va(e,t){Object.defineProperty(e,he,{get:function(){return t}})}var pt=Vp;cn.debuglog?pt=cn.debuglog("gfs4"):/\\bgfs4\\b/i.test(process.env.NODE_DEBUG||"")&&(pt=function(){var e=cn.format.apply(cn,arguments);e="GFS4: "+e.split(/\\n/).join(`\nGFS4: `),console.error(e)});re[he]||(Ha=global[he]||[],Va(re,Ha),re.close=function(e){function t(r,n){return e.call(re,r,function(i){i||Ja(),typeof n=="function"&&n.apply(this,arguments)})}return Object.defineProperty(t,ln,{value:e}),t}(re.close),re.closeSync=function(e){function t(r){e.apply(re,arguments),Ja()}return Object.defineProperty(t,ln,{value:e}),t}(re.closeSync),/\\bgfs4\\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){pt(re[he]),require("assert").equal(re[he].length,0)}));var Ha;global[he]||Va(global,re[he]);Ai.exports=Ti(Jp(re));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!re.__patched&&(Ai.exports=Ti(re),re.__patched=!0);function Ti(e){Gp(e),e.gracefulify=Ti,e.createReadStream=X,e.createWriteStream=R;var t=e.readFile;e.readFile=r;function r(S,T,b){return typeof T=="function"&&(b=T,T=null),O(S,T,b);function O(k,W,M,q){return t(k,W,function(U){U&&(U.code==="EMFILE"||U.code==="ENFILE")?Ft([O,[k,W,M],U,q||Date.now(),Date.now()]):typeof M=="function"&&M.apply(this,arguments)})}}var n=e.writeFile;e.writeFile=i;function i(S,T,b,O){return typeof b=="function"&&(O=b,b=null),k(S,T,b,O);function k(W,M,q,U,z){return n(W,M,q,function(J){J&&(J.code==="EMFILE"||J.code==="ENFILE")?Ft([k,[W,M,q,U],J,z||Date.now(),Date.now()]):typeof U=="function"&&U.apply(this,arguments)})}}var o=e.appendFile;o&&(e.appendFile=s);function s(S,T,b,O){return typeof b=="function"&&(O=b,b=null),k(S,T,b,O);function k(W,M,q,U,z){return o(W,M,q,function(J){J&&(J.code==="EMFILE"||J.code==="ENFILE")?Ft([k,[W,M,q,U],J,z||Date.now(),Date.now()]):typeof U=="function"&&U.apply(this,arguments)})}}var a=e.copyFile;a&&(e.copyFile=u);function u(S,T,b,O){return typeof b=="function"&&(O=b,b=0),k(S,T,b,O);function k(W,M,q,U,z){return a(W,M,q,function(J){J&&(J.code==="EMFILE"||J.code==="ENFILE")?Ft([k,[W,M,q,U],J,z||Date.now(),Date.now()]):typeof U=="function"&&U.apply(this,arguments)})}}var p=e.readdir;e.readdir=h;var f=/^v[0-5]\\./;function h(S,T,b){typeof T=="function"&&(b=T,T=null);var O=f.test(process.version)?function(M,q,U,z){return p(M,k(M,q,U,z))}:function(M,q,U,z){return p(M,q,k(M,q,U,z))};return O(S,T,b);function k(W,M,q,U){return function(z,J){z&&(z.code==="EMFILE"||z.code==="ENFILE")?Ft([O,[W,M,q],z,U||Date.now(),Date.now()]):(J&&J.sort&&J.sort(),typeof q=="function"&&q.call(this,z,J))}}}if(process.version.substr(0,4)==="v0.8"){var l=Hp(e);C=l.ReadStream,L=l.WriteStream}var m=e.ReadStream;m&&(C.prototype=Object.create(m.prototype),C.prototype.open=$);var g=e.WriteStream;g&&(L.prototype=Object.create(g.prototype),L.prototype.open=G),Object.defineProperty(e,"ReadStream",{get:function(){return C},set:function(S){C=S},enumerable:!0,configurable:!0}),Object.defineProperty(e,"WriteStream",{get:function(){return L},set:function(S){L=S},enumerable:!0,configurable:!0});var E=C;Object.defineProperty(e,"FileReadStream",{get:function(){return E},set:function(S){E=S},enumerable:!0,configurable:!0});var _=L;Object.defineProperty(e,"FileWriteStream",{get:function(){return _},set:function(S){_=S},enumerable:!0,configurable:!0});function C(S,T){return this instanceof C?(m.apply(this,arguments),this):C.apply(Object.create(C.prototype),arguments)}function $(){var S=this;B(S.path,S.flags,S.mode,function(T,b){T?(S.autoClose&&S.destroy(),S.emit("error",T)):(S.fd=b,S.emit("open",b),S.read())})}function L(S,T){return this instanceof L?(g.apply(this,arguments),this):L.apply(Object.create(L.prototype),arguments)}function G(){var S=this;B(S.path,S.flags,S.mode,function(T,b){T?(S.destroy(),S.emit("error",T)):(S.fd=b,S.emit("open",b))})}function X(S,T){return new e.ReadStream(S,T)}function R(S,T){return new e.WriteStream(S,T)}var K=e.open;e.open=B;function B(S,T,b,O){return typeof b=="function"&&(O=b,b=null),k(S,T,b,O);function k(W,M,q,U,z){return K(W,M,q,function(J,Fr){J&&(J.code==="EMFILE"||J.code==="ENFILE")?Ft([k,[W,M,q,U],J,z||Date.now(),Date.now()]):typeof U=="function"&&U.apply(this,arguments)})}}return e}function Ft(e){pt("ENQUEUE",e[0].name,e[1]),re[he].push(e),Di()}var fn;function Ja(){for(var e=Date.now(),t=0;t<re[he].length;++t)re[he][t].length>2&&(re[he][t][3]=e,re[he][t][4]=e);Di()}function Di(){if(clearTimeout(fn),fn=void 0,re[he].length!==0){var e=re[he].shift(),t=e[0],r=e[1],n=e[2],i=e[3],o=e[4];if(i===void 0)pt("RETRY",t.name,r),t.apply(null,r);else if(Date.now()-i>=6e4){pt("TIMEOUT",t.name,r);var s=r.pop();typeof s=="function"&&s.call(null,n)}else{var a=Date.now()-o,u=Math.max(o-i,1),p=Math.min(u*1.2,100);a>=p?(pt("RETRY",t.name,r),t.apply(null,r.concat([i]))):re[he].push(e)}fn===void 0&&(fn=setTimeout(Di,0))}}});var Fi=A(ht=>{"use strict";var Ya=Ee().fromCallback,Ce=de(),Yp=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchown","lchmod","link","lstat","mkdir","mkdtemp","open","readFile","readdir","readlink","realpath","rename","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(e=>typeof Ce[e]=="function");Object.keys(Ce).forEach(e=>{e!=="promises"&&(ht[e]=Ce[e])});Yp.forEach(e=>{ht[e]=Ya(Ce[e])});ht.exists=function(e,t){return typeof t=="function"?Ce.exists(e,t):new Promise(r=>Ce.exists(e,r))};ht.read=function(e,t,r,n,i,o){return typeof o=="function"?Ce.read(e,t,r,n,i,o):new Promise((s,a)=>{Ce.read(e,t,r,n,i,(u,p,f)=>{if(u)return a(u);s({bytesRead:p,buffer:f})})})};ht.write=function(e,t,...r){return typeof r[r.length-1]=="function"?Ce.write(e,t,...r):new Promise((n,i)=>{Ce.write(e,t,...r,(o,s,a)=>{if(o)return i(o);n({bytesWritten:s,buffer:a})})})};typeof Ce.realpath.native=="function"&&(ht.realpath.native=Ya(Ce.realpath.native))});var Ci=A((dx,Za)=>{"use strict";var Ni=require("path");function Qa(e){return e=Ni.normalize(Ni.resolve(e)).split(Ni.sep),e.length>0?e[0]:null}var Qp=/[<>:"|?*]/;function Zp(e){let t=Qa(e);return e=e.replace(t,""),Qp.test(e)}Za.exports={getRootPath:Qa,invalidWin32Path:Zp}});var eu=A((mx,Xa)=>{"use strict";var Xp=de(),Ri=require("path"),eh=Ci().invalidWin32Path,th=parseInt("0777",8);function Pi(e,t,r,n){if(typeof t=="function"?(r=t,t={}):(!t||typeof t!="object")&&(t={mode:t}),process.platform==="win32"&&eh(e)){let s=new Error(e+" contains invalid WIN32 path characters.");return s.code="EINVAL",r(s)}let i=t.mode,o=t.fs||Xp;i===void 0&&(i=th&~process.umask()),n||(n=null),r=r||function(){},e=Ri.resolve(e),o.mkdir(e,i,s=>{if(!s)return n=n||e,r(null,n);switch(s.code){case"ENOENT":if(Ri.dirname(e)===e)return r(s);Pi(Ri.dirname(e),t,(a,u)=>{a?r(a,u):Pi(e,t,r,u)});break;default:o.stat(e,(a,u)=>{a||!u.isDirectory()?r(s,n):r(null,n)});break}})}Xa.exports=Pi});var ru=A((px,tu)=>{"use strict";var rh=de(),qi=require("path"),nh=Ci().invalidWin32Path,ih=parseInt("0777",8);function Li(e,t,r){(!t||typeof t!="object")&&(t={mode:t});let n=t.mode,i=t.fs||rh;if(process.platform==="win32"&&nh(e)){let o=new Error(e+" contains invalid WIN32 path characters.");throw o.code="EINVAL",o}n===void 0&&(n=ih&~process.umask()),r||(r=null),e=qi.resolve(e);try{i.mkdirSync(e,n),r=r||e}catch(o){if(o.code==="ENOENT"){if(qi.dirname(e)===e)throw o;r=Li(qi.dirname(e),t,r),Li(e,t,r)}else{let s;try{s=i.statSync(e)}catch(a){throw o}if(!s.isDirectory())throw o}}return r}tu.exports=Li});var Oe=A((hx,nu)=>{"use strict";var oh=Ee().fromCallback,Mi=oh(eu()),$i=ru();nu.exports={mkdirs:Mi,mkdirsSync:$i,mkdirp:Mi,mkdirpSync:$i,ensureDir:Mi,ensureDirSync:$i}});var ji=A((gx,ou)=>{"use strict";var ve=de(),iu=require("os"),dn=require("path");function sh(){let e=dn.join("millis-test-sync"+Date.now().toString()+Math.random().toString().slice(2));e=dn.join(iu.tmpdir(),e);let t=new Date(1435410243862);ve.writeFileSync(e,"https://github.com/jprichardson/node-fs-extra/pull/141");let r=ve.openSync(e,"r+");return ve.futimesSync(r,t,t),ve.closeSync(r),ve.statSync(e).mtime>1435410243e3}function ah(e){let t=dn.join("millis-test"+Date.now().toString()+Math.random().toString().slice(2));t=dn.join(iu.tmpdir(),t);let r=new Date(1435410243862);ve.writeFile(t,"https://github.com/jprichardson/node-fs-extra/pull/141",n=>{if(n)return e(n);ve.open(t,"r+",(i,o)=>{if(i)return e(i);ve.futimes(o,r,r,s=>{if(s)return e(s);ve.close(o,a=>{if(a)return e(a);ve.stat(t,(u,p)=>{if(u)return e(u);e(null,p.mtime>1435410243e3)})})})})})}function uh(e){if(typeof e=="number")return Math.floor(e/1e3)*1e3;if(e instanceof Date)return new Date(Math.floor(e.getTime()/1e3)*1e3);throw new Error("fs-extra: timeRemoveMillis() unknown parameter type")}function ch(e,t,r,n){ve.open(e,"r+",(i,o)=>{if(i)return n(i);ve.futimes(o,t,r,s=>{ve.close(o,a=>{n&&n(s||a)})})})}function fh(e,t,r){let n=ve.openSync(e,"r+");return ve.futimesSync(n,t,r),ve.closeSync(n)}ou.exports={hasMillisRes:ah,hasMillisResSync:sh,timeRemoveMillis:uh,utimesMillis:ch,utimesMillisSync:fh}});var lr=A((yx,lu)=>{"use strict";var Re=de(),Se=require("path"),su=10,au=5,lh=0,Bi=process.versions.node.split("."),uu=Number.parseInt(Bi[0],10),cu=Number.parseInt(Bi[1],10),dh=Number.parseInt(Bi[2],10);function cr(){if(uu>su)return!0;if(uu===su){if(cu>au)return!0;if(cu===au&&dh>=lh)return!0}return!1}function mh(e,t,r){cr()?Re.stat(e,{bigint:!0},(n,i)=>{if(n)return r(n);Re.stat(t,{bigint:!0},(o,s)=>o?o.code==="ENOENT"?r(null,{srcStat:i,destStat:null}):r(o):r(null,{srcStat:i,destStat:s}))}):Re.stat(e,(n,i)=>{if(n)return r(n);Re.stat(t,(o,s)=>o?o.code==="ENOENT"?r(null,{srcStat:i,destStat:null}):r(o):r(null,{srcStat:i,destStat:s}))})}function ph(e,t){let r,n;cr()?r=Re.statSync(e,{bigint:!0}):r=Re.statSync(e);try{cr()?n=Re.statSync(t,{bigint:!0}):n=Re.statSync(t)}catch(i){if(i.code==="ENOENT")return{srcStat:r,destStat:null};throw i}return{srcStat:r,destStat:n}}function hh(e,t,r,n){mh(e,t,(i,o)=>{if(i)return n(i);let{srcStat:s,destStat:a}=o;return a&&a.ino&&a.dev&&a.ino===s.ino&&a.dev===s.dev?n(new Error("Source and destination must not be the same.")):s.isDirectory()&&Ui(e,t)?n(new Error(fr(e,t,r))):n(null,{srcStat:s,destStat:a})})}function gh(e,t,r){let{srcStat:n,destStat:i}=ph(e,t);if(i&&i.ino&&i.dev&&i.ino===n.ino&&i.dev===n.dev)throw new Error("Source and destination must not be the same.");if(n.isDirectory()&&Ui(e,t))throw new Error(fr(e,t,r));return{srcStat:n,destStat:i}}function Wi(e,t,r,n,i){let o=Se.resolve(Se.dirname(e)),s=Se.resolve(Se.dirname(r));if(s===o||s===Se.parse(s).root)return i();cr()?Re.stat(s,{bigint:!0},(a,u)=>a?a.code==="ENOENT"?i():i(a):u.ino&&u.dev&&u.ino===t.ino&&u.dev===t.dev?i(new Error(fr(e,r,n))):Wi(e,t,s,n,i)):Re.stat(s,(a,u)=>a?a.code==="ENOENT"?i():i(a):u.ino&&u.dev&&u.ino===t.ino&&u.dev===t.dev?i(new Error(fr(e,r,n))):Wi(e,t,s,n,i))}function fu(e,t,r,n){let i=Se.resolve(Se.dirname(e)),o=Se.resolve(Se.dirname(r));if(o===i||o===Se.parse(o).root)return;let s;try{cr()?s=Re.statSync(o,{bigint:!0}):s=Re.statSync(o)}catch(a){if(a.code==="ENOENT")return;throw a}if(s.ino&&s.dev&&s.ino===t.ino&&s.dev===t.dev)throw new Error(fr(e,r,n));return fu(e,t,o,n)}function Ui(e,t){let r=Se.resolve(e).split(Se.sep).filter(i=>i),n=Se.resolve(t).split(Se.sep).filter(i=>i);return r.reduce((i,o,s)=>i&&n[s]===o,!0)}function fr(e,t,r){return`Cannot ${r} \'${e}\' to a subdirectory of itself, \'${t}\'.`}lu.exports={checkPaths:hh,checkPathsSync:gh,checkParentPaths:Wi,checkParentPathsSync:fu,isSrcSubdir:Ui}});var mu=A((vx,du)=>{"use strict";du.exports=function(e){if(typeof Buffer.allocUnsafe=="function")try{return Buffer.allocUnsafe(e)}catch(t){return new Buffer(e)}return new Buffer(e)}});var vu=A((wx,yu)=>{"use strict";var te=de(),dr=require("path"),yh=Oe().mkdirsSync,vh=ji().utimesMillisSync,mr=lr();function wh(e,t,r){typeof r=="function"&&(r={filter:r}),r=r||{},r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&console.warn(`fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;\n\n    see https://github.com/jprichardson/node-fs-extra/issues/269`);let{srcStat:n,destStat:i}=mr.checkPathsSync(e,t,"copy");return mr.checkParentPathsSync(e,n,t,"copy"),bh(i,e,t,r)}function bh(e,t,r,n){if(n.filter&&!n.filter(t,r))return;let i=dr.dirname(r);return te.existsSync(i)||yh(i),pu(e,t,r,n)}function pu(e,t,r,n){if(!(n.filter&&!n.filter(t,r)))return xh(e,t,r,n)}function xh(e,t,r,n){let o=(n.dereference?te.statSync:te.lstatSync)(t);if(o.isDirectory())return Ih(o,e,t,r,n);if(o.isFile()||o.isCharacterDevice()||o.isBlockDevice())return Eh(o,e,t,r,n);if(o.isSymbolicLink())return Th(e,t,r,n)}function Eh(e,t,r,n,i){return t?Sh(e,r,n,i):hu(e,r,n,i)}function Sh(e,t,r,n){if(n.overwrite)return te.unlinkSync(r),hu(e,t,r,n);if(n.errorOnExist)throw new Error(`\'${r}\' already exists`)}function hu(e,t,r,n){return typeof te.copyFileSync=="function"?(te.copyFileSync(t,r),te.chmodSync(r,e.mode),n.preserveTimestamps?vh(r,e.atime,e.mtime):void 0):_h(e,t,r,n)}function _h(e,t,r,n){let o=mu()(65536),s=te.openSync(t,"r"),a=te.openSync(r,"w",e.mode),u=0;for(;u<e.size;){let p=te.readSync(s,o,0,65536,u);te.writeSync(a,o,0,p),u+=p}n.preserveTimestamps&&te.futimesSync(a,e.atime,e.mtime),te.closeSync(s),te.closeSync(a)}function Ih(e,t,r,n,i){if(!t)return kh(e,r,n,i);if(t&&!t.isDirectory())throw new Error(`Cannot overwrite non-directory \'${n}\' with directory \'${r}\'.`);return gu(r,n,i)}function kh(e,t,r,n){return te.mkdirSync(r),gu(t,r,n),te.chmodSync(r,e.mode)}function gu(e,t,r){te.readdirSync(e).forEach(n=>Oh(n,e,t,r))}function Oh(e,t,r,n){let i=dr.join(t,e),o=dr.join(r,e),{destStat:s}=mr.checkPathsSync(i,o,"copy");return pu(s,i,o,n)}function Th(e,t,r,n){let i=te.readlinkSync(t);if(n.dereference&&(i=dr.resolve(process.cwd(),i)),e){let o;try{o=te.readlinkSync(r)}catch(s){if(s.code==="EINVAL"||s.code==="UNKNOWN")return te.symlinkSync(i,r);throw s}if(n.dereference&&(o=dr.resolve(process.cwd(),o)),mr.isSrcSubdir(i,o))throw new Error(`Cannot copy \'${i}\' to a subdirectory of itself, \'${o}\'.`);if(te.statSync(r).isDirectory()&&mr.isSrcSubdir(o,i))throw new Error(`Cannot overwrite \'${o}\' with \'${i}\'.`);return Dh(i,r)}else return te.symlinkSync(i,r)}function Dh(e,t){return te.unlinkSync(t),te.symlinkSync(e,t)}yu.exports=wh});var zi=A((bx,wu)=>{"use strict";wu.exports={copySync:vu()}});var We=A((xx,xu)=>{"use strict";var Ah=Ee().fromPromise,bu=Fi();function Fh(e){return bu.access(e).then(()=>!0).catch(()=>!1)}xu.exports={pathExists:Ah(Fh),pathExistsSync:bu.existsSync}});var Au=A((Ex,Du)=>{"use strict";var ge=de(),pr=require("path"),Nh=Oe().mkdirs,Ch=We().pathExists,Rh=ji().utimesMillis,hr=lr();function Ph(e,t,r,n){typeof r=="function"&&!n?(n=r,r={}):typeof r=="function"&&(r={filter:r}),n=n||function(){},r=r||{},r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&console.warn(`fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;\n\n    see https://github.com/jprichardson/node-fs-extra/issues/269`),hr.checkPaths(e,t,"copy",(i,o)=>{if(i)return n(i);let{srcStat:s,destStat:a}=o;hr.checkParentPaths(e,s,t,"copy",u=>u?n(u):r.filter?_u(Eu,a,e,t,r,n):Eu(a,e,t,r,n))})}function Eu(e,t,r,n,i){let o=pr.dirname(r);Ch(o,(s,a)=>{if(s)return i(s);if(a)return Ki(e,t,r,n,i);Nh(o,u=>u?i(u):Ki(e,t,r,n,i))})}function _u(e,t,r,n,i,o){Promise.resolve(i.filter(r,n)).then(s=>s?e(t,r,n,i,o):o(),s=>o(s))}function Ki(e,t,r,n,i){return n.filter?_u(Su,e,t,r,n,i):Su(e,t,r,n,i)}function Su(e,t,r,n,i){(n.dereference?ge.stat:ge.lstat)(t,(s,a)=>{if(s)return i(s);if(a.isDirectory())return $h(a,e,t,r,n,i);if(a.isFile()||a.isCharacterDevice()||a.isBlockDevice())return qh(a,e,t,r,n,i);if(a.isSymbolicLink())return Bh(e,t,r,n,i)})}function qh(e,t,r,n,i,o){return t?Lh(e,r,n,i,o):Iu(e,r,n,i,o)}function Lh(e,t,r,n,i){if(n.overwrite)ge.unlink(r,o=>o?i(o):Iu(e,t,r,n,i));else return n.errorOnExist?i(new Error(`\'${r}\' already exists`)):i()}function Iu(e,t,r,n,i){return typeof ge.copyFile=="function"?ge.copyFile(t,r,o=>o?i(o):ku(e,r,n,i)):Mh(e,t,r,n,i)}function Mh(e,t,r,n,i){let o=ge.createReadStream(t);o.on("error",s=>i(s)).once("open",()=>{let s=ge.createWriteStream(r,{mode:e.mode});s.on("error",a=>i(a)).on("open",()=>o.pipe(s)).once("close",()=>ku(e,r,n,i))})}function ku(e,t,r,n){ge.chmod(t,e.mode,i=>i?n(i):r.preserveTimestamps?Rh(t,e.atime,e.mtime,n):n())}function $h(e,t,r,n,i,o){return t?t&&!t.isDirectory()?o(new Error(`Cannot overwrite non-directory \'${n}\' with directory \'${r}\'.`)):Ou(r,n,i,o):jh(e,r,n,i,o)}function jh(e,t,r,n,i){ge.mkdir(r,o=>{if(o)return i(o);Ou(t,r,n,s=>s?i(s):ge.chmod(r,e.mode,i))})}function Ou(e,t,r,n){ge.readdir(e,(i,o)=>i?n(i):Tu(o,e,t,r,n))}function Tu(e,t,r,n,i){let o=e.pop();return o?Wh(e,o,t,r,n,i):i()}function Wh(e,t,r,n,i,o){let s=pr.join(r,t),a=pr.join(n,t);hr.checkPaths(s,a,"copy",(u,p)=>{if(u)return o(u);let{destStat:f}=p;Ki(f,s,a,i,h=>h?o(h):Tu(e,r,n,i,o))})}function Bh(e,t,r,n,i){ge.readlink(t,(o,s)=>{if(o)return i(o);if(n.dereference&&(s=pr.resolve(process.cwd(),s)),e)ge.readlink(r,(a,u)=>a?a.code==="EINVAL"||a.code==="UNKNOWN"?ge.symlink(s,r,i):i(a):(n.dereference&&(u=pr.resolve(process.cwd(),u)),hr.isSrcSubdir(s,u)?i(new Error(`Cannot copy \'${s}\' to a subdirectory of itself, \'${u}\'.`)):e.isDirectory()&&hr.isSrcSubdir(u,s)?i(new Error(`Cannot overwrite \'${u}\' with \'${s}\'.`)):Uh(s,r,i)));else return ge.symlink(s,r,i)})}function Uh(e,t,r){ge.unlink(t,n=>n?r(n):ge.symlink(e,t,r))}Du.exports=Ph});var Gi=A((Sx,Fu)=>{"use strict";var zh=Ee().fromCallback;Fu.exports={copy:zh(Au())}});var ju=A((_x,$u)=>{"use strict";var Nu=de(),qu=require("path"),V=require("assert"),gr=process.platform==="win32";function Lu(e){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(r=>{e[r]=e[r]||Nu[r],r=r+"Sync",e[r]=e[r]||Nu[r]}),e.maxBusyTries=e.maxBusyTries||3}function Hi(e,t,r){let n=0;typeof t=="function"&&(r=t,t={}),V(e,"rimraf: missing path"),V.strictEqual(typeof e,"string","rimraf: path should be a string"),V.strictEqual(typeof r,"function","rimraf: callback function required"),V(t,"rimraf: invalid options argument provided"),V.strictEqual(typeof t,"object","rimraf: options should be object"),Lu(t),Cu(e,t,function i(o){if(o){if((o.code==="EBUSY"||o.code==="ENOTEMPTY"||o.code==="EPERM")&&n<t.maxBusyTries){n++;let s=n*100;return setTimeout(()=>Cu(e,t,i),s)}o.code==="ENOENT"&&(o=null)}r(o)})}function Cu(e,t,r){V(e),V(t),V(typeof r=="function"),t.lstat(e,(n,i)=>{if(n&&n.code==="ENOENT")return r(null);if(n&&n.code==="EPERM"&&gr)return Ru(e,t,n,r);if(i&&i.isDirectory())return mn(e,t,n,r);t.unlink(e,o=>{if(o){if(o.code==="ENOENT")return r(null);if(o.code==="EPERM")return gr?Ru(e,t,o,r):mn(e,t,o,r);if(o.code==="EISDIR")return mn(e,t,o,r)}return r(o)})})}function Ru(e,t,r,n){V(e),V(t),V(typeof n=="function"),r&&V(r instanceof Error),t.chmod(e,438,i=>{i?n(i.code==="ENOENT"?null:r):t.stat(e,(o,s)=>{o?n(o.code==="ENOENT"?null:r):s.isDirectory()?mn(e,t,r,n):t.unlink(e,n)})})}function Pu(e,t,r){let n;V(e),V(t),r&&V(r instanceof Error);try{t.chmodSync(e,438)}catch(i){if(i.code==="ENOENT")return;throw r}try{n=t.statSync(e)}catch(i){if(i.code==="ENOENT")return;throw r}n.isDirectory()?pn(e,t,r):t.unlinkSync(e)}function mn(e,t,r,n){V(e),V(t),r&&V(r instanceof Error),V(typeof n=="function"),t.rmdir(e,i=>{i&&(i.code==="ENOTEMPTY"||i.code==="EEXIST"||i.code==="EPERM")?Kh(e,t,n):i&&i.code==="ENOTDIR"?n(r):n(i)})}function Kh(e,t,r){V(e),V(t),V(typeof r=="function"),t.readdir(e,(n,i)=>{if(n)return r(n);let o=i.length,s;if(o===0)return t.rmdir(e,r);i.forEach(a=>{Hi(qu.join(e,a),t,u=>{if(!s){if(u)return r(s=u);--o===0&&t.rmdir(e,r)}})})})}function Mu(e,t){let r;t=t||{},Lu(t),V(e,"rimraf: missing path"),V.strictEqual(typeof e,"string","rimraf: path should be a string"),V(t,"rimraf: missing options"),V.strictEqual(typeof t,"object","rimraf: options should be object");try{r=t.lstatSync(e)}catch(n){if(n.code==="ENOENT")return;n.code==="EPERM"&&gr&&Pu(e,t,n)}try{r&&r.isDirectory()?pn(e,t,null):t.unlinkSync(e)}catch(n){if(n.code==="ENOENT")return;if(n.code==="EPERM")return gr?Pu(e,t,n):pn(e,t,n);if(n.code!=="EISDIR")throw n;pn(e,t,n)}}function pn(e,t,r){V(e),V(t),r&&V(r instanceof Error);try{t.rmdirSync(e)}catch(n){if(n.code==="ENOTDIR")throw r;if(n.code==="ENOTEMPTY"||n.code==="EEXIST"||n.code==="EPERM")Gh(e,t);else if(n.code!=="ENOENT")throw n}}function Gh(e,t){if(V(e),V(t),t.readdirSync(e).forEach(r=>Mu(qu.join(e,r),t)),gr){let r=Date.now();do try{return t.rmdirSync(e,t)}catch(n){}while(Date.now()-r<500)}else return t.rmdirSync(e,t)}$u.exports=Hi;Hi.sync=Mu});var yr=A((Ix,Bu)=>{"use strict";var Hh=Ee().fromCallback,Wu=ju();Bu.exports={remove:Hh(Wu),removeSync:Wu.sync}});var Yu=A((kx,Vu)=>{"use strict";var Jh=Ee().fromCallback,Ku=de(),Gu=require("path"),Hu=Oe(),Ju=yr(),Uu=Jh(function(t,r){r=r||function(){},Ku.readdir(t,(n,i)=>{if(n)return Hu.mkdirs(t,r);i=i.map(s=>Gu.join(t,s)),o();function o(){let s=i.pop();if(!s)return r();Ju.remove(s,a=>{if(a)return r(a);o()})}})});function zu(e){let t;try{t=Ku.readdirSync(e)}catch(r){return Hu.mkdirsSync(e)}t.forEach(r=>{r=Gu.join(e,r),Ju.removeSync(r)})}Vu.exports={emptyDirSync:zu,emptydirSync:zu,emptyDir:Uu,emptydir:Uu}});var ec=A((Ox,Xu)=>{"use strict";var Vh=Ee().fromCallback,Qu=require("path"),vr=de(),Zu=Oe(),Yh=We().pathExists;function Qh(e,t){function r(){vr.writeFile(e,"",n=>{if(n)return t(n);t()})}vr.stat(e,(n,i)=>{if(!n&&i.isFile())return t();let o=Qu.dirname(e);Yh(o,(s,a)=>{if(s)return t(s);if(a)return r();Zu.mkdirs(o,u=>{if(u)return t(u);r()})})})}function Zh(e){let t;try{t=vr.statSync(e)}catch(n){}if(t&&t.isFile())return;let r=Qu.dirname(e);vr.existsSync(r)||Zu.mkdirsSync(r),vr.writeFileSync(e,"")}Xu.exports={createFile:Vh(Qh),createFileSync:Zh}});var oc=A((Tx,ic)=>{"use strict";var Xh=Ee().fromCallback,rc=require("path"),gt=de(),nc=Oe(),tc=We().pathExists;function eg(e,t,r){function n(i,o){gt.link(i,o,s=>{if(s)return r(s);r(null)})}tc(t,(i,o)=>{if(i)return r(i);if(o)return r(null);gt.lstat(e,s=>{if(s)return s.message=s.message.replace("lstat","ensureLink"),r(s);let a=rc.dirname(t);tc(a,(u,p)=>{if(u)return r(u);if(p)return n(e,t);nc.mkdirs(a,f=>{if(f)return r(f);n(e,t)})})})})}function tg(e,t){if(gt.existsSync(t))return;try{gt.lstatSync(e)}catch(o){throw o.message=o.message.replace("lstat","ensureLink"),o}let n=rc.dirname(t);return gt.existsSync(n)||nc.mkdirsSync(n),gt.linkSync(e,t)}ic.exports={createLink:Xh(eg),createLinkSync:tg}});var ac=A((Dx,sc)=>{"use strict";var rt=require("path"),wr=de(),rg=We().pathExists;function ng(e,t,r){if(rt.isAbsolute(e))return wr.lstat(e,n=>n?(n.message=n.message.replace("lstat","ensureSymlink"),r(n)):r(null,{toCwd:e,toDst:e}));{let n=rt.dirname(t),i=rt.join(n,e);return rg(i,(o,s)=>o?r(o):s?r(null,{toCwd:i,toDst:e}):wr.lstat(e,a=>a?(a.message=a.message.replace("lstat","ensureSymlink"),r(a)):r(null,{toCwd:e,toDst:rt.relative(n,e)})))}}function ig(e,t){let r;if(rt.isAbsolute(e)){if(r=wr.existsSync(e),!r)throw new Error("absolute srcpath does not exist");return{toCwd:e,toDst:e}}else{let n=rt.dirname(t),i=rt.join(n,e);if(r=wr.existsSync(i),r)return{toCwd:i,toDst:e};if(r=wr.existsSync(e),!r)throw new Error("relative srcpath does not exist");return{toCwd:e,toDst:rt.relative(n,e)}}}sc.exports={symlinkPaths:ng,symlinkPathsSync:ig}});var fc=A((Ax,cc)=>{"use strict";var uc=de();function og(e,t,r){if(r=typeof t=="function"?t:r,t=typeof t=="function"?!1:t,t)return r(null,t);uc.lstat(e,(n,i)=>{if(n)return r(null,"file");t=i&&i.isDirectory()?"dir":"file",r(null,t)})}function sg(e,t){let r;if(t)return t;try{r=uc.lstatSync(e)}catch(n){return"file"}return r&&r.isDirectory()?"dir":"file"}cc.exports={symlinkType:og,symlinkTypeSync:sg}});var yc=A((Fx,gc)=>{"use strict";var ag=Ee().fromCallback,dc=require("path"),Nt=de(),mc=Oe(),ug=mc.mkdirs,cg=mc.mkdirsSync,pc=ac(),fg=pc.symlinkPaths,lg=pc.symlinkPathsSync,hc=fc(),dg=hc.symlinkType,mg=hc.symlinkTypeSync,lc=We().pathExists;function pg(e,t,r,n){n=typeof r=="function"?r:n,r=typeof r=="function"?!1:r,lc(t,(i,o)=>{if(i)return n(i);if(o)return n(null);fg(e,t,(s,a)=>{if(s)return n(s);e=a.toDst,dg(a.toCwd,r,(u,p)=>{if(u)return n(u);let f=dc.dirname(t);lc(f,(h,l)=>{if(h)return n(h);if(l)return Nt.symlink(e,t,p,n);ug(f,m=>{if(m)return n(m);Nt.symlink(e,t,p,n)})})})})})}function hg(e,t,r){if(Nt.existsSync(t))return;let i=lg(e,t);e=i.toDst,r=mg(i.toCwd,r);let o=dc.dirname(t);return Nt.existsSync(o)||cg(o),Nt.symlinkSync(e,t,r)}gc.exports={createSymlink:ag(pg),createSymlinkSync:hg}});var wc=A((Nx,vc)=>{"use strict";var hn=ec(),gn=oc(),yn=yc();vc.exports={createFile:hn.createFile,createFileSync:hn.createFileSync,ensureFile:hn.createFile,ensureFileSync:hn.createFileSync,createLink:gn.createLink,createLinkSync:gn.createLinkSync,ensureLink:gn.createLink,ensureLinkSync:gn.createLinkSync,createSymlink:yn.createSymlink,createSymlinkSync:yn.createSymlinkSync,ensureSymlink:yn.createSymlink,ensureSymlinkSync:yn.createSymlinkSync}});var Sc=A((Cx,Ec)=>{var Ct;try{Ct=de()}catch(e){Ct=require("fs")}function gg(e,t,r){r==null&&(r=t,t={}),typeof t=="string"&&(t={encoding:t}),t=t||{};var n=t.fs||Ct,i=!0;"throws"in t&&(i=t.throws),n.readFile(e,t,function(o,s){if(o)return r(o);s=xc(s);var a;try{a=JSON.parse(s,t?t.reviver:null)}catch(u){return i?(u.message=e+": "+u.message,r(u)):r(null,null)}r(null,a)})}function yg(e,t){t=t||{},typeof t=="string"&&(t={encoding:t});var r=t.fs||Ct,n=!0;"throws"in t&&(n=t.throws);try{var i=r.readFileSync(e,t);return i=xc(i),JSON.parse(i,t.reviver)}catch(o){if(n)throw o.message=e+": "+o.message,o;return null}}function bc(e,t){var r,n=`\n`;typeof t=="object"&&t!==null&&(t.spaces&&(r=t.spaces),t.EOL&&(n=t.EOL));var i=JSON.stringify(e,t?t.replacer:null,r);return i.replace(/\\n/g,n)+n}function vg(e,t,r,n){n==null&&(n=r,r={}),r=r||{};var i=r.fs||Ct,o="";try{o=bc(t,r)}catch(s){n&&n(s,null);return}i.writeFile(e,o,r,n)}function wg(e,t,r){r=r||{};var n=r.fs||Ct,i=bc(t,r);return n.writeFileSync(e,i,r)}function xc(e){return Buffer.isBuffer(e)&&(e=e.toString("utf8")),e=e.replace(/^\\uFEFF/,""),e}var bg={readFile:gg,readFileSync:yg,writeFile:vg,writeFileSync:wg};Ec.exports=bg});var wn=A((Rx,Ic)=>{"use strict";var _c=Ee().fromCallback,vn=Sc();Ic.exports={readJson:_c(vn.readFile),readJsonSync:vn.readFileSync,writeJson:_c(vn.writeFile),writeJsonSync:vn.writeFileSync}});var Tc=A((Px,Oc)=>{"use strict";var xg=require("path"),Eg=Oe(),Sg=We().pathExists,kc=wn();function _g(e,t,r,n){typeof r=="function"&&(n=r,r={});let i=xg.dirname(e);Sg(i,(o,s)=>{if(o)return n(o);if(s)return kc.writeJson(e,t,r,n);Eg.mkdirs(i,a=>{if(a)return n(a);kc.writeJson(e,t,r,n)})})}Oc.exports=_g});var Ac=A((qx,Dc)=>{"use strict";var Ig=de(),kg=require("path"),Og=Oe(),Tg=wn();function Dg(e,t,r){let n=kg.dirname(e);Ig.existsSync(n)||Og.mkdirsSync(n),Tg.writeJsonSync(e,t,r)}Dc.exports=Dg});var Nc=A((Lx,Fc)=>{"use strict";var Ag=Ee().fromCallback,we=wn();we.outputJson=Ag(Tc());we.outputJsonSync=Ac();we.outputJSON=we.outputJson;we.outputJSONSync=we.outputJsonSync;we.writeJSON=we.writeJson;we.writeJSONSync=we.writeJsonSync;we.readJSON=we.readJson;we.readJSONSync=we.readJsonSync;Fc.exports=we});var Mc=A((Mx,Lc)=>{"use strict";var Pc=de(),Fg=require("path"),Ng=zi().copySync,qc=yr().removeSync,Cg=Oe().mkdirpSync,Cc=lr();function Rg(e,t,r){r=r||{};let n=r.overwrite||r.clobber||!1,{srcStat:i}=Cc.checkPathsSync(e,t,"move");return Cc.checkParentPathsSync(e,i,t,"move"),Cg(Fg.dirname(t)),Pg(e,t,n)}function Pg(e,t,r){if(r)return qc(t),Rc(e,t,r);if(Pc.existsSync(t))throw new Error("dest already exists.");return Rc(e,t,r)}function Rc(e,t,r){try{Pc.renameSync(e,t)}catch(n){if(n.code!=="EXDEV")throw n;return qg(e,t,r)}}function qg(e,t,r){return Ng(e,t,{overwrite:r,errorOnExist:!0}),qc(e)}Lc.exports=Rg});var jc=A(($x,$c)=>{"use strict";$c.exports={moveSync:Mc()}});var Kc=A((jx,zc)=>{"use strict";var Lg=de(),Mg=require("path"),$g=Gi().copy,Uc=yr().remove,jg=Oe().mkdirp,Wg=We().pathExists,Wc=lr();function Bg(e,t,r,n){typeof r=="function"&&(n=r,r={});let i=r.overwrite||r.clobber||!1;Wc.checkPaths(e,t,"move",(o,s)=>{if(o)return n(o);let{srcStat:a}=s;Wc.checkParentPaths(e,a,t,"move",u=>{if(u)return n(u);jg(Mg.dirname(t),p=>p?n(p):Ug(e,t,i,n))})})}function Ug(e,t,r,n){if(r)return Uc(t,i=>i?n(i):Bc(e,t,r,n));Wg(t,(i,o)=>i?n(i):o?n(new Error("dest already exists.")):Bc(e,t,r,n))}function Bc(e,t,r,n){Lg.rename(e,t,i=>i?i.code!=="EXDEV"?n(i):zg(e,t,r,n):n())}function zg(e,t,r,n){$g(e,t,{overwrite:r,errorOnExist:!0},o=>o?n(o):Uc(e,n))}zc.exports=Bg});var Hc=A((Wx,Gc)=>{"use strict";var Kg=Ee().fromCallback;Gc.exports={move:Kg(Kc())}});var Qc=A((Bx,Yc)=>{"use strict";var Gg=Ee().fromCallback,br=de(),Jc=require("path"),Vc=Oe(),Hg=We().pathExists;function Jg(e,t,r,n){typeof r=="function"&&(n=r,r="utf8");let i=Jc.dirname(e);Hg(i,(o,s)=>{if(o)return n(o);if(s)return br.writeFile(e,t,r,n);Vc.mkdirs(i,a=>{if(a)return n(a);br.writeFile(e,t,r,n)})})}function Vg(e,...t){let r=Jc.dirname(e);if(br.existsSync(r))return br.writeFileSync(e,...t);Vc.mkdirsSync(r),br.writeFileSync(e,...t)}Yc.exports={outputFile:Gg(Jg),outputFileSync:Vg}});var Vi=A((Ux,Ji)=>{"use strict";Ji.exports=Object.assign({},Fi(),zi(),Gi(),Yu(),wc(),Nc(),Oe(),jc(),Hc(),Qc(),We(),yr());var Zc=require("fs");Object.getOwnPropertyDescriptor(Zc,"promises")&&Object.defineProperty(Ji.exports,"promises",{get(){return Zc.promises}})});var ef=A((zx,Xc)=>{Xc.exports=()=>new Date});var rf=A((Kx,tf)=>{var Yg=pe()("streamroller:fileNameFormatter"),Qg=require("path"),Zg=".gz",Xg=".";tf.exports=({file:e,keepFileExt:t,needsIndex:r,alwaysIncludeDate:n,compress:i,fileNameSep:o})=>{let s=o||Xg,a=Qg.join(e.dir,e.name),u=m=>m+e.ext,p=(m,g,E)=>(r||!E)&&g?m+s+g:m,f=(m,g,E)=>(g>0||n)&&E?m+s+E:m,h=(m,g)=>g&&i?m+Zg:m,l=t?[f,p,u,h]:[u,f,p,h];return({date:m,index:g})=>(Yg(`_formatFileName: date=${m}, index=${g}`),l.reduce((E,_)=>_(E,g,m),a))}});var af=A((Gx,sf)=>{var yt=pe()("streamroller:fileNameParser"),nf=".gz",of=rn(),ey=".";sf.exports=({file:e,keepFileExt:t,pattern:r,fileNameSep:n})=>{let i=n||ey,o=(l,m)=>l.endsWith(nf)?(yt("it is gzipped"),m.isCompressed=!0,l.slice(0,-1*nf.length)):l,s="__NOT_MATCHING__",h=[o,t?l=>l.startsWith(e.name)&&l.endsWith(e.ext)?(yt("it starts and ends with the right things"),l.slice(e.name.length+1,-1*e.ext.length)):s:l=>l.startsWith(e.base)?(yt("it starts with the right things"),l.slice(e.base.length+1)):s,r?(l,m)=>{let g=l.split(i),E=g[g.length-1];yt("items: ",g,", indexStr: ",E);let _=l;E!==void 0&&E.match(/^\\d+$/)?(_=l.slice(0,-1*(E.length+1)),yt(`dateStr is ${_}`),r&&!_&&(_=E,E="0")):E="0";try{let C=of.parse(r,_,new Date(0,0));return of.asString(r,C)!==_?l:(m.index=parseInt(E,10),m.date=_,m.timestamp=C.getTime(),"")}catch(C){return yt(`Problem parsing ${_} as ${r}, error was: `,C),l}}:(l,m)=>l.match(/^\\d+$/)?(yt("it has an index"),m.index=parseInt(l,10),""):l];return l=>{let m={filename:l,index:0,isCompressed:!1};return h.reduce((E,_)=>_(E,m),l)?null:m}}});var cf=A((Hx,uf)=>{var _e=pe()("streamroller:moveAndMaybeCompressFile"),He=Vi(),ty=require("zlib"),ry=function(e){let t={mode:parseInt("0600",8),compress:!1},r=Object.assign({},t,e);return _e(`_parseOption: moveAndMaybeCompressFile called with option=${JSON.stringify(r)}`),r},ny=async(e,t,r)=>{if(r=ry(r),e===t){_e("moveAndMaybeCompressFile: source and target are the same, not doing anything");return}if(await He.pathExists(e))if(_e(`moveAndMaybeCompressFile: moving file from ${e} to ${t} ${r.compress?"with":"without"} compress`),r.compress)await new Promise((n,i)=>{let o=!1,s=He.createWriteStream(t,{mode:r.mode,flags:"wx"}).on("open",()=>{o=!0;let a=He.createReadStream(e).on("open",()=>{a.pipe(ty.createGzip()).pipe(s)}).on("error",u=>{_e(`moveAndMaybeCompressFile: error reading ${e}`,u),s.destroy(u)})}).on("finish",()=>{_e(`moveAndMaybeCompressFile: finished compressing ${t}, deleting ${e}`),He.unlink(e).then(n).catch(a=>{_e(`moveAndMaybeCompressFile: error deleting ${e}, truncating instead`,a),He.truncate(e).then(n).catch(u=>{_e(`moveAndMaybeCompressFile: error truncating ${e}`,u),i(u)})})}).on("error",a=>{o?(_e(`moveAndMaybeCompressFile: error writing ${t}, deleting`,a),He.unlink(t).then(()=>{i(a)}).catch(u=>{_e(`moveAndMaybeCompressFile: error deleting ${t}`,u),i(u)})):(_e(`moveAndMaybeCompressFile: error creating ${t}`,a),i(a))})}).catch(()=>{});else{_e(`moveAndMaybeCompressFile: renaming ${e} to ${t}`);try{await He.move(e,t,{overwrite:!0})}catch(n){if(_e(`moveAndMaybeCompressFile: error renaming ${e} to ${t}`,n),n.code!=="ENOENT"){_e("moveAndMaybeCompressFile: trying copy+truncate instead");try{await He.copy(e,t,{overwrite:!0}),await He.truncate(e)}catch(i){_e("moveAndMaybeCompressFile: error copy+truncate",i)}}}}};uf.exports=ny});var En=A((Jx,ff)=>{var Te=pe()("streamroller:RollingFileWriteStream"),wt=Vi(),vt=require("path"),iy=require("os"),bn=ef(),xn=rn(),{Writable:oy}=require("stream"),sy=rf(),ay=af(),uy=cf(),cy=e=>(Te(`deleteFiles: files to delete: ${e}`),Promise.all(e.map(t=>wt.unlink(t).catch(r=>{Te(`deleteFiles: error when unlinking ${t}, ignoring. Error was ${r}`)})))),Yi=class extends oy{constructor(t,r){if(Te(`constructor: creating RollingFileWriteStream. path=${t}`),typeof t!="string"||t.length===0)throw new Error(`Invalid filename: ${t}`);if(t.endsWith(vt.sep))throw new Error(`Filename is a directory: ${t}`);t.indexOf(`~${vt.sep}`)===0&&(t=t.replace("~",iy.homedir())),super(r),this.options=this._parseOption(r),this.fileObject=vt.parse(t),this.fileObject.dir===""&&(this.fileObject=vt.parse(vt.join(process.cwd(),t))),this.fileFormatter=sy({file:this.fileObject,alwaysIncludeDate:this.options.alwaysIncludePattern,needsIndex:this.options.maxSize<Number.MAX_SAFE_INTEGER,compress:this.options.compress,keepFileExt:this.options.keepFileExt,fileNameSep:this.options.fileNameSep}),this.fileNameParser=ay({file:this.fileObject,keepFileExt:this.options.keepFileExt,pattern:this.options.pattern,fileNameSep:this.options.fileNameSep}),this.state={currentSize:0},this.options.pattern&&(this.state.currentDate=xn(this.options.pattern,bn())),this.filename=this.fileFormatter({index:0,date:this.state.currentDate}),["a","a+","as","as+"].includes(this.options.flags)&&this._setExistingSizeAndDate(),Te(`constructor: create new file ${this.filename}, state=${JSON.stringify(this.state)}`),this._renewWriteStream()}_setExistingSizeAndDate(){try{let t=wt.statSync(this.filename);this.state.currentSize=t.size,this.options.pattern&&(this.state.currentDate=xn(this.options.pattern,t.mtime))}catch(t){return}}_parseOption(t){let r={maxSize:0,numToKeep:Number.MAX_SAFE_INTEGER,encoding:"utf8",mode:parseInt("0600",8),flags:"a",compress:!1,keepFileExt:!1,alwaysIncludePattern:!1},n=Object.assign({},r,t);if(!n.maxSize)delete n.maxSize;else if(n.maxSize<=0)throw new Error(`options.maxSize (${n.maxSize}) should be > 0`);if(n.numBackups||n.numBackups===0){if(n.numBackups<0)throw new Error(`options.numBackups (${n.numBackups}) should be >= 0`);if(n.numBackups>=Number.MAX_SAFE_INTEGER)throw new Error(`options.numBackups (${n.numBackups}) should be < Number.MAX_SAFE_INTEGER`);n.numToKeep=n.numBackups+1}else if(n.numToKeep<=0)throw new Error(`options.numToKeep (${n.numToKeep}) should be > 0`);return Te(`_parseOption: creating stream with option=${JSON.stringify(n)}`),n}_final(t){this.currentFileStream.end("",this.options.encoding,t)}_write(t,r,n){this._shouldRoll().then(()=>{Te(`_write: writing chunk. file=${this.currentFileStream.path} state=${JSON.stringify(this.state)} chunk=${t}`),this.currentFileStream.write(t,r,i=>{this.state.currentSize+=t.length,n(i)})})}async _shouldRoll(){(this._dateChanged()||this._tooBig())&&(Te(`_shouldRoll: rolling because dateChanged? ${this._dateChanged()} or tooBig? ${this._tooBig()}`),await this._roll())}_dateChanged(){return this.state.currentDate&&this.state.currentDate!==xn(this.options.pattern,bn())}_tooBig(){return this.state.currentSize>=this.options.maxSize}_roll(){return Te("_roll: closing the current stream"),new Promise((t,r)=>{this.currentFileStream.end("",this.options.encoding,()=>{this._moveOldFiles().then(t).catch(r)})})}async _moveOldFiles(){let t=await this._getExistingFiles(),r=this.state.currentDate?t.filter(n=>n.date===this.state.currentDate):t;for(let n=r.length;n>=0;n--){Te(`_moveOldFiles: i = ${n}`);let i=this.fileFormatter({date:this.state.currentDate,index:n}),o=this.fileFormatter({date:this.state.currentDate,index:n+1}),s={compress:this.options.compress&&n===0,mode:this.options.mode};await uy(i,o,s)}this.state.currentSize=0,this.state.currentDate=this.state.currentDate?xn(this.options.pattern,bn()):null,Te(`_moveOldFiles: finished rolling files. state=${JSON.stringify(this.state)}`),this._renewWriteStream(),await new Promise((n,i)=>{this.currentFileStream.write("","utf8",()=>{this._clean().then(n).catch(i)})})}async _getExistingFiles(){let t=await wt.readdir(this.fileObject.dir).catch(()=>[]);Te(`_getExistingFiles: files=${t}`);let r=t.map(i=>this.fileNameParser(i)).filter(i=>i),n=i=>(i.timestamp?i.timestamp:bn().getTime())-i.index;return r.sort((i,o)=>n(i)-n(o)),r}_renewWriteStream(){let t=this.fileFormatter({date:this.state.currentDate,index:0}),r=o=>{try{return wt.mkdirSync(o,{recursive:!0})}catch(s){if(s.code==="ENOENT")return r(vt.dirname(o)),r(o);if(s.code!=="EEXIST"&&s.code!=="EROFS")throw s;try{if(wt.statSync(o).isDirectory())return o;throw s}catch(a){throw s}}};r(this.fileObject.dir);let n={flags:this.options.flags,encoding:this.options.encoding,mode:this.options.mode},i=function(o,s,a){return o[a]=o[s],delete o[s],o};wt.appendFileSync(t,"",i($e({},n),"flags","flag")),this.currentFileStream=wt.createWriteStream(t,n),this.currentFileStream.on("error",o=>{this.emit("error",o)})}async _clean(){let t=await this._getExistingFiles();if(Te(`_clean: numToKeep = ${this.options.numToKeep}, existingFiles = ${t.length}`),Te("_clean: existing files are: ",t),this._tooManyFiles(t.length)){let r=t.slice(0,t.length-this.options.numToKeep).map(n=>vt.format({dir:this.fileObject.dir,base:n.filename}));await cy(r)}}_tooManyFiles(t){return this.options.numToKeep>0&&t>this.options.numToKeep}};ff.exports=Yi});var df=A((Yx,lf)=>{var fy=En(),Qi=class extends fy{constructor(t,r,n,i){i||(i={}),r&&(i.maxSize=r),!i.numBackups&&i.numBackups!==0&&(!n&&n!==0&&(n=1),i.numBackups=n),super(t,i),this.backups=i.numBackups,this.size=this.options.maxSize}get theStream(){return this.currentFileStream}};lf.exports=Qi});var pf=A((Qx,mf)=>{var ly=En(),Zi=class extends ly{constructor(t,r,n){r&&typeof r=="object"&&(n=r,r=null),n||(n={}),r||(r="yyyy-MM-dd"),n.pattern=r,!n.numBackups&&n.numBackups!==0?(!n.daysToKeep&&n.daysToKeep!==0?n.daysToKeep=1:process.emitWarning("options.daysToKeep is deprecated due to the confusion it causes when used together with file size rolling. Please use options.numBackups instead.","DeprecationWarning","streamroller-DEP0001"),n.numBackups=n.daysToKeep):n.daysToKeep=n.numBackups,super(t,n),this.mode=this.options.mode}get theStream(){return this.currentFileStream}};mf.exports=Zi});var Xi=A((Zx,hf)=>{hf.exports={RollingFileWriteStream:En(),RollingFileStream:df(),DateRollingFileStream:pf()}});var bf=A((Xx,wf)=>{var gf=pe()("log4js:file"),eo=require("path"),dy=Xi(),vf=require("os"),my=vf.EOL,Sn=!1,_n=new Set;function yf(){_n.forEach(e=>{e.sighupHandler()})}function py(e,t,r,n,i,o){if(typeof e!="string"||e.length===0)throw new Error(`Invalid filename: ${e}`);if(e.endsWith(eo.sep))throw new Error(`Filename is a directory: ${e}`);e=e.replace(new RegExp(`^~(?=${eo.sep}.+)`),vf.homedir()),e=eo.normalize(e),n=!n&&n!==0?5:n,gf("Creating file appender (",e,", ",r,", ",n,", ",i,", ",o,")");function s(p,f,h,l){let m=new dy.RollingFileStream(p,f,h,l);return m.on("error",g=>{console.error("log4js.fileAppender - Writing to file %s, error happened ",p,g)}),m.on("drain",()=>{process.emit("log4js:pause",!1)}),m}let a=s(e,r,n,i),u=function(p){if(a.writable){if(i.removeColor===!0){let f=/\\x1b[[0-9;]*m/g;p.data=p.data.map(h=>typeof h=="string"?h.replace(f,""):h)}a.write(t(p,o)+my,"utf8")||process.emit("log4js:pause",!0)}};return u.reopen=function(){a.end(()=>{a=s(e,r,n,i)})},u.sighupHandler=function(){gf("SIGHUP handler called."),u.reopen()},u.shutdown=function(p){_n.delete(u),_n.size===0&&Sn&&(process.removeListener("SIGHUP",yf),Sn=!1),a.end("","utf-8",p)},_n.add(u),Sn||(process.on("SIGHUP",yf),Sn=!0),u}function hy(e,t){let r=t.basicLayout;return e.layout&&(r=t.layout(e.layout.type,e.layout)),e.mode=e.mode||384,py(e.filename,r,e.maxLogSize,e.backups,e,e.timezoneOffset)}wf.exports.configure=hy});var Ef=A((eE,xf)=>{var gy=Xi(),yy=require("os"),vy=yy.EOL;function wy(e,t,r){let n=new gy.DateRollingFileStream(e,t,r);return n.on("error",i=>{console.error("log4js.dateFileAppender - Writing to file %s, error happened ",e,i)}),n.on("drain",()=>{process.emit("log4js:pause",!1)}),n}function by(e,t,r,n,i){n.maxSize=n.maxLogSize;let o=wy(e,t,n),s=function(a){o.writable&&(o.write(r(a,i)+vy,"utf8")||process.emit("log4js:pause",!0))};return s.shutdown=function(a){o.end("","utf-8",a)},s}function xy(e,t){let r=t.basicLayout;return e.layout&&(r=t.layout(e.layout.type,e.layout)),e.alwaysIncludePattern||(e.alwaysIncludePattern=!1),e.mode=e.mode||384,by(e.filename,e.pattern,r,e,e.timezoneOffset)}xf.exports.configure=xy});var kf=A((tE,If)=>{var Je=pe()("log4js:fileSync"),Ue=require("path"),Be=require("fs"),Sf=require("os"),Ey=Sf.EOL;function _f(e,t){let r=n=>{try{return Be.mkdirSync(n,{recursive:!0})}catch(i){if(i.code==="ENOENT")return r(Ue.dirname(n)),r(n);if(i.code!=="EEXIST"&&i.code!=="EROFS")throw i;try{if(Be.statSync(n).isDirectory())return n;throw i}catch(o){throw i}}};r(Ue.dirname(e)),Be.appendFileSync(e,"",{mode:t.mode,flag:t.flags})}var to=class{constructor(t,r,n,i){if(Je("In RollingFileStream"),r<0)throw new Error(`maxLogSize (${r}) should be > 0`);this.filename=t,this.size=r,this.backups=n,this.options=i,this.currentSize=0;function o(s){let a=0;try{a=Be.statSync(s).size}catch(u){_f(s,i)}return a}this.currentSize=o(this.filename)}shouldRoll(){return Je("should roll with current size %d, and max size %d",this.currentSize,this.size),this.currentSize>=this.size}roll(t){let r=this,n=new RegExp(`^${Ue.basename(t)}`);function i(p){return n.test(p)}function o(p){return parseInt(p.slice(`${Ue.basename(t)}.`.length),10)||0}function s(p,f){return o(p)-o(f)}function a(p){let f=o(p);if(Je(`Index of ${p} is ${f}`),r.backups===0)Be.truncateSync(t,0);else if(f<r.backups){try{Be.unlinkSync(`${t}.${f+1}`)}catch(h){}Je(`Renaming ${p} -> ${t}.${f+1}`),Be.renameSync(Ue.join(Ue.dirname(t),p),`${t}.${f+1}`)}}function u(){Je("Renaming the old files"),Be.readdirSync(Ue.dirname(t)).filter(i).sort(s).reverse().forEach(a)}Je("Rolling, rolling, rolling"),u()}write(t,r){let n=this;function i(){Je("writing the chunk to the file"),n.currentSize+=t.length,Be.appendFileSync(n.filename,t)}Je("in write"),this.shouldRoll()&&(this.currentSize=0,this.roll(this.filename)),i()}};function Sy(e,t,r,n,i,o){if(typeof e!="string"||e.length===0)throw new Error(`Invalid filename: ${e}`);if(e.endsWith(Ue.sep))throw new Error(`Filename is a directory: ${e}`);e=e.replace(new RegExp(`^~(?=${Ue.sep}.+)`),Sf.homedir()),e=Ue.normalize(e),n=!n&&n!==0?5:n,Je("Creating fileSync appender (",e,", ",r,", ",n,", ",i,", ",o,")");function s(u,p,f){let h;return p?h=new to(u,p,f,i):h=(l=>(_f(l,i),{write(m){Be.appendFileSync(l,m)}}))(u),h}let a=s(e,r,n);return u=>{a.write(t(u,o)+Ey)}}function _y(e,t){let r=t.basicLayout;e.layout&&(r=t.layout(e.layout.type,e.layout));let n={flags:e.flags||"a",encoding:e.encoding||"utf8",mode:e.mode||384};return Sy(e.filename,r,e.maxLogSize,e.backups,n,e.timezoneOffset)}If.exports.configure=_y});var Tf=A((rE,Of)=>{var ze=pe()("log4js:tcp"),Iy=require("net");function ky(e,t){let r=!1,n=[],i,o=3,s="__LOG4JS__";function a(h){ze("Writing log event to socket"),r=i.write(`${t(h)}${s}`,"utf8")}function u(){let h;for(ze("emptying buffer");h=n.shift();)a(h)}function p(){ze(`appender creating socket to ${e.host||"localhost"}:${e.port||5e3}`),s=`${e.endMsg||"__LOG4JS__"}`,i=Iy.createConnection(e.port||5e3,e.host||"localhost"),i.on("connect",()=>{ze("socket connected"),u(),r=!0}),i.on("drain",()=>{ze("drain event received, emptying buffer"),r=!0,u()}),i.on("timeout",i.end.bind(i)),i.on("error",h=>{ze("connection error",h),r=!1,u()}),i.on("close",p)}p();function f(h){r?a(h):(ze("buffering log event because it cannot write at the moment"),n.push(h))}return f.shutdown=function(h){ze("shutdown called"),n.length&&o?(ze("buffer has items, waiting 100ms to empty"),o-=1,setTimeout(()=>{f.shutdown(h)},100)):(i.removeAllListeners("close"),i.end(h))},f}function Oy(e,t){ze(`configure with config = ${e}`);let r=function(n){return n.serialise()};return e.layout&&(r=t.layout(e.layout.type,e.layout)),ky(e,r)}Of.exports.configure=Oy});var io=A((nE,no)=>{var ro=require("path"),nt=pe()("log4js:appenders"),Pe=lt(),Df=an(),Ty=mt(),Dy=xi(),Ay=Ia(),Me=new Map;Me.set("console",Oa());Me.set("stdout",Da());Me.set("stderr",Fa());Me.set("logLevelFilter",Ca());Me.set("categoryFilter",qa());Me.set("noLogFilter",$a());Me.set("file",bf());Me.set("dateFile",Ef());Me.set("fileSync",kf());Me.set("tcp",Tf());var xr=new Map,In=(e,t)=>{let r;try{let n=`${e}.cjs`;r=require.resolve(n),nt("Loading module from ",n)}catch(n){r=e,nt("Loading module from ",e)}try{return require(r)}catch(n){Pe.throwExceptionIf(t,n.code!=="MODULE_NOT_FOUND",`appender "${e}" could not be loaded (error was: ${n})`);return}},Fy=(e,t)=>Me.get(e)||In(`./${e}`,t)||In(e,t)||require.main&&require.main.filename&&In(ro.join(ro.dirname(require.main.filename),e),t)||In(ro.join(process.cwd(),e),t),kn=new Set,Af=(e,t)=>{if(xr.has(e))return xr.get(e);if(!t.appenders[e])return!1;if(kn.has(e))throw new Error(`Dependency loop detected for appender ${e}.`);kn.add(e),nt(`Creating appender ${e}`);let r=Ny(e,t);return kn.delete(e),xr.set(e,r),r},Ny=(e,t)=>{let r=t.appenders[e],n=r.type.configure?r.type:Fy(r.type,t);return Pe.throwExceptionIf(t,Pe.not(n),`appender "${e}" is not valid (type "${r.type}" could not be found)`),n.appender&&(process.emitWarning(`Appender ${r.type} exports an appender function.`,"DeprecationWarning","log4js-node-DEP0001"),nt("[log4js-node-DEP0001]",`DEPRECATION: Appender ${r.type} exports an appender function.`)),n.shutdown&&(process.emitWarning(`Appender ${r.type} exports a shutdown function.`,"DeprecationWarning","log4js-node-DEP0002"),nt("[log4js-node-DEP0002]",`DEPRECATION: Appender ${r.type} exports a shutdown function.`)),nt(`${e}: clustering.isMaster ? ${Df.isMaster()}`),nt(`${e}: appenderModule is ${require("util").inspect(n)}`),Df.onlyOnMaster(()=>(nt(`calling appenderModule.configure for ${e} / ${r.type}`),n.configure(Ay.modifyConfig(r),Dy,i=>Af(i,t),Ty)),()=>{})},Ff=e=>{if(xr.clear(),kn.clear(),!e)return;let t=[];Object.values(e.categories).forEach(r=>{t.push(...r.appenders)}),Object.keys(e.appenders).forEach(r=>{(t.includes(r)||e.appenders[r].type==="tcp-server"||e.appenders[r].type==="multiprocess")&&Af(r,e)})},Nf=()=>{Ff()};Nf();Pe.addListener(e=>{Pe.throwExceptionIf(e,Pe.not(Pe.anObject(e.appenders)),\'must have a property "appenders" of type object.\');let t=Object.keys(e.appenders);Pe.throwExceptionIf(e,Pe.not(t.length),"must define at least one appender."),t.forEach(r=>{Pe.throwExceptionIf(e,Pe.not(e.appenders[r].type),`appender "${r}" is not valid (must be an object with property "type")`)})});Pe.addListener(Ff);no.exports=xr;no.exports.init=Nf});var ao=A((iE,On)=>{var Er=pe()("log4js:categories"),ie=lt(),oo=mt(),Cf=io(),it=new Map;function Rf(e,t,r){if(t.inherit===!1)return;let n=r.lastIndexOf(".");if(n<0)return;let i=r.slice(0,n),o=e.categories[i];o||(o={inherit:!0,appenders:[]}),Rf(e,o,i),!e.categories[i]&&o.appenders&&o.appenders.length&&o.level&&(e.categories[i]=o),t.appenders=t.appenders||[],t.level=t.level||o.level,o.appenders.forEach(s=>{t.appenders.includes(s)||t.appenders.push(s)}),t.parent=o}function Cy(e){if(!e.categories)return;Object.keys(e.categories).forEach(r=>{let n=e.categories[r];Rf(e,n,r)})}ie.addPreProcessingListener(e=>Cy(e));ie.addListener(e=>{ie.throwExceptionIf(e,ie.not(ie.anObject(e.categories)),\'must have a property "categories" of type object.\');let t=Object.keys(e.categories);ie.throwExceptionIf(e,ie.not(t.length),"must define at least one category."),t.forEach(r=>{let n=e.categories[r];ie.throwExceptionIf(e,[ie.not(n.appenders),ie.not(n.level)],`category "${r}" is not valid (must be an object with properties "appenders" and "level")`),ie.throwExceptionIf(e,ie.not(Array.isArray(n.appenders)),`category "${r}" is not valid (appenders must be an array of appender names)`),ie.throwExceptionIf(e,ie.not(n.appenders.length),`category "${r}" is not valid (appenders must contain at least one appender name)`),Object.prototype.hasOwnProperty.call(n,"enableCallStack")&&ie.throwExceptionIf(e,typeof n.enableCallStack!="boolean",`category "${r}" is not valid (enableCallStack must be boolean type)`),n.appenders.forEach(i=>{ie.throwExceptionIf(e,ie.not(Cf.get(i)),`category "${r}" is not valid (appender "${i}" is not defined)`)}),ie.throwExceptionIf(e,ie.not(oo.getLevel(n.level)),`category "${r}" is not valid (level "${n.level}" not recognised; valid levels are ${oo.levels.join(", ")})`)}),ie.throwExceptionIf(e,ie.not(e.categories.default),\'must define a "default" category.\')});var so=e=>{if(it.clear(),!e)return;Object.keys(e.categories).forEach(r=>{let n=e.categories[r],i=[];n.appenders.forEach(o=>{i.push(Cf.get(o)),Er(`Creating category ${r}`),it.set(r,{appenders:i,level:oo.getLevel(n.level),enableCallStack:n.enableCallStack||!1})})})},Pf=()=>{so()};Pf();ie.addListener(so);var Rt=e=>{if(Er(`configForCategory: searching for config for ${e}`),it.has(e))return Er(`configForCategory: ${e} exists in config, returning it`),it.get(e);let t;return e.indexOf(".")>0?(Er(`configForCategory: ${e} has hierarchy, cloning from parents`),t=$e({},Rt(e.slice(0,e.lastIndexOf("."))))):(it.has("default")||so({categories:{default:{appenders:["out"],level:"OFF"}}}),Er("configForCategory: cloning default category"),t=$e({},it.get("default"))),it.set(e,t),t},Ry=e=>Rt(e).appenders,Py=e=>Rt(e).level,qy=(e,t)=>{Rt(e).level=t},Ly=e=>Rt(e).enableCallStack===!0,My=(e,t)=>{Rt(e).enableCallStack=t};On.exports=it;On.exports=Object.assign(On.exports,{appendersForCategory:Ry,getLevelForCategory:Py,setLevelForCategory:qy,getEnableCallStackForCategory:Ly,setEnableCallStackForCategory:My,init:Pf})});var jf=A((sE,$f)=>{var qf=pe()("log4js:logger"),$y=Ei(),Ke=mt(),jy=an(),Tn=ao(),Lf=lt(),Wy=/at (?:(.+)\\s+\\()?(?:(.+?):(\\d+)(?::(\\d+))?|([^)]+))\\)?/;function By(e,t=4){try{let r=e.stack.split(`\n`).slice(t),n=Wy.exec(r[0]);if(n&&n.length===6)return{functionName:n[1],fileName:n[2],lineNumber:parseInt(n[3],10),columnNumber:parseInt(n[4],10),callStack:r.join(`\n`)};console.error("log4js.logger - defaultParseCallStack error")}catch(r){console.error("log4js.logger - defaultParseCallStack error",r)}return null}var Sr=class{constructor(t){if(!t)throw new Error("No category provided.");this.category=t,this.context={},this.parseCallStack=By,qf(`Logger created (${this.category}, ${this.level})`)}get level(){return Ke.getLevel(Tn.getLevelForCategory(this.category),Ke.OFF)}set level(t){Tn.setLevelForCategory(this.category,Ke.getLevel(t,this.level))}get useCallStack(){return Tn.getEnableCallStackForCategory(this.category)}set useCallStack(t){Tn.setEnableCallStackForCategory(this.category,t===!0)}log(t,...r){let n=Ke.getLevel(t);n?this.isLevelEnabled(n)&&this._log(n,r):Lf.validIdentifier(t)&&r.length>0?(this.log(Ke.WARN,"log4js:logger.log: valid log-level not found as first parameter given:",t),this.log(Ke.INFO,`[${t}]`,...r)):this.log(Ke.INFO,t,...r)}isLevelEnabled(t){return this.level.isLessThanOrEqualTo(t)}_log(t,r){qf(`sending log data (${t}) to appenders`);let n=new $y(this.category,t,r,this.context,this.useCallStack&&this.parseCallStack(new Error));jy.send(n)}addContext(t,r){this.context[t]=r}removeContext(t){delete this.context[t]}clearContext(){this.context={}}setParseCallStackFunction(t){this.parseCallStack=t}};function Mf(e){let t=Ke.getLevel(e),n=t.toString().toLowerCase().replace(/_([a-z])/g,o=>o[1].toUpperCase()),i=n[0].toUpperCase()+n.slice(1);Sr.prototype[`is${i}Enabled`]=function(){return this.isLevelEnabled(t)},Sr.prototype[n]=function(...o){this.log(t,...o)}}Ke.levels.forEach(Mf);Lf.addListener(()=>{Ke.levels.forEach(Mf)});$f.exports=Sr});var Uf=A((aE,Bf)=>{var Pt=mt(),Uy=\':remote-addr - - ":method :url HTTP/:http-version" :status :content-length ":referrer" ":user-agent"\';function zy(e){return e.originalUrl||e.url}function Ky(e,t,r){let n=o=>{let s=o.concat();for(let a=0;a<s.length;++a)for(let u=a+1;u<s.length;++u)s[a].token==s[u].token&&s.splice(u--,1);return s},i=[];return i.push({token:":url",replacement:zy(e)}),i.push({token:":protocol",replacement:e.protocol}),i.push({token:":hostname",replacement:e.hostname}),i.push({token:":method",replacement:e.method}),i.push({token:":status",replacement:t.__statusCode||t.statusCode}),i.push({token:":response-time",replacement:t.responseTime}),i.push({token:":date",replacement:new Date().toUTCString()}),i.push({token:":referrer",replacement:e.headers.referer||e.headers.referrer||""}),i.push({token:":http-version",replacement:`${e.httpVersionMajor}.${e.httpVersionMinor}`}),i.push({token:":remote-addr",replacement:e.headers["x-forwarded-for"]||e.ip||e._remoteAddress||e.socket&&(e.socket.remoteAddress||e.socket.socket&&e.socket.socket.remoteAddress)}),i.push({token:":user-agent",replacement:e.headers["user-agent"]}),i.push({token:":content-length",replacement:t.getHeader("content-length")||t.__headers&&t.__headers["Content-Length"]||"-"}),i.push({token:/:req\\[([^\\]]+)]/g,replacement(o,s){return e.headers[s.toLowerCase()]}}),i.push({token:/:res\\[([^\\]]+)]/g,replacement(o,s){return t.getHeader(s.toLowerCase())||t.__headers&&t.__headers[s]}}),n(r.concat(i))}function Wf(e,t){for(let r=0;r<t.length;r++)e=e.replace(t[r].token,t[r].replacement);return e}function Gy(e){let t=null;if(e instanceof RegExp&&(t=e),typeof e=="string"&&(t=new RegExp(e)),Array.isArray(e)){let r=e.map(n=>n.source?n.source:n);t=new RegExp(r.join("|"))}return t}function Hy(e,t,r){let n=t;if(r){let i=r.find(o=>{let s=!1;return o.from&&o.to?s=e>=o.from&&e<=o.to:s=o.codes.indexOf(e)!==-1,s});i&&(n=Pt.getLevel(i.level,n))}return n}Bf.exports=function(t,r){typeof r=="string"||typeof r=="function"?r={format:r}:r=r||{};let n=t,i=Pt.getLevel(r.level,Pt.INFO),o=r.format||Uy;return(s,a,u)=>{if(s._logging!==void 0)return u();if(typeof r.nolog!="function"){let p=Gy(r.nolog);if(p&&p.test(s.originalUrl))return u()}if(n.isLevelEnabled(i)||r.level==="auto"){let p=new Date,{writeHead:f}=a;s._logging=!0,a.writeHead=(m,g)=>{a.writeHead=f,a.writeHead(m,g),a.__statusCode=m,a.__headers=g||{}};let h=!1,l=()=>{if(h)return;if(h=!0,typeof r.nolog=="function"&&r.nolog(s,a)===!0){s._logging=!1;return}a.responseTime=new Date-p,a.statusCode&&r.level==="auto"&&(i=Pt.INFO,a.statusCode>=300&&(i=Pt.WARN),a.statusCode>=400&&(i=Pt.ERROR)),i=Hy(a.statusCode,i,r.statusRules);let m=Ky(s,a,r.tokens||[]);if(r.context&&n.addContext("res",a),typeof o=="function"){let g=o(s,a,E=>Wf(E,m));g&&n.log(i,g)}else n.log(i,Wf(o,m));r.context&&n.removeContext("res")};a.on("end",l),a.on("finish",l),a.on("error",l),a.on("close",l)}return u()}}});var Jf=A((uE,Hf)=>{var zf=pe()("log4js:recording"),Dn=[];function Jy(){return function(e){zf(`received logEvent, number of events now ${Dn.length+1}`),zf("log event was ",e),Dn.push(e)}}function Kf(){return Dn.slice()}function Gf(){Dn.length=0}Hf.exports={configure:Jy,replay:Kf,playback:Kf,reset:Gf,erase:Gf}});var tl=A((cE,el)=>{var ot=pe()("log4js:main"),Vy=require("fs"),Yy=js()({proto:!0}),Qy=lt(),Zy=xi(),Xy=mt(),Vf=io(),Yf=ao(),ev=jf(),tv=an(),rv=Uf(),nv=Jf(),_r=!1;function iv(e){if(!_r)return;ot("Received log event ",e),Yf.appendersForCategory(e.categoryName).forEach(r=>{r(e)})}function ov(e){ot(`Loading configuration from ${e}`);try{return JSON.parse(Vy.readFileSync(e,"utf8"))}catch(t){throw new Error(`Problem reading config from file "${e}". Error was ${t.message}`,t)}}function Qf(e){_r&&Zf();let t=e;return typeof t=="string"&&(t=ov(e)),ot(`Configuration is ${t}`),Qy.configure(Yy(t)),tv.onMessage(iv),_r=!0,Xf}function sv(){return nv}function Zf(e){ot("Shutdown called. Disabling all log writing."),_r=!1;let t=Array.from(Vf.values());Vf.init(),Yf.init();let r=t.reduceRight((s,a)=>a.shutdown?s+1:s,0);if(r===0)return ot("No appenders with shutdown functions found."),e!==void 0&&e();let n=0,i;ot(`Found ${r} appenders with shutdown functions.`);function o(s){i=i||s,n+=1,ot(`Appender shutdowns complete: ${n} / ${r}`),n>=r&&(ot("All shutdown functions completed."),e&&e(i))}return t.filter(s=>s.shutdown).forEach(s=>s.shutdown(o)),null}function av(e){return _r||Qf(process.env.LOG4JS_CONFIG||{appenders:{out:{type:"stdout"}},categories:{default:{appenders:["out"],level:"OFF"}}}),new ev(e||"default")}var Xf={getLogger:av,configure:Qf,shutdown:Zf,connectLogger:rv,levels:Xy,addLayout:Zy.addLayout,recording:sv};el.exports=Xf});var ql=A(Un=>{"use strict";Object.defineProperty(Un,"__esModule",{value:!0});function Pl(e,t){if(t)return e;throw new Error("Unhandled discriminated union member: "+JSON.stringify(e))}Un.assertNever=Pl;Un.default=Pl});var Ul=Et(Uo(),1);var ni={};Yd(ni,{loggerCategory:()=>ri});var ri=e=>`obsidian-zotero:${e}`;var Pr=({key:e,groupID:t,parentItem:r},n=!1)=>{let i=[e];return!n&&r&&i.push(`a${r}`),typeof t=="number"&&i.push(`g${t}`),i.join("")},zo=(e,t,r=!0)=>(n,...i)=>{let o="";for(let s=0;s<n.length;s++)s>0&&(o+=e(i[s-1])),o+=(r?n.raw:n)[s];return t(o)},si=(e=!0,t)=>zo(r=>r,r=>new RegExp(e?"^"+r+"$":r,t),!0),ii=String.raw`[23456789ABCDEFGHIJKLMNPQRSTUVWXYZ]{8}`,oi=String.raw`\\d+`,Ko=e=>{let t={annotKey:ii,parentKey:ii,groupID:oi,page:oi};if(e)for(let r in t)t[r]=`(${t[r]})`;return zo(r=>t[r],r=>r)`${"annotKey"}a${"parentKey"}(?:g${"groupID"})?(?:p${"page"})?`},Av=si()`${ii}(?:g${oi})?`,Fv=si()`${Ko(!0)}`,Nv=si()`(?:${Ko(!1)}n?)+`;var Zd=/^[0-9]{4}\\-(0[0-9]|10|11|12)\\-(0[0-9]|[1-2][0-9]|30|31) /;var Xd=/^\\-?[0-9]{4}\\-(0[1-9]|10|11|12)\\-(0[1-9]|[1-2][0-9]|30|31) ([0-1][0-9]|[2][0-3]):([0-5][0-9]):([0-5][0-9])$/,em=/^\\-?[0-9]{4}\\-(0[1-9]|10|11|12)\\-(0[1-9]|[1-2][0-9]|30|31) ([0-1][0-9]|[2][0-3]):([0-5][0-9])$/,tm=e=>rm(e)||nm(e)?!1:Zd.test(e),Go=e=>e?tm(e)?e.substring(0,10):"0000-00-00":"";var rm=e=>Xd.test(e),nm=e=>em.test(e);var Ho=(e,t,{getLogger:r,configure:n})=>{let i=ri(e);return n({appenders:{out:{type:"console"}},categories:{default:{appenders:["out"],level:t},[i]:{appenders:["out"],level:t}}}),r(i)};var Jo=()=>(...e)=>e;function Vo(e,t){let r=Object.keys(t).map(n=>im(e,n,t[n]));return r.length===1?r[0]:function(){r.forEach(n=>n())}}function im(e,t,r){let n=e[t],i=e.hasOwnProperty(t),o=r(n);return n&&Object.setPrototypeOf(o,n),Object.setPrototypeOf(s,o),e[t]=s,a;function s(...u){return o===n&&e[t]===s&&a(),o.apply(this,u)}function a(){e[t]===s&&(i?e[t]=n:delete e[t]),o!==n&&(o=n,Object.setPrototypeOf(s,n||Function))}}var Yo=e=>{let t=r=>async(...n)=>{try{return await r(...n)}catch(i){throw console.error(i),i}};return Vo(e,Object.fromEntries(Object.keys(e).map(r=>[r,t]))),e};var Qo={};var ai;(function(e){e[e.highlight=1]="highlight",e[e.note=2]="note",e[e.image=3]="image",e[e.ink=4]="ink"})(ai=ai||(ai={}));var ui;(function(e){e[e.manual=0]="manual",e[e.auto=1]="auto"})(ui=ui||(ui={}));var ci;(function(e){e[e.importedFile=0]="importedFile",e[e.importedUrl=1]="importedUrl",e[e.linkedFile=2]="linkedFile",e[e.linkedUrl=3]="linkedUrl",e[e.embeddedImage=4]="embeddedImage"})(ci=ci||(ci={}));var qr;(function(e){e[e.fullName=0]="fullName",e[e.nameOnly=1]="nameOnly"})(qr=qr||(qr={}));var fi=["attachment","note","annotation"];var Bt=fi.map(e=>`\'${e}\'`).join(",");var Ie=(e="itemID")=>`--sql\n  ${e} IS NOT NULL\n  AND ${e} NOT IN (SELECT itemID FROM deletedItems)\n`,St=e=>typeof e=="boolean"?"":`AND ${e} = $itemId`;var ce=class{constructor(t){ee(this,"statement");this.statement=t.prepare(this.sql())}get database(){return this.statement.database}runAll(t){return this.statement.all(t)}runAllNoInput(){return this.statement.all()}},Qe=class extends ce{query(t){return this.runAll(t)}},Lr=class extends ce{query(){return this.runAllNoInput()}},Mr=class extends ce{query(t){return this.runAll(t).map(r=>this.parse(r,t))}};var li=(e,t)=>{for(let r=0;r<e.length;r++)if(e[r]!==t[r])return e[r]-t[r];return 0};var di=e=>{var t;return(t=e==null?void 0:e.split("|").map(r=>parseInt(r,10)))!=null?t:[]};var $r=`--sql\n  items.itemID,\n  items.key,\n  annots.type,\n  annots.authorName,\n  annots.text,\n  annots.comment,\n  annots.color,\n  annots.pageLabel,\n  annots.sortIndex,\n  annots.position,\n  annots.isExternal\n`,jr=`--sql\n  itemAnnotations annots\n  JOIN items USING (itemID)\n`,Wr=(e,t,r)=>Object.assign(e,{sortIndex:di(e.sortIndex),position:JSON.parse(e.position),libraryID:t,groupID:r,itemType:"annotation"});var om=`--sql\nSELECT\n  ${$r},\n  annots.parentItemID,\n  parentItems.key as parentItem\nFROM\n  ${jr}\n  JOIN items as parentItems ON annots.parentItemID = parentItems.itemID\nWHERE\n  items.key = $annotKey\n  AND items.libraryID = $libId\n  AND ${Ie("items.itemID")}\n`,Ut=class extends ce{constructor(){super(...arguments);ee(this,"trxCache",{})}sql(){return om}parse(r,n){return Wr(r,n.libId,n.groupID)}query(r){var a,u;let{annotKeys:n,libId:i}=r,o=p=>p.reduce((f,h)=>{let l=this.statement.get({annotKey:h,libId:i});return l&&(f[h]=l),f},{});return((u=(a=this.trxCache)[i])!=null?u:a[i]=this.database.transaction(o))(n)}};var sm=`--sql\nSELECT\n  ${$r}\nFROM\n  ${jr}\nWHERE\n  parentItemID = $attachmentId\n  AND items.libraryID = $libId\n  AND ${Ie()}\n`,zt=class extends Mr{constructor(){super(...arguments);ee(this,"getKeyStatement",this.database.prepare("SELECT key FROM items WHERE itemID = $attachmentId AND libraryID = $libId"))}sql(){return sm}parse(r,n,i){return Object.assign(Wr(r,n.libId,n.groupID),{parentItem:i,parentItemID:n.attachmentId})}query(r){var i;let n=(i=this.getKeyStatement.get(r))==null?void 0:i.key;if(n===void 0)throw new Error("Parent item not found");return this.runAll(r).map(o=>this.parse(o,r,n)).sort((o,s)=>li(o.sortIndex,s.sortIndex))}};var am=`--sql\nSELECT\n  atchs.itemID,\n  atchs.path,\n  items.key,\n  COUNT(atchs.itemID) as annotCount\nFROM\n  itemAttachments atchs\n  JOIN items USING (itemID)\n  LEFT JOIN itemAnnotations annots ON atchs.itemID = annots.parentItemID\nWHERE\n  atchs.parentItemID = $itemId\n  AND libraryID = $libId\n  AND ${Ie("atchs.itemID")}\nGROUP BY atchs.itemID\n`,Kt=class extends Qe{sql(){return am}};var um=`--sql\nSELECT\n  citekey\nFROM\n  citekeys\nWHERE\n  itemID = $itemID\n  AND (libraryID IS NULL OR libraryID = $libId)\n`,Gt=class extends ce{constructor(){super(...arguments);ee(this,"trxFunc",r=>r.reduce((n,[i,o])=>{let s=this.get({itemID:i,libId:o});return s&&(n[i]=s.citekey),n},{}));ee(this,"trx",this.database.transaction(this.trxFunc))}sql(){return um}get(r){return this.statement.get(r)}query(r){return this.trx(r.items)}};var cm=`--sql\nSELECT\n  itemID\nFROM\n  citekeys\nWHERE\n  citekey = $citekey\n`,Ht=class extends ce{constructor(){super(...arguments);ee(this,"trxFunc",r=>r.reduce((n,i)=>{var s;let o=this.get({citekey:i});return n[i]=(s=o==null?void 0:o.itemID)!=null?s:-1,n},{}));ee(this,"trx",this.database.transaction(this.trxFunc))}sql(){return cm}get(r){return this.statement.get(r)}query(r){return this.trx(r.citekeys)}};var Br=e=>`--sql\nSELECT\n  itemID,\n  creators.firstName,\n  creators.lastName,\n  creators.fieldMode,\n  creatorTypes.creatorType,\n  orderIndex\nFROM\n  items\n  LEFT JOIN itemCreators USING (itemID)\n  JOIN creators USING (creatorID)\n  JOIN creatorTypes USING (creatorTypeID)\nWHERE\n  libraryID = $libId\n  ${St(e||"itemID")}\n  AND ${Ie()}\nORDER BY\n  itemID,\n  orderIndex\n`;var Cw=Br(!0);function Zo(e){for(var t={},r=e.length,n=0;n<r;++n){var i=e[n];t[i[0]]=i[1]}return t}var st=Zo;var fm=Br(!1),Jt=class extends ce{constructor(){super(...arguments);ee(this,"trxFunc",r=>r.map(([n,i])=>[n,this.runAll({itemId:n,libId:i})]));ee(this,"trx",this.database.transaction(this.trxFunc))}sql(){return fm}query(r){return st(this.trx(r))}};var Ur=e=>`--sql\nSELECT\n  items.itemID,\n  fieldsCombined.fieldName,\n  itemDataValues.value\nFROM\n  items\n  JOIN itemData USING (itemID)\n  JOIN itemDataValues USING (valueID)\n  JOIN fieldsCombined USING (fieldID)\n  JOIN itemTypesCombined USING (itemTypeID)\nWHERE\n  libraryID = $libId\n  ${St(e||"items.itemID")}\n  AND itemTypesCombined.typeName NOT IN (${Bt})\n  AND ${Ie()}\n`;var Eb=Ur(!0);var lm=Ur(!1),Vt=class extends ce{constructor(){super(...arguments);ee(this,"trxFunc",r=>r.map(([n,i])=>[n,this.runAll({itemId:n,libId:i})]));ee(this,"trx",this.database.transaction(this.trxFunc))}sql(){return lm}query(r){return st(this.trx(r))}};var zr=e=>`--sql\nSELECT\n  items.itemID,\n  items.key,\n  itemTypesCombined.typeName as itemType\nFROM \n  items\n  JOIN itemTypesCombined USING (itemTypeID)\nWHERE \n  libraryID = $libId\n  ${St(e||"items.itemID")}\n  AND ${Ie()}\n  AND itemType NOT IN (${Bt})\n`,Ab=`--sql\nSELECT\n  items.itemID,\n  items.key,\n  itemTypesCombined.typeName as itemType\nFROM \n  items\n  JOIN itemTypesCombined USING (itemTypeID)\nWHERE \n  libraryID = $libId\n  AND items.key = $key\n  AND ${Ie()}\n  AND itemType NOT IN (${Bt})\n`;var dm=zr(!0),Yt=class extends Qe{sql(){return dm}};var Xo=zr(!1),Qt=class extends ce{constructor(){super(...arguments);ee(this,"trxFunc",r=>r.reduce((n,[i,o])=>{let s=this.statement.get({itemId:i,libId:o});return s&&(n[i]=s),n},{}));ee(this,"trx",this.database.transaction(this.trxFunc))}sql(){return Xo}query(r){return this.trx(r)}},Zt=class extends ce{constructor(){super(...arguments);ee(this,"trxFunc",r=>r.reduce((n,[i,o])=>{let s=this.statement.get({key:i,libId:o});return s&&(n[i]=s),n},{}));ee(this,"trx",this.database.transaction(this.trxFunc))}sql(){return Xo}query(r){return this.trx(r)}};var mm=`--sql\nSELECT\n  libraries.libraryID,\n  groups.groupID,\n  CASE\n    libraries.type\n    WHEN \'user\' THEN \'My Library\'\n    WHEN \'group\' THEN groups.name\n    ELSE NULL\n  END AS name\nFROM\n  libraries\n  LEFT JOIN groups USING (libraryID)\nWHERE\n  libraries.libraryID IS NOT NULL\nORDER BY\n  libraryID\n`,Xt=class extends Lr{sql(){return mm}};var pm=`--sql\nSELECT\n  tagID,\n  type,\n  name\nFROM\n  itemTags\n  JOIN items USING (itemID)\n  JOIN tags USING (tagID)\nWHERE\n  itemID = $itemId\n  AND tagID IS NOT NULL\n  AND libraryID = $libId\n`,er=class extends ce{constructor(){super(...arguments);ee(this,"trxFunc",r=>r.map(([n,i])=>[n,this.runAll({itemId:n,libId:i})]));ee(this,"trx",this.database.transaction(this.trxFunc))}sql(){return pm}query(r){return st(this.trx(r))}};var hm=new Set(Jo()("creators","itemID","itemType","key","libraryID"));var zl=Et(pi(),1);var ol=require("fs"),sl=Et(Rs(),1);var rl=Et(pi(),1),An=Et(tl(),1),uv="INFO",nl=Ho("db-worker",uv,An.default),uo="log4js_loglevel";rl.default.getItem(uo).then(e=>{typeof e=="string"&&e in An.levels&&(nl.level=e,console.debug(`Read from localforage: loglevel ${e}`))});var oe=nl;var Fn=class extends Error{constructor(){super("Database not set")}},il=e=>(0,ol.statSync)(e).mtimeMs,qt=class{constructor(){this.database=null;this.nativeBinding=null;this.opened=!1}get instance(){var t;return(t=this.database)==null?void 0:t.instance}isUpToDate(){return this.database?this.database.mtime===il(this.database.file):null}initDatabase(t,r){return new sl.default(`file:${t}?mode=ro&immutable=1`,{nativeBinding:r,uriPath:!0,verbose:void 0})}open(t){var i,o;let r=t.nativeBinding?this.nativeBinding=t.nativeBinding:this.nativeBinding;if(!r)throw new Error("Failed to open database conn: no native binding provided");let n;if(t.file)n=t.file;else{if(!((i=this.database)!=null&&i.file))throw new Fn;n=this.database.file}try{return(o=this.database)!=null&&o.instance&&(oe.debug("Database opened before, closing: ",this.database.instance.name),this.close()),this.database={mtime:il(n),instance:this.initDatabase(n,r),file:n,prepared:new Map},oe.debug("Database opened: ",n),this.opened=!0,!0}catch(s){if(s.code!=="ENOENT")throw console.error("Failed to open database",n),s;return this.opened=!1,!1}}close(){var t;this.opened=!1,(t=this.instance)==null||t.close(),this.database=null}prepare(t){if(!this.database)throw new Fn;let r=this.database.prepared.get(t);if(r)return r;let n=new t(this.database.instance);return this.database.prepared.set(t,n),n}};function Ir(){this.cache=null,this.matcher=null,this.stemmer=null,this.filter=null}Ir.prototype.add;Ir.prototype.append;Ir.prototype.search;Ir.prototype.update;Ir.prototype.remove;function Lt(e,t){return typeof e!="undefined"?e:t}function co(e){let t=new Array(e);for(let r=0;r<e;r++)t[r]=Y();return t}function al(e){return Object.keys(e)}function Y(){return Object.create(null)}function ul(e){return[].concat.apply([],e)}function cl(e,t){return t.length-e.length}function bt(e){return e.constructor===Array}function ae(e){return typeof e=="string"}function qe(e){return typeof e=="object"}function kr(e){return typeof e=="function"}function ll(e,t,r,n){if(e&&(t&&(e=fo(e,t)),this.matcher&&(e=fo(e,this.matcher)),this.stemmer&&e.length>1&&(e=fo(e,this.stemmer)),n&&e.length>1&&(e=cv(e)),r||r==="")){let i=e.split(r);return this.filter?fv(i,this.filter):i}return e}var dl=/[\\p{Z}\\p{S}\\p{P}\\p{C}]+/u;function ml(e){let t=Y();for(let r=0,n=e.length;r<n;r++)t[e[r]]=1;return t}function lo(e,t){let r=al(e),n=r.length,i=[],o="",s=0;for(let a=0,u,p;a<n;a++)u=r[a],p=e[u],p?(i[s++]=fl(t?"(?!\\\\b)"+u+"(\\\\b|_)":u),i[s++]=p):o+=(o?"|":"")+u;return o&&(i[s++]=fl(t?"(?!\\\\b)("+o+")(\\\\b|_)":"("+o+")"),i[s]=""),i}function fo(e,t){for(let r=0,n=t.length;r<n&&(e=e.replace(t[r],t[r+1]),!!e);r+=2);return e}function fl(e){return new RegExp(e,"g")}function cv(e){let t="",r="";for(let n=0,i=e.length,o;n<i;n++)(o=e[n])!==r&&(t+=r=o);return t}function fv(e,t){let r=e.length,n=[];for(let i=0,o=0;i<r;i++){let s=e[i];s&&!t[s]&&(n[o++]=s)}return n}var lv=!1,dv="",pl={encode:mo,rtl:lv,tokenize:dv};function mo(e){return ll.call(this,(""+e).toLowerCase(),!1,dl,!1)}var hl={},gl={};function Nn(e){Or(e,"add"),Or(e,"append"),Or(e,"search"),Or(e,"update"),Or(e,"remove")}function Or(e,t){e[t+"Async"]=function(){let r=this,n=arguments,i=n[n.length-1],o;kr(i)&&(o=i,delete n[n.length-1]);let s=new Promise(function(a){setTimeout(function(){r.async=!0;let u=r[t].apply(r,n);r.async=!1,a(u)})});return o?(s.then(o),this):s}}function Cn(e,t,r,n){let i=e.length,o=[],s,a,u=0;n&&(n=[]);for(let p=i-1;p>=0;p--){let f=e[p],h=f.length,l=Y(),m=!s;for(let g=0;g<h;g++){let E=f[g],_=E.length;if(_)for(let C=0,$,L;C<_;C++)if(L=E[C],s){if(s[L]){if(!p){if(r)r--;else if(o[u++]=L,u===t)return o}(p||n)&&(l[L]=1),m=!0}if(n&&($=(a[L]||0)+1,a[L]=$,$<i)){let G=n[$-2]||(n[$-2]=[]);G[G.length]=L}}else l[L]=1}if(n)s||(a=l);else if(!m)return[];s=l}if(n)for(let p=n.length-1,f,h;p>=0;p--){f=n[p],h=f.length;for(let l=0,m;l<h;l++)if(m=f[l],!s[m]){if(r)r--;else if(o[u++]=m,u===t)return o;s[m]=1}}return o}function yl(e,t){let r=Y(),n=Y(),i=[];for(let o=0;o<e.length;o++)r[e[o]]=1;for(let o=0,s;o<t.length;o++){s=t[o];for(let a=0,u;a<s.length;a++)u=s[a],r[u]&&(n[u]||(n[u]=1,i[i.length]=u))}return i}function Rn(e){this.limit=e!==!0&&e,this.cache=Y(),this.queue=[]}var Pn=Rn;function qn(e,t,r){qe(e)&&(e=e.query);let n=this.cache.get(e);return n||(n=this.search(e,t,r),this.cache.set(e,n)),n}Rn.prototype.set=function(e,t){if(!this.cache[e]){let r=this.queue.length;r===this.limit?delete this.cache[this.queue[r-1]]:r++;for(let n=r-1;n>0;n--)this.queue[n]=this.queue[n-1];this.queue[0]=e}this.cache[e]=t};Rn.prototype.get=function(e){let t=this.cache[e];if(this.limit&&t){let r=this.queue.indexOf(e);if(r){let n=this.queue[r-1];this.queue[r-1]=this.queue[r],this.queue[r]=n}}return t};Rn.prototype.del=function(e){for(let t=0,r,n;t<this.queue.length;t++)n=this.queue[t],r=this.cache[n],r.includes(e)&&(this.queue.splice(t--,1),delete this.cache[n])};var wl={memory:{charset:"latin:extra",resolution:3,minlength:4,fastupdate:!1},performance:{resolution:3,minlength:3,optimize:!1,context:{depth:2,resolution:1}},match:{charset:"latin:extra",tokenize:"reverse"},score:{charset:"latin:advanced",resolution:20,minlength:3,context:{depth:3,resolution:9}},default:{}};function po(e){if(ae(e))!1&&!wl[e]&&console.warn("Preset not found: "+e),e=wl[e];else{let t=e.preset;t&&(!1&&!t[t]&&console.warn("Preset not found: "+t),e=Object.assign({},t[t],e))}return e}function bl(e,t,r,n,i,o,s){setTimeout(function(){let a=e(r?r+"."+n:n,JSON.stringify(s));a&&a.then?a.then(function(){t.export(e,t,r,i,o+1)}):t.export(e,t,r,i,o+1)})}function xl(e,t,r,n,i){let o,s;switch(i||(i=0)){case 0:if(o="reg",this.fastupdate){s=Y();for(let a in this.register)s[a]=1}else s=this.register;break;case 1:o="cfg",s={doc:0,opt:this.optimize?1:0};break;case 2:o="map",s=this.map;break;case 3:o="ctx",s=this.ctx;break;default:return}return bl(e,t||this,r,o,n,i,s),!0}function El(e,t){if(t)switch(ae(t)&&(t=JSON.parse(t)),e){case"cfg":this.optimize=!!t.opt;break;case"reg":this.fastupdate=!1,this.register=t;break;case"map":this.map=t;break;case"ctx":this.ctx=t;break}}function Sl(e,t,r,n,i){if(i||(i=0),n||(n=0),n<this.field.length){let o=this.field[n],s=this.index[o];t=this,setTimeout(function(){s.export(e,t,i?o:"",n,i++)||(n++,i=1,t.export(e,t,o,n,i))})}else{let o,s;switch(i){case 1:o="tag",s=this.tagindex;break;case 2:o="store",s=this.store;break;default:return}bl(e,this,r,o,n,i,s)}}function _l(e,t){if(t)switch(ae(t)&&(t=JSON.parse(t)),e){case"tag":this.tagindex=t;break;case"reg":this.fastupdate=!1,this.register=t;for(let n=0,i;n<this.field.length;n++)i=this.index[this.field[n]],i.register=t,i.fastupdate=!1;break;case"store":this.store=t;break;default:e=e.split(".");let r=e[0];e=e[1],r&&e&&this.index[r].import(e,t)}}function be(e,t){if(!(this instanceof be))return new be(e);let r,n,i;e?(!0&&(e=po(e)),r=e.charset,n=e.lang,ae(r)&&(r.indexOf(":")===-1&&(r+=":default"),r=gl[r]),ae(n)&&(n=hl[n])):e={};let o,s,a=e.context||{};this.encode=e.encode||r&&r.encode||mo,this.register=t||Y(),this.resolution=o=e.resolution||9,this.tokenize=i=r&&r.tokenize||e.tokenize||"strict",this.depth=i==="strict"&&a.depth,this.bidirectional=Lt(a.bidirectional,!0),this.optimize=s=Lt(e.optimize,!0),this.fastupdate=Lt(e.fastupdate,!0),this.minlength=e.minlength||1,this.boost=e.boost,this.map=s?co(o):Y(),this.resolution_ctx=o=a.resolution||1,this.ctx=s?co(o):Y(),this.rtl=r&&r.rtl||e.rtl,this.matcher=(i=e.matcher||n&&n.matcher)&&lo(i,!1),this.stemmer=(i=e.stemmer||n&&n.stemmer)&&lo(i,!0),this.filter=(i=e.filter||n&&n.filter)&&ml(i),!0&&(this.cache=(i=e.cache)&&new Pn(i))}var jn=be;be.prototype.append=function(e,t){return this.add(e,t,!0)};be.prototype.add=function(e,t,r,n){if(t&&(e||e===0)){if(!n&&!r&&this.register[e])return this.update(e,t);t=this.encode(""+t);let i=t.length;if(i){let o=Y(),s=Y(),a=this.depth,u=this.resolution;for(let p=0;p<i;p++){let f=t[this.rtl?i-1-p:p],h=f.length;if(f&&h>=this.minlength&&(a||!s[f])){let l=Ln(u,i,p),m="";switch(this.tokenize){case"full":if(h>2){for(let g=0;g<h;g++)for(let E=h;E>g;E--)if(E-g>=this.minlength){let _=Ln(u,i,p,h,g);m=f.substring(g,E),this.push_index(s,m,_,e,r)}break}case"reverse":if(h>1){for(let g=h-1;g>0;g--)if(m=f[g]+m,m.length>=this.minlength){let E=Ln(u,i,p,h,g);this.push_index(s,m,E,e,r)}m=""}case"forward":if(h>1){for(let g=0;g<h;g++)m+=f[g],m.length>=this.minlength&&this.push_index(s,m,l,e,r);break}default:if(this.boost&&(l=Math.min(l/this.boost(t,f,p)|0,u-1)),this.push_index(s,f,l,e,r),a&&i>1&&p<i-1){let g=Y(),E=this.resolution_ctx,_=f,C=Math.min(a+1,i-p);g[_]=1;for(let $=1;$<C;$++)if(f=t[this.rtl?i-1-p-$:p+$],f&&f.length>=this.minlength&&!g[f]){g[f]=1;let L=Ln(E+(i/2>E?0:1),i,p,C-1,$-1),G=this.bidirectional&&f>_;this.push_index(o,G?_:f,L,e,r,G?f:_)}}}}}this.fastupdate||(this.register[e]=1)}}return this};function Ln(e,t,r,n,i){return r&&e>1?t+(n||0)<=e?r+(i||0):(e-1)/(t+(n||0))*(r+(i||0))+1|0:0}be.prototype.push_index=function(e,t,r,n,i,o){let s=o?this.ctx:this.map;if((!e[t]||o&&!e[t][o])&&(this.optimize&&(s=s[r]),o?(e=e[t]||(e[t]=Y()),e[o]=1,s=s[o]||(s[o]=Y())):e[t]=1,s=s[t]||(s[t]=[]),this.optimize||(s=s[r]||(s[r]=[])),(!i||!s.includes(n))&&(s[s.length]=n,this.fastupdate))){let a=this.register[n]||(this.register[n]=[]);a[a.length]=s}};be.prototype.search=function(e,t,r){r||(!t&&qe(e)?(r=e,e=r.query):qe(t)&&(r=t));let n=[],i,o,s,a=0;if(r&&(e=r.query||e,t=r.limit,a=r.offset||0,o=r.context,s=!0&&r.suggest),e&&(e=this.encode(""+e),i=e.length,i>1)){let h=Y(),l=[];for(let m=0,g=0,E;m<i;m++)if(E=e[m],E&&E.length>=this.minlength&&!h[E]){if(!this.optimize&&!s&&!this.map[E])return n;l[g++]=E,h[E]=1}e=l,i=e.length}if(!i)return n;t||(t=100);let u=this.depth&&i>1&&o!==!1,p=0,f;u?(f=e[0],p=1):i>1&&e.sort(cl);for(let h,l;p<i;p++){if(l=e[p],u?(h=this.add_result(n,s,t,a,i===2,l,f),(!s||h!==!1||!n.length)&&(f=l)):h=this.add_result(n,s,t,a,i===1,l),h)return h;if(s&&p===i-1){let m=n.length;if(m){if(m===1)return kl(n[0],t,a)}else{if(u){u=0,p=-1;continue}return n}}}return Cn(n,t,a,s)};be.prototype.add_result=function(e,t,r,n,i,o,s){let a=[],u=s?this.ctx:this.map;if(this.optimize||(u=Il(u,o,s,this.bidirectional)),u){let p=0,f=Math.min(u.length,s?this.resolution_ctx:this.resolution);for(let h=0,l=0,m,g;h<f&&(m=u[h],!(m&&(this.optimize&&(m=Il(m,o,s,this.bidirectional)),n&&m&&i&&(g=m.length,g<=n?(n-=g,m=null):(m=m.slice(n),n=0)),m&&(a[p++]=m,i&&(l+=m.length,l>=r)))));h++);if(p){if(i)return kl(a,r,0);e[e.length]=a;return}}return!t&&a};function kl(e,t,r){return e.length===1?e=e[0]:e=ul(e),r||e.length>t?e.slice(r,r+t):e}function Il(e,t,r,n){if(r){let i=n&&t>r;e=e[i?t:r],e=e&&e[i?r:t]}else e=e[t];return e}be.prototype.contain=function(e){return!!this.register[e]};be.prototype.update=function(e,t){return this.remove(e).add(e,t)};be.prototype.remove=function(e,t){let r=this.register[e];if(r){if(this.fastupdate)for(let n=0,i;n<r.length;n++)i=r[n],i.splice(i.indexOf(e),1);else Mn(this.map,e,this.resolution,this.optimize),this.depth&&Mn(this.ctx,e,this.resolution_ctx,this.optimize);t||delete this.register[e],!0&&this.cache&&this.cache.del(e)}return this};function Mn(e,t,r,n,i){let o=0;if(bt(e))if(i){let s=e.indexOf(t);s!==-1?e.length>1&&(e.splice(s,1),o++):o++}else{i=Math.min(e.length,r);for(let s=0,a;s<i;s++)a=e[s],a&&(o=Mn(a,t,r,n,i),!n&&!o&&delete e[s])}else for(let s in e)o=Mn(e[s],t,r,n,i),o||delete e[s];return o}!0&&(be.prototype.searchCache=qn);!0&&(be.prototype.export=xl,be.prototype.import=El);!0&&Nn(be.prototype);function Ol(e){e=e.data;let t=self._index,r=e.args,n=e.task;switch(n){case"init":let i=e.options||{},o=e.factory,s=i.encode;i.cache=!1,s&&s.indexOf("function")===0&&(i.encode=Function("return "+s)()),o?(Function("return "+o)()(self),self._index=new self.FlexSearch.Index(i),delete self.FlexSearch):self._index=new jn(i);break;default:let a=e.id,u=t[n].apply(t,r);postMessage(n==="search"?{id:a,msg:u}:{id:a})}}var Tl=0;function Tr(e){if(!(this instanceof Tr))return new Tr(e);let t;e?kr(t=e.encode)&&(e.encode=t.toString()):e={};let r=(self||window)._factory;r&&(r=r.toString());let n=typeof window=="undefined"&&self.exports,i=this;this.worker=hv(r,n,e.worker),this.resolver=Y(),this.worker&&(n?this.worker.on("message",function(o){i.resolver[o.id](o.msg),delete i.resolver[o.id]}):this.worker.onmessage=function(o){o=o.data,i.resolver[o.id](o.msg),delete i.resolver[o.id]},this.worker.postMessage({task:"init",factory:r,options:e}))}var Dl=Tr;Dr("add");Dr("append");Dr("search");Dr("update");Dr("remove");function Dr(e){Tr.prototype[e]=Tr.prototype[e+"Async"]=function(){let t=this,r=[].slice.call(arguments),n=r[r.length-1],i;kr(n)&&(i=n,r.splice(r.length-1,1));let o=new Promise(function(s){setTimeout(function(){t.resolver[++Tl]=s,t.worker.postMessage({task:e,id:Tl,args:r})})});return i?(o.then(i),this):o}}function hv(factory,is_node_js,worker_path){let worker;try{worker=is_node_js?eval(\'new (require("worker_threads")["Worker"])("../dist/node/node.js")\'):factory?new Worker(URL.createObjectURL(new Blob(["onmessage="+Ol.toString()],{type:"text/javascript"}))):new Worker(ae(worker_path)?worker_path:"worker/worker.js",{type:"module"})}catch(e){}return worker}function xe(e){if(!(this instanceof xe))return new xe(e);let t=e.document||e.doc||e,r;this.tree=[],this.field=[],this.marker=[],this.register=Y(),this.key=(r=t.key||t.id)&&Wn(r,this.marker)||"id",this.fastupdate=Lt(e.fastupdate,!0),!0&&(this.storetree=(r=t.store)&&r!==!0&&[],this.store=r&&Y()),!0&&(this.tag=(r=t.tag)&&Wn(r,this.marker),this.tagindex=r&&Y()),!0&&(this.cache=(r=e.cache)&&new Pn(r),e.cache=!1),!0&&(this.worker=e.worker),!0&&(this.async=!1),this.index=gv.call(this,e,t)}var Fl=xe;function gv(e,t){let r=Y(),n=t.index||t.field||t;ae(n)&&(n=[n]);for(let i=0,o,s;i<n.length;i++)o=n[i],ae(o)||(s=o,o=o.field),s=qe(s)?Object.assign({},e,s):e,!0&&this.worker&&(r[o]=new Dl(s),r[o].worker||(this.worker=!1)),this.worker||(r[o]=new jn(s,this.register)),this.tree[i]=Wn(o,this.marker),this.field[i]=o;if(!0&&this.storetree){let i=t.store;ae(i)&&(i=[i]);for(let o=0;o<i.length;o++)this.storetree[o]=Wn(i[o],this.marker)}return r}function Wn(e,t){let r=e.split(":"),n=0;for(let i=0;i<r.length;i++)e=r[i],e.indexOf("[]")>=0&&(e=e.substring(0,e.length-2),e&&(t[n]=!0)),e&&(r[n++]=e);return n<r.length&&(r.length=n),n>1?r:r[0]}function go(e,t){if(ae(t))e=e[t];else for(let r=0;e&&r<t.length;r++)e=e[t[r]];return e}function yo(e,t,r,n,i){if(e=e[i],n===r.length-1)t[i]=e;else if(e)if(bt(e)){t=t[i]=new Array(e.length);for(let o=0;o<e.length;o++)yo(e,t,r,n,o)}else t=t[i]||(t[i]=Y()),i=r[++n],yo(e,t,r,n,i)}function vo(e,t,r,n,i,o,s,a){if(e=e[s],e)if(n===t.length-1){if(bt(e)){if(r[n]){for(let u=0;u<e.length;u++)i.add(o,e[u],!0,!0);return}e=e.join(" ")}i.add(o,e,a,!0)}else if(bt(e))for(let u=0;u<e.length;u++)vo(e,t,r,n,i,o,u,a);else s=t[++n],vo(e,t,r,n,i,o,s,a)}xe.prototype.add=function(e,t,r){if(qe(e)&&(t=e,e=go(t,this.key)),t&&(e||e===0)){if(!r&&this.register[e])return this.update(e,t);for(let n=0,i,o;n<this.field.length;n++)o=this.field[n],i=this.tree[n],ae(i)&&(i=[i]),vo(t,i,this.marker,0,this.index[o],e,i[0],r);if(!0&&this.tag){let n=go(t,this.tag),i=Y();ae(n)&&(n=[n]);for(let o=0,s,a;o<n.length;o++)if(s=n[o],!i[s]&&(i[s]=1,a=this.tagindex[s]||(this.tagindex[s]=[]),(!r||!a.includes(e))&&(a[a.length]=e,this.fastupdate))){let u=this.register[e]||(this.register[e]=[]);u[u.length]=a}}if(!0&&this.store&&(!r||!this.store[e])){let n;if(this.storetree){n=Y();for(let i=0,o;i<this.storetree.length;i++)o=this.storetree[i],ae(o)?n[o]=t[o]:yo(t,n,o,0,o[0])}this.store[e]=n||t}}return this};xe.prototype.append=function(e,t){return this.add(e,t,!0)};xe.prototype.update=function(e,t){return this.remove(e).add(e,t)};xe.prototype.remove=function(e){if(qe(e)&&(e=go(e,this.key)),this.register[e]){for(let t=0;t<this.field.length&&(this.index[this.field[t]].remove(e,!this.worker),!this.fastupdate);t++);if(!0&&this.tag&&!this.fastupdate)for(let t in this.tagindex){let r=this.tagindex[t],n=r.indexOf(e);n!==-1&&(r.length>1?r.splice(n,1):delete this.tagindex[t])}!0&&this.store&&delete this.store[e],delete this.register[e]}return this};xe.prototype.search=function(e,t,r,n){r||(!t&&qe(e)?(r=e,e=""):qe(t)&&(r=t,t=0));let i=[],o=[],s,a,u,p,f,h,l=0;if(r)if(bt(r))u=r,r=null;else{if(e=r.query||e,s=r.pluck,u=s||r.index||r.field,p=!0&&r.tag,a=!0&&this.store&&r.enrich,f=r.bool==="and",t=r.limit||t||100,h=r.offset||0,p&&(ae(p)&&(p=[p]),!e)){for(let g=0,E;g<p.length;g++)E=yv.call(this,p[g],t,h,a),E&&(i[i.length]=E,l++);return l?i:[]}ae(u)&&(u=[u])}u||(u=this.field),f=f&&(u.length>1||p&&p.length>1);let m=!n&&(this.worker||this.async)&&[];for(let g=0,E,_,C;g<u.length;g++){let $;if(_=u[g],ae(_)||($=_,_=$.field,e=$.query||e,t=$.limit||t),m){m[g]=this.index[_].searchAsync(e,t,$||r);continue}else n?E=n[g]:E=this.index[_].search(e,t,$||r);if(C=E&&E.length,p&&C){let L=[],G=0;f&&(L[0]=[E]);for(let X=0,R,K;X<p.length;X++)R=p[X],K=this.tagindex[R],C=K&&K.length,C&&(G++,L[L.length]=f?[K]:K);G&&(f?E=Cn(L,t||100,h||0):E=yl(E,L),C=E.length)}if(C)o[l]=_,i[l++]=E;else if(f)return[]}if(m){let g=this;return new Promise(function(E){Promise.all(m).then(function(_){E(g.search(e,t,r,_))})})}if(!l)return[];if(s&&(!a||!this.store))return i[0];for(let g=0,E;g<o.length;g++){if(E=i[g],E.length&&a&&(E=Nl.call(this,E)),s)return E;i[g]={field:o[g],result:E}}return i};function yv(e,t,r,n){let i=this.tagindex[e],o=i&&i.length-r;if(o&&o>0)return(o>t||r)&&(i=i.slice(r,r+t)),n&&(i=Nl.call(this,i)),{tag:e,result:i}}function Nl(e){let t=new Array(e.length);for(let r=0,n;r<e.length;r++)n=e[r],t[r]={id:n,doc:this.store[n]};return t}xe.prototype.contain=function(e){return!!this.register[e]};!0&&(xe.prototype.get=function(e){return this.store[e]},xe.prototype.set=function(e,t){return this.store[e]=t,this});!0&&(xe.prototype.searchCache=qn);!0&&(xe.prototype.export=Sl,xe.prototype.import=_l);!0&&Nn(xe.prototype);var vv=["a","about","above","after","again","against","all","also","am","an","and","any","are","aren\'t","as","at","be","because","been","before","being","below","both","but","by","can","cannot","can\'t","come","could","couldn\'t","did","didn\'t","do","does","doesn\'t","doing","dont","down","during","each","even","few","first","for","from","further","get","go","had","hadn\'t","has","hasn\'t","have","haven\'t","having","he","hed","her","here","here\'s","hers","herself","hes","him","himself","his","how","how\'s","i","id","if","ill","im","in","into","is","isn\'t","it","it\'s","itself","i\'ve","just","know","let\'s","like","make","me","more","most","mustn\'t","my","myself","new","no","nor","not","now","of","off","on","once","only","or","other","ought","our","our\'s","ourselves","out","over","own","same","say","see","shan\'t","she","she\'d","shell","shes","should","shouldn\'t","so","some","such","than","that","that\'s","the","their","theirs","them","themselves","then","there","there\'s","these","they","they\'d","they\'ll","they\'re","they\'ve","this","those","through","time","to","too","until","up","us","very","want","was","wasn\'t","way","we","wed","well","were","weren\'t","we\'ve","what","what\'s","when","when\'s","where","where\'s","which","while","who","whom","who\'s","why","why\'s","will","with","won\'t","would","wouldn\'t","you","you\'d","you\'ll","your","you\'re","your\'s","yourself","yourselves","you\'ve"],wv={ational:"ate",iveness:"ive",fulness:"ful",ousness:"ous",ization:"ize",tional:"tion",biliti:"ble",icate:"ic",ative:"",alize:"al",iciti:"ic",entli:"ent",ousli:"ous",alism:"al",ation:"ate",aliti:"al",iviti:"ive",ement:"",enci:"ence",anci:"ance",izer:"ize",alli:"al",ator:"ate",logi:"log",ical:"ic",ance:"",ence:"",ness:"",able:"",ible:"",ment:"",eli:"e",bli:"ble",ful:"",ant:"",ent:"",ism:"",ate:"",iti:"",ous:"",ive:"",ize:"",al:"",ou:"",er:"",ic:""},bv={},Cl={filter:vv,stemmer:wv,matcher:bv};function Rl(){return new Fl({worker:!0,charset:pl,language:Cl,document:{id:"itemID",index:["title","creators[]:firstName","creators[]:lastName","date"]},tokenize:"full",suggest:!0})}var ne={main:new qt,bbt:new qt},me={libraries:null,search:Rl(),items:new Map},wo=()=>{if(!me.libraries)throw new Error("Library info not loaded");return me.libraries},bo=e=>{let t=wo();if(!t[e])throw new Error("Library not found");return t[e].groupID};var Ml=Et(ql(),1);var xv=(e,t)=>{var n,i;let r;if(typeof e=="number"){let o=(n=me.items.get(t))==null?void 0:n.byId;if(!o)throw new Error("get item by id before cache ready");r=o.get(e)}else if(typeof e=="string"){let o=(i=me.items.get(t))==null?void 0:i.byKey;if(!o)throw new Error("get item by key before cache ready");r=o.get(e)}else(0,Ml.assertNever)(e);return r!=null?r:null},Ev=e=>{if(oe.debug("Reading Better BibTex database"),!ne.bbt.opened)return oe.info("Better BibTex database not enabled, skipping..."),[];let t=ne.bbt.prepare(Gt).query({items:e});return oe.info("Finished reading Better BibTex"),t};function Sv(e){let t=e;return Array.isArray(t.accessDate)&&t.accessDate.length===1&&typeof t.accessDate[0]=="string"}function _v(e){let t=e.replace(" ","T")+"Z";try{return new Date(t)}catch(r){return null}}function zn(e,t){if(!me.libraries)throw new Error("Library info not loaded");let r=me.libraries,n=Ev(t),i=ne.main.prepare(Vt).query(t),o=ne.main.prepare(Jt).query(t);return t.reduce((s,[a,u])=>{if(!a)return s;let p=n[a];p||oe.warn(`Citekey: No item found for itemID ${a}`,p);let f=i[a].reduce((l,m)=>{var E,_;let{value:g}=m;return m.fieldName==="date"&&(g=Go(g).split("-")[0]),((_=l[E=m.fieldName])!=null?_:l[E]=[]).push(g),l},{}),h=ti($e(ti($e({},e[a]),{libraryID:u,groupID:r[u].groupID,itemID:a,creators:o[a],citekey:n[a]}),f),{dateAccessed:Sv(f)?_v(f.accessDate[0]):null});return s[a]=h,s},{})}var Iv=e=>typeof e[0][0]=="string",$l=(e,t)=>{if(e.length===0)return[];if(!t)return e.map(([o,s])=>xv(o,s));let r,n,i;if(Iv(e)){let o=ne.main.prepare(Zt).query(e);return n=e.map(([s,a])=>[o[s].itemID,a]),r=n.reduce((s,[a],u)=>{let[p]=e[u];return s[a]=o[p],s},{}),i=zn(r,n),Ll(i),e.map(([s])=>i[o[s].itemID])}else return n=e,r=ne.main.prepare(Qt).query(n),i=zn(r,n),Ll(i),e.map(([o])=>i[o])};function Ll(e){for(let t of Object.values(e)){let r=me.items.get(t.libraryID);if(!r)throw new Error("Cache not initialized");r.byId.set(t.itemID,t),r.byKey.set(Pr(t,!0),t)}}var jl=()=>me.libraries=ne.main.prepare(Xt).query().reduce((e,t)=>(e[t.libraryID]=t,e),{});var Wl=e=>{let{nativeBinding:t,mainDbPath:r,bbtDbPath:n}=e!=null?e:{};oe.debug("open database",e);let i=ne.main.open({nativeBinding:t,file:r});i||oe.error(`Failed to open main database, no database found at ${r}`);let o=ne.bbt.open({file:n,nativeBinding:t});return o||oe.debug(`Unable to open bbt database, no database found at ${n}`),jl(),[i,o]};var kv=async e=>{oe.debug("Reading main Zotero database for index");let r=ne.main.prepare(Yt).query({libId:e}).reduce((p,f)=>(p[f.itemID]=f,p),{}),n=Object.keys(r).map(p=>[Number(p),e]),i=zn(r,n);oe.info("Finished reading main Zotero database for index"),oe.trace("Start fuse indexing");let o=Object.values(i),s=o.map(p=>p.itemID),a=new Set(s),u=me.items.get(e);if(me.items.set(e,{byId:new Map(o.map(p=>[p.itemID,p])),byKey:new Map(o.map(p=>[Pr(p,!0),p]))}),!u)await Promise.all([...o.map(p=>me.search.addAsync(p.itemID,p))]);else{let p=[...u.byId.keys()].filter(f=>!a.has(f));u.byId.clear(),u.byKey.clear(),await Promise.all([...o.map(f=>me.search.addAsync(f.itemID,f)),...p.map(f=>me.search.removeAsync(f))])}oe.info("Library citation index initialized")},Bl=kv;function Ar(e,t){return(...r)=>{oe.debug(`Reading Zotero database for ${typeof t=="string"?t:t(null,...r)}`);let n=e.apply(null,r);return Promise.resolve(n).then(i=>oe.debug(`Finished reading Zotero database for ${typeof t=="string"?t:t(i,...r)}`)),n}}var Ov={getLibs:()=>Object.values(wo()),initIndex:Bl,openDb:Wl,search:async(e,t)=>{if(!me.items.has(e))throw new Error("Query before index ready");return await me.search.searchAsync(t)},getTags:Ar(e=>ne.main.prepare(er).query(e),"tags"),getItemIDsFromCitekey(e){return ne.bbt.prepare(Ht).query({citekeys:e})},getItemsFromCache:(e,t)=>{let r=me.items.get(t);if(!r)throw new Error("get items before cache ready");let n=[...r.byId.values()].sort((i,o)=>o.dateAccessed&&i.dateAccessed?o.dateAccessed.getTime()-i.dateAccessed.getTime():0);return e<=0?n:n.slice(0,e)},getAttachments:Ar((e,t)=>ne.main.prepare(Kt).query({itemId:e,libId:t}),(e,t)=>`attachments of item ${t}`+(e?`, count: ${e.length}`:"")),getAnnotations:Ar((e,t)=>ne.main.prepare(zt).query({attachmentId:e,libId:t,groupID:bo(t)}),(e,t)=>`annotations of attachment ${t}`+(e?`, count: ${e.length}`:"")),getAnnotFromKey:Ar((e,t)=>ne.main.prepare(Ut).query({annotKeys:e,libId:t,groupID:bo(t)}),(e,t)=>`annotations with keys: ${t.join(",")}`+(e?`, count: ${e.length}`:"")),getItems:$l,isUpToDate:()=>ne.main.isUpToDate(),checkDbStatus:e=>ne[e].opened,raw(e,t,r){let{instance:n}=ne.main;if(!n)throw new Error("failed to query raw: no main database opened");return n.prepare(t)[e](...r)},setLoglevel:e=>{oe.level=e,zl.default.setItem(uo,e)}};(0,Ul.worker)(Yo(Ov));\n/*! Bundled license information:\n\n@aidenlx/workerpool/dist/workerpool.js:\n  (**\n   * workerpool.js\n   * https://github.com/josdejong/workerpool\n   *\n   * Offload tasks to a pool of workers on node.js and in the browser.\n   *\n   * @version 6.2.1-mod.13\n   * @date    2022-10-04\n   *\n   * @license\n   * Copyright (C) 2014-2022 Jos de Jong <wjosdejong@gmail.com>\n   *\n   * Licensed under the Apache License, Version 2.0 (the "License"); you may not\n   * use this file except in compliance with the License. You may obtain a copy\n   * of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n   * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n   * License for the specific language governing permissions and limitations under\n   * the License.\n   *)\n\nlocalforage/dist/localforage.js:\n  (*!\n      localForage -- Offline Storage, Improved\n      Version 1.10.0\n      https://localforage.github.io/localForage\n      (c) 2013-2017 Mozilla, Apache License 2.0\n  *)\n\nflatted/cjs/index.js:\n  (*! (c) 2020 Andrea Giammarchi *)\n*/\n';var f1=se(Qe(),1),p1=require("obsidian");function hc(e,t={}){return ja({...t,register:r=>e.metadataCache.on("initialized",r),unregister:r=>e.metadataCache.offref(r),escape:()=>e.metadataCache.initialized,timeout:t.timeout??null})}function Ud(e,t={}){return ja({...t,register:r=>e.vault.on("zotero:db-refresh",r),unregister:r=>e.vault.offref(r)})}function Wo(e,t={}){return ja({...t,unregister:r=>e.app.vault.offref(r),escape:()=>e.dbWorker.status===2,register:r=>{let n=e.dbWorker.status;if(n===0)return e.app.vault.on("zotero:db-ready",r);if(n===1)return e.app.vault.on("zotero:db-refresh",r);if(n===2)throw new Error("should not be called when db is ready");(0,f1.assertNever)(n)}})}var d1=e=>new Promise(t=>{e.workspace.onLayoutReady(t)}),ja=({register:e,unregister:t,escape:r,timeout:n=1e4,waitAfterEvent:o,debounce:i=1e3})=>{let a=null;return[new Promise((u,l)=>{if(r?.()){u();return}a=function(){t(p),l(new Ba)};function c(){t(p),u()}async function f(){o!==void 0&&await sleep(o),c()}let p=e(i?(0,p1.debounce)(f,i,!0):f);n!==null&&sleep(n).then(()=>{t(p),r?.()?c():l(new qa(n))})}),a]},qa=class extends Error{constructor(r){super(`Timeout after ${r}ms`);this.timeout=r}},Ba=class extends Error{constructor(){super("Manually cancelled")}};var gc=e=>{let t={},r=n=>t[n]??=(...o)=>e.exec(n,o);return e.exec("methods").then(n=>n.forEach(r)),new Proxy(t,{get(n,o){if(typeof o=="string")return r(o)}})};var a2=require("os"),Ua=require("path"),s2=se(Qe(),1);var y1=require("path/posix");var Vd=require("obsidian");var h1={"103":{darwin:["arm64","x64"],linux:["x64"],win32:["x64","ia32","arm64"]},"109":{darwin:["arm64","x64"],linux:["x64"],win32:["x64","ia32","arm64"]},"110":{darwin:["arm64","x64"],linux:["x64"],win32:["x64","ia32","arm64"]},"114":{darwin:["arm64","x64"],linux:["x64"],win32:["x64","ia32","arm64"]}};var g1=Vd.Platform.isDesktopApp?require("@electron/remote").app.getPath("userData"):null,{arch:aX,platform:sX,versions:{modules:oq,electron:uX}}=process,Hd=h1,b1=({modules:e})=>{if(e in Hd)return 0;let r=Object.keys(Hd).map(o=>parseInt(o,10)).sort((o,i)=>o-i);return parseInt(e,10)>r[r.length-1]?1:-1},v1=({platform:e,arch:t})=>!!Hd[oq][e]?.includes(t),w1=()=>Vd.Platform.isDesktopApp?{arch:process.arch,platform:process.platform,modules:process.versions.modules,electron:process.versions.electron}:null,Gd=e=>e.versions?.["better-sqlite3"],Uo=e=>{if(!g1)return null;let t=Gd(e);return t?(0,y1.join)(g1,qb(t)):null};function x1(e){return e===void 0?{BS_PRIVATE_NESTED_SOME_NONE:0}:e!==null&&e.BS_PRIVATE_NESTED_SOME_NONE!==void 0?{BS_PRIVATE_NESTED_SOME_NONE:e.BS_PRIVATE_NESTED_SOME_NONE+1|0}:e}function E1(e,t){for(var r=e.length,n=t.length,o=new Array(r+n|0),i=0;i<r;++i)o[i]=e[i];for(var a=0;a<n;++a)o[r+a|0]=t[a];return o}function Kd(e,t){for(var r=0,n=e.length;r<n;++r)t(e[r])}function yc(e,t){for(var r=e.length,n=new Array(r),o=0;o<r;++o)n[o]=t(e[o]);return n}function S1(e,t){for(var r=e.length,n=new Array(r),o=0;o<r;++o)n[o]=t(o,e[o]);return n}function za(e,t,r){for(var n=t,o=0,i=e.length;o<i;++o)n=r(n,e[o]);return n}var k1=function(e,t){for(var r in e)t(r)};function Wa(e,t){if(e===t)return!0;var r=typeof e;if(r==="string"||r==="number"||r==="boolean"||r==="undefined"||e===null)return!1;var n=typeof t;if(r==="function"||n==="function")throw{RE_EXN_ID:"Invalid_argument",_1:"equal: functional value",Error:new Error};if(n==="number"||n==="undefined"||t===null)return!1;var o=0|e.TAG,i=0|t.TAG;if(o===248)return e[1]===t[1];if(o===251)throw{RE_EXN_ID:"Invalid_argument",_1:"equal: abstract value",Error:new Error};if(o!==i)return!1;var a=0|e.length;if(a===(0|t.length))if(Array.isArray(e))for(var s=0;;){var u=s;if(u===a)return!0;if(!Wa(e[u],t[u]))return!1;s=u+1|0}else{if(e instanceof Date&&t instanceof Date)return!(e>t||e<t);var l={contents:!0};return k1(e,function(c){if(!Object.prototype.hasOwnProperty.call(t,c)){l.contents=!1;return}}),l.contents&&k1(t,function(c){if(!Object.prototype.hasOwnProperty.call(e,c)||!Wa(t[c],e[c])){l.contents=!1;return}}),l.contents}else return!1}function bc(e,t){if(t in e)return x1(e[t])}var Jd=function(e,t){delete e[t]};function O1(e){for(var t=Object.keys(e),r=t.length,n=new Array(r),o=0;o<r;++o)n[o]=e[t[o]];return n}function Ho(e){for(var t={},r=e.length,n=0;n<r;++n){var o=e[n];t[o[0]]=o[1]}return t}function A1(e,t){return E1(e,[t])}function Vo(){if(arguments.length===1){let e=arguments;return function(r){return A1(r,e[0])}}return A1(arguments[0],arguments[1])}function I1(e,t){for(var r=0,n=[];r<e.length;){var o=e[r];t(r,o)&&n.push(o),r=r+1|0}return n}function D1(){if(arguments.length===1){let e=arguments;return function(r){return I1(r,e[0])}}return I1(arguments[0],arguments[1])}function _1(e,t,r){return S1(e,function(n,o){return n===t?r(o):o})}function Zd(){if(arguments.length===2){let e=arguments;return function(r){return _1(r,e[0],e[1])}}return _1(arguments[0],arguments[1],arguments[2])}function C1(e,t){return D1(e,function(r,n){return r!==t})}function Yd(){if(arguments.length===1){let e=arguments;return function(r){return C1(r,e[0])}}return C1(arguments[0],arguments[1])}function T1(e,t){return za(e,{},function(r,n){var o=t(n),i=bc(r,o);return i!==void 0?i.push(n):r[o]=[n],r})}function Bn(){if(arguments.length===1){let e=arguments;return function(r){return T1(r,e[0])}}return T1(arguments[0],arguments[1])}function K1(e){}function J1(e){return{}}function F1(e,t){return e[t]}function Z1(){if(arguments.length===1){let e=arguments;return function(r){return F1(r,e[0])}}return F1(arguments[0],arguments[1])}var N1=bc;function Y1(){if(arguments.length===1){let e=arguments;return function(r){return N1(r,e[0])}}return N1(arguments[0],arguments[1])}function P1(e,t){return e[t]}function Q1(){if(arguments.length===1){let e=arguments;return function(r){return P1(r,e[0])}}return P1(arguments[0],arguments[1])}function X1(e){return Object.entries(e)}var jn=O1;function cr(e){return Object.keys(e)}var e2=Ho;function R1(e,t){return Object.assign({},e,t)}function zn(){if(arguments.length===1){let e=arguments;return function(r){return R1(r,e[0])}}return R1(arguments[0],arguments[1])}function M1(e,t,r){var n=zn({},e);return n[t]=r,n}function vc(){if(arguments.length===2){let e=arguments;return function(r){return M1(r,e[0],e[1])}}return M1(arguments[0],arguments[1],arguments[2])}function $1(e,t,r){return vc(e,t,r(bc(e,t)))}function sn(){if(arguments.length===2){let e=arguments;return function(r){return $1(r,e[0],e[1])}}return $1(arguments[0],arguments[1],arguments[2])}function L1(e,t,r){return vc(e,t,r(e[t]))}function t2(){if(arguments.length===2){let e=arguments;return function(r){return L1(r,e[0],e[1])}}return L1(arguments[0],arguments[1],arguments[2])}function q1(e,t){var r=zn({},e);return Jd(r,t),r}function wc(){if(arguments.length===1){let e=arguments;return function(r){return q1(r,e[0])}}return q1(arguments[0],arguments[1])}function B1(e,t){var r=zn({},e);return Kd(t,function(n){Jd(r,n)}),r}function xc(){if(arguments.length===1){let e=arguments;return function(r){return B1(r,e[0])}}return B1(arguments[0],arguments[1])}function j1(e,t){return Ho(yc(Object.keys(e),function(r){return[r,t(e[r])]}))}function Go(){if(arguments.length===1){let e=arguments;return function(r){return j1(r,e[0])}}return j1(arguments[0],arguments[1])}function z1(e,t){return Ho(yc(Object.keys(e),function(r){return[r,t(r,e[r])]}))}function lr(){if(arguments.length===1){let e=arguments;return function(r){return z1(r,e[0])}}return z1(arguments[0],arguments[1])}function W1(e,t){return Ho(za(Object.keys(e),[],function(r,n){var o=e[n];return t(o)?Vo(r,[n,o]):r}))}function Qd(){if(arguments.length===1){let e=arguments;return function(r){return W1(r,e[0])}}return W1(arguments[0],arguments[1])}function U1(e,t){return Ho(za(Object.keys(e),[],function(r,n){var o=e[n];return t(n,o)?Vo(r,[n,o]):r}))}function Ec(){if(arguments.length===1){let e=arguments;return function(r){return U1(r,e[0])}}return U1(arguments[0],arguments[1])}function H1(e,t){return Qd(e,function(r){return!t(r)})}function r2(){if(arguments.length===1){let e=arguments;return function(r){return H1(r,e[0])}}return H1(arguments[0],arguments[1])}function V1(e,t){return Ec(e,function(r,n){return!t(r,n)})}function n2(){if(arguments.length===1){let e=arguments;return function(r){return V1(r,e[0])}}return V1(arguments[0],arguments[1])}function G1(e,t){return Ec(e,function(r,n){return function(i,a){return a.includes(i)}(r,t)})}function xt(){if(arguments.length===1){let e=arguments;return function(r){return G1(r,e[0])}}return G1(arguments[0],arguments[1])}function o2(e){return Wa(e,{})}function i2(e){return!Wa(e,{})}var Xd={__proto__:null,placeholder:K1,makeEmpty:J1,getUnsafe:Z1,get:Y1,prop:Q1,toPairs:X1,values:jn,keys:cr,fromPairs:e2,merge:zn,set:vc,update:sn,updateUnsafe:t2,deleteKey:wc,deleteKeys:xc,map:Go,mapWithKey:lr,filter:Qd,filterWithKey:Ec,reject:r2,rejectWithKey:n2,selectKeys:xt,isEmpty:o2,isNotEmpty:i2};var em=class{use=Oe.this;get manifest(){return this.use(be).manifest}value;constructor(){let t=this.getDefaults();this.value=t,Object.defineProperties(this,lr(t,r=>({get:()=>this.value[r]})))}setOption(t,r){return this.value[t]===r?{apply:()=>Promise.resolve(!1),changed:!1}:(this.value[t]=r,{apply:()=>this.apply(t).then(()=>!0),changed:!0})}async apply(t){}async applyAll(){await Promise.all(cr(this.value).map(t=>this.apply(t)))}toJSON(){return this.value}fromJSON(t){let r=cr(this.getDefaults());this.value={...this.value,...xt(t,r)}}},Me=em;var Ut=class extends Me{getDefaults(){return{zoteroDataDir:(0,Ua.join)((0,a2.homedir)(),"Zotero"),citationLibrary:1}}async apply(t){let r=this.use(ft);switch(t){case"zoteroDataDir":return r.status===0?await r.initialize():await r.refresh({task:"full"});case"citationLibrary":return await r.refresh({task:"searchIndex",force:!0});default:(0,s2.default)(t)}}#e;get nativeBinding(){if(this.#e)return this.#e;let t=Uo(this.manifest);if(t)return this.#e=t,this.#e;throw new Error("Failed to get native binding path")}get zoteroDbPath(){return(0,Ua.join)(this.zoteroDataDir,"zotero.sqlite")}get betterBibTexDbPath(){return(0,Ua.join)(this.zoteroDataDir,"better-bibtex-search.sqlite")}get zoteroCacheDirPath(){return(0,Ua.join)(this.zoteroDataDir,"cache")}get dbConnParams(){return{nativeBinding:this.nativeBinding,mainDbPath:this.zoteroDbPath,bbtDbPath:this.betterBibTexDbPath}}};var ft=class extends ce{logSettings=this.use(Jo);settings=this.use(Ut);async onload(){ne.debug("loading DatabaseWorker");let t=(0,Ko.debounce)(()=>{this.refresh({task:"dbConn"})},500,!0);this.registerEvent(app.vault.on("zotero:db-updated",()=>t()));let r=process.hrtime();await this.initialize(),ne.debug(`ZoteroDB Initialization complete. Took ${(0,c2.default)(process.hrtime(r))}`);let n=this.use(be);n.addCommand({id:"refresh-zotero-data",name:"Refresh Zotero Data",callback:async()=>{await this.refresh({task:"full"})}}),n.addCommand({id:"refresh-zotero-search-index",name:"Refresh Zotero Search Index",callback:async()=>{await this.refresh({task:"searchIndex"})}});let o=this.genAutoRefresh(n);this.registerEvent(n.server.on("bg:notify",async(i,a)=>{a.event==="regular-item/update"&&o(a)}))}genAutoRefresh(t){let r=!1,n=null,o=()=>{n&&(ne.debug("unregistering db refresh watcher"),n(),n=null)},i=(0,Ko.debounce)(async()=>{if(o(),ne.debug("Auto Refreshing Zotero Search Index"),!r){r=!1;try{ne.debug("Db not refreshed, waiting before auto refresh");let[a]=Ud(t.app,{timeout:1e4});await a}catch(a){if(a instanceof qa){ne.warn("no db refreshed event received in 10s, skip refresh search index");return}else{console.error("error while waiting for db refresh during execute",a);return}}}await this.refresh({task:"searchIndex",force:!0}),ne.debug("Auto Refreshing Zotero Search Index Success")},5e3,!0);return a=>{if(ne.debug(`Request to auto refresh search index: (refreshed ${r})`,a),i(),o(),r)return;ne.debug("watching db refresh while waiting for search index auto refresh");let[s,u]=Ud(t.app,{timeout:null});n=u,s.then(()=>{ne.debug("db refresh while requesting auto refresh search index"),r=!0,n=null}).catch(l=>{l instanceof Ba||console.error("error while waiting for db refresh during request",l)})}}async onunload(){await this.#t.terminate(),URL.revokeObjectURL(this.#e),this.#r=0,this.#i=null}#e=mc(l1);#t=u2.default.pool(this.#e,{minWorkers:1,maxWorkers:1,workerType:"web",name:"Zotero Database Workers"});api=gc(this.#t);#r=0;get status(){return this.#r}#n=null;#o=null;toConnectedDbId(t){return[t.mainDbPath,t.bbtDbPath].join()}async#a(t){let r=this.settings.citationLibrary;return!t&&this.#n===r?(ne.debug(`Skipping search index init, lib ${r} already indexed`),!1):(await this.api.initIndex(r),this.#n=r,ne.debug(`Search index init complete for lib ${r}`),!0)}async#u(t=!1){let r=this.settings.dbConnParams,n=this.toConnectedDbId(r),o;t?n!==this.#o?(delete r.nativeBinding,o=await this.api.openDb(r),this.#o=n):o=await this.api.openDb():(o=await this.api.openDb(r),this.#o=n);let[i,a]=o;if(a||ne.debug("Failed to open Better BibTeX database, skipping..."),!i)throw new Error("Failed to init ZoteroDB")}async initialize(){if(this.#r!==0)throw new Error("Calling init on already initialized db, use refresh instead");await this.#u(),app.vault.trigger("zotero:db-ready"),await this.#a(!0),app.metadataCache.trigger("zotero:search-ready"),new Ko.Notice("ZoteroDB Initialization complete."),this.#r=2}#s=null;#i=null;refresh(t){if(this.#r===0)return Promise.reject(new Error("Calling refresh on uninitialized database"));if(this.#r===2){this.#r=1;let r=(async()=>{t.task==="dbConn"?await this.#c():t.task==="searchIndex"?await this.#l(t.force):t.task==="full"?await this.#f():(0,tm.assertNever)(t),this.#r=2;let n=this.#i;n&&(this.#i=null,await this.refresh(n))})();return this.#s=r}else{if(this.#r===1)return this.#s?(this.#i=this.#p(t),this.#s):Promise.reject(new Error("Other task in pending state"));(0,tm.assertNever)(this.#r)}}async#c(){await this.#u(!0),app.vault.trigger("zotero:db-refresh")}async#l(t=!1){await this.#a(t)&&app.metadataCache.trigger("zotero:search-refresh")}async#f(){await this.#c(),await this.#l(!0),new Ko.Notice("ZoteroDB Refresh complete.")}#p(t){if(!this.#i)return t;let r=this.#i;return r.task==="full"?r:r.task===t.task?r.task==="searchIndex"?{...r,force:r.force||t.force}:r:{task:"full"}}};var f2="INFO",p2="log4js_loglevel",iq=()=>{let e=localStorage.getItem(p2);return typeof e=="string"&&e in kc.levels?(console.debug(`Read from localstorage: loglevel ${e}`),e):f2},Sc=$b("main",iq(),kc.default),ne=Sc,$e=(e,t,...r)=>{if(!t){Sc.error(e,...r);return}Sc.error(e,t instanceof Error?t.message:String(t),...r),console.error(t)},Jo=class extends Me{getDefaults(){return{level:f2}}async applyLevel(){Sc.level=this.level,localStorage.setItem(p2,this.level),await this.use(ft).api.setLoglevel(this.level)}async apply(t){switch(t){case"level":await this.applyLevel();return;default:(0,l2.assertNever)(t)}}};var AS=require("fs"),$r=require("obsidian");C();var xe={},ei=Symbol(),dE=e=>!!e[ei],lE=e=>!e[ei].c,Za=e=>{var t;let{b:r,c:n}=e[ei];n&&(n(),(t=Aq.get(r))==null||t())},Pc=(e,t)=>{let r=e[ei].o,n=t[ei].o;return r===n||e===n||dE(r)&&Pc(r,t)},fE=(e,t)=>{let r={b:e,o:t,c:null},n=new Promise(o=>{r.c=()=>{r.c=null,o()},t.finally(r.c)});return n[ei]=r,n},Aq=new WeakMap;var Nc=e=>"init"in e,gm="r",ym="w",Ya="c",bm="s",pE="h",Iq="n",_q="l",Cq="a",Tq="m",Oq=e=>{let t=new WeakMap,r=new WeakMap,n=new Map,o,i;if((xe.env&&xe.env.MODE)!=="production"&&(o=new Set,i=new Set),e)for(let[_,k]of e){let M={v:k,r:0,y:!0,d:new Map};(xe.env&&xe.env.MODE)!=="production"&&(Object.freeze(M),Nc(_)||console.warn("Found initial value for derived atom which can cause unexpected behavior",_)),t.set(_,M)}let a=new WeakMap,s=(_,k,M)=>{let B=a.get(k);B||(B=new Map,a.set(k,B)),M.then(()=>{B.get(_)===M&&(B.delete(_),B.size||a.delete(k))}),B.set(_,M)},u=_=>{let k=new Set,M=a.get(_);return M&&(a.delete(_),M.forEach((B,W)=>{Za(B),k.add(W)})),k},l=new WeakMap,c=_=>{let k=l.get(_);return k||(k=new Map,l.set(_,k)),k},f=(_,k)=>{if(_){let M=c(_),B=M.get(k);return B||(B=f(_.p,k),B&&"p"in B&&lE(B.p)&&(B=void 0),B&&M.set(k,B)),B}return t.get(k)},p=(_,k,M)=>{if((xe.env&&xe.env.MODE)!=="production"&&Object.freeze(M),_)c(_).set(k,M);else{let B=t.get(k);t.set(k,M),n.has(k)||n.set(k,B)}},d=(_,k=new Map,M)=>{if(!M)return k;let B=new Map,W=!1;return M.forEach(U=>{var Z;let oe=((Z=f(_,U))==null?void 0:Z.r)||0;B.set(U,oe),k.get(U)!==oe&&(W=!0)}),k.size===B.size&&!W?k:B},h=(_,k,M,B,W)=>{let U=f(_,k);if(U){if(W&&(!("p"in U)||!Pc(U.p,W)))return U;"p"in U&&Za(U.p)}let Z={v:M,r:U?.r||0,y:!0,d:d(_,U?.d,B)},oe=!U?.y;return!U||!("v"in U)||!Object.is(U.v,M)?(oe=!0,++Z.r,Z.d.has(k)&&(Z.d=new Map(Z.d).set(k,Z.r))):Z.d!==U.d&&(Z.d.size!==U.d.size||!Array.from(Z.d.keys()).every(qe=>U.d.has(qe)))&&(oe=!0,Promise.resolve().then(()=>{z(_)})),U&&!oe?U:(p(_,k,Z),Z)},g=(_,k,M,B,W)=>{let U=f(_,k);if(U){if(W&&(!("p"in U)||!Pc(U.p,W)))return U;"p"in U&&Za(U.p)}let Z={e:M,r:(U?.r||0)+1,y:!0,d:d(_,U?.d,B)};return p(_,k,Z),Z},y=(_,k,M,B)=>{let W=f(_,k);if(W&&"p"in W){if(Pc(W.p,M))return W.y?W:{...W,y:!0};Za(W.p)}s(_,k,M);let U={p:M,r:(W?.r||0)+1,y:!0,d:d(_,W?.d,B)};return p(_,k,U),U},w=(_,k,M,B)=>{if(M instanceof Promise){let W=fE(M,M.then(U=>{h(_,k,U,B,W)}).catch(U=>{if(U instanceof Promise)return dE(U)?U.then(()=>{S(_,k,!0)}):U;g(_,k,U,B,W)}));return y(_,k,W,B)}return h(_,k,M,B)},x=(_,k)=>{let M=f(_,k);if(M){let B={...M,y:!1};p(_,k,B)}else(xe.env&&xe.env.MODE)!=="production"&&console.warn("[Bug] could not invalidate non existing atom",k)},S=(_,k,M)=>{if(!M){let W=f(_,k);if(W){if(W.y&&"p"in W&&!lE(W.p))return W;if(W.d.forEach((U,Z)=>{if(Z!==k)if(!r.has(Z))S(_,Z);else{let oe=f(_,Z);oe&&!oe.y&&S(_,Z)}}),Array.from(W.d).every(([U,Z])=>{let oe=f(_,U);return oe&&!("p"in oe)&&oe.r===Z}))return W.y?W:{...W,y:!0}}}let B=new Set;try{let W=k.read(U=>{B.add(U);let Z=U===k?f(_,U):S(_,U);if(Z){if("e"in Z)throw Z.e;if("p"in Z)throw Z.p;return Z.v}if(Nc(U))return U.init;throw new Error("no atom init")});return w(_,k,W,B)}catch(W){if(W instanceof Promise){let U=fE(W,W);return y(_,k,U,B)}return g(_,k,W,B)}},O=(_,k)=>S(k,_),F=(_,k)=>{let M=r.get(k);return M||(M=A(_,k)),M},D=(_,k)=>!k.l.size&&(!k.t.size||k.t.size===1&&k.t.has(_)),P=(_,k)=>{let M=r.get(k);M&&D(k,M)&&I(_,k)},R=(_,k)=>{let M=r.get(k);M?.t.forEach(B=>{B!==k&&(x(_,B),R(_,B))})},E=(_,k,M)=>{let B=!0,W=(oe,qe)=>{let Te=S(_,oe);if("e"in Te)throw Te.e;if("p"in Te){if(qe?.unstable_promise)return Te.p.then(()=>{let me=f(_,oe);return me&&"p"in me&&me.p===Te.p?new Promise(Or=>setTimeout(Or)).then(()=>W(oe,qe)):W(oe,qe)});throw(xe.env&&xe.env.MODE)!=="production"&&console.info("Reading pending atom state in write operation. We throw a promise for now.",oe),Te.p}if("v"in Te)return Te.v;throw(xe.env&&xe.env.MODE)!=="production"&&console.warn("[Bug] no value found while reading atom in write operation. This is probably a bug.",oe),new Error("no value found")},U=(oe,qe)=>{let Te;if(oe===k){if(!Nc(oe))throw new Error("atom not writable");u(oe).forEach(Dr=>{Dr!==_&&w(Dr,oe,qe)});let Or=f(_,oe),Nt=w(_,oe,qe);Or!==Nt&&R(_,oe)}else Te=E(_,oe,qe);return B||z(_),Te},Z=k.write(W,U,M);return B=!1,Z},T=(_,k,M)=>{let B=E(M,_,k);return z(M),B},v=_=>!!_.write,A=(_,k,M)=>{let B={t:new Set(M&&[M]),l:new Set};if(r.set(k,B),(xe.env&&xe.env.MODE)!=="production"&&i.add(k),S(void 0,k).d.forEach((U,Z)=>{let oe=r.get(Z);oe?oe.t.add(k):Z!==k&&A(_,Z,k)}),v(k)&&k.onMount){let U=oe=>T(k,oe,_),Z=k.onMount(U);_=void 0,Z&&(B.u=Z)}return B},I=(_,k)=>{var M;let B=(M=r.get(k))==null?void 0:M.u;B&&B(),r.delete(k),(xe.env&&xe.env.MODE)!=="production"&&i.delete(k);let W=f(_,k);W?("p"in W&&Za(W.p),W.d.forEach((U,Z)=>{if(Z!==k){let oe=r.get(Z);oe&&(oe.t.delete(k),D(Z,oe)&&I(_,Z))}})):(xe.env&&xe.env.MODE)!=="production"&&console.warn("[Bug] could not find atom state to unmount",k)},j=(_,k,M,B)=>{let W=new Set(M.d.keys());B?.forEach((U,Z)=>{if(W.has(Z)){W.delete(Z);return}let oe=r.get(Z);oe&&(oe.t.delete(k),D(Z,oe)&&I(_,Z))}),W.forEach(U=>{let Z=r.get(U);Z?Z.t.add(k):r.has(k)&&A(_,U,k)})},z=_=>{if(_){c(_).forEach((M,B)=>{let W=t.get(B);if(M!==W){let U=r.get(B);U?.l.forEach(Z=>Z(_))}});return}for(;n.size;){let k=Array.from(n);n.clear(),k.forEach(([M,B])=>{let W=f(void 0,M);if(W&&W.d!==B?.d&&j(void 0,M,W,B?.d),B&&!B.y&&W?.y)return;let U=r.get(M);U?.l.forEach(Z=>Z())})}(xe.env&&xe.env.MODE)!=="production"&&o.forEach(k=>k())},H=_=>{c(_).forEach((M,B)=>{let W=t.get(B);(!W||M.r>W.r||M.y!==W.y||M.r===W.r&&M.d!==W.d)&&(t.set(B,M),M.d!==W?.d&&j(_,B,M,W?.d))})},G=(_,k)=>{k&&H(k),z(void 0)},re=(_,k,M)=>{let W=F(M,_).l;return W.add(k),()=>{W.delete(k),P(M,_)}},ie=(_,k)=>{for(let[M,B]of _)Nc(M)&&(w(k,M,B),R(k,M));z(k)};return(xe.env&&xe.env.MODE)!=="production"?{[gm]:O,[ym]:T,[Ya]:G,[bm]:re,[pE]:ie,[Iq]:_=>(o.add(_),()=>{o.delete(_)}),[_q]:()=>i.values(),[Cq]:_=>t.get(_),[Tq]:_=>r.get(_)}:{[gm]:O,[ym]:T,[Ya]:G,[bm]:re,[pE]:ie}};var mE=(e,t)=>({s:t?t(e).SECRET_INTERNAL_store:Oq(e)}),hm=new Map,vm=e=>(hm.has(e)||hm.set(e,we(mE())),hm.get(e)),hE=({children:e,initialValues:t,scope:r,unstable_createStore:n,unstable_enableVersionedWrite:o})=>{let[i,a]=$({});L(()=>{let l=s.current;l.w&&(l.s[Ya](null,i),delete i.p,l.v=i)},[i]);let s=N();if(!s.current){let l=mE(t,n);if(o){let c=0;l.w=f=>{a(p=>{let d=c?p:{p};return f(d),d})},l.v=i,l.r=f=>{++c,f(),--c}}s.current=l}let u=vm(r);return Q(u.Provider,{value:s.current},e)},Dq=0;function It(e,t){let r=`atom${++Dq}`,n={toString:()=>r};return typeof e=="function"?n.read=e:(n.init=e,n.read=o=>o(n),n.write=(o,i,a)=>i(n,typeof a=="function"?a(o(n)):a)),t&&(n.write=t),n}function ot(e,t){let r=vm(t),n=V(r),{s:o,v:i}=n,a=p=>{let d=o[gm](e,p);if((xe.env&&xe.env.MODE)!=="production"&&!d.y)throw new Error("should not be invalidated");if("e"in d)throw d.e;if("p"in d)throw d.p;if("v"in d)return d.v;throw new Error("no atom value")},[[s,u,l],c]=pt((p,d)=>{let h=a(d);return Object.is(p[1],h)&&p[2]===e?p:[d,h,e]},i,p=>{let d=a(p);return[p,d,e]}),f=u;return l!==e&&(c(s),f=a(s)),L(()=>{let{v:p}=n;p&&o[Ya](e,p);let d=o[bm](e,c,p);return c(p),d},[o,e,n]),L(()=>{o[Ya](e,s)}),Un(f),f}function wm(e,t){let r=vm(t),{s:n,w:o}=V(r);return J(a=>{if((xe.env&&xe.env.MODE)!=="production"&&!("write"in e))throw new Error("not writable atom");let s=u=>n[ym](e,a,u);return o?o(s):s()},[n,o,e])}var SS=require("obsidian");C();var gE=()=>{let e=[];return{get:()=>e,set:(n,o)=>{e.push([n,o])}}};var dr=It(null),xm=It(e=>{let{arch:t,platform:r,modules:n}=e(dr).platform;return`${r}-${t}-${n}.node.gz`}),Qa=It(e=>`https://github.com/aidenlx/better-sqlite3/releases/download/${e(dr).binaryVersion}/${e(xm)}`),Dee=It(e=>e(Qa).replace("github.com","download.fastgit.org")),Rc=It(e=>Uo(e(dr).manifest)),yE=It(e=>e(dr).mode);var xS=se(Qe(),1);C();var bE=function(e){return function(t,r){var n=N(!1);e(function(){return function(){n.current=!1}},[]),e(function(){if(!n.current)n.current=!0;else return t()},r)}};function mr(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,i=[],a;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i}function vE(e,t,r){if(r||arguments.length===2)for(var n=0,o=t.length,i;n<o;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}C();var Mr=function(e){return typeof e=="function"};var wE=function(e){return typeof e>"u"};var Fq=!1,ti=Fq;function Nq(e){ti&&(Mr(e)||console.error("useMemoizedFn expected parameter is a function, got ".concat(typeof e)));var t=N(e);t.current=K(function(){return e},[e]);var r=N();return r.current||(r.current=function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];return t.current.apply(this,n)}),r.current}var Le=Nq;C();var xE=bE(L);C();C();function Pq(e){var t=N(e);return t.current=e,t}var Mc=Pq;var Rq=function(e){ti&&(Mr(e)||console.error("useUnmount expected parameter is a function, got ".concat(typeof e)));var t=Mc(e);L(function(){return function(){t.current()}},[])},EE=Rq;var k4=!!(typeof window<"u"&&window.document&&window.document.createElement),tS=k4;var rS=se(eS());C();function A4(e,t){var r;ti&&(Mr(e)||console.error("useDebounceFn expected parameter is a function, got ".concat(typeof e)));var n=Mc(e),o=(r=t?.wait)!==null&&r!==void 0?r:1e3,i=K(function(){return(0,rS.default)(function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return n.current.apply(n,vE([],mr(a),!1))},o,t)},[]);return EE(function(){i.cancel()}),{run:i,cancel:i.cancel,flush:i.flush}}var es=A4;C();function nS(e){function t(r,n){var o;try{o=e()}catch(p){console.error(p)}var i=function(p){return n?.serializer?n?.serializer(p):JSON.stringify(p)},a=function(p){return n?.deserializer?n?.deserializer(p):JSON.parse(p)};function s(){try{var p=o?.getItem(r);if(p)return a(p)}catch(d){console.error(d)}return Mr(n?.defaultValue)?n?.defaultValue():n?.defaultValue}var u=mr($(function(){return s()}),2),l=u[0],c=u[1];xE(function(){c(s())},[r]);var f=function(p){var d=Mr(p)?p(l):p;if(c(d),wE(d))o?.removeItem(r);else try{o?.setItem(r,i(d))}catch(h){console.error(h)}};return[l,Le(f)]}return t}var I4=nS(function(){return tS?localStorage:void 0}),Im=I4;function oS(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=oS(e[t]))&&(n&&(n+=" "),n+=r);else for(t in e)e[t]&&(n&&(n+=" "),n+=t);return n}function _m(){for(var e,t,r=0,n="";r<arguments.length;)(e=arguments[r++])&&(t=oS(e))&&(n&&(n+=" "),n+=t);return n}var ri=_m;var iS=require("obsidian");C();var Ve=e=>{let t=N(null);return[J(n=>{t.current&&t.current.empty(),n&&(0,iS.setIcon)(n,e),t.current=n},[e])]};Yo();Yo();var _4=0;function m(e,t,r,n,o){var i,a,s={};for(a in t)a=="ref"?i=t[a]:s[a]=t[a];var u={type:e,props:s,key:r,ref:i,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--_4,__source:o,__self:n};if(typeof e=="function"&&(i=e.defaultProps))for(a in i)s[a]===void 0&&(s[a]=i[a]);return ee.vnode&&ee.vnode(u),u}var ts=({name:e,desc:t,button:r,onClick:n,icon:o,className:i,...a})=>m("div",{className:ri("setting-item",i),...a,children:[o&&m("div",{className:"setting-icon",children:o}),m("div",{className:"setting-item-info",children:[m("div",{className:"setting-item-name",children:e}),m("div",{className:"setting-item-description",children:t})]}),m("div",{className:"setting-item-control",children:r&&m("button",{className:"mod-cta",onClick:n,children:r})})]});C();var C4=()=>m("svg",{className:"icon-blank svg-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",height:"32",width:"32"}),T4=()=>m("svg",{className:"icon-spin svg-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",height:"32",width:"32",children:[m("path",{opacity:".25",d:"M16 0 A16 16 0 0 0 16 32 A16 16 0 0 0 16 0 M16 4 A12 12 0 0 1 16 28 A12 12 0 0 1 16 4"}),m("path",{d:"M16 0 A16 16 0 0 1 32 16 L28 16 A12 12 0 0 0 16 4z",children:m("animateTransform",{attributeName:"transform",type:"rotate",from:"0 16 16",to:"360 16 16",dur:"0.8s",repeatCount:"indefinite"})})]}),aS=({color:e="var(--icon-color, black)",delay:t=0,height:r=16,width:n=16,style:o,...i})=>{let[a,s]=$(t>0);return L(()=>{let u=-1;return a&&(u=window.setTimeout(()=>{s(!1)},t)),()=>{window.clearTimeout(u)}},[]),m("div",{style:{...o,fill:e,height:Number(r)||r,width:Number(n)||n},...i,children:a?m(C4,{}):m(T4,{})})};var uS=require("fs"),cS=require("fs/promises"),lS=require("stream"),Om=require("stream/promises"),fS=require("zlib"),R4=require("@electron/remote");var $c=class extends Error{},Cm=class extends $c{},Tm=class extends $c{},O4=(e,t=",")=>e.join(t),D4={accept:"*",multiple:!1,strict:!1},sS=e=>{let{accept:t,multiple:r,strict:n}={...D4,...e},o=P4({multiple:r,accept:Array.isArray(t)?O4(t):t});return new Promise(i=>{o.onchange=()=>{i(F4(o.files,r,n)),o.remove()},o.click()})},F4=(e,t,r)=>new Promise((n,o)=>{if(!e)return o(new Cm);let i=N4(e,t,r);if(!i)return o(new Tm);n(i)}),N4=(e,t,r)=>!t&&r?e.length===1?e[0]:null:e.length?e:null,P4=({accept:e,multiple:t})=>{let r=document.createElement("input");return r.type="file",r.multiple=t,r.accept=e,r};var pS=require("obsidian"),Lc=async(e,t,r)=>{let n=lS.Readable.from(Buffer.from(e)),o=(0,uS.createWriteStream)(t);try{r?await(0,Om.pipeline)(n,o):await(0,Om.pipeline)(n,(0,fS.createGunzip)(),o)}catch(i){throw o.destroy(),await(0,cS.rm)(t,{force:!0}),i}},dS=async()=>{let e=await sS({multiple:!1,accept:[".gz",".node"],strict:!0});return e?{decompressed:!e.name.endsWith(".gz"),arrayBuffer:await e.arrayBuffer()}:null},mS=async e=>(await fetch(e,{method:"HEAD"})).status,hS=async e=>(await(0,pS.requestUrl)({url:e})).arrayBuffer;var gS=(i=>(i[i.Idle=0]="Idle",i[i.Downloading=1]="Downloading",i[i.Importing=2]="Importing",i[i.Success=3]="Success",i[i.Failed=4]="Failed",i))(gS||{}),ni=It(0),M4=It(e=>e(ni)===4),yS=It(null),$4=It(e=>{switch(e(ni)){case 0:return null;case 1:return"Downloading...";case 2:return"Importing...";case 3:return"Module successfully installed";case 4:return`Module install failed: ${e(yS)}`;default:break}}),L4=It(null,(e,t,[r,n])=>{t(ni,4);let o="Failed to install module when "+gS[r];$e(o,n),t(yS,o+": "+(n instanceof Error?n.message:`${n}`))}),q4=()=>{let e=wm(ni),t=wm(L4),r=ot(Qa),n=ot(Rc);return Le(async()=>{if(!n){t([0,new Error("Cannot find binary version")]);return}e(1);let o;try{if(await mS(r)===404)throw new Error(`Requested module not available (${r}), please open an issue on GitHub`);o=await hS(r)}catch(i){t([1,i]);return}e(2);try{await Lc(o,n,!1)}catch(i){t([2,i]);return}e(3)})},bS=()=>{let e=ot(ni),t=ot($4),r=ot(dr),n=q4();return m("div",{className:"zt-auto-install",children:[m(ts,{name:"Auto Install",desc:"Recommended",button:e===0?"Install":void 0,onClick:n}),e!==0&&m(ts,{className:ri("zt-auto-install-status",{"mod-warning":e===4,"mod-success":e===3}),icon:m(j4,{}),name:t,button:e===3?"Reload Plugin":void 0,onClick:()=>r.reloadPlugin()})]})},B4=()=>{let e=ot(M4),[t]=Ve(e?"slash":"check");return m("div",{className:"zt-install-done-icon",style:{display:"contents"},ref:t})},j4=()=>{switch(ot(ni)){case 0:return null;case 1:case 2:return m(aS,{className:"zt-install-spin-icon",style:{display:"contents"}});case 3:case 4:return m(B4,{})}};var vS=require("obsidian");C();var z4=async e=>{try{let t=await dS();return t?(await Lc(t.arrayBuffer,e,t.decompressed),!0):(ne.info("No file selected, skip import module"),!1)}catch(t){return new vS.Notice(`Failed to import module from ${e}: ${t}`),$e("import module "+e,t),!1}},W4=()=>{let[e,t]=$(!1),r=ot(Rc),n=async()=>{if(!r)return;await z4(r)&&t(!0)},o=ot(Qa),i=ot(xm),a=ot(dr);return m("ol",{children:[m("li",{children:["Download ",m("code",{children:".node.gz"})," file from"," ",m("a",{href:o,children:"GitHub"}),"."]}),m("li",{children:["Select downloaded ",m("code",{children:i})," or uncompressed"," ",m("code",{children:"better-sqlite3.node"}),"to install:",m(U4,{onClick:n,done:e})]}),m("li",{children:["Reload Obsidian Zotero Plugin:",m(H4,{onClick:()=>a.reloadPlugin()})]})]})},wS=()=>{let[e,t]=$(!1);return m("div",{className:"zt-manual-install",children:[m(ts,{name:"Manual Install",desc:"Use this option if you have trouble downloading the module with auto install.",button:`${e?"Hide":"Show"} Guide`,onClick:()=>t(r=>!r)}),m("div",{hidden:!e,children:m(W4,{})})]})},U4=({done:e,onClick:t})=>m("button",{className:ri({"zt-import-done":e}),onClick:t,children:e?"Library file imported":"Select"}),H4=({disabled:e,onClick:t})=>m("button",{disabled:e,onClick:t,children:"Reload Plugin"});var V4=()=>{let e=ot(yE);switch(e){case"install":return m(Y,{children:["Obsidian Zotero Plugin requires latest version of"," ",m("code",{children:"better-sqlite3"})," to be installed. Use one of the method below to install or update it."]});case"reset":return m(Y,{children:[m("code",{children:"better-sqlite3"})," seems to be broken and failed to load. you can try to use one of the method below to reinstall it."]});default:(0,xS.default)(e)}},ES=()=>m(Y,{children:[m("style",{children:`
.modal.mod-zt-install-guide .modal-content {
  display: flex;
  flex-direction: column;
}
.zt-install-methods {
  display: flex;
  flex-direction: column;
  gap: var(--size-4-4);
  flex-grow: 1;
  padding: var(--size-4-4);
  padding-bottom: var(--size-4-2);
}
.zt-install-methods .setting-item {
  padding: 0;
}
.zt-auto-install {
  display: flex;
  flex-direction: column;
  gap: var(--size-4-4);
}
.modal.mod-zt-install-guide button:disabled {
  background-color: var(--background-modifier-cover);
}
.modal.mod-zt-install-guide button:disabled:hover {
  box-shadow: var(--input-shadow);
}
.modal.mod-zt-install-guide button.zt-import-done {
  background-color: var(--background-modifier-success);
}
.zt-auto-install-status {
  border-top: none;
}
.zt-auto-install-status.mod-success .setting-icon ,
.zt-auto-install-status.mod-success .setting-item-name  {
  color: var(--text-success);
}
.zt-auto-install-status.mod-warning .setting-icon ,
.zt-auto-install-status.mod-warning .setting-item-name  {
  color: var(--text-error);
}
.zt-auto-install-status .setting-icon ,
.zt-auto-install-status .setting-item-name  {
  color: var(--text-muted);
}
      `}),m("div",{className:"zt-install-desc",children:m(V4,{})}),m("div",{className:"zt-install-methods",children:[m(bS,{}),m(wS,{})]})]});var rs=class extends SS.Modal{constructor(r,n,o,i){super(app);this.manifest=r;this.platform=n;this.binaryVersion=o;this.mode=i;this.titleEl.setText("Setup Obsidian Zotero Plugin"),this.modalEl.addClass("mod-zt-install-guide")}onOpen(){let r=gE();r.set(dr,this),q.render(m(hE,{initialValues:r.get(),children:m(ES,{})}),this.contentEl)}onClose(){q.unmountComponentAtNode(this.contentEl)}async reloadPlugin(){await app.plugins.disablePlugin(this.manifest.id),this.close(),await app.plugins.enablePlugin(this.manifest.id)}};var kS=(e,t,r)=>{let n=w1();if(!n)throw new Error("Not in desktop app");let o=b1(n);if(o<0)new $r.Notice(`The electron (electron: ${n.electron}, module version: ${n.modules}) in current version of obsidian is not supported by obsidian-zotero-plugin, please reinstall using latest obsidian installer from official website`);else if(o>0)new $r.Notice(`The electron (electron: ${n.electron}, module version: ${n.modules}) in current version of obsidian is newer than the one supported by installed obsidian-zotero-plugin, please update obsidian-zotero-plugin to the latest version`);else if(!v1(n))new $r.Notice(`Your device (${n.arch}-${n.platform}) is not supported by obsidian-zotero-plugin`);else{let i=Gd(t);if(!i)throw new Error(`Cannot find binary version for ${t.name} v${t.version}`);try{(0,AS.statSync)(e).isFile()?r==="reset"&&new rs(t,n,i,r).open():new $r.Notice("Path to database library occupied, please check the location manually: "+e,2e3)}catch(a){let s=a;s.code==="ENOENT"?new rs(t,n,i,r).open():(new $r.Notice(`Unexpected error while checking path of better-sqlite3, please check the location manually: ${e}, error: ${s}`,2e3),$e("checking better-sqlite3 path:"+e,s))}}},G4=e=>{if(!$r.Platform.isDesktopApp)throw new Error("Not in desktop app");let t=Uo(e);if(!t)throw new Error(`Cannot find binary version for ${e.name} v${e.version}`);try{return require(t),!0}catch(r){return r?.code==="MODULE_NOT_FOUND"?kS(t,e,"install"):(new $r.Notice(`Failed to load database library: ${r}`),$e("Failed to load database library",r),kS(t,e,"reset")),!1}},IS=G4;var lP=require("path/posix");var Gr=require("obsidian");var Se;(function(e){e[e.highlight=1]="highlight",e[e.note=2]="note",e[e.image=3]="image",e[e.ink=4]="ink"})(Se=Se||(Se={}));var hr;(function(e){e[e.manual=0]="manual",e[e.auto=1]="auto"})(hr=hr||(hr={}));var Dm;(function(e){e[e.importedFile=0]="importedFile",e[e.importedUrl=1]="importedUrl",e[e.linkedFile=2]="linkedFile",e[e.linkedUrl=3]="linkedUrl",e[e.embeddedImage=4]="embeddedImage"})(Dm=Dm||(Dm={}));var oi;(function(e){e[e.fullName=0]="fullName",e[e.nameOnly=1]="nameOnly"})(oi=oi||(oi={}));var qc=["attachment","note","annotation"];var ns=qc.map(e=>`'${e}'`).join(",");var _t=(e="itemID")=>`--sql
  ${e} IS NOT NULL
  AND ${e} NOT IN (SELECT itemID FROM deletedItems)
`,ii=e=>typeof e=="boolean"?"":`AND ${e} = $itemId`;var Bc=(e,t)=>{for(let r=0;r<e.length;r++)if(e[r]!==t[r])return e[r]-t[r];return 0},os=e=>!!e.path,_S=e=>`obzt-active-atch-${e.itemID}-${e.libraryID}`,Fm=(e,t)=>{let r=e.getItem(_S(t));if(!r)return null;let n=parseInt(r,10);return n>0?n:null},ai=(e,t,r)=>e.setItem(_S(t),r.toString());var jc=`--sql
  items.itemID,
  items.key,
  annots.type,
  annots.authorName,
  annots.text,
  annots.comment,
  annots.color,
  annots.pageLabel,
  annots.sortIndex,
  annots.position,
  annots.isExternal
`,zc=`--sql
  itemAnnotations annots
  JOIN items USING (itemID)
`;var Qre=`--sql
SELECT
  ${jc},
  annots.parentItemID,
  parentItems.key as parentItem
FROM
  ${zc}
  JOIN items as parentItems ON annots.parentItemID = parentItems.itemID
WHERE
  items.key = $annotKey
  AND items.libraryID = $libId
  AND ${_t("items.itemID")}
`;var one=`--sql
SELECT
  ${jc}
FROM
  ${zc}
WHERE
  parentItemID = $attachmentId
  AND items.libraryID = $libId
  AND ${_t()}
`;var sne=`--sql
SELECT
  atchs.itemID,
  atchs.path,
  items.key,
  COUNT(atchs.itemID) as annotCount
FROM
  itemAttachments atchs
  JOIN items USING (itemID)
  LEFT JOIN itemAnnotations annots ON atchs.itemID = annots.parentItemID
WHERE
  atchs.parentItemID = $itemId
  AND libraryID = $libId
  AND ${_t("atchs.itemID")}
GROUP BY atchs.itemID
`;var Wc=e=>`--sql
SELECT
  itemID,
  creators.firstName,
  creators.lastName,
  creators.fieldMode,
  creatorTypes.creatorType,
  orderIndex
FROM
  items
  LEFT JOIN itemCreators USING (itemID)
  JOIN creators USING (creatorID)
  JOIN creatorTypes USING (creatorTypeID)
WHERE
  libraryID = $libId
  ${ii(e||"itemID")}
  AND ${_t()}
ORDER BY
  itemID,
  orderIndex
`;var yne=Wc(!0);var xne=Wc(!1);var Uc=e=>`--sql
SELECT
  items.itemID,
  fieldsCombined.fieldName,
  itemDataValues.value
FROM
  items
  JOIN itemData USING (itemID)
  JOIN itemDataValues USING (valueID)
  JOIN fieldsCombined USING (fieldID)
  JOIN itemTypesCombined USING (itemTypeID)
WHERE
  libraryID = $libId
  ${ii(e||"items.itemID")}
  AND itemTypesCombined.typeName NOT IN (${ns})
  AND ${_t()}
`;var _ne=Uc(!0);var Dne=Uc(!1);var Hc=e=>`--sql
SELECT
  items.itemID,
  items.key,
  itemTypesCombined.typeName as itemType
FROM 
  items
  JOIN itemTypesCombined USING (itemTypeID)
WHERE 
  libraryID = $libId
  ${ii(e||"items.itemID")}
  AND ${_t()}
  AND itemType NOT IN (${ns})
`,Pne=`--sql
SELECT
  items.itemID,
  items.key,
  itemTypesCombined.typeName as itemType
FROM 
  items
  JOIN itemTypesCombined USING (itemTypeID)
WHERE 
  libraryID = $libId
  AND items.key = $key
  AND ${_t()}
  AND itemType NOT IN (${ns})
`;var Lne=Hc(!0);var zne=Hc(!1);var CS=require("path"),ln=({groupID:e,key:t},r)=>{let n=[r,"cache"];return e?n.push("groups",e.toString()):n.push("library"),(0,CS.join)(...n,t+".png")};var is=e=>Vc(e)?[e.firstName,e.lastName].join(" "):Gc(e)?e.lastName:null,Vc=e=>{let t=e;return t.fieldMode===oi.fullName&&t.firstName!==null&&t.lastName!==null},Gc=e=>{let t=e;return t.fieldMode===oi.nameOnly&&t.lastName!==null},Pm=new Set($t()("creators","itemID","itemType","key","libraryID")),Rm=e=>!qc.includes(e.itemType)&&typeof e.key=="string",as=e=>e.itemType==="annotation"&&!!e.parentItem;var TS=e=>typeof e.groupID=="number"?`groups/${e.groupID}`:"library",fn=e=>{let t;if(Rm(e))t=new URL(`zotero://select/${TS(e)}/items/${e.key}`);else if(as(e)){t=new URL(`zotero://open-pdf/${TS(e)}/items/${e.parentItem}`);let r;try{r=Do(e.position.pageIndex,!0)}catch(n){console.warn(n),r=null}typeof r=="number"&&t.searchParams.append("page",r.toString()),e.key&&t.searchParams.append("annotation",e.key)}else return"";return t.toString()};var Zc=require("obsidian");var Jc=require("obsidian");async function OS(e){let t=await ss(e);if(!t)return null;let{value:r,evt:n}=t;return{value:r.item,evt:n}}function ss(e){let t,r=new Promise((o,i)=>{t=o}),n=Rt(e,{selectSuggestion:o=>function(a,s,...u){return t(a!==null?{value:a,evt:s}:null),o.call(this,a,s,...u)},onClose:o=>function(...a){return t(null),o.call(this,...a)}});return r.finally(n),e.open(),r}var Kc=class extends Jc.SuggestModal{initial=!0;async#e(){let t=this.inputEl.value,r=await this.getSuggestions(t);if(r.length!==0){let n=this.limit;n&&n>0&&(r=r.slice(0,n)),this.chooser.setSuggestions(r)}else t?this.onNoSuggestion():this.chooser.setSuggestions(null)}#t=(0,Jc.debounce)(this.#e.bind(this),250,!0);updateSuggestions(){this.initial?(this.#e(),this.initial=!1):this.#t()}};var Mm=class extends Zc.FuzzySuggestModal{constructor(r){super(app);this.attachments=r}getItems(){return this.attachments}renderSuggestion(r,n){n.addClass("mod-complex");let o=n.createDiv("suggestion-content").createDiv("suggestion-title").createSpan(),i=n.createDiv("suggestion-aux");super.renderSuggestion(r,o),i.createEl("kbd","suggestion-hotkey").setText((r.item.annotCount??0).toString())}getItemText(r){return r.path?.replace(/^storage:/,"")??r.key}onChooseItem(){}};async function Z4(e){return e.length===1?e[0]:e.length?(await OS(new Mm(e)))?.value??null:(new Zc.Notice("No attachment found for this item"),null)}function Yc(e,t){ai(window.localStorage,t,e.itemID)}async function Hn(e){let t=e.filter(r=>os(r)&&r.path?.endsWith(".pdf"));return await Z4(t)}var lg=require("obsidian");var US=require("path/posix");var fs=require("obsidian");var $S=se(Qe(),1);var DS=`[!note] Page <%= it.pageLabel %>

<%= it.imgEmbed %>
<%= it.text %>

<% if (it.comment) { %>
---
<%= it.comment %>
<% } %>`;var FS=`<% for (const annotation of it) { %>
<%~ include("annotation", annotation) %>
\\n
<% } %>`;var NS=`# <%= it.title %>
\\n
[Zotero](<%= it.backlink %>) <%= it.fileLink %>
\\n
<%~ include("annots", it.annotations) %>`;var us="zotero-key",Qc="zt-attachments",PS={title:!0,citekey:!0},RS=["whitelist","blacklist"],MS=new Set(["annotations","attachment","allAttachments","creators","fileLink","itemID","libraryID","backlink"]);var e6={processAST:e=>{for(let t of e)typeof t!="string"&&t.t==="i"&&t.val.startsWith("it.")&&(t.val+='??""');return e}},LS={autoEscape:!1,plugins:[e6]},Vn={note:NS,annots:FS,annotation:DS,filename:"<%= it.citekey ?? it.DOI ?? it.title ?? it.key ?? it.citekey %>.md",citation:"[@<%= it.citekey %>]",altCitation:"@<%= it.citekey %>"},cs={note:"zt-note.eta.md",annotation:"zt-annot.eta.md",annots:"zt-annots.eta.md"},qS=Object.fromEntries(Object.entries(cs).map(e=>e.reverse())),Gn=cr(cs),$m=cr(Vn),Xc=$t()("filename","citation","altCitation"),Ct=class extends Me{getDefaults(){return{ejected:!1,folder:"ZtTemplates",templates:xc(Vn,Gn),fmFieldsMode:"whitelist",fmFieldsMapping:{...PS},fmTagPrefix:"",autoPairEta:!1,updateAnnotBlock:!1,updateOverwrite:!1}}async setTemplate(t,r){return this.templates[t]===r?!1:(this.templates[t]=r,app.vault.trigger("zotero:template-updated",t),!0)}async apply(t){let r=this.use(gr),n=this.use(be);switch(t){case"ejected":return await r.loadTemplates("eject");case"folder":return await r.loadTemplates("full");case"templates":return await r.loadTemplates("noneject");case"fmFieldsMode":case"fmFieldsMapping":case"fmTagPrefix":case"updateAnnotBlock":case"updateOverwrite":return;case"autoPairEta":return n.templateEditor.setEtaBracketPairing(this.autoPairEta);default:(0,$S.assertNever)(t)}}async applyAll(){return await this.use(gr).loadTemplates("full")}toJSON(){return{template:{ejected:this.ejected,folder:this.folder,templates:this.templates},fmFieldsMode:this.fmFieldsMode,fmFieldsMapping:this.fmFieldsMapping,fmTagPrefix:this.fmTagPrefix,autoPairEta:this.autoPairEta,updateAnnotBlock:this.updateAnnotBlock,updateOverwrite:this.updateOverwrite}}fromJSON(t){super.fromJSON({...t.template??{},...xt(t,["autoPairEta","fmFieldsMode","fmFieldsMapping","fmTagPrefix","updateAnnotBlock","updateOverwrite"])})}};var tl=require("path"),jm=require("url");function Lm(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function qm(e,t){if(typeof e!="string"||typeof t!="string")throw new TypeError("Expected a string");let r=new RegExp(`(?:${Lm(t)}){2,}`,"g");return e.replace(r,t)}function el(){return/[<>:"/\\|?*\u0000-\u001F]/g}function BS(){return/^(con|prn|aux|nul|com\d|lpt\d)$/i}function Bm(e,t){if(typeof e!="string"||typeof t!="string")throw new TypeError("Expected a string");return e.startsWith(t)&&(e=e.slice(t.length)),e.endsWith(t)&&(e=e.slice(0,-t.length)),e}var t6=100,jS=/[\u0000-\u001F\u0080-\u009F]/g,r6=/^\.+(\\|\/)|^\.+$/,n6=/\.+$/;function ls(e,t={}){if(typeof e!="string")throw new TypeError("Expected a string");let r=t.replacement===void 0?"!":t.replacement;if(el().test(r)&&jS.test(r))throw new Error("Replacement string cannot contain reserved filename characters");if(e=e.normalize("NFD"),e=e.replace(r6,r),e=e.replace(el(),r),e=e.replace(jS,r),e=e.replace(n6,""),r.length>0){let o=e[0]===".";e=qm(e,r),e=e.length>1?Bm(e,r):e,!o&&e[0]==="."&&(e=r+e),e[e.length-1]==="."&&(e+=r)}e=BS().test(e)?e+r:e;let n=typeof t.maxLength=="number"?t.maxLength:t6;if(e.length>n){let o=e.lastIndexOf(".");if(o===-1)e=e.slice(0,n);else{let i=e.slice(0,o),a=e.slice(o);e=i.slice(0,Math.max(1,n-a.length))+a}}return e}var zm=e=>encodeURI(e)===e?e:`<${e}>`,ui=e=>e.name.endsWith(".eta.md"),Wm=(e,t)=>t.path?(0,tl.join)(e,"storage",t.key,t.path.replace(/^storage:/,"")):"",rl=(e,t,r=null,n=null)=>{if(!r?.path)return"";let o=n?`#page=${n}`:void 0,i=app.vault.adapter.getBasePath(),a=Wm(e,r),s=(0,tl.relative)(i,a);if(s.startsWith(".."))return`[attachment](${zm((0,jm.pathToFileURL)(a).href+(o??""))})`;{let u=app.metadataCache.getFirstLinkpathDest(s,"");return u?app.fileManager.generateMarkdownLink(u,t??"",o).replace(/^!/,""):(ne.warn("fileLink: file not found",s,a),"")}},zS=e=>ls(e,{replacement:"_"}),WS=e=>e.replace(/((?:[^\\]|^)(?:\\{2})*)\\n/g,`$1
`),nl=e=>as(e)&&e.type===Se.image,o6=(e,t,r)=>t?`[${r??""}](${zm(e)})`:`[[${e}${r?"|"+r:""}]]`,Um=(e,t)=>{if(nl(e)){let r=t.imgCacheImporter.import(e);if(r)return o6(r,app.vault.getConfig("useMarkdownLinks"));{let n=t.imgCacheImporter.getCachePath(e);return`[Annotation ${e.key}](${zm((0,jm.pathToFileURL)(n).href)})`}}else return""};var gr=class extends ce{settings=this.use(Ct);#e=xt(Vn,cr(cs));getTemplate(t){return this.settings.templates[t]??this.#e[t]}async onload(){this.registerEvent(app.vault.on("modify",this.onModifyFile,this)),await this.loadTemplates("full"),await this.settings.apply("autoPairEta")}async onModifyFile(t){if(!this.settings.ejected)return;let r=this.getTemplateTypeOf(t);if(!r)return;let n=this.#e[r],o=await app.vault.cachedRead(t);n!==o&&(this.#e[r]=o,app.vault.trigger("zotero:template-updated",r))}get folder(){return this.settings.folder}getTemplateTypeOf(t){if(t instanceof fs.TFile&&t.parent?.path===this.folder&&ui(t))return qS[t.name]}async loadTemplates(t="full"){t!=="noneject"&&this.settings.ejected&&(await this.#t,this.#e=await this.#n());let r=t==="eject"?Gn:t==="noneject"?Xc:$m;for(let n of r)app.vault.trigger("zotero:template-updated",n)}#t=new Promise(t=>{if(app.metadataCache.initialized)t();else{let r=app.metadataCache.on("finished",()=>{t(),app.metadataCache.offref(r)});this.registerEvent(r)}});getTemplateFile(t){return(0,US.join)(this.folder,cs[t])}async#r(t){let r=this.getTemplateFile(t),n=app.vault.getAbstractFileByPath(r);if(n&&n instanceof fs.TFile)return await app.vault.cachedRead(n);let o=Vn[t];if(!n)ne.debug("Template file not found, creating new file...",r),await app.fileManager.createNewMarkdownFile(app.vault.getRoot(),r,o);else{let i=`Template file location occupied by a folder: ${r}, skipping...`;new fs.Notice(i),$e(i,null)}return o}async#n(){return Object.fromEntries(await Promise.all(Gn.map(async t=>[t,await this.#r(t)])))}};var ci=require("fs"),li=se(require("path"),1);function i6(e,t){Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}function yr(e){let t=new Error(e);return i6(t,yr.prototype),t}yr.prototype=Object.create(Error.prototype,{name:{value:"Eta Error",enumerable:!1}});function ps(e,t,r){let n=t.slice(0,r).split(/\n/),o=n.length,i=n[o-1].length+1;throw e+=" at line "+o+" col "+i+`:

  `+t.split(/\n/)[o-1]+`
  `+Array(i).join(" ")+"^",yr(e)}var HS=new Function("return this")().Promise;function a6(){try{return new Function("return (async function(){}).constructor")()}catch(e){throw e instanceof SyntaxError?yr("This environment doesn't support async/await"):e}}function s6(e){return String.prototype.trimLeft?e.trimLeft():e.replace(/^\s+/,"")}function u6(e){return String.prototype.trimRight?e.trimRight():e.replace(/\s+$/,"")}function c6(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ds(e,t){for(let r in t)c6(t,r)&&(e[r]=t[r]);return e}function l6(e,t,r,n){let o,i;return Array.isArray(t.autoTrim)?(o=t.autoTrim[1],i=t.autoTrim[0]):o=i=t.autoTrim,(r||r===!1)&&(o=r),(n||n===!1)&&(i=n),!i&&!o?e:o==="slurp"&&i==="slurp"?e.trim():(o==="_"||o==="slurp"?e=s6(e):(o==="-"||o==="nl")&&(e=e.replace(/^(?:\r\n|\n|\r)/,"")),i==="_"||i==="slurp"?e=u6(e):(i==="-"||i==="nl")&&(e=e.replace(/(?:\r\n|\n|\r)$/,"")),e)}var f6={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function p6(e){return f6[e]}function d6(e){let t=String(e);return/[&<>"']/.test(t)?t.replace(/[&<>"']/g,p6):t}var ol=/`(?:\\[\s\S]|\${(?:[^{}]|{(?:[^{}]|{[^}]*})*})*}|(?!\${)[^\\`])*`/g,il=/'(?:\\[\s\w"'\\`]|[^\n\r'\\])*?'/g,al=/"(?:\\[\s\w"'\\`]|[^\n\r"\\])*?"/g;function sl(e){return e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}function m6(e,t){let r=[],n=!1,o=0,i=t.parse;if(t.plugins)for(let f=0;f<t.plugins.length;f++){let p=t.plugins[f];p.processTemplate&&(e=p.processTemplate(e,t))}t.rmWhitespace&&(e=e.replace(/[\r\n]+/g,`
`).replace(/^\s+|\s+$/gm,"")),ol.lastIndex=0,il.lastIndex=0,al.lastIndex=0;function a(f,p){f&&(f=l6(f,t,n,p),f&&(f=f.replace(/\\|'/g,"\\$&").replace(/\r\n|\n|\r/g,"\\n"),r.push(f)))}let s=[i.exec,i.interpolate,i.raw].reduce(function(f,p){return f&&p?f+"|"+sl(p):p?sl(p):f},""),u=new RegExp("([^]*?)"+sl(t.tags[0])+"(-|_)?\\s*("+s+")?\\s*","g"),l=new RegExp("'|\"|`|\\/\\*|(\\s*(-|_)?"+sl(t.tags[1])+")","g"),c;for(;c=u.exec(e);){o=c[0].length+c.index;let f=c[1],p=c[2],d=c[3]||"";a(f,p),l.lastIndex=o;let h,g=!1;for(;h=l.exec(e);)if(h[1]){let y=e.slice(o,h.index);u.lastIndex=o=l.lastIndex,n=h[2],g={t:d===i.exec?"e":d===i.raw?"r":d===i.interpolate?"i":"",val:y};break}else{let y=h[0];if(y==="/*"){let w=e.indexOf("*/",l.lastIndex);w===-1&&ps("unclosed comment",e,h.index),l.lastIndex=w}else y==="'"?(il.lastIndex=h.index,il.exec(e)?l.lastIndex=il.lastIndex:ps("unclosed string",e,h.index)):y==='"'?(al.lastIndex=h.index,al.exec(e)?l.lastIndex=al.lastIndex:ps("unclosed string",e,h.index)):y==="`"&&(ol.lastIndex=h.index,ol.exec(e)?l.lastIndex=ol.lastIndex:ps("unclosed string",e,h.index))}g?r.push(g):ps("unclosed tag",e,c.index+f.length)}if(a(e.slice(o,e.length),!1),t.plugins)for(let f=0;f<t.plugins.length;f++){let p=t.plugins[f];p.processAST&&(r=p.processAST(r,t))}return r}function VS(e,t){let r=m6(e,t),n="var tR='',__l,__lP"+(t.include?",include=E.include.bind(E)":"")+(t.includeFile?",includeFile=E.includeFile.bind(E)":"")+`
function layout(p,d){__l=p;__lP=d}
`+(t.useWith?"with("+t.varName+"||{}){":"")+h6(r,t)+(t.includeFile?"if(__l)tR="+(t.async?"await ":"")+`includeFile(__l,Object.assign(${t.varName},{body:tR},__lP))
`:t.include?"if(__l)tR="+(t.async?"await ":"")+`include(__l,Object.assign(${t.varName},{body:tR},__lP))
`:"")+"if(cb){cb(null,tR)} return tR"+(t.useWith?"}":"");if(t.plugins)for(let o=0;o<t.plugins.length;o++){let i=t.plugins[o];i.processFnString&&(n=i.processFnString(n,t))}return n}function h6(e,t){let r=0,n=e.length,o="";for(r;r<n;r++){let i=e[r];if(typeof i=="string")o+="tR+='"+i+`'
`;else{let a=i.t,s=i.val||"";a==="r"?(t.filter&&(s="E.filter("+s+")"),o+="tR+="+s+`
`):a==="i"?(t.filter&&(s="E.filter("+s+")"),t.autoEscape&&(s="E.e("+s+")"),o+="tR+="+s+`
`):a==="e"&&(o+=s+`
`)}}return o}var Vm=class{constructor(t){this.cache=void 0,this.cache=t}define(t,r){this.cache[t]=r}get(t){return this.cache[t]}remove(t){delete this.cache[t]}reset(){this.cache={}}load(t){ds(this.cache,t)}},ms=new Vm({});function g6(e,t){let r=this.templates.get(e);if(!r)throw yr('Could not fetch template "'+e+'"');return r(t,this)}var fi={async:!1,autoEscape:!0,autoTrim:[!1,"nl"],cache:!1,e:d6,include:g6,parse:{exec:"",interpolate:"=",raw:"~"},plugins:[],rmWhitespace:!1,tags:["<%","%>"],templates:ms,useWith:!1,varName:"it"};function cl(e,t){let r={};return ds(r,fi),t&&ds(r,t),e&&ds(r,e),r}function KS(e){return ds(fi,e)}function ll(e,t){let r=cl(t||{}),n=r.async?a6():Function;try{return new n(r.varName,"E","cb",VS(e,r))}catch(o){throw o instanceof SyntaxError?yr(`Bad template syntax

`+o.message+`
`+Array(o.message.length+1).join("=")+`
`+VS(e,r)+`
`):o}}var y6=/^\uFEFF/;function ul(e,t,r){return li.resolve(r?t:li.dirname(t),e)+(li.extname(e)?"":".eta")}function b6(e,t){let r=!1,n=t.views,o=[],i=JSON.stringify({filename:t.filename,path:e,root:t.root,views:t.views});if(t.cache&&t.filepathCache&&t.filepathCache[i])return t.filepathCache[i];function a(l){o.includes(l)||o.push(l)}function s(l,c){let f;return Array.isArray(l)&&l.some(function(p){return f=ul(c,p,!0),a(f),(0,ci.existsSync)(f)})||typeof l=="string"&&(f=ul(c,l,!0),a(f),(0,ci.existsSync)(f))?f:!1}let u=/^[A-Za-z]+:\\|^\//.exec(e);if(u&&u.length){let l=e.replace(/^\/*/,"");if(r=s(n,l),!r){let c=ul(l,t.root||"/",!0);a(c),r=c}}else{if(t.filename){let l=ul(e,t.filename);a(l),(0,ci.existsSync)(l)&&(r=l)}if(r||(r=s(n,e)),!r)throw yr('Could not find the template "'+e+'". Paths tried: '+o)}return t.cache&&t.filepathCache&&(t.filepathCache[i]=r),r}function v6(e){try{return(0,ci.readFileSync)(e).toString().replace(y6,"")}catch{throw yr("Failed to read template at '"+e+"'")}}function GS(e,t,r){let n=cl(t),o=v6(e);try{let i=ll(o,n);return r||n.templates.define(n.filename,i),i}catch(i){throw yr("Loading file: "+e+` failed:

`+i.message)}}function w6(e){let t=e.filename;if(e.cache){let r=e.templates.get(t);return r||GS(t,e)}return GS(t,e,!0)}function x6(e,t){let r=cl({filename:b6(e,t)},t);return[w6(r),r]}function E6(e,t){let r=x6(e,this);return r[0](t,r[1])}function Hm(e,t){if(t.cache&&t.name&&t.templates.get(t.name))return t.templates.get(t.name);let r=typeof e=="function"?e:ll(e,t);return t.cache&&t.name&&t.templates.define(t.name,r),r}function JS(e,t,r,n){let o=cl(r||{});if(o.async)if(n)try{Hm(e,o)(t,o,n)}catch(i){return n(i)}else{if(typeof HS=="function")return new HS(function(i,a){try{i(Hm(e,o)(t,o))}catch(s){a(s)}});throw yr("Please provide a callback function, this env doesn't support Promises")}else return Hm(e,o)(t,o)}fi.includeFile=E6;fi.filepathCache={};var gs=require("obsidian");var F6=se(Qe(),1),N6=se(Zm(),1),Ym=se(Zm(),1);var hk=$t()("open","export","update");var mk=(e,t)=>{let r=new RegExp(`^${t}\\[(\\d+)\\]$`);return Object.entries(e).filter(([n])=>r.test(n)).sort(([n],[o])=>Number(n.match(r)[1])-Number(o.match(r)[1])).map(([,n])=>JSON.parse(n))},fl=e=>{if(e.type==="item")return{version:e.version,type:e.type,items:mk(e,"items")};if(e.type==="annotation")return{version:e.version,type:e.type,annots:mk(e,"annots"),parent:JSON.parse(e.parent)};throw new TypeError("Unrecognized query type: "+e.type)};var Qm=/^<!--merge:(\d+)-->/;function Xm(e){let t=Bn(e,o=>o.comment?.match(Qm)?.[1]??-1),r=t[-1]??[],n=new Map(r.map(o=>[o.itemID,[o]]));delete t[-1];for(let[o,i]of Object.entries(t)){let a=n.get(+o);i.forEach(s=>{s.comment&&=s.comment.replace(Qm,"")??null}),a?a.push(...i.sort((s,u)=>Bc(s.sortIndex,u.sortIndex))):i.forEach(s=>{n.set(s.itemID,[s])})}for(let[o,...i]of n.values())if(!(i.length<=0)){for(let a of i)a.comment&&(o.comment=(o.comment??"")+`
`+a.comment),a.text&&(o.text?o.text.endsWith("-")&&!o.text.endsWith("--")?o.text.substring(0,o.text.length-1)+a.text.trimStart():o.text.match(/[a-zA-Z\d]\s*$/)&&a.text.match(/^\s*[a-zA-Z\d]/)?o.text=o.text.trimEnd()+" "+a.text.trimStart():o.text=o.text.trimEnd()+a.text.trimStart():o.text=a.text);o.comment=o.comment?.replace(/\n+/,`
`).replace(/^\s+|\s+$/g,"")??null}return[...n.values()]}function eh(e){return e.map(t=>t[0])}function th(e,t){let r=e.map(([n,...o])=>{if(o.length===0)return[n.itemID,t[n.itemID]];let i=new Map(t[n.itemID].map(a=>[a.tagID,a]));return o.forEach(a=>{t[a.itemID].forEach(s=>{i.set(s.tagID,s)})}),[n.itemID,Array.from(i.values())]});return Object.fromEntries(r)}function gk(e,t){let r=Xm(e);return{annotations:eh(r),tags:th(r,t)}}var yk=require("url");var bk=require("obsidian");var pn=e=>e.plugin.settings.database.zoteroDataDir,hs=Symbol("proxied"),pl=e=>!!e[hs];var rh=new Set($t()("attachment","tags")),nh=(e,t,r)=>new Proxy({get page(){return Do(e.position.pageIndex,!0)??NaN},get backlink(){return fn(e)},get blockID(){let n=Mt(e),o=Do(e.position.pageIndex,!0);return typeof o=="number"&&(n+=`p${o}`),n},get commentMd(){return e.comment?(0,bk.htmlToMarkdown)(e.comment):""},get imgPath(){return nl(this)?ln(this,pn(r)):""},get imgUrl(){if(nl(this)){let n=ln(this,pn(r));return(0,yk.pathToFileURL)(n).href}else return""},get imgLink(){return Um(this,r.plugin)},get imgEmbed(){let n=Um(this,r.plugin);return n?`!${n}`:""},get fileLink(){return rl(pn(r),r.sourcePath,t.attachment,Do(e.position.pageIndex,!0))},get textBlock(){return e.text?`\`\`\`zotero-annot
> ${e.text} [zotero](${fn(e)})
\`\`\``:""},get colorName(){let n=e.color?.toUpperCase();return P6[n]||this.color},docItem:"not-loaded"},{get(n,o,i){if(o==="tags"){if(!t.tags[e.itemID])throw console.error(t,e.itemID),new Error("No tags loaded for item "+e.itemID);return t.tags[e.itemID]}if(o==="docItem"){if(n.docItem==="not-loaded")throw new Error("Doc Item not loaded for item "+e.itemID);return n.docItem}return rh.has(o)?Reflect.get(t,o,i):Reflect.get(e,o,i)??Reflect.get(n,o,i)},ownKeys(n){return[...Reflect.ownKeys(e),...rh,...Reflect.ownKeys(n)]},getOwnPropertyDescriptor(n,o){return Object.prototype.hasOwnProperty.call(e,o)?Reflect.getOwnPropertyDescriptor(e,o):rh.has(o)?Reflect.getOwnPropertyDescriptor(t,o):Reflect.getOwnPropertyDescriptor(n,o)}}),P6={"#FF6666":"red","#FF8C19":"orange","#F19837":"orange","#FFD400":"yellow","#999999":"gray","#AAAAAA":"gray","#5FB236":"green","#009980":"cyan","#2EA8E5":"blue","#576DD9":"navy","#A28AE5":"purple","#A6507B":"brown","#E56EEE":"magenta"};function oh(e,t){return!e||pl(e)?e:new Proxy({get filePath(){return Wm(pn(t),e)}},{get(r,n,o){return n===hs?!0:Reflect.get(e,n,o)??Reflect.get(r,n,o)},ownKeys(r){return[...Reflect.ownKeys(e),...Reflect.ownKeys(r)]},getOwnPropertyDescriptor(r,n){return Object.prototype.hasOwnProperty.call(e,n)?Reflect.getOwnPropertyDescriptor(e,n):Reflect.getOwnPropertyDescriptor(r,n)}})}var ih=e=>{let t={get fullname(){return is(e)??""},toString(){return this.fullname}};return new Proxy(t,{get(r,n,o){return Reflect.get(r,n,o)??Reflect.get(e,n,o)},ownKeys(r){return[...Reflect.ownKeys(e),...Reflect.ownKeys(r)]},getOwnPropertyDescriptor(r,n){return Object.prototype.hasOwnProperty.call(e,n)?Reflect.getOwnPropertyDescriptor(e,n):Reflect.getOwnPropertyDescriptor(r,n)}})};var ah=new Set($t()("attachment","allAttachments","tags")),sh=({creators:e,...t},r,n)=>{let o=e.map(i=>ih(i));return new Proxy({get backlink(){return fn(t)},get fileLink(){return rl(pn(n),n.sourcePath,r.attachment)},get authorsShort(){let i=this.authors;if(!i.length)return"";let a=i[0],s=a.lastName??a.fullname;return i.length===1?s:`${s} et al.`},annotations:"not-loaded",creators:o,get authors(){return o.filter(i=>i.creatorType==="author")}},{get(i,a,s){if(a==="tags"){if(!r.tags[t.itemID])throw new Error("No tags loaded for item "+t.itemID);return r.tags[t.itemID]}return ah.has(a)?r[a]:a==="annotations"?i.annotations:Reflect.get(t,a,s)??Reflect.get(i,a,s)},ownKeys(i){return[...Reflect.ownKeys(t),...ah,...Reflect.ownKeys(i)]},getOwnPropertyDescriptor(i,a){return Object.prototype.hasOwnProperty.call(t,a)?Reflect.getOwnPropertyDescriptor(t,a):ah.has(a)?Reflect.getOwnPropertyDescriptor(r,a):Reflect.getOwnPropertyDescriptor(i,a)}})};function vk(e){return!e||pl(e)?e:new Proxy({toString(){return e.name}},{get(t,r,n){return r===hs?!0:Reflect.get(t,r,n)??Reflect.get(e,r,n)},ownKeys(t){return[...Reflect.ownKeys(e),...Reflect.ownKeys(t)]},getOwnPropertyDescriptor(t,r){return Object.prototype.hasOwnProperty.call(e,r)?Reflect.getOwnPropertyDescriptor(e,r):Reflect.getOwnPropertyDescriptor(t,r)}})}function Qt(e,t,r){let n={...e,attachement:oh(e.attachment,t),allAttachments:e.allAttachments.map(s=>oh(s,t)),tags:Go(e.tags,s=>s.map(u=>vk(u)))},o=sh(e.docItem,n,t),i=e.annotations.map(s=>{let u=nh(s,n,t);return u.docItem=o,u}),a=r?i[e.annotations.findIndex(s=>s===r)]:void 0;return o.annotations=i,{annotation:a,annotations:i,docItem:o}}var ys=class{use=Oe.this;mergeAnnotTags(t){if(t.annotations.length===0)return t;let r=gk(t.annotations,t.tags);return t.annotations=r.annotations,t.tags={...t.tags,...r.tags},t}render(t,r){try{return ms.get(t)(r,fi)}catch(n){throw console.error("Error while rendering",t,n),n}}renderAnnot(t,r,n){n.merge!==!1&&(r=this.mergeAnnotTags(r));let o=Qt(r,n,t);return this.render("annotation",o.annotation)}renderNote(t,r,n){r.merge!==!1&&(t=this.mergeAnnotTags(t));let o=Qt(t,r),i=this.renderFrontmatter(o.docItem,n),a=this.render("note",o.docItem);return["",i,a].join(`---
`)}renderAnnots(t,r){r.merge!==!1&&(t=this.mergeAnnotTags(t));let n=Qt(t,r);return this.render("annots",n.annotations)}renderCitation(t,r=!1){return this.render(r?"altCitation":"citation",t)}renderFilename(t){return this.render("filename",t)}toFrontmatterRecord(t){let{fmFieldsMode:r,fmFieldsMapping:n,fmTagPrefix:o}=this.use(Ct),i={};i[us]=Mt(t,!0),t.attachment?.itemID&&(i[Qc]=[t.attachment.itemID]);for(let[a,s]of Object.entries(t)){if(r==="blacklist"&&MS.has(a))continue;a==="tags"&&(s=s.filter(l=>l.type===hr.manual).map(l=>(o??"")+l.name));let u=n[a];if(typeof u=="string")i[u]=s;else{if(r==="whitelist"&&u===void 0||r==="blacklist"&&u===!0)continue;i[a]=s}}return i}renderFrontmatter(t,r){try{let n=this.toFrontmatterRecord(t);return(0,gs.stringifyYaml)(r!==void 0?zn(n,r):n)}catch(n){$e("Failed to renderYaml",n,t,this.use(Ct).fmFieldsMode,this.use(Ct).fmFieldsMapping),new gs.Notice("Failed to renderYaml")}}async setFrontmatterTo(t,r){try{let n=this.toFrontmatterRecord(r);await app.fileManager.processFrontMatter(t,o=>Object.assign(o,n))}catch(n){$e("Failed to set frontmatter to file "+t.path,n,r,this.use(Ct).fmFieldsMode,this.use(Ct).fmFieldsMapping),new gs.Notice("Failed to set frontmatter to file "+t.path)}}};var RC=se(NC(),1);var Ts=require("obsidian");var iz="\\ufeff?",az=typeof process<"u"?process.platform:"",sz="^("+iz+"(= yaml =|---)$([\\s\\S]*?)^(?:\\2|\\.\\.\\.)\\s*$"+(az==="win32"?"\\r?":"")+"(?:\\n)?)",uz=new RegExp(sz,"m");function PC(e){e=e||"";let t=e.split(/(\r?\n)/);return t[0]&&/= yaml =|---/.test(t[0])?lz(e):{yaml:null,body:e,bodyBegin:1}}function cz(e,t){let r=1,n=t.indexOf(`
`),o=e.index+e[0].length;for(;n!==-1;){if(n>=o)return r;r++,n=t.indexOf(`
`,n+1)}return r}function lz(e){let t=uz.exec(e);if(!t)return{yaml:null,body:e,bodyBegin:1};let r=t[t.length-1].replace(/^\s+|\s+$/g,""),n=e.replace(t[0],""),o=cz(t,e);return{yaml:r,body:n,bodyBegin:o}}var Os=class extends ce{loader=this.use(gr);async onload(){this.registerEvent(app.vault.on("zotero:template-updated",this.onTemplateUpdated,this)),KS(LS)}onTemplateUpdated(t){this.complie(t)}complie(t){let r=this.loader.getTemplate(t),n=WS(r);try{let o=ll(n,{name:t}),i=o;switch(t){case"filename":i=(s,u)=>zS(o(s,u));break;case"annotation":i=(s,u)=>{let l=o(s,u),c=!0,{yaml:f,body:p}=PC(l);if(f)try{(0,Ts.parseYaml)(f).callout===!1&&(c=!1)}catch(h){new Ts.Notice(`Error parsing frontmatter, ${h}`)}if(!c)return p;let d=p.trim().split(`
`);return d.push(`^${s.blockID}`),d.map(h=>`> ${h}`).join(`
`)};break;default:break}let a=Array.prototype.group?i:(s,u)=>{(0,RC.default)();try{return i(s,u)}finally{delete Array.prototype.group}};ms.define(t,a),ne.trace(`Template "${t}" complie success`,n)}catch(o){$e("compling template: "+t,o),new Ts.Notice(`Error compling template "${t}", ${o}`)}}};var Ml=require("@codemirror/state"),MC=require("obsidian");var $C=Ml.Prec.highest(Ml.EditorState.languageData.of(e=>{let t=[],r=app.vault.getConfig("autoPairBrackets"),n=app.vault.getConfig("autoPairMarkdown");r&&t.push("(","[","{","'",'"'),n&&t.push("*","_","`","```");let o=e.field(MC.editorInfoField);return o?.file&&ui(o?.file)&&t.push("<","%"),[{closeBrackets:{brackets:t}}]}));var qC=require("obsidian");var LC=[{prefix:"=",name:"interpolate tag",description:"An interpolation outputs data into the template"},{prefix:" ",name:"evaluation tag",description:"An evaluate tag inserts its contents into the template function."}],$l=class extends qC.EditorSuggest{onTrigger(t,r,n){if(!n||!ui(n))return null;let o=r.getLine(t.line),a=o.substring(0,t.ch).match(/<%([ =]?)$/);if(!a)return null;let[s,u]=a,l=o.substring(t.ch).match(/^([\w ]*)%>/),c;if(!l)c={...t};else{let[,f]=l;if(u===" "&&f.length===1)return null;c={...t,ch:t.ch+f.length}}return{end:c,start:{ch:a.index+s.length-u.length,line:t.line},query:a[1]}}getSuggestions(t){return t.query?LC.filter(r=>r.prefix===t.query):LC}renderSuggestion({prefix:t,name:r,description:n},o){t===" "?o.createSpan({text:"No Prefix"}):o.createEl("code",{text:t}),o.createDiv({text:r}),o.createDiv({text:n})}selectSuggestion({prefix:t},r){if(!this.context)return;let{editor:n,end:o,start:i}=this.context,a=t===" "?"  ":"= it. ";n.transaction({changes:[{from:i,to:o,text:a}],selection:{from:{...i,ch:i.ch+a.length-1}}})}};var Ds=class extends ce{#e=null;plugin=this.use(be);#t(){this.plugin.registerEditorSuggest(new $l(this.plugin.app))}setEtaBracketPairing(t){let r=this.#e!==null;this.#e===null?(this.#e=[],this.plugin.registerEditorExtension(this.#e)):this.#e.length=0,t&&this.#e.push($C),r&&app.workspace.updateOptions()}onload(){this.#t()}};var ki=require("obsidian"),BC=()=>`Press ${ki.Platform.isMacOS?"\u2318 Cmd":"Ctrl"} + ${ki.Platform.isMacOS?"\u2325 Option":"Shift"} + I, then go to the "Console" tab to see the log.`;var gn=e=>e instanceof ki.TFile&&e.extension==="md",jC=e=>typeof e=="string"?e:e.path;var fg=e=>{let t=e?.frontmatter?.[us];return t&&typeof t=="string"&&Pb.test(t)?t:null},Yn=e=>{if(!e)return null;let t=typeof e=="string"?app.metadataCache.getCache(e):e instanceof lg.TFile?app.metadataCache.getFileCache(e):null;return fg(t)},Fs=e=>{if(!e)return null;let r=(typeof e=="string"?app.metadataCache.getCache(e):e instanceof lg.TFile?app.metadataCache.getFileCache(e):null)?.frontmatter?.[Qc];if(r&&Array.isArray(r)&&r.length>0){let n=[];for(let o of r)if(typeof o=="string"){let i=Number(o);if(!(i>0&&Number.isInteger(i)))return null;n.push(i)}else if(typeof o=="number"){if(!(o>0&&Number.isInteger(o)))return null;n.push(o)}return n}return null},Ns=({id:e})=>!!e&&Mb.test(e),Ps=e=>e.split("n").map(t=>{let[,r,,n]=t.split("p")[0].match(Rb);return Mt({key:r,groupID:n?+n:void 0},!0)});function Qn(e){let t=jC(e);return!!Yn(t)}var QN=require("url");C();var Ar=we({});C();var Be=we({});C();var zC=function(e){return typeof e=="function"};var fz=!1,WC=fz;function pz(e){WC&&(zC(e)||console.error("useMemoizedFn expected parameter is a function, got ".concat(typeof e)));var t=N(e);t.current=K(function(){return e},[e]);var r=N();return r.current||(r.current=function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];return t.current.apply(this,n)}),r.current}var Xt=pz;C();C();function dz(e,t){e===void 0&&(e=!1);var r=mr($(e),2),n=r[0],o=r[1],i=K(function(){var a=t===void 0?!e:t,s=function(){return o(function(f){return f===e?a:e})},u=function(f){return o(f)},l=function(){return o(e)},c=function(){return o(a)};return{toggle:s,set:u,setLeft:l,setRight:c}},[]);return[n,i]}var UC=dz;function Ll(e){e===void 0&&(e=!1);var t=mr(UC(!!e),2),r=t[0],n=t[1],o=n.toggle,i=n.set,a=K(function(){var s=function(){return i(!0)},u=function(){return i(!1)};return{toggle:o,set:function(l){return i(!!l)},setTrue:s,setFalse:u}},[]);return[r,a]}C();function mz(e){var t=function(){return new Set(e)},r=mr($(t),2),n=r[0],o=r[1],i=function(u){n.has(u)||o(function(l){var c=new Set(l);return c.add(u),c})},a=function(u){n.has(u)&&o(function(l){var c=new Set(l);return c.delete(u),c})},s=function(){return o(t())};return[n,{add:Xt(i),remove:Xt(a),reset:Xt(s)}]}var pg=mz;C();var VC={},HC=e=>{let t,r=new Set,n=(u,l)=>{let c=typeof u=="function"?u(t):u;if(!Object.is(c,t)){let f=t;t=l??typeof c!="object"?c:Object.assign({},t,c),r.forEach(p=>p(t,f))}},o=()=>t,s={setState:n,getState:o,subscribe:u=>(r.add(u),()=>r.delete(u)),destroy:()=>{(VC.env&&VC.env.MODE)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}};return t=e(n,o,s),s},Rs=e=>e?HC(e):HC;C();var tT=se(eT(),1);var{useSyncExternalStoreWithSelector:Fz}=tT.default;function mt(e,t=e.getState,r){let n=Fz(e.subscribe,e.getState,e.getServerState||e.getState,t,r);return Un(n),n}function Ii(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(let[n,o]of e)if(!Object.is(o,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(let n of e)if(!t.has(n))return!1;return!0}let r=Object.keys(e);if(r.length!==Object.keys(t).length)return!1;for(let n=0;n<r.length;n++)if(!Object.prototype.hasOwnProperty.call(t,r[n])||!Object.is(e[r[n]],t[r[n]]))return!1;return!0}C();function rT(){for(var e=0,t,r,n="";e<arguments.length;)(t=arguments[e++])&&(r=nT(t))&&(n&&(n+=" "),n+=r);return n}function nT(e){if(typeof e=="string")return e;for(var t,r="",n=0;n<e.length;n++)e[n]&&(t=nT(e[n]))&&(r&&(r+=" "),r+=t);return r}var hg="-";function aT(e){var t=Pz(e);function r(o){var i=o.split(hg);return i[0]===""&&i.length!==1&&i.shift(),sT(i,t)||Nz(o)}function n(o){return e.conflictingClassGroups[o]||[]}return{getClassGroupId:r,getConflictingClassGroupIds:n}}function sT(e,t){if(e.length===0)return t.classGroupId;var r=e[0],n=t.nextPart.get(r),o=n?sT(e.slice(1),n):void 0;if(o)return o;if(t.validators.length!==0){var i=e.join(hg);return t.validators.find(function(a){var s=a.validator;return s(i)})?.classGroupId}}var oT=/^\[(.+)\]$/;function Nz(e){if(oT.test(e)){var t=oT.exec(e)[1],r=t?.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}}function Pz(e){var t=e.theme,r=e.prefix,n={nextPart:new Map,validators:[]},o=Mz(Object.entries(e.classGroups),r);return o.forEach(function(i){var a=i[0],s=i[1];mg(s,n,a,t)}),n}function mg(e,t,r,n){e.forEach(function(o){if(typeof o=="string"){var i=o===""?t:iT(t,o);i.classGroupId=r;return}if(typeof o=="function"){if(Rz(o)){mg(o(n),t,r,n);return}t.validators.push({validator:o,classGroupId:r});return}Object.entries(o).forEach(function(a){var s=a[0],u=a[1];mg(u,iT(t,s),r,n)})})}function iT(e,t){var r=e;return t.split(hg).forEach(function(n){r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r}function Rz(e){return e.isThemeGetter}function Mz(e,t){return t?e.map(function(r){var n=r[0],o=r[1],i=o.map(function(a){return typeof a=="string"?t+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(function(s){var u=s[0],l=s[1];return[t+u,l]})):a});return[n,i]}):e}function uT(e){if(e<1)return{get:function(){},set:function(){}};var t=0,r=new Map,n=new Map;function o(i,a){r.set(i,a),t++,t>e&&(t=0,n=r,r=new Map)}return{get:function(a){var s=r.get(a);if(s!==void 0)return s;if((s=n.get(a))!==void 0)return o(a,s),s},set:function(a,s){r.has(a)?r.set(a,s):o(a,s)}}}var gg="!";function cT(e){var t=e.separator||":";return function(n){for(var o=0,i=[],a=0,s=0;s<n.length;s++){var u=n[s];o===0&&u===t[0]&&(t.length===1||n.slice(s,s+t.length)===t)&&(i.push(n.slice(a,s)),a=s+t.length),u==="["?o++:u==="]"&&o--}var l=i.length===0?n:n.substring(a),c=l.startsWith(gg),f=c?l.substring(1):l;return{modifiers:i,hasImportantModifier:c,baseClassName:f}}}function lT(e){if(e.length<=1)return e;var t=[],r=[];return e.forEach(function(n){var o=n[0]==="[";o?(t.push.apply(t,r.sort().concat([n])),r=[]):r.push(n)}),t.push.apply(t,r.sort()),t}function fT(e){return{cache:uT(e.cacheSize),splitModifiers:cT(e),...aT(e)}}var $z=/\s+/;function pT(e,t){var r=t.splitModifiers,n=t.getClassGroupId,o=t.getConflictingClassGroupIds,i=new Set;return e.trim().split($z).map(function(a){var s=r(a),u=s.modifiers,l=s.hasImportantModifier,c=s.baseClassName,f=n(c);if(!f)return{isTailwindClass:!1,originalClassName:a};var p=lT(u).join(":"),d=l?p+gg:p;return{isTailwindClass:!0,modifierId:d,classGroupId:f,originalClassName:a}}).reverse().filter(function(a){if(!a.isTailwindClass)return!0;var s=a.modifierId,u=a.classGroupId,l=s+u;return i.has(l)?!1:(i.add(l),o(u).forEach(function(c){return i.add(s+c)}),!0)}).reverse().map(function(a){return a.originalClassName}).join(" ")}function dT(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,o,i,a=s;function s(l){var c=t[0],f=t.slice(1),p=f.reduce(function(d,h){return h(d)},c());return n=fT(p),o=n.cache.get,i=n.cache.set,a=u,u(l)}function u(l){var c=o(l);if(c)return c;var f=pT(l,n);return i(l,f),f}return function(){return a(rT.apply(null,arguments))}}function ke(e){var t=function(n){return n[e]||[]};return t.isThemeGetter=!0,t}var hT=/^\[(?:([a-z-]+):)?(.+)\]$/i,Lz=/^\d+\/\d+$/,qz=new Set(["px","full","screen"]),Bz=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,jz=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh)/,zz=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function Vt(e){return _i(e)||qz.has(e)||Lz.test(e)||yn(e)}function yn(e){return Xn(e,"length",Wz)}function gT(e){return Xn(e,"size",wT)}function yT(e){return Xn(e,"position",wT)}function bT(e){return Xn(e,"url",Uz)}function Bl(e){return Xn(e,"number",_i)}function _i(e){return!Number.isNaN(Number(e))}function Ci(e){return mT(e)||Xn(e,"number",mT)}function Fe(e){return hT.test(e)}function Ti(){return!0}function jr(e){return Bz.test(e)}function vT(e){return Xn(e,"",Hz)}function Xn(e,t,r){var n=hT.exec(e);return n?n[1]?n[1]===t:r(n[2]):!1}function Wz(e){return jz.test(e)}function wT(){return!1}function Uz(e){return e.startsWith("url(")}function mT(e){return Number.isInteger(Number(e))}function Hz(e){return zz.test(e)}function xT(){var e=ke("colors"),t=ke("spacing"),r=ke("blur"),n=ke("brightness"),o=ke("borderColor"),i=ke("borderRadius"),a=ke("borderSpacing"),s=ke("borderWidth"),u=ke("contrast"),l=ke("grayscale"),c=ke("hueRotate"),f=ke("invert"),p=ke("gap"),d=ke("gradientColorStops"),h=ke("inset"),g=ke("margin"),y=ke("opacity"),w=ke("padding"),x=ke("saturate"),S=ke("scale"),O=ke("sepia"),F=ke("skew"),D=ke("space"),P=ke("translate"),R=function(){return["auto","contain","none"]},E=function(){return["auto","hidden","clip","visible","scroll"]},T=function(){return["auto",t]},v=function(){return["",Vt]},A=function(){return["auto",_i,Fe]},I=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},j=function(){return["solid","dashed","dotted","double","none"]},z=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},H=function(){return["start","end","center","between","around","evenly"]},G=function(){return["","0",Fe]},re=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},ie=function(){return[_i,Bl]},_=function(){return[_i,Fe]};return{cacheSize:500,theme:{colors:[Ti],spacing:[Vt],blur:["none","",jr,yn],brightness:ie(),borderColor:[e],borderRadius:["none","","full",jr,yn],borderSpacing:[t],borderWidth:v(),contrast:ie(),grayscale:G(),hueRotate:_(),invert:G(),gap:[t],gradientColorStops:[e],inset:T(),margin:T(),opacity:ie(),padding:[t],saturate:ie(),scale:ie(),sepia:G(),skew:_(),space:[t],translate:[t]},classGroups:{aspect:[{aspect:["auto","square","video",Fe]}],container:["container"],columns:[{columns:[jr]}],"break-after":[{"break-after":re()}],"break-before":[{"break-before":re()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(I(),[Fe])}],overflow:[{overflow:E()}],"overflow-x":[{"overflow-x":E()}],"overflow-y":[{"overflow-y":E()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[h]}],"inset-x":[{"inset-x":[h]}],"inset-y":[{"inset-y":[h]}],top:[{top:[h]}],right:[{right:[h]}],bottom:[{bottom:[h]}],left:[{left:[h]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ci]}],basis:[{basis:[t]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Fe]}],grow:[{grow:G()}],shrink:[{shrink:G()}],order:[{order:["first","last","none",Ci]}],"grid-cols":[{"grid-cols":[Ti]}],"col-start-end":[{col:["auto",{span:[Ci]},Fe]}],"col-start":[{"col-start":A()}],"col-end":[{"col-end":A()}],"grid-rows":[{"grid-rows":[Ti]}],"row-start-end":[{row:["auto",{span:[Ci]},Fe]}],"row-start":[{"row-start":A()}],"row-end":[{"row-end":A()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Fe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Fe]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:H()}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:[].concat(H(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(H(),["baseline","stretch"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[D]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[D]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",t]}],"min-w":[{"min-w":["min","max","fit",Vt]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[jr]},jr,yn]}],h:[{h:[t,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",Vt]}],"max-h":[{"max-h":[t,"min","max","fit"]}],"font-size":[{text:["base",jr,yn]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Bl]}],"font-family":[{font:[Ti]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",yn]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Vt]}],"list-style-type":[{list:["none","disc","decimal",Fe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(j(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",Vt]}],"underline-offset":[{"underline-offset":["auto",Vt]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:[t]}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",yn]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap"]}],break:[{break:["normal","words","all","keep"]}],content:[{content:["none",Fe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(I(),[yT])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",gT]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},bT]}],"bg-color":[{bg:[e]}],"gradient-from":[{from:[d]}],"gradient-via":[{via:[d]}],"gradient-to":[{to:[d]}],rounded:[{rounded:[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[s]}],"border-w-x":[{"border-x":[s]}],"border-w-y":[{"border-y":[s]}],"border-w-t":[{"border-t":[s]}],"border-w-r":[{"border-r":[s]}],"border-w-b":[{"border-b":[s]}],"border-w-l":[{"border-l":[s]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[].concat(j(),["hidden"])}],"divide-x":[{"divide-x":[s]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[s]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:j()}],"border-color":[{border:[o]}],"border-color-x":[{"border-x":[o]}],"border-color-y":[{"border-y":[o]}],"border-color-t":[{"border-t":[o]}],"border-color-r":[{"border-r":[o]}],"border-color-b":[{"border-b":[o]}],"border-color-l":[{"border-l":[o]}],"divide-color":[{divide:[o]}],"outline-style":[{outline:[""].concat(j())}],"outline-offset":[{"outline-offset":[Vt]}],"outline-w":[{outline:[Vt]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:v()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[Vt]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",jr,vT]}],"shadow-color":[{shadow:[Ti]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":z()}],"bg-blend":[{"bg-blend":z()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[u]}],"drop-shadow":[{"drop-shadow":["","none",jr,Fe]}],grayscale:[{grayscale:[l]}],"hue-rotate":[{"hue-rotate":[c]}],invert:[{invert:[f]}],saturate:[{saturate:[x]}],sepia:[{sepia:[O]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[u]}],"backdrop-grayscale":[{"backdrop-grayscale":[l]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[c]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[x]}],"backdrop-sepia":[{"backdrop-sepia":[O]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Fe]}],duration:[{duration:_()}],ease:[{ease:["linear","in","out","in-out",Fe]}],delay:[{delay:_()}],animate:[{animate:["none","spin","ping","pulse","bounce",Fe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[S]}],"scale-x":[{"scale-x":[S]}],"scale-y":[{"scale-y":[S]}],rotate:[{rotate:[Ci,Fe]}],"translate-x":[{"translate-x":[P]}],"translate-y":[{"translate-y":[P]}],"skew-x":[{"skew-x":[F]}],"skew-y":[{"skew-y":[F]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Fe]}],accent:[{accent:["auto",e]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Fe]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":[t]}],"scroll-mx":[{"scroll-mx":[t]}],"scroll-my":[{"scroll-my":[t]}],"scroll-mt":[{"scroll-mt":[t]}],"scroll-mr":[{"scroll-mr":[t]}],"scroll-mb":[{"scroll-mb":[t]}],"scroll-ml":[{"scroll-ml":[t]}],"scroll-p":[{"scroll-p":[t]}],"scroll-px":[{"scroll-px":[t]}],"scroll-py":[{"scroll-py":[t]}],"scroll-pt":[{"scroll-pt":[t]}],"scroll-pr":[{"scroll-pr":[t]}],"scroll-pb":[{"scroll-pb":[t]}],"scroll-pl":[{"scroll-pl":[t]}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Fe]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Vt,Bl]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-t","rounded-r","rounded-b","rounded-l","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]}}}var yg=dT(xT);function ae(...e){return yg(_m(e))}C();C();function jl(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var zl=(e,t)=>{let{setIcon:r}=V(Ar),n=N(null);return J(i=>{n.current&&Vz.call(n.current),i&&(r(i,e),t&&i.firstElementChild instanceof SVGSVGElement&&i.firstElementChild.style.setProperty("--icon-size",typeof t=="number"||!Number.isNaN(Number(t))?`${t}px`:t)),n.current=i},[e,t,r])};function Vz(){for(;this.lastChild;)this.removeChild(this.lastChild)}var zr=Ue(te(function({icon:t,size:r,className:n,...o},i){let a=zl(t,r),s=jl(a,i);return m("div",{ref:s,className:ae("zt-icon",n),...o})}));C();var Wr=te(function({onClick:t,onKeyDown:r,className:n,...o},i){return m(zr,{onClick:t,onKeyDown:r??t,className:ae("clickable-icon",n),...o,ref:i,role:"button",tabIndex:0})});C();C();var ET=Ue(te(function({icon:t,...r},n){let o=zl(t);return m("button",{ref:jl(o,n),...r})}));var eo=te(function({className:t,active:r=!1,...n},o){return m(ET,{...n,ref:o,className:ae("clickable-icon",{"is-active":r},t)})});function Ms(e){return m(Wr,{size:16,icon:"info","aria-label":"Show details",...e})}function bn(){let e=arguments[0];for(let t=1,r=arguments.length;t<r;t++)e=arguments[t](e);return e}C();C();var ST=Ue(function({content:t,className:r,...n}){let{sanitize:o,renderMarkdown:i}=V(Ar),a=K(()=>o(t).replace(/<\/?b>/g,"**").replace(/<\/?i>/g,"*"),[t,o]);return m("div",{className:ae("annot-comment select-text overflow-x-auto break-words px-2 py-1",r),...n,children:i(a)})});C();var kT=te(function({className:t,...r},n){return m("div",{ref:n,className:ae("annot-excerpt",t),...r})});var AT=se(Qe(),1);C();function bg({text:e,pageLabel:t,className:r,collapsed:n=!1,...o}){let i=e??`Area Excerpt for Page ${t??"?"}`;return m("img",{className:ae("w-full",n?"max-h-20 object-cover object-left-top":"object-scale-down",r),alt:i,...o})}var IT=Ue(function({type:t,text:r,pageLabel:n,imgSrc:o,collapsed:i}){switch(t){case Se.highlight:return m("p",{className:"select-text",children:r});case Se.image:if(!o)throw new Error("imgSrc is required for image annotation");return m(bg,{collapsed:i,src:o,pageLabel:n,text:r});case Se.note:case Se.ink:return m(Y,{children:["Unsupported Type: ",Se[t]]});default:(0,AT.assertNever)(t)}});function vg({checkbox:e,drag:t,buttons:r,onMoreOptions:n,className:o,children:i,onContextMenu:a,...s}){return m("div",{className:ae("annot-header flex cursor-context-menu items-center gap-1",o),onContextMenu:a??n,...s,children:[e,m("div",{className:"annot-header-drag-container flex flex-row items-center gap-1",children:t}),m("div",{className:"annot-header-buttons-container flex flex-row items-center gap-1 opacity-0 transition-opacity hover:opacity-100",children:r}),m("div",{className:"annot-header-space flex-1"}),i]})}var Gz=typeof global=="object"&&global&&global.Object===Object&&global,_T=Gz;var Kz=typeof self=="object"&&self&&self.Object===Object&&self,Jz=_T||Kz||Function("return this")(),CT=Jz;var Zz=CT.Symbol,Ur=Zz;var TT=Object.prototype,Yz=TT.hasOwnProperty,Qz=TT.toString,$s=Ur?Ur.toStringTag:void 0;function Xz(e){var t=Yz.call(e,$s),r=e[$s];try{e[$s]=void 0;var n=!0}catch{}var o=Qz.call(e);return n&&(t?e[$s]=r:delete e[$s]),o}var OT=Xz;var e7=Object.prototype,t7=e7.toString;function r7(e){return t7.call(e)}var DT=r7;var n7="[object Null]",o7="[object Undefined]",FT=Ur?Ur.toStringTag:void 0;function i7(e){return e==null?e===void 0?o7:n7:FT&&FT in Object(e)?OT(e):DT(e)}var NT=i7;function a7(e){return e!=null&&typeof e=="object"}var PT=a7;var s7="[object Symbol]";function u7(e){return typeof e=="symbol"||PT(e)&&NT(e)==s7}var RT=u7;function c7(e,t){for(var r=-1,n=e==null?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}var MT=c7;var l7=Array.isArray,$T=l7;var f7=1/0,LT=Ur?Ur.prototype:void 0,qT=LT?LT.toString:void 0;function BT(e){if(typeof e=="string")return e;if($T(e))return MT(e,BT)+"";if(RT(e))return qT?qT.call(e):"";var t=e+"";return t=="0"&&1/e==-f7?"-0":t}var jT=BT;function p7(e){return e==null?"":jT(e)}var Oi=p7;function d7(e,t,r){var n=-1,o=e.length;t<0&&(t=-t>o?0:o+t),r=r>o?o:r,r<0&&(r+=o),o=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(o);++n<o;)i[n]=e[n+t];return i}var zT=d7;function m7(e,t,r){var n=e.length;return r=r===void 0?n:r,!t&&r>=n?e:zT(e,t,r)}var WT=m7;var h7="\\ud800-\\udfff",g7="\\u0300-\\u036f",y7="\\ufe20-\\ufe2f",b7="\\u20d0-\\u20ff",v7=g7+y7+b7,w7="\\ufe0e\\ufe0f",x7="\\u200d",E7=RegExp("["+x7+h7+v7+w7+"]");function S7(e){return E7.test(e)}var Wl=S7;function k7(e){return e.split("")}var UT=k7;var HT="\\ud800-\\udfff",A7="\\u0300-\\u036f",I7="\\ufe20-\\ufe2f",_7="\\u20d0-\\u20ff",C7=A7+I7+_7,T7="\\ufe0e\\ufe0f",O7="["+HT+"]",wg="["+C7+"]",xg="\\ud83c[\\udffb-\\udfff]",D7="(?:"+wg+"|"+xg+")",VT="[^"+HT+"]",GT="(?:\\ud83c[\\udde6-\\uddff]){2}",KT="[\\ud800-\\udbff][\\udc00-\\udfff]",F7="\\u200d",JT=D7+"?",ZT="["+T7+"]?",N7="(?:"+F7+"(?:"+[VT,GT,KT].join("|")+")"+ZT+JT+")*",P7=ZT+JT+N7,R7="(?:"+[VT+wg+"?",wg,GT,KT,O7].join("|")+")",M7=RegExp(xg+"(?="+xg+")|"+R7+P7,"g");function $7(e){return e.match(M7)||[]}var YT=$7;function L7(e){return Wl(e)?YT(e):UT(e)}var QT=L7;function q7(e){return function(t){t=Oi(t);var r=Wl(t)?QT(t):void 0,n=r?r[0]:t.charAt(0),o=r?WT(r,1).join(""):t.slice(1);return n[e]()+o}}var XT=q7;var B7=XT("toUpperCase"),eO=B7;function j7(e,t,r,n){var o=-1,i=e==null?0:e.length;for(n&&i&&(r=e[++o]);++o<i;)r=t(r,e[o],o,e);return r}var tO=j7;function z7(e){return function(t){return e?.[t]}}var rO=z7;var W7={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},U7=rO(W7),nO=U7;var H7=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,V7="\\u0300-\\u036f",G7="\\ufe20-\\ufe2f",K7="\\u20d0-\\u20ff",J7=V7+G7+K7,Z7="["+J7+"]",Y7=RegExp(Z7,"g");function Q7(e){return e=Oi(e),e&&e.replace(H7,nO).replace(Y7,"")}var oO=Q7;var X7=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function eW(e){return e.match(X7)||[]}var iO=eW;var tW=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function rW(e){return tW.test(e)}var aO=rW;var fO="\\ud800-\\udfff",nW="\\u0300-\\u036f",oW="\\ufe20-\\ufe2f",iW="\\u20d0-\\u20ff",aW=nW+oW+iW,pO="\\u2700-\\u27bf",dO="a-z\\xdf-\\xf6\\xf8-\\xff",sW="\\xac\\xb1\\xd7\\xf7",uW="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",cW="\\u2000-\\u206f",lW=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",mO="A-Z\\xc0-\\xd6\\xd8-\\xde",fW="\\ufe0e\\ufe0f",hO=sW+uW+cW+lW,gO="['\u2019]",sO="["+hO+"]",pW="["+aW+"]",yO="\\d+",dW="["+pO+"]",bO="["+dO+"]",vO="[^"+fO+hO+yO+pO+dO+mO+"]",mW="\\ud83c[\\udffb-\\udfff]",hW="(?:"+pW+"|"+mW+")",gW="[^"+fO+"]",wO="(?:\\ud83c[\\udde6-\\uddff]){2}",xO="[\\ud800-\\udbff][\\udc00-\\udfff]",Di="["+mO+"]",yW="\\u200d",uO="(?:"+bO+"|"+vO+")",bW="(?:"+Di+"|"+vO+")",cO="(?:"+gO+"(?:d|ll|m|re|s|t|ve))?",lO="(?:"+gO+"(?:D|LL|M|RE|S|T|VE))?",EO=hW+"?",SO="["+fW+"]?",vW="(?:"+yW+"(?:"+[gW,wO,xO].join("|")+")"+SO+EO+")*",wW="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",xW="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",EW=SO+EO+vW,SW="(?:"+[dW,wO,xO].join("|")+")"+EW,kW=RegExp([Di+"?"+bO+"+"+cO+"(?="+[sO,Di,"$"].join("|")+")",bW+"+"+lO+"(?="+[sO,Di+uO,"$"].join("|")+")",Di+"?"+uO+"+"+cO,Di+"+"+lO,xW,wW,yO,SW].join("|"),"g");function AW(e){return e.match(kW)||[]}var kO=AW;function IW(e,t,r){return e=Oi(e),t=r?void 0:t,t===void 0?aO(e)?kO(e):iO(e):e.match(t)||[]}var AO=IW;var _W="['\u2019]",CW=RegExp(_W,"g");function TW(e){return function(t){return tO(AO(oO(t).replace(CW,"")),e,"")}}var IO=TW;var OW=IO(function(e,t,r){return e+(r?" ":"")+eO(t)}),Eg=OW;C();var _O=Ue(function({icon:t,color:r,type:n,className:o,...i}){let a=Eg(Se[n]);return m(zr,{icon:t,style:{color:r??void 0},className:ae(o,"annot-type-icon","flex h-auto cursor-grab items-center justify-center opacity-[var(--icon-opacity)]"),"aria-label":a,"aria-label-delay":"500",...i})});var CO=se(Qe(),1),TO=e=>{switch(e){case Se.highlight:return"align-left";case Se.image:return"frame";case Se.note:case Se.ink:return"file-question";default:(0,CO.assertNever)(e)}};C();var OO=e=>{let{annotRenderer:t,store:r}=V(Be),n=mt(r,t.storeSelector,Ii);return t.get(e,n)};C();var DO=e=>{let{getImgSrc:t}=V(Be);return K(()=>t(e),[e,t])};function Sg({className:e,...t}){return m(Wr,{icon:"more-vertical",className:ae("annot-header-more-options",e),"aria-label":"More Options",size:"0.9rem","aria-label-delay":"50",...t})}C();var FO=Ue(function({pageLabel:t,backlink:r,className:n,...o}){let i=t?`Page ${t}`:"";return r?m("a",{className:ae("annot-page","external-link","bg-[length:12px] bg-[center_right_3px] pr-[18px] text-xs",n),href:r,"aria-label":`Open Annotation In Zotero at Page ${t}`,"aria-label-delay":"500",...o,children:i}):m("span",{className:ae("annot-page",n),children:i})});C();function kg({tags:e}){return e.length===0?null:m("div",{className:"annot-tags-container",children:e.map(t=>m(DW,{...t},t.tagID))})}var DW=Ue(function({name:t}){return m("a",{className:ae("tag","annot-tag"),children:t})});function Ag({collapsed:e=!1,annotation:t,checkbox:r,tags:n,className:o,...i}){let a=N(null),{onMoreOptions:s,onDragStart:u,onShowDetails:l}=V(Be),c=Xd.selectKeys(t,["type","text","pageLabel"]),f=OO(t),p=Xt(h=>s(h,t)),d=Xt(()=>l("annot",t.itemID));return m("div",{className:ae("annot-preview","bg-primary shadow-border col-span-1 flex flex-col divide-y overflow-auto rounded-sm transition-colors",o),"data-id":t.itemID,...i,children:[m(vg,{className:"bg-primary-alt py-1 pl-2 pr-1",checkbox:r,drag:m(_O,{type:t.type,color:t.color,icon:TO(t.type),draggable:f!==null,onDragStart:Xt(h=>f&&u(h,f,a.current)),size:16}),buttons:m(Y,{children:[m(Ms,{className:"p-0.5",size:14,onClick:d}),m(Sg,{className:"p-0",onClick:p})]}),onMoreOptions:p,children:m(FO,{pageLabel:t.pageLabel,backlink:fn(t)})}),m(kT,{ref:a,className:"px-2 py-1",children:m("blockquote",{className:ae("border-l-blockquote pl-2 leading-tight",{"line-clamp-3":e}),style:{borderColor:t.color??"var(--interactive-accent)"},children:m(IT,{...c,collapsed:e,imgSrc:DO(t)})})}),t.comment&&m(ST,{content:t.comment}),n&&m(kg,{tags:n})]})}function Ig({selectable:e=!1,collapsed:t,annotations:r,getTags:n}){let[o,{add:i,remove:a}]=pg();return m("div",{role:"list",className:"@md:grid-cols-2 @md:gap-3 @3xl:grid-cols-4 grid grid-cols-1 gap-2",children:r.map(s=>m(Ag,{checkbox:e&&m(FW,{checked:o.has(s.itemID),onChange:u=>u?i(s.itemID):a(s.itemID)}),collapsed:t,role:"listitem",annotation:s,tags:n(s.itemID)},s.itemID))})}function FW({checked:e,onChange:t}){return m("div",{className:"flex h-5 items-center",children:m("input",{type:"checkbox",className:"m-0 h-4 w-4",checked:e,onChange:r=>t(r.target.checked)})})}C();var NW=()=>mt(V(Be).store,e=>({attachments:e.allAttachments,onChange:e.setActiveAtch,value:e.attachmentID}),Ii);function _g(){let{attachments:e,onChange:t,value:r}=NW();return e?e.length===1?null:e.length<=0?m("span",{className:"atch-select-empty",children:"No attachments available"}):m("select",{className:"atch-select",onChange:n=>t(parseInt(n.target.value,10)),value:r??void 0,children:e.map(({itemID:n,path:o,annotCount:i})=>m("option",{value:n,children:["(",i,") ",o?.replace(/^storage:/,"")]},n))}):m(Y,{children:"Loading"})}function Cg({isCollapsed:e,...t}){return m(eo,{...t,icon:e?"chevrons-up-down":"chevrons-down-up","aria-label":e?"Expand":"Collapse"})}C();function Ul(e){let{store:t,onSetFollow:r}=V(Be),n=mt(t,a=>a.follow),o=n===null?"Not Following":n==="ob-note"?"Active Literature Note":"Active Literature in Zotero Reader";return m(Y,{children:[m(eo,{...e,onClick:r,icon:n===null?"unlink":"link","aria-label":"Choose Follow Mode"+(n===null?" (Currently linked with literature)":""),"aria-label-delay":"50"}),n!==null&&m("span",{className:"ml-1","aria-label":`Following ${o}`,children:n==="ob-note"?"ob":"zt"})]})}function Hl({children:e,buttons:t}){return m("div",{className:"nav-header",children:[m("div",{className:"nav-buttons-container",children:t}),e]})}function Tg(e){return m(eo,{...e,icon:"refresh-ccw","aria-label":"Refresh Annotation List","aria-label-delay":"50"})}var PW=()=>{let{registerDbUpdate:e,store:t}=V(Be),r=mt(t,n=>n.refresh);L(()=>e(r),[e,r])};function Ls(){PW();let{store:e}=V(Be),t=mt(e,r=>r.doc);return t?m(RW,{docItem:t.docItem}):m(Y,{children:[m(Hl,{buttons:m(Ul,{})}),m("div",{className:"pane-empty p-2",children:"Active file not literature note"})]})}function RW({docItem:e}){let{refreshConn:t,onShowDetails:r}=V(Be),[n,{toggle:o}]=Ll(!1),i=MW();return m(Y,{children:[m(Hl,{buttons:m(Y,{children:[m(Ms,{className:"nav-action-button",onClick:Xt(()=>r("doc-item",e.itemID))}),m(Cg,{className:"nav-action-button",isCollapsed:n,onClick:o}),m(Tg,{className:"nav-action-button",onClick:t}),m(Ul,{})]}),children:m(_g,{})}),m("div",{className:ae("annots-container @container","overflow-auto px-3 pt-1 pb-8 text-xs"),children:i?m(Ig,{collapsed:n,...i}):m(Y,{children:"Loading"})})]})}var MW=()=>mt(V(Be).store,e=>!e.doc||!e.annotations||!e.attachment?null:{annotations:e.annotations,getTags:t=>e.tags[t]??[]},Ii);C();function NO({name:e,onAdd:t}){return m("div",{className:"bg-secondary text-txt-muted sticky top-0 z-10 flex flex-row items-center border-y py-1 pl-4 pr-2 text-base font-semibold",children:[m("h3",{className:"flex-1",children:e}),m(Wr,{icon:"plus",onClick:t})]})}function le(){return le=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},le.apply(this,arguments)}function Og(e,t){if(e==null)return{};var r={},n=Object.keys(e),o,i;for(i=0;i<n.length;i++)o=n[i],!(t.indexOf(o)>=0)&&(r[o]=e[o]);return r}function Vl(e,t=166){let r;function n(...o){let i=()=>{e.apply(this,o)};clearTimeout(r),r=setTimeout(i,t)}return n.clear=()=>{clearTimeout(r)},n}function Dg(e){return e&&e.ownerDocument||document}function qs(e){return Dg(e).defaultView||window}function Fg(e,t){typeof e=="function"?e(t):e&&(e.current=t)}C();var $W=typeof window<"u"?et:L,Ng=$W;C();function Gl(...e){return K(()=>e.every(t=>t==null)?null:t=>{e.forEach(r=>{Fg(r,t)})},e)}C();C();var LW=["onChange","maxRows","minRows","style","value"];function Kl(e){return parseInt(e,10)||0}var qW={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function PO(e){return e==null||Object.keys(e).length===0||e.outerHeightStyle===0&&!e.overflow}var BW=te(function(t,r){let{onChange:n,maxRows:o,minRows:i=1,style:a,value:s}=t,u=Og(t,LW),{current:l}=N(s!=null),c=N(null),f=Gl(r,c),p=N(null),d=N(0),[h,g]=$({outerHeightStyle:0}),y=J(()=>{let F=c.current,P=qs(F).getComputedStyle(F);if(P.width==="0px")return{outerHeightStyle:0};let R=p.current;R.style.width=P.width,R.value=F.value||t.placeholder||"x",R.value.slice(-1)===`
`&&(R.value+=" ");let E=P.boxSizing,T=Kl(P.paddingBottom)+Kl(P.paddingTop),v=Kl(P.borderBottomWidth)+Kl(P.borderTopWidth),A=R.scrollHeight;R.value="x";let I=R.scrollHeight,j=A;i&&(j=Math.max(Number(i)*I,j)),o&&(j=Math.min(Number(o)*I,j)),j=Math.max(j,I);let z=j+(E==="border-box"?T+v:0),H=Math.abs(j-A)<=1;return{outerHeightStyle:z,overflow:H}},[o,i,t.placeholder]),w=(F,D)=>{let{outerHeightStyle:P,overflow:R}=D;return d.current<20&&(P>0&&Math.abs((F.outerHeightStyle||0)-P)>1||F.overflow!==R)?(d.current+=1,{overflow:R,outerHeightStyle:P}):F},x=J(()=>{let F=y();PO(F)||g(D=>w(D,F))},[y]),S=()=>{let F=y();PO(F)||pr(()=>{g(D=>w(D,F))})};return L(()=>{let F=Vl(()=>{d.current=0,c.current&&S()}),D,P=c.current,R=qs(P);return R.addEventListener("resize",F),typeof ResizeObserver<"u"&&(D=new ResizeObserver(F),D.observe(P)),()=>{F.clear(),R.removeEventListener("resize",F),D&&D.disconnect()}}),Ng(()=>{x()}),L(()=>{d.current=0},[s]),m(Y,{children:[m("textarea",le({value:s,onChange:F=>{d.current=0,l||x(),n&&n(F)},ref:f,rows:i,style:le({height:h.outerHeightStyle,overflow:h.overflow?"hidden":void 0},a)},u)),m("textarea",{"aria-hidden":!0,className:t.className,readOnly:!0,ref:p,tabIndex:-1,style:le({},qW.shadow,a,{padding:0})})]})}),to=BW;C();function RO({value:e,onChange:t,onDelete:r,editing:n,onBlur:o,onFocus:i}){let a=N(null);return L(()=>{if(!(n&&a.current))return;let s=a.current;s.scrollIntoViewIfNeeded?s.scrollIntoViewIfNeeded():(s.getBoundingClientRect().bottom>window.innerHeight&&s.scrollIntoView(!1),s.getBoundingClientRect().top<0&&s.scrollIntoView()),s.select()},[n]),m("li",{className:"bg-primary",children:m("div",{className:"hover:bg-mod-hover focus-within:ring-mod-border-focus relative flex items-stretch space-x-1 py-0.5 pl-4 pr-2 focus-within:ring-2 focus-within:ring-inset",children:[n?m("div",{className:"flex min-w-0 flex-1 items-center",children:m(to,{ref:a,className:ae("text-txt-normal w-full bg-transparent text-sm font-medium","min-w-0 border-none p-0 ring-0 focus:border-none focus:ring-0 "),value:e,onChange:s=>t(s.target.value),onBlur:()=>{o(),n&&!e&&r()},onKeyUp:s=>{n&&s.key==="Escape"&&(s.target.blur(),o())}})}):m("div",{role:"textbox",tabIndex:0,onClick:i,onKeyUp:s=>s.key==="Enter"&&i(),className:"flex min-w-0 flex-1 items-center",children:m("p",{className:"text-txt-normal min-w-0 break-words bg-transparent text-sm font-medium",children:e})}),m("div",{className:"flex shrink-0 flex-col items-start opacity-0 transition-opacity hover:opacity-100",children:m(Wr,{icon:"trash",onClick:r})})]})})}function Pg({data:e,onAdd:t,onDelete:r,onChange:n,onSave:o}){let[i,a]=$(null),s=N(null);return m(Y,{children:m("nav",{className:"flex-1 overflow-y-auto",children:Object.entries(e).map(([u,l])=>m("div",{className:"relative",children:[m(NO,{name:u,onAdd:()=>{t(u),s.current=e,a({field:u,index:l.length})}}),m("ul",{className:" relative z-0 m-0 list-none divide-y p-0",children:l.map((c,f)=>{let p=!!i&&i.field===u&&i.index===f;return m(RO,{value:c,editing:p,onFocus:()=>{p||(s.current=e,a({field:u,index:f}))},onBlur:()=>{p&&(a(null),o&&s.current!==e&&o(u,f),s.current=null)},onChange:d=>{n(d,u,f)},onDelete:()=>{r(u,f)}},f)})})]},u))})})}function Rg({onClick:e}){return m("div",{className:"m-8 justify-self-center text-center",children:[m(zr,{icon:"file-warning",size:"3rem"}),m("h3",{className:"text-txt-normal mt-2 text-base font-medium",children:"Convert Existing Fields"}),m("p",{className:"text-txt-muted mt-1 text-sm",children:"Normalize your existing fields to work with note fields viewer."}),m("div",{className:"mt-6",children:m("button",{className:"mod-cta",onClick:e,children:"Convert"})})]})}C();C();C();function jW(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function Mg(...e){return t=>e.forEach(r=>jW(r,t))}function Jl(...e){return J(Mg(...e),e)}C();function MO(e,t=[]){let r=[];function n(i,a){let s=we(a),u=r.length;r=[...r,a];function l(f){let{scope:p,children:d,...h}=f,g=p?.[e][u]||s,y=K(()=>h,Object.values(h));return Q(g.Provider,{value:y},d)}function c(f,p){let d=p?.[e][u]||s,h=V(d);if(h)return h;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${i}\``)}return l.displayName=i+"Provider",[l,c]}let o=()=>{let i=r.map(a=>we(a));return function(s){let u=s?.[e]||i;return K(()=>({[`__scope${e}`]:{...s,[e]:u}}),[s,u])}};return o.scopeName=e,[n,zW(o,...t)]}function zW(...e){let t=e[0];if(e.length===1)return t;let r=()=>{let n=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(i){let a=n.reduce((s,{useScope:u,scopeName:l})=>{let f=u(i)[`__scope${l}`];return{...s,...f}},{});return K(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return r.scopeName=t.scopeName,r}function rt(e,t,{checkForDefaultPrevented:r=!0}={}){return function(o){if(e?.(o),r===!1||!o.defaultPrevented)return t?.(o)}}C();C();function $g(e){let t=N(e);return L(()=>{t.current=e}),K(()=>(...r)=>{var n;return(n=t.current)===null||n===void 0?void 0:n.call(t,...r)},[])}function $O({prop:e,defaultProp:t,onChange:r=()=>{}}){let[n,o]=WW({defaultProp:t,onChange:r}),i=e!==void 0,a=i?e:n,s=$g(r),u=J(l=>{if(i){let f=typeof l=="function"?l(e):l;f!==e&&s(f)}else o(l)},[i,e,o,s]);return[a,u]}function WW({defaultProp:e,onChange:t}){let r=$(e),[n]=r,o=N(n),i=$g(t);return L(()=>{o.current!==n&&(i(n),o.current=n)},[n,o,i]),r}C();function LO(e){let t=N({value:e,previous:e});return K(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}C();C();var Bs=globalThis?.document?et:()=>{};function qO(e){let[t,r]=$(void 0);return Bs(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});let n=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;let i=o[0],a,s;if("borderBoxSize"in i){let u=i.borderBoxSize,l=Array.isArray(u)?u[0]:u;a=l.inlineSize,s=l.blockSize}else a=e.offsetWidth,s=e.offsetHeight;r({width:a,height:s})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}C();C();function UW(e,t){return pt((r,n)=>{let o=t[r][n];return o??r},e)}var Lg=e=>{let{present:t,children:r}=e,n=HW(t),o=typeof r=="function"?r({present:n.isPresent}):He.only(r),i=Jl(n.ref,o.ref);return typeof r=="function"||n.isPresent?kt(o,{ref:i}):null};Lg.displayName="Presence";function HW(e){let[t,r]=$(),n=N({}),o=N(e),i=N("none"),a=e?"mounted":"unmounted",[s,u]=UW(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return L(()=>{let l=Zl(n.current);i.current=s==="mounted"?l:"none"},[s]),Bs(()=>{let l=n.current,c=o.current;if(c!==e){let p=i.current,d=Zl(l);e?u("MOUNT"):d==="none"||l?.display==="none"?u("UNMOUNT"):u(c&&p!==d?"ANIMATION_OUT":"UNMOUNT"),o.current=e}},[e,u]),Bs(()=>{if(t){let l=f=>{let d=Zl(n.current).includes(f.animationName);f.target===t&&d&&pr(()=>u("ANIMATION_END"))},c=f=>{f.target===t&&(i.current=Zl(n.current))};return t.addEventListener("animationstart",c),t.addEventListener("animationcancel",l),t.addEventListener("animationend",l),()=>{t.removeEventListener("animationstart",c),t.removeEventListener("animationcancel",l),t.removeEventListener("animationend",l)}}else u("ANIMATION_END")},[t,u]),{isPresent:["mounted","unmountSuspended"].includes(s),ref:J(l=>{l&&(n.current=getComputedStyle(l)),r(l)},[])}}function Zl(e){return e?.animationName||"none"}C();C();C();var Bg=te((e,t)=>{let{children:r,...n}=e,o=He.toArray(r),i=o.find(GW);if(i){let a=i.props.children,s=o.map(u=>u===i?He.count(a)>1?He.only(null):St(a)?a.props.children:null:u);return Q(qg,le({},n,{ref:t}),St(a)?kt(a,void 0,s):null)}return Q(qg,le({},n,{ref:t}),r)});Bg.displayName="Slot";var qg=te((e,t)=>{let{children:r,...n}=e;return St(r)?kt(r,{...KW(n,r.props),ref:Mg(t,r.ref)}):He.count(r)>1?He.only(null):null});qg.displayName="SlotClone";var VW=({children:e})=>Q(Y,null,e);function GW(e){return St(e)&&e.type===VW}function KW(e,t){let r={...t};for(let n in t){let o=e[n],i=t[n];/^on[A-Z]/.test(n)?o&&i?r[n]=(...s)=>{i(...s),o(...s)}:o&&(r[n]=o):n==="style"?r[n]={...o,...i}:n==="className"&&(r[n]=[o,i].filter(Boolean).join(" "))}return{...e,...r}}var JW=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],jg=JW.reduce((e,t)=>{let r=te((n,o)=>{let{asChild:i,...a}=n,s=i?Bg:t;return L(()=>{window[Symbol.for("radix-ui")]=!0},[]),Q(s,le({},a,{ref:o}))});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});var BO="Checkbox",[ZW,Fye]=MO(BO),[YW,QW]=ZW(BO),XW=te((e,t)=>{let{__scopeCheckbox:r,name:n,checked:o,defaultChecked:i,required:a,disabled:s,value:u="on",onCheckedChange:l,...c}=e,[f,p]=$(null),d=Jl(t,S=>p(S)),h=N(!1),g=f?!!f.closest("form"):!0,[y=!1,w]=$O({prop:o,defaultProp:i,onChange:l}),x=N(y);return L(()=>{let S=f?.form;if(S){let O=()=>w(x.current);return S.addEventListener("reset",O),()=>S.removeEventListener("reset",O)}},[f,w]),Q(YW,{scope:r,state:y,disabled:s},Q(jg.button,le({type:"button",role:"checkbox","aria-checked":ro(y)?"mixed":y,"aria-required":a,"data-state":jO(y),"data-disabled":s?"":void 0,disabled:s,value:u},c,{ref:d,onKeyDown:rt(e.onKeyDown,S=>{S.key==="Enter"&&S.preventDefault()}),onClick:rt(e.onClick,S=>{w(O=>ro(O)?!0:!O),g&&(h.current=S.isPropagationStopped(),h.current||S.stopPropagation())})})),g&&Q(rU,{control:f,bubbles:!h.current,name:n,value:u,checked:y,required:a,disabled:s,style:{transform:"translateX(-100%)"}}))}),eU="CheckboxIndicator",tU=te((e,t)=>{let{__scopeCheckbox:r,forceMount:n,...o}=e,i=QW(eU,r);return Q(Lg,{present:n||ro(i.state)||i.state===!0},Q(jg.span,le({"data-state":jO(i.state),"data-disabled":i.disabled?"":void 0},o,{ref:t,style:{pointerEvents:"none",...e.style}})))}),rU=e=>{let{control:t,checked:r,bubbles:n=!0,...o}=e,i=N(null),a=LO(r),s=qO(t);return L(()=>{let u=i.current,l=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(l,"checked").set;if(a!==r&&f){let p=new Event("click",{bubbles:n});u.indeterminate=ro(r),f.call(u,ro(r)?!1:r),u.dispatchEvent(p)}},[a,r,n]),Q("input",le({type:"checkbox","aria-hidden":!0,defaultChecked:ro(r)?!1:r},o,{tabIndex:-1,ref:i,style:{...e.style,...s,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function ro(e){return e==="indeterminate"}function jO(e){return ro(e)?"indeterminate":e?"checked":"unchecked"}var zg=XW,zO=tU;C();var Wg=te(({className:e,checked:t,...r},n)=>m(zg,{ref:n,className:ae("data-[state=checked]:text-mod-error peer h-3 w-3 shrink-0 rounded-sm border disabled:cursor-not-allowed disabled:opacity-50 bg-primary obzt-btn-reset",e),checked:t,...r,children:m(zO,{className:ae("flex items-center justify-center"),children:m(zr,{icon:"chevrons-down",size:"0.75rem",className:"contents"})})}));Wg.displayName=zg.displayName;var WO=te(({id:e,checked:t,onCheckChange:r,title:n,disabled:o,className:i,...a},s)=>m("div",{className:ae("flex items-center gap-x-1","rounded-sm focus-within:outline-none focus-within:ring-2 focus-within:ring-mod-border-focus focus-within:ring-offset-2",t&&"animate-pulse",i),ref:s,...a,children:[m(Wg,{className:ae("h-3 w-3",o&&"hidden"),id:e,checked:t,disabled:o,onCheckedChange:r}),m("label",{htmlFor:e,className:"peer-[[data-state=checked]]:text-mod-error text-status-bar text-txt-status-bar leading-none peer-disabled:cursor-not-allowed",children:n})]}));WO.displayName="ImportingStatus";var XN=require("obsidian");C();var Fi=require("obsidian");C();var Yl={sanitize:DOMPurify.sanitize.bind(DOMPurify),setIcon:Fi.setIcon,renderMarkdown(e){return m(oU,{content:e})}};function oU({content:e}){let t=N(null);return m("div",{className:"contents",ref:n=>{n?(n.empty(),t.current&&t.current.unload(),t.current=new Fi.Component,Fi.MarkdownRenderer.renderMarkdown(e,n,"",t.current)):t.current&&(t.current.unload(),t.current=null)}})}var no=require("obsidian"),Ni=class extends no.FileView{constructor(t){super(t),this.navigation=!1,this.allowNoFile=!0,this.requestUpdate=(0,no.debounce)(()=>this.update(),0)}load(){super.load(),this.registerEvent(this.app.workspace.on("file-open",this.onFileOpen,this))}onLoadFile(t){return this.requestUpdate()}onUnloadFile(t){return this.requestUpdate()}onFileOpen(t){this.leaf.group||this.leaf.pinned||(t instanceof no.TFile?this.loadFile(t):this.loadFile(null),this.requestUpdate())}onGroupChange(){if(super.onGroupChange(),this.leaf.group)for(let t=0,r=this.leaf.workspace.getGroupLeaves(this.leaf.group);t<r.length;t++){let n=r[t];if(n!==this.leaf&&n.view instanceof no.FileView){let o=n.view.getSyncViewState();this.leaf.openFile(n.view.file,o)}}else{let t=this.leaf.workspace.getActiveFile();this.loadFile(t)}}};var UO=require("obsidian");var Ql=require("obsidian"),Xl="zt-citations",ef=async(e,t)=>typeof e=="string"&&e.trim().length>0?await t.database.search(e):await t.database.getItemsOf(50);function tf({item:e,fields:t},r){r.addClass("mod-complex");let n=r.createDiv("suggestion-content").createDiv("suggestion-title").createSpan(),o=r.createDiv("suggestion-aux");for(let s of t){let u=o.createEl("kbd","suggestion-hotkey");switch(u.setAttribute("aria-label",s),s){case"title":(0,Ql.setIcon)(u,"type");break;case"creators":(0,Ql.setIcon)(u,"user");break;case"date":(0,Ql.setIcon)(u,"calendar");break;default:u.setText(s);break}}let[i]=e.title??[],a=n.createDiv({cls:"title"});typeof i=="string"&&i?a.setText(i):a.setText("Title missing"),this.plugin.settings.suggester.showCitekeyInSuggester&&e.citekey&&n.createDiv({cls:"citekey",text:e.citekey}),iU(e)&&n.append(aU(e))}var iU=e=>e.itemType==="journalArticle",aU=e=>{let{creators:t,date:r,publicationTitle:n,volume:o,issue:i,pages:a}=e,s={creators:sU(t),date:r,publication:n,volume:o,issue:i,pages:a},u=(l,c,f)=>s[c]&&l.createSpan({cls:f??c,text:s[c]??void 0});return createDiv({cls:"meta"},l=>{(s.creators||s.date)&&l.createSpan({cls:"author-year"},c=>{u(c,"creators"),u(c,"date")}),u(l,"publication"),(s.volume||s.issue)&&l.createSpan({cls:"vol-issue"},c=>{u(c,"volume"),u(c,"issue")}),u(l,"pages")})},sU=e=>{if(!e||!e[0])return"";let t=e[0],r=Vc(t)||Gc(t)?t.lastName:"";return e.length>1&&(r=r.trim()+" et al."),r};var js=class extends UO.EditorSuggest{constructor(r){super(r.app);this.plugin=r;this.suggestEl.addClass(Xl)}getSuggestions(r){return ef(r.query,this.plugin)}renderSuggestion=tf.bind(this)};var oo=class extends Kc{constructor(r){super(r.app);this.plugin=r;this.modalEl.addClass(Xl)}getSuggestions(r){return ef(r,this.plugin)}renderSuggestion=tf.bind(this);onChooseSuggestion(){}};var HO=require("obsidian"),rf=({alt:e,item:t},r,n,o)=>{if(!r){let a=n.getCursor();r={start:a,end:a}}let i=o.renderCitation(t,e);n.replaceRange(i,r.start,r.end),n.setCursor(n.offsetToPos(n.posToOffset(r.start)+i.length))},VO=e=>HO.Keymap.isModifier(e,"Shift");var uU=[{command:"\u2191\u2193",purpose:"to navigate"},{command:"\u21B5",purpose:"to insert primary Markdown citation"},{command:"\u21B5 (end with /)",purpose:"Insert secondary Markdown citation"}],zs=class extends js{constructor(r){super(r);this.plugin=r;this.setInstructions(uU)}onTrigger(r,n){if(!this.plugin.settings.suggester.citationEditorSuggester)return null;let o=n.getLine(r.line),a=o.substring(0,r.ch).match(/\[@([\w\- ]*)\/?$/);if(!a)return null;let s={...r};return o[r.ch]==="]"&&(s.ch+=1),{end:s,start:{ch:a.index,line:r.line,alt:!!a[0]?.endsWith("/")},query:a[1]}}selectSuggestion(r){this.context&&(console.log(this.context),rf({item:r.item,alt:this.context.start.alt??!1},this.context,this.context.editor,this.plugin.templateRenderer))}};var cU=[{command:"\u2191\u2193",purpose:"to navigate"},{command:"\u21B5",purpose:"to insert Markdown citation"},{command:"shift \u21B5",purpose:"to insert secondary Markdown citation"},{command:"esc",purpose:"to dismiss"}],Ug=class extends oo{constructor(r){super(r);this.plugin=r;this.setInstructions(cU)}};async function Hg(e,t){let r=await nf(t);return r?(rf({item:r.value.item,alt:VO(r.evt)},void 0,e,t.templateRenderer),!0):!1}async function nf(e){return await ss(new Ug(e))}var GO=se(Qe(),1);var Ws=class extends Me{getDefaults(){return{citationEditorSuggester:!0,showCitekeyInSuggester:!1}}async apply(t){switch(t){case"citationEditorSuggester":case"showCitekeyInSuggester":return;default:(0,GO.default)(t)}}};var co=require("obsidian");C();C();C();C();var wn=se(vn());C();function Gg(e){let t=Object.prototype.toString.call(e).slice(8,-1);return t==="Object"&&typeof e[Symbol.iterator]=="function"?"Iterable":t==="Custom"&&e.constructor!==Object&&e instanceof Object?"Object":t}var YO=se(vn());C();var Hs=se(vn());C();var KO=se(vn());C();function Us(e){let{styling:t,arrowStyle:r="single",expanded:n,nodeType:o,onClick:i}=e;return q.createElement("div",(0,KO.default)({},t("arrowContainer",r),{onClick:i}),q.createElement("div",t(["arrow","arrowSign"],o,n,r),"\u25B6",r==="double"&&q.createElement("div",t(["arrowSign","arrowSignInner"]),"\u25B6")))}function lU(e,t){return e==="Object"?Object.keys(t).length:e==="Array"?t.length:1/0}function fU(e){return typeof e.set=="function"}function pU(e,t,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1/0,i;if(e==="Object"){let a=Object.getOwnPropertyNames(t);r&&a.sort(r===!0?void 0:r),a=a.slice(n,o+1),i={entries:a.map(s=>({key:s,value:t[s]}))}}else if(e==="Array")i={entries:t.slice(n,o+1).map((a,s)=>({key:s+n,value:a}))};else{let a=0,s=[],u=!0,l=fU(t);for(let c of t){if(a>o){u=!1;break}n<=a&&(l&&Array.isArray(c)?typeof c[0]=="string"||typeof c[0]=="number"?s.push({key:c[0],value:c[1]}):s.push({key:`[entry ${a}]`,value:{"[key]":c[0],"[value]":c[1]}}):s.push({key:a,value:c})),a++}i={hasMore:!u,entries:s}}return i}function Kg(e,t,r){let n=[];for(;t-e>r*r;)r=r*r;for(let o=e;o<=t;o+=r)n.push({from:o,to:Math.min(t,o+r-1)});return n}function Jg(e,t,r,n){let o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:1/0,a=pU.bind(null,e,t,r);if(!n)return a().entries;let s=i<1/0,u=Math.min(i-o,lU(e,t));if(e!=="Iterable"){if(u<=n||n<7)return a(o,i).entries}else if(u<=n&&!s)return a(o,i).entries;let l;if(e==="Iterable"){let{hasMore:c,entries:f}=a(o,o+n-1);l=c?[...f,...Kg(o+n,o+2*n-1,n)]:f}else l=s?Kg(o,i,n):[...a(0,n-5).entries,...Kg(n-4,u-5,n),...a(u-4,u-1).entries];return l}var JO=se(vn());C();function Zg(e){let{styling:t,from:r,to:n,renderChildNodes:o,nodeType:i}=e,[a,s]=$(!1),u=J(()=>{s(!a)},[a]);return a?q.createElement("div",t("itemRange",a),o(e,r,n)):q.createElement("div",(0,JO.default)({},t("itemRange",a),{onClick:u}),q.createElement(Us,{nodeType:i,styling:t,expanded:!1,onClick:u,arrowStyle:"double"}),`${r} ... ${n}`)}function dU(e){return e.to!==void 0}function ZO(e,t,r){let{nodeType:n,data:o,collectionLimit:i,circularCache:a,keyPath:s,postprocessValue:u,sortObjectKeys:l}=e,c=[];return Jg(n,o,l,i,t,r).forEach(f=>{if(dU(f))c.push(q.createElement(Zg,(0,Hs.default)({},e,{key:`ItemRange--${f.from}-${f.to}`,from:f.from,to:f.to,renderChildNodes:ZO})));else{let{key:p,value:d}=f,h=a.indexOf(d)!==-1;c.push(q.createElement(Vs,(0,Hs.default)({},e,{postprocessValue:u,collectionLimit:i,key:`Node--${p}`,keyPath:[p,...s],value:u(d),circularCache:[...a,d],isCircular:h,hideRoot:!1})))}}),c}function io(e){let{circularCache:t=[],collectionLimit:r,createItemString:n,data:o,expandable:i,getItemString:a,hideRoot:s,isCircular:u,keyPath:l,labelRenderer:c,level:f=0,nodeType:p,nodeTypeIndicator:d,shouldExpandNodeInitially:h,styling:g}=e,[y,w]=$(u?!1:h(l,o,f)),x=J(()=>{i&&w(!y)},[i,y]),S=y||s&&f===0?ZO({...e,circularCache:t,level:f+1}):null,O=q.createElement("span",g("nestedNodeItemType",y),d),F=a(p,o,O,n(o,r),l),D=[l,p,y,i];return s?q.createElement("li",g("rootNode",...D),q.createElement("ul",g("rootNodeChildren",...D),S)):q.createElement("li",g("nestedNode",...D),i&&q.createElement(Us,{styling:g,nodeType:p,expanded:y,onClick:x}),q.createElement("label",(0,Hs.default)({},g(["label","nestedNodeLabel"],...D),{onClick:x}),c(...D)),q.createElement("span",(0,Hs.default)({},g("nestedNodeItemString",...D),{onClick:x}),F),q.createElement("ul",g("nestedNodeChildren",...D),S))}function mU(e){let t=Object.getOwnPropertyNames(e).length;return`${t} ${t!==1?"keys":"key"}`}function Yg(e){let{data:t,...r}=e;return q.createElement(io,(0,YO.default)({},r,{data:t,nodeType:"Object",nodeTypeIndicator:r.nodeType==="Error"?"Error()":"{}",createItemString:mU,expandable:Object.getOwnPropertyNames(t).length>0}))}var QO=se(vn());C();function hU(e){return`${e.length} ${e.length!==1?"items":"item"}`}function Qg(e){let{data:t,...r}=e;return q.createElement(io,(0,QO.default)({},r,{data:t,nodeType:"Array",nodeTypeIndicator:"[]",createItemString:hU,expandable:t.length>0}))}var XO=se(vn());C();function gU(e,t){let r=0,n=!1;if(Number.isSafeInteger(e.size))r=e.size;else for(let o of e){if(t&&r+1>t){n=!0;break}r+=1}return`${n?">":""}${r} ${r!==1?"entries":"entry"}`}function Xg(e){return q.createElement(io,(0,XO.default)({},e,{nodeType:"Iterable",nodeTypeIndicator:"()",createItemString:gU,expandable:!0}))}C();function er(e){let{nodeType:t,styling:r,labelRenderer:n,keyPath:o,valueRenderer:i,value:a,valueGetter:s=u=>u}=e;return q.createElement("li",r("value",t,o),q.createElement("label",r(["label","valueLabel"],t,o),n(o,t,!1,!1)),q.createElement("span",r("valueText",t,o),i(s(a),a,...o)))}function Vs(e){let{getItemString:t,keyPath:r,labelRenderer:n,styling:o,value:i,valueRenderer:a,isCustomNode:s,...u}=e,l=s(i)?"Custom":Gg(i),c={getItemString:t,key:r[0],keyPath:r,labelRenderer:n,nodeType:l,styling:o,value:i,valueRenderer:a},f={...u,...c,data:i,isCustomNode:s};switch(l){case"Object":case"Error":case"WeakMap":case"WeakSet":return q.createElement(Yg,f);case"Array":return q.createElement(Qg,f);case"Iterable":case"Map":case"Set":return q.createElement(Xg,f);case"String":return q.createElement(er,(0,wn.default)({},c,{valueGetter:p=>`"${p}"`}));case"Number":return q.createElement(er,c);case"Boolean":return q.createElement(er,(0,wn.default)({},c,{valueGetter:p=>p?"true":"false"}));case"Date":return q.createElement(er,(0,wn.default)({},c,{valueGetter:p=>p.toISOString()}));case"Null":return q.createElement(er,(0,wn.default)({},c,{valueGetter:()=>"null"}));case"Undefined":return q.createElement(er,(0,wn.default)({},c,{valueGetter:()=>"undefined"}));case"Function":case"Symbol":return q.createElement(er,(0,wn.default)({},c,{valueGetter:p=>p.toString()}));case"Custom":return q.createElement(er,c);default:return q.createElement(er,(0,wn.default)({},c,{valueGetter:()=>`<${l}>`}))}}var Zf=se(of()),AN=se(nD()),py=se(lD()),dy=se(DF()),cy=se(tN()),ly=se(wN());function xN(e){var t=e[0],r=e[1],n=e[2],o,i,a;return o=t*1+r*0+n*1.13983,i=t*1+r*-.39465+n*-.5806,a=t*1+r*2.02311+n*0,o=Math.min(Math.max(0,o),1),i=Math.min(Math.max(0,i),1),a=Math.min(Math.max(0,a),1),[o*255,i*255,a*255]}function EN(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,o=t*.299+r*.587+n*.114,i=t*-.14713+r*-.28886+n*.436,a=t*.615+r*-.51499+n*-.10001;return[o,i,a]}function SN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function ht(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SN(Object(r),!0).forEach(function(n){(0,AN.default)(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var IN=dy.default,kN=Object.keys(IN),RV=function(t){return t<.25?1:t<.5?.9-t:1.1-t},MV=function(t){var r=(0,cy.default)(t),n=EN(r.array()),o=(0,py.default)(n,3),i=o[0],a=o[1],s=o[2],u=[RV(i),a,s],l=xN(u);return cy.default.rgb(l).hex()},$i=function(t){return function(r){return{className:[r.className,t.className].filter(Boolean).join(" "),style:ht(ht({},r.style||{}),t.style||{})}}},$V=function(t,r){if(t===void 0)return r;if(r===void 0)return t;var n=(0,Zf.default)(t),o=(0,Zf.default)(r);switch(n){case"string":switch(o){case"string":return[r,t].filter(Boolean).join(" ");case"object":return $i({className:t,style:r});case"function":return function(i){for(var a=arguments.length,s=new Array(a>1?a-1:0),u=1;u<a;u++)s[u-1]=arguments[u];return $i({className:t})(r.apply(void 0,[i].concat(s)))}}break;case"object":switch(o){case"string":return $i({className:r,style:t});case"object":return ht(ht({},r),t);case"function":return function(i){for(var a=arguments.length,s=new Array(a>1?a-1:0),u=1;u<a;u++)s[u-1]=arguments[u];return $i({style:t})(r.apply(void 0,[i].concat(s)))}}break;case"function":switch(o){case"string":return function(i){for(var a=arguments.length,s=new Array(a>1?a-1:0),u=1;u<a;u++)s[u-1]=arguments[u];return t.apply(void 0,[$i(i)({className:r})].concat(s))};case"object":return function(i){for(var a=arguments.length,s=new Array(a>1?a-1:0),u=1;u<a;u++)s[u-1]=arguments[u];return t.apply(void 0,[$i(i)({style:r})].concat(s))};case"function":return function(i){for(var a=arguments.length,s=new Array(a>1?a-1:0),u=1;u<a;u++)s[u-1]=arguments[u];return t.apply(void 0,[r.apply(void 0,[i].concat(s))].concat(s))}}}},LV=function(t,r){var n=Object.keys(r);for(var o in t)n.indexOf(o)===-1&&n.push(o);return n.reduce(function(i,a){return i[a]=$V(t[a],r[a]),i},{})},qV=function(t,r){for(var n=arguments.length,o=new Array(n>2?n-2:0),i=2;i<n;i++)o[i-2]=arguments[i];if(r===null)return t;Array.isArray(r)||(r=[r]);var a=r.map(function(u){return t[u]}).filter(Boolean),s=a.reduce(function(u,l){return typeof l=="string"?u.className=[u.className,l].filter(Boolean).join(" "):(0,Zf.default)(l)==="object"?u.style=ht(ht({},u.style),l):typeof l=="function"&&(u=ht(ht({},u),l.apply(void 0,[u].concat(o)))),u},{className:"",style:{}});return s.className||delete s.className,Object.keys(s.style).length===0&&delete s.style,s},fy=function(t){return Object.keys(t).reduce(function(r,n){return r[n]=/^base/.test(n)?MV(t[n]):n==="scheme"?t[n]+":inverted":t[n],r},{})},_N=(0,ly.default)(function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=t.defaultBase16,o=n===void 0?IN:n,i=t.base16Themes,a=i===void 0?null:i,s=BV(r,a);s&&(r=ht(ht({},s),r));for(var u=kN.reduce(function(g,y){return g[y]=r[y]||o[y],g},{}),l=Object.keys(r).reduce(function(g,y){return kN.indexOf(y)===-1&&(g[y]=r[y]),g},{}),c=e(u),f=LV(l,c),p=arguments.length,d=new Array(p>3?p-3:0),h=3;h<p;h++)d[h-3]=arguments[h];return(0,ly.default)(qV,2).apply(void 0,[f].concat(d))},3),CN=function(t){return!!t.extend},BV=function(t,r){if(t&&CN(t)&&t.extend&&(t=t.extend),typeof t=="string"){var n=t.split(":"),o=(0,py.default)(n,2),i=o[0],a=o[1];r?t=r[i]:t=dy[i],a==="inverted"&&(t=fy(t))}return t&&Object.prototype.hasOwnProperty.call(t,"base00")?t:void 0},TN=function(t){return typeof t=="string"?"".concat(t,":inverted"):t&&CN(t)&&t.extend?typeof t.extend=="string"?ht(ht({},t),{},{extend:"".concat(t.extend,":inverted")}):ht(ht({},t),{},{extend:fy(t.extend)}):t&&fy(t)};var ON={scheme:"solarized",author:"ethan schoonover (http://ethanschoonover.com/solarized)",base00:"#002b36",base01:"#073642",base02:"#586e75",base03:"#657b83",base04:"#839496",base05:"#93a1a1",base06:"#eee8d5",base07:"#fdf6e3",base08:"#dc322f",base09:"#cb4b16",base0A:"#b58900",base0B:"#859900",base0C:"#2aa198",base0D:"#268bd2",base0E:"#6c71c4",base0F:"#d33682"};var jV=e=>({BACKGROUND_COLOR:e.base00,TEXT_COLOR:e.base07,STRING_COLOR:e.base0B,DATE_COLOR:e.base0B,NUMBER_COLOR:e.base09,BOOLEAN_COLOR:e.base09,NULL_COLOR:e.base08,UNDEFINED_COLOR:e.base08,FUNCTION_COLOR:e.base08,SYMBOL_COLOR:e.base08,LABEL_COLOR:e.base0D,ARROW_COLOR:e.base0D,ITEM_STRING_COLOR:e.base0B,ITEM_STRING_EXPANDED_COLOR:e.base03}),zV=e=>({String:e.STRING_COLOR,Date:e.DATE_COLOR,Number:e.NUMBER_COLOR,Boolean:e.BOOLEAN_COLOR,Null:e.NULL_COLOR,Undefined:e.UNDEFINED_COLOR,Function:e.FUNCTION_COLOR,Symbol:e.SYMBOL_COLOR}),WV=e=>{let t=jV(e);return{tree:{border:0,padding:0,marginTop:"0.5em",marginBottom:"0.5em",marginLeft:"0.125em",marginRight:0,listStyle:"none",MozUserSelect:"none",WebkitUserSelect:"none",backgroundColor:t.BACKGROUND_COLOR},value:(r,n,o)=>{let{style:i}=r;return{style:{...i,paddingTop:"0.25em",paddingRight:0,marginLeft:"0.875em",WebkitUserSelect:"text",MozUserSelect:"text",wordWrap:"break-word",paddingLeft:o.length>1?"2.125em":"1.25em",textIndent:"-0.5em",wordBreak:"break-all"}}},label:{display:"inline-block",color:t.LABEL_COLOR},valueLabel:{margin:"0 0.5em 0 0"},valueText:(r,n)=>{let{style:o}=r;return{style:{...o,color:zV(t)[n]}}},itemRange:(r,n)=>({style:{paddingTop:n?0:"0.25em",cursor:"pointer",color:t.LABEL_COLOR}}),arrow:(r,n,o)=>{let{style:i}=r;return{style:{...i,marginLeft:0,transition:"150ms",WebkitTransition:"150ms",MozTransition:"150ms",WebkitTransform:o?"rotateZ(90deg)":"rotateZ(0deg)",MozTransform:o?"rotateZ(90deg)":"rotateZ(0deg)",transform:o?"rotateZ(90deg)":"rotateZ(0deg)",transformOrigin:"45% 50%",WebkitTransformOrigin:"45% 50%",MozTransformOrigin:"45% 50%",position:"relative",lineHeight:"1.1em",fontSize:"0.75em"}}},arrowContainer:(r,n)=>{let{style:o}=r;return{style:{...o,display:"inline-block",paddingRight:"0.5em",paddingLeft:n==="double"?"1em":0,cursor:"pointer"}}},arrowSign:{color:t.ARROW_COLOR},arrowSignInner:{position:"absolute",top:0,left:"-0.4em"},nestedNode:(r,n,o,i,a)=>{let{style:s}=r;return{style:{...s,position:"relative",paddingTop:"0.25em",marginLeft:n.length>1?"0.875em":0,paddingLeft:a?0:"1.125em"}}},rootNode:{padding:0,margin:0},nestedNodeLabel:(r,n,o,i,a)=>{let{style:s}=r;return{style:{...s,margin:0,padding:0,WebkitUserSelect:a?"inherit":"text",MozUserSelect:a?"inherit":"text",cursor:a?"pointer":"default"}}},nestedNodeItemString:(r,n,o,i)=>{let{style:a}=r;return{style:{...a,paddingLeft:"0.5em",cursor:"default",color:i?t.ITEM_STRING_EXPANDED_COLOR:t.ITEM_STRING_COLOR}}},nestedNodeItemType:{marginLeft:"0.3em",marginRight:"0.3em"},nestedNodeChildren:(r,n,o)=>{let{style:i}=r;return{style:{...i,padding:0,margin:0,listStyle:"none",display:o?"block":"none"}}},rootNodeChildren:{padding:0,margin:0,listStyle:"none"}}},UV=_N(WV,{defaultBase16:ON}),DN=UV;var FN=e=>e,HV=(e,t,r)=>r===0,VV=(e,t,r,n)=>q.createElement("span",null,r," ",n),GV=e=>{let[t]=e;return q.createElement("span",null,t,":")},KV=()=>!1;function NN(e){let{data:t,theme:r,invertTheme:n,keyPath:o=["root"],labelRenderer:i=GV,valueRenderer:a=FN,shouldExpandNodeInitially:s=HV,hideRoot:u=!1,getItemString:l=VV,postprocessValue:c=FN,isCustomNode:f=KV,collectionLimit:p=50,sortObjectKeys:d=!1}=e,h=K(()=>DN(n?TN(r):r),[r,n]);return q.createElement("ul",h("tree"),q.createElement(Vs,{keyPath:u?[]:o,value:c(t),isCustomNode:f,styling:h,labelRenderer:i,valueRenderer:a,shouldExpandNodeInitially:s,hideRoot:u,getItemString:l,postprocessValue:c,collectionLimit:p,sortObjectKeys:d}))}var PN=require("obsidian");var JV=()=>{let[e]=Ve("clipboard-copy");return m("span",{ref:e})},RN=(e,t,r,n,o)=>{if(o.length===1){let i=async a=>{a.preventDefault(),a.stopPropagation(),await navigator.clipboard.writeText("```json\n"+JSON.stringify(t,null,2)+"\n```"),new PN.Notice("Copied JSON code block to clipboard")};return m("span",{role:"button",tabIndex:0,onClick:i,onKeyDown:i,"aria-label":"Copy Item Details in JSON",children:[n," ",m(JV,{})]})}if(o[1]==="creators"&&o.length===3){let i=is(t);if(i)return m("span",{children:i})}if(o[1]==="tags"&&o.length===3){let i=t;return m("span",{children:['"',i.name,'"" (',hr[i.type],")"]})}if(o[0]==="sortIndex"&&o.length===2)return m("span",{children:["[",t.join(", "),"]"]});if(o.length===2&&Array.isArray(t)&&t.length===1){let i=JSON.stringify(t[0]);return m("span",{children:[r," ",i.length>100?i.slice(0,100)+"...":i]})}return m("span",{children:[r," ",n]})};var $N=require("obsidian");var LN=(e,t,r,n)=>{let o=e.length===1,i=e.slice(0,-1),a=MN(i);return m("span",{...o?void 0:{onContextMenu:l=>{let c=new $N.Menu().addItem(f=>f.setTitle("Copy Template").onClick(()=>{navigator.clipboard.writeText(`<%= ${a} %>`)}));n&&t!=="Array"&&c.addItem(f=>f.setTitle("Copy Template (using with)").onClick(()=>{let[p,...d]=i,h=typeof p=="string"&&qN.test(p)?p:`'${p}'`,g=MN(d);navigator.clipboard.writeText(`<% { const { ${h}: $it } = ${g}; %>
  <%= $it %>
<% } %>`)})),t==="Array"&&c.addItem(f=>f.setTitle("Copy Template (using for-of loop)").onClick(()=>{navigator.clipboard.writeText(`<% for (const $it of ${a}) { %>
  <%= $it %>
<% } %>`)})).addItem(f=>f.setTitle("Copy Template (using forEach)").onClick(()=>{navigator.clipboard.writeText(`<% ${a}.forEach(($it, i) => { %>
  <%= $it %>
<% }) %>`)})).addItem(f=>f.setTitle("Copy Template (pick first element)").onClick(()=>{navigator.clipboard.writeText(`<%= ${a}.first() %>`)})).addItem(f=>f.setTitle("Copy Template (pick last element)").onClick(()=>{navigator.clipboard.writeText(`<%= ${a}.last() %>`)})),Pm.has(i[0])||c.addItem(f=>f.setTitle("Copy Template (render when present)").onClick(()=>{navigator.clipboard.writeText(`<% if (${a}) { %>
  <%= ${a} %>
<% } %>`)})),l.preventDefault(),c.showAtMouseEvent(l.nativeEvent)},style:{cursor:"context-menu"}},children:[e[0],": "]})},MN=e=>"it"+e.map(ZV).reverse().join(""),qN=/^[$_\p{ID_Start}][$\u200c\u200d\p{ID_Continue}]*$/u,ZV=e=>typeof e=="number"?`[${e}]`:qN.test(e)?`.${e}`:`[${JSON.stringify(e)}]`;var YV=new Set(["sortIndex"]),QV=new Set(["creators","tags"]),XV=new Set(["position"]),BN=(e,t,r)=>{let n=e[0];return YV.has(n)||QV.has(n)&&Array.isArray(t)&&t.length>6?!1:!!(XV.has(n)||r<1||r<2&&Array.isArray(t)&&t.length>1)};var eG=/^#(?:[\dA-F]{3}){1,2}$|^#(?:[\dA-F]{4}){1,2}$/i,tG=e=>{let t=e.charAt(0)==="#"?e.substring(1,7):e,r=parseInt(t.substring(0,2),16),n=parseInt(t.substring(2,4),16),o=parseInt(t.substring(4,6),16);return r*.299+n*.587+o*.114>186},jN=(e,t,...r)=>{if(typeof t=="string"&&eG.test(t))return m("span",{style:{backgroundColor:t,padding:"0 0.5em",color:tG(t)?"black":"white"},children:t});if(r[0]==="type"&&typeof t=="number"){let n="";if(r.length===2&&Se[t]?n=Se[t]:r.length===4&&typeof r[1]=="number"&&r[2]==="tags"&&hr[t]&&(n=hr[t]),n)return m(Y,{children:[e," ",m("span",{children:["(",n,")"]})]})}return e};var zN=()=>document.body.classList.contains("theme-dark"),rG={scheme:"Solarized Light",author:"Ethan Schoonover (modified by aramisgithub)",base00:"transparent",base01:"#eee8d5",base02:"#93a1a1",base03:"#839496",base04:"#657b83",base05:"#586e75",base06:"#073642",base07:"#002b36",base08:"#dc322f",base09:"#cb4b16",base0A:"#b58900",base0B:"#859900",base0C:"#2aa198",base0D:"#268bd2",base0E:"#6c71c4",base0F:"#d33682"},nG={scheme:"Solarized Dark",author:"Ethan Schoonover (modified by aramisgithub)",base00:"transparent",base01:"#073642",base02:"#586e75",base03:"#657b83",base04:"#839496",base05:"#93a1a1",base06:"#eee8d5",base07:"#fdf6e3",base08:"#dc322f",base09:"#cb4b16",base0A:"#b58900",base0B:"#859900",base0C:"#2aa198",base0D:"#268bd2",base0E:"#6c71c4",base0F:"#d33682"};function my({item:e,registerCssChange:t}){let[r,n]=$(()=>zN());return L(()=>t?.(()=>n(zN())),[t]),e?m(NN,{data:e,theme:r?nG:rG,invertTheme:!1,keyPath:["Zotero Item Data"],shouldExpandNodeInitially:BN,valueRenderer:jN,labelRenderer:LN,getItemString:RN}):m("div",{children:"No Details Available"})}var WN=require("obsidian");var Yf=e=>({plugin:e,sourcePath:""});function oG(){return Rs((e,t)=>({preview:null,templateType:null,setTemplateType(r){e(n=>({...n,templateType:r||void 0}))},setPreview(r){e(({...n})=>({...n,preview:r??null}))},async setPreviewFromState(r,n){let o=t().preview;if(o?.docItem.itemID===r?.docItem&&o?.attachment?.itemID===r?.attachment&&o?.annot?.itemID===r?.annot)return!1;let i=n.database.settings.citationLibrary;if(!r.docItem)return console.error("TemplatePreview: no docItem provided"),!1;let[a]=await n.databaseAPI.getItems([[r.docItem,i]]);if(!a)return console.error("TemplatePreview: no docItem found for id "+r.docItem),!1;let s=await n.databaseAPI.getAttachments(r.docItem,i),u=s.find(p=>p.itemID===r.attachment)??null;r.attachment&&!u&&console.error("TemplatePreview: no attachment found for id "+r.attachment);let l=u?await n.databaseAPI.getAnnotations(u.itemID,i):[],c=l.find(p=>p.itemID===r.annot);r.annot&&!c&&console.error("TemplatePreview: no annotation found for id "+r.annot);let f=await n.databaseAPI.getTags([[r.docItem,i],...l.map(p=>[p.itemID,i])]);return e(()=>({preview:{docItem:a,allAttachments:s,annotations:l,attachment:u,tags:f,annot:l.find(p=>p.itemID===r.annot)}})),!0}}))}function UN(e,t){let r=null,n=null,o=null;return function(...i){if(r&&window.clearTimeout(r),n){o=i;return}r=window.setTimeout(()=>{r=null,n=e(...i).then(()=>{o?n=e(...o):n=null}).catch(a=>{console.error(a),n=null})},t)}}var Li=class extends WN.FileView{constructor(r,n){super(r);this.plugin=n;this.store=oG()}store;canAcceptExtension(r){return r==="md"}get enabled(){return this.plugin.templateLoader.settings.ejected}getTemplateType(r){return this.plugin.templateLoader.getTemplateTypeOf(r)}setTemplateType(r){this.store.getState().setTemplateType(r)}async onLoadFile(r){await super.onLoadFile(r),this.setTemplateType(this.enabled&&this.getTemplateType(r))}getState(){let r=super.getState(),{preview:n}=this.store.getState(),o;if(!n)o={preview:null};else{let{docItem:i,attachment:a,annot:s}=n;o={preview:{docItem:i.itemID,attachment:a?.itemID,annot:s?.itemID}}}return{...r,...o}}async setState(r,n){if(await super.setState(r,n),r.preview===void 0)return;let o=this.store.getState();r.preview===null?o.setPreview(null):await o.setPreviewFromState(r.preview,this.plugin)}setPreview(r){this.store.getState().setPreview(r)}async onOpen(){await super.onOpen();let[r,n]=Wo(this.plugin);n&&this.register(n),await r}};var qi="zotero-item-details",HN=({templateType:e})=>e==="annotation"?e:"note",Qf=class extends Li{getViewType(){return qi}getDisplayText(){let t=this.store.getState();return t.templateType?"Zotero Item Details: "+HN(t):"Zotero Item Details"}async onOpen(){await super.onOpen();let[t,r]=Wo(this.plugin);r&&this.register(r),await t,q.render(m(iG,{store:this.store,plugin:this.plugin}),this.contentEl)}async onClose(){q.unmountComponentAtNode(this.contentEl),await super.onClose()}};function iG({store:e,plugin:t}){let r=mt(e,HN),n=mt(e,i=>i.preview),o=K(()=>{let i=Yf(t);if(!n)return null;switch(r){case"note":{let a=Qt(n,i);return a.docItem.annotations=void 0,a.docItem}case"annotation":{let a=Qt(n,i),s=n.annot?a.annotations.find(u=>u.itemID===n.annot?.itemID):a.annotations[0];return s?(s.docItem=void 0,s):null}default:throw new Error("Unsupported template type")}},[t,n,r]);return o?m(my,{item:o,registerCssChange:i=>(t.app.workspace.on("css-change",i),()=>t.app.workspace.off("css-change",i))}):m("div",{})}var tr=require("obsidian");var Bi="zotero-template-preview",Xf=class extends Li{getViewType(){return Bi}getDisplayText(){let t=this.store.getState().templateType;return t?"Zotero Template Preview: "+t:"Zotero Template Preview"}async switchToTemplate(t){if(!this.leaf.group)return!1;let r=VN(this.leaf.group,this.plugin);if(!r)return!1;let n=gy(t,this.plugin);if(!n||!(n instanceof tr.TFile)){new tr.Notice("Template file not found: "+t);return}return await r.openFile(n),!0}onload(){let t={annots:this.addAction("list-ordered","Open Template for Annotations",async()=>await this.switchToTemplate("annots")||new tr.Notice("Cannot switch to template")),note:this.addAction("file-input","Open Note Template",async()=>await this.switchToTemplate("note")||new tr.Notice("Cannot switch to template")),annotation:this.addAction("highlighter","Open Template for Single Annotation",async()=>await this.switchToTemplate("annotation")||new tr.Notice("Cannot switch to template"))};Object.values(t).forEach(r=>r.hide()),this.register(this.store.subscribe((r,n)=>{if(r.templateType!==n.templateType)for(let[o,i]of Object.entries(t))i.toggle(o!==r.templateType)})),this.registerEvent(this.app.vault.on("zotero:template-updated",r=>{let n=this.getTemplateType(this.file);n&&r===n&&(this.setTemplateType(this.enabled&&n),this.requestRender())}))}content=null;async render(){let{preview:t,templateType:r}=this.store.getState();if(!r){this.contentEl.empty(),this.contentEl.setText("No template preview available");return}if(!t){this.contentEl.empty(),this.contentEl.setText("No preview data available");return}let n="",o=Yf(this.plugin);switch(r){case"annotation":{let s=t.annot??t.annotations[0];if(!s){this.contentEl.setText("No annotation data available");return}n=this.plugin.templateRenderer.renderAnnot(s,t,o);break}case"annots":n=this.plugin.templateRenderer.renderAnnots(t,o);break;case"note":n=this.plugin.templateRenderer.renderNote(t,o);break;default:this.contentEl.setText("Unexpected template type");return}if(n===this.content?.markdown)return;this.content?.unload(),this.contentEl.empty();let i=await(0,tr.loadPrism)(),a=i.highlight(n,i.languages.markdown,"markdown");this.content=new hy(n),this.contentEl.createEl("pre").createEl("code",{cls:"language-markdown"}).innerHTML=a}requestRender=UN(()=>this.render(),200);async onOpen(){await super.onOpen(),this.register(this.store.subscribe((t,r)=>{t.templateType!==r.templateType?this.requestRender():t.preview!==r.preview&&this.requestRender()}))}},hy=class extends tr.Component{constructor(r){super();this.markdown=r}};async function lo(e,t,r){let{workspace:n}=r.app,o=gy(e,r);if(!o||!(o instanceof co.TFile)){new co.Notice("Template file not found: "+e);return}let{templateLoader:i}=r,a=n.getLeavesOfType("markdown").filter(c=>i.getTemplateTypeOf(c.view?.file)&&c.getRoot().type==="floating");if(a.length>0){let c=a[0];if(await c.openFile(o),!c.group)return;let f=n.getGroupLeaves(c.group);for(let p of f){let d=p.view.getViewType();if(d===Bi||d===qi){let h=p.view.getState();await p.view.setState({...h,preview:t},{})}}return}let s=n.openPopoutLeaf(),u=n.createLeafBySplit(s,"vertical"),l=n.createLeafBySplit(u,"vertical");await Promise.all([s.openFile(o,{active:!0}),u.setViewState({type:Bi,state:{file:o.path,preview:t},group:s}),l.setViewState({type:qi,state:{file:o.path,preview:t},group:s})])}function gy(e,t){let r=t.templateLoader.getTemplateFile(e),n=t.app.vault.getAbstractFileByPath(r);return!n||!(n instanceof co.TFile)?null:n}function VN(e,t){return t.app.workspace.getGroupLeaves(e).find(n=>n.view instanceof co.MarkdownView&&t.templateLoader.getTemplateTypeOf(n.view.file))}var GN=e=>(t,r,n)=>{let{imgCacheImporter:o}=e,i=String(t.timeStamp),a="drag-source";t.dataTransfer.setData("text/plain",r()),t.dataTransfer.setData(a,i),t.dataTransfer.dropEffect="copy";let s=t.target.win,u=f=>{f.dataTransfer?.getData(a)===i&&o.flush(),app.workspace.off("editor-drop",u),s.removeEventListener("dragend",l)},l=()=>{o.cancel(),app.workspace.off("editor-drop",u)},c=app.workspace.on("editor-drop",f=>{f.dataTransfer?.getData("drag-source")===i&&o.flush(),app.workspace.offref(c)});s.addEventListener("dragend",l,{once:!0}),n&&t.dataTransfer.setDragImage(n,0,0)},KN=e=>({storeSelector:t=>xt(t,["doc","attachment","allAttachments","tags","annotations"]),get:(t,{allAttachments:r,attachment:n,doc:o,tags:i,annotations:a})=>!r||!n||!o||!i[t.itemID]||!a?null:()=>{let s=e.app.workspace.getActiveFile(),u=s&&gn(s)?s.path:null;return e.templateRenderer.renderAnnot(t,{tags:i,attachment:n,allAttachments:r,annotations:a,docItem:o.docItem},{plugin:e,sourcePath:u,merge:!1})}});var ji=require("obsidian");var JN=e=>(t,r)=>{let n=new ji.Menu;if(n.addItem(o=>o.setTitle("Jump to Note").setIcon("links-going-out").onClick(aG(r,e))),app.workspace.trigger("zotero:open-annot-menu",r,n),t.nativeEvent instanceof MouseEvent)n.showAtMouseEvent(t.nativeEvent);else{let o=t.currentTarget.getBoundingClientRect();n.showAtPosition({x:o.left,y:o.bottom})}},aG=(e,t)=>async()=>{let r=t.app.workspace.getActiveFile(),n=r&&gn(r)?r.path:void 0,o=t.plugin.noteIndex.getBlocksFor({item:e,file:n}).shift();if(!o){new ji.Notice("No embed for this annotation in current note");return}let i=o.blocks.sort((p,d)=>{let h=p.start.offset-d.start.offset;return h!==0?h:p.end.offset-d.end.offset})[0];await sleep(10);let{leaf:a}=t,{workspace:s,vault:u}=app,l;if(a.group)l=app.workspace.getGroupLeaves(a.group);else{l=[];let p=s.getActiveFileView();p&&l.push(p.leaf)}let c=!1,f=i.end.line+1;for(let p of l)p&&p.view instanceof ji.MarkdownView&&p.view.file.path===o.file&&(p.view.setEphemeralState({line:f}),c=!0);if(!c){let p=u.getAbstractFileByPath(o.file);if(!p||!gn(p))throw new Error("File from block info not found: "+o.file);s.getLeaf().openFile(p,{eState:{line:f}})}};var ZN=(e,t)=>t.length===0?null:e?t.find(r=>r.itemID===e)??t[0]:t[0],ep=()=>({doc:null,allAttachments:null,attachmentID:null,annotations:null,attachment:null,tags:{}}),sG=()=>({follow:"zt-reader",doc:null,allAttachments:null,attachmentID:null,annotations:null,attachment:null,tags:{}}),cu=e=>e.databaseAPI,YN=e=>Rs((t,r)=>{let n=async(a,s)=>{let u=(await cu(e).getAttachments(a,s)).filter(l=>os(l)&&l.path?.endsWith(".pdf"));t(l=>({...l,allAttachments:u,attachment:ZN(l.attachmentID,u)}))},o=async(a,s)=>{let u=await cu(e).getTags([[a,s]]);return t(l=>({...l,tags:u})),u},i=async a=>{let{attachment:s}=r();if(!s)return;let u=await cu(e).getAnnotations(s.itemID,a),l=Xm(u);t(p=>({...p,annotations:eh(l),attachment:s}));let c=await cu(e).getTags(u.map(p=>[p.itemID,a])),f=th(l,c);t(p=>({...p,tags:{...p.tags,...f}}))};return{...sG(),loadDocItem:async(a,s,u,l=!1)=>{if(a<0)return t(ep());if(r().doc?.docItem.itemID===a&&!l)return;let c=(await cu(e).getItems([[a,u]]))[0];if(!c)return t(ep());let f={docItem:c,lib:u};if(s<0){let p=Fm(window.localStorage,c);t({...ep(),doc:f,attachmentID:p})}else ai(window.localStorage,c,s),t({...ep(),doc:f,attachmentID:s});await n(c.itemID,u),await o(c.itemID,u),await i(u)},refresh:async()=>{let{doc:a,attachment:s}=r();if(!a)return;let{docItem:u,lib:l}=a;await n(u.itemID,l),await o(u.itemID,l),s&&await i(l)},setActiveAtch:a=>{let{doc:s,allAttachments:u}=r();if(s)if(ai(window.localStorage,s.docItem,a),!u)t(l=>({...l,attachment:null,attachmentID:a}));else{let l=ZN(a,u);t(c=>({...c,attachment:l,attachmentID:a}))}},setFollow:a=>t({follow:a})}});var rp="zotero-annotation-view",tp=class extends Ni{constructor(r,n){super(r);this.plugin=n;this.store=YN(n)}update(){if(this.follow!=="ob-note")return;let r=this.plugin.settings.database.citationLibrary;(async()=>{if(this.file?.extension!=="md")return!1;let n=Yn(this.file),o=Fs(this.file);if(!n)return!1;let[i]=await this.plugin.databaseAPI.getItems([[n,r]]);return i?(this.setStatePrev(a=>({...a,follow:"ob-note",itemId:i.itemID,attachmentId:o?.[0]??void 0})),!0):!1})().then(n=>{n||this.setStatePrev(o=>({...o,follow:"ob-note",itemId:-1}))})}getViewType(){return rp}#e=null;onload(){super.onload(),this.contentEl.addClass("obzt");let r=null,n=!1,o=i=>{if(n)r=i;else{n=!0;let{itemId:a,attachmentId:s}=i;this.setStatePrev(u=>({...u,itemId:a,attachmentId:s})).then(()=>{if(n=!1,r===null)return;let u=r;r=null,o(u)})}};this.registerEvent(this.plugin.server.on("bg:notify",(i,a)=>{a.event==="reader/active"&&(this.#e=a.itemId,!(this.follow!=="zt-reader"||a.itemId<0||a.attachmentId<0)&&o(a))}))}getDisplayText(){return this.follow!=="ob-note"||!this.file?.basename?"Zotero Annotations":`Zotero Annotations for ${this.file.basename}`}getIcon(){return"highlighter"}get lib(){return this.plugin.settings.database.citationLibrary}store;get follow(){return this.store.getState().follow}getState(){let r=super.getState(),n=this.store.getState(),o={itemId:n.doc?.docItem.itemID??-1,attachmentId:n.attachment?.itemID??-1,follow:n.follow};return{...r&&typeof r=="object"?r:{},...o}}async setState(r,n){await super.setState(r,n??{});let{itemId:o=-1,attachmentId:i=-1,follow:a="zt-reader"}=r;this.store.getState().setFollow(a),await this.store.getState().loadDocItem(o,i,this.lib)}async setStatePrev(r){await this.setState(r(this.getState()))}onSetFollowZt=async()=>{this.setStatePrev(r=>({...r,follow:"zt-reader"})),await this.setStatePrev(({attachmentId:r,...n})=>({...n,follow:"zt-reader",...this.#e===null?{attachmentId:r}:{itemId:this.#e}}))};onSetFollowOb=()=>{this.store.getState().setFollow("ob-note"),this.update()};onSetFollowNull=async()=>{let{plugin:r}=this,n=await nf(r);if(!n)return;let{itemID:o}=n.value.item,i=r.settings.database.citationLibrary,a=await r.databaseAPI.getAttachments(o,i),s=await Hn(a);s&&await this.setStatePrev(({attachmentId:u,...l})=>({...l,follow:null,itemId:o,attachmentId:s.itemID}))};getContext(){let r=this,{plugin:n,store:o,app:i}=r;return{store:o,registerDbUpdate(a){return i.vault.on("zotero:db-refresh",a),()=>i.vault.off("zotero:db-refresh",a)},refreshConn:async()=>{await n.dbWorker.refresh({task:"dbConn"})},getImgSrc:a=>{let s=ln(a,n.settings.database.zoteroDataDir);return"app://local"+(0,QN.pathToFileURL)(s).href.substring(7)},onShowDetails:async(a,s)=>{let u=o.getState(),l=u.attachmentID??void 0;if(a==="doc-item")await lo("note",{docItem:s,attachment:l},n);else{let c=u.doc?.docItem.itemID;if(!c)throw new Error("Missing doc item when showing annotation details");await lo("annotation",{docItem:c,attachment:l,annot:s},n)}},onDragStart:GN(n),onMoreOptions:JN(r),annotRenderer:KN(n),onSetFollow(a){let s=new XN.Menu,u=o.getState().follow;if(u!=="zt-reader"&&s.addItem(l=>l.setIcon("book").setTitle("Follow Active Literature in Zotero Reader").onClick(r.onSetFollowZt)),u!=="ob-note"&&s.addItem(l=>l.setIcon("file-edit").setTitle("Follow Active Literature Note").onClick(r.onSetFollowOb)),s.addItem(l=>l.setIcon("file-lock-2").setTitle("Link with Selected Literature").onClick(async()=>{a.target.blur(),await r.onSetFollowNull()})),a.nativeEvent instanceof MouseEvent)s.showAtMouseEvent(a.nativeEvent);else{let c=a.target.getBoundingClientRect();s.showAtPosition({x:c.x,y:c.y})}}}}async onOpen(){await super.onOpen();let[r,n]=Wo(this.plugin);n&&this.register(n),this.contentEl.empty(),this.contentEl.createDiv({cls:"pane-empty p-2",text:"Loading..."}),r.then(()=>{this.contentEl.empty(),q.render(m(Ar.Provider,{value:Yl,children:m(Be.Provider,{value:this.getContext(),children:m(Ls,{})})}),this.contentEl)}).catch(o=>{this.contentEl.empty(),console.error("Failed to load annot view: ",o),this.contentEl.createDiv({cls:"pane-empty p-2",text:"Failed to load, Check console for details"})}),this.registerEvent(this.plugin.server.on("bg:notify",(o,i)=>{if(i.event!=="reader/annot-select")return;let a=i.updates.filter(([,u])=>u).pop();if(!a)return;let[s]=a;this.highlightAnnot(s)}))}async onClose(){q.unmountComponentAtNode(this.contentEl),await super.onClose()}async highlightAnnot(r){let n=this.contentEl.querySelector(`.annot-preview[data-id="${r}"]`);n instanceof HTMLElement&&(n.addClass("select-flashing"),n.scrollIntoView({behavior:"smooth",block:"center"}),await sleep(1500),n.removeClass("select-flashing"))}};var np=require("obsidian");var eP=se(Qe(),1);var zi=class extends Me{get fieldNames(){return this.noteFields.map(([t])=>t)}getField(t){return this.noteFields.find(([r])=>r===t)?.[1]}getDefaultField(){return{keyword:"",template:""}}getTemplate(t){return this.getField(t)?.template||`> <%= it[${JSON.stringify(t)}] %>::`}getDefaults(){return{noteFieldsSuggester:!1,noteFields:Object.entries({highlights:this.getDefaultField(),questions:this.getDefaultField()})}}async apply(t){switch(t){case"noteFields":return;default:(0,eP.default)(t)}}fromJSON(t){let{noteFields:r,...n}=t;super.fromJSON({...r?{noteFields:Object.entries(r)}:{},...n})}toJSON(){return{noteFields:Object.fromEntries(this.noteFields),noteFieldsSuggester:this.noteFieldsSuggester}}};var tP=/^\s*>\s*:(\w*)$/,Wi=class extends np.EditorSuggest{use=Oe.this;settings=this.use(zi);onTrigger(t,r,n){if(!this.settings.noteFieldsSuggester||this.settings.noteFields.length===0||!n||!Qn(n))return null;let o={line:t.line,ch:0},i=r.getRange(o,t);if(!tP.test(i))return null;let[,a]=i.match(tP);return{start:o,end:t,query:a}}getSuggestions(t){let{query:r}=t;if(!r)return this.settings.fieldNames.map(i=>({field:i,matches:[],score:0,query:i}));let n=(0,np.prepareFuzzySearch)(r);return this.settings.noteFields.flatMap(([i,a])=>{let s=a.keyword?a.keyword:i,u=n(s);return u?[{field:i,query:s,...u}]:[]}).sort((i,a)=>a.score-i.score)}selectSuggestion({field:t},r){if(!this.context){ne.error("No context available in NoteFieldsSuggest when selecting suggestion");return}let{start:n,end:o,editor:i}=this.context,a=this.settings.getTemplate(t);if(!a){ne.error("No template found for field",t);return}let s=JS(a,{field:t});i.replaceRange(s,n,o)}renderSuggestion({query:t,matches:r},n){let o=0;for(let[i,a]of r)o<i&&n.appendText(t.slice(o,i)),n.createSpan({text:t.slice(i,a),cls:"suggestion-highlight"}),o=a;o<t.length&&n.appendText(t.slice(o))}};Oe.def(Wi,()=>new Wi(Oe(be).app));var op=class extends ce{plugin=this.use(be);onload(){this.plugin.registerEditorSuggest(this.use(Wi))}};var fo=require("obsidian");C();var aP=se(yy(),1);var nP=require("obsidian");C();var oP=se(yy(),1);function iP({view:e}){let[t,r]=$(()=>e.getFields()),n=(0,oP.useErrorHandler)();L(()=>{let i=(0,nP.debounce)(()=>{try{r(e.getFields())}catch(s){n(s)}},500,!0),a=e.app.metadataCache.on("changed",s=>{s.path===e.file.path&&i()});return()=>e.app.metadataCache.offref(a)},[e,n]),L(()=>e.registerUpdateHanlder(()=>{try{r(e.getFields())}catch(i){n(i)}}),[e,n]);let{run:o}=es((...i)=>{try{e.setField(...i)}catch(a){n(a)}},{wait:200});return t?m(Pg,{data:t,onSave:(i,a)=>{t?.[i]&&o(t[i][a]??null,i,a)},onAdd:i=>r(sn(t,i,a=>Vo(a??[],""))),onChange:(i,a,s)=>{r(sn(t,a,u=>u?Zd(u,s,()=>i):[i]))},onDelete:(i,a)=>{r(sn(t,i,s=>s&&Yd(s,a))),o(null,i,a)}}):null}var sp="zotero-note-fields",ap=class extends Ni{constructor(r,n){super(r);this.plugin=n;this.contentEl.addClass("obzt")}getViewType(){return sp}onload(){super.onload()}getDisplayText(){let r=this.plugin.app.workspace.getActiveFile(),n="";return r?.extension==="md"&&(n=` for ${r.basename}`),"Fields of Literature note"+n}getIcon(){return"layout-list"}update(){for(let r of this.#e)r()}registerUpdateHanlder(r){this.#e.push(r);let n=()=>{this.#e=this.#e.filter(o=>o!==r)};return this.register(n),n}#e=[];canAcceptExtension(r){return!0}ErrorFallback=cG.bind(this);async onOpen(){await super.onOpen();let[r,n]=hc(this.app,{});n&&this.register(n),await r;let o=this.ErrorFallback;q.render(m(Ar.Provider,{value:Yl,children:m(aP.ErrorBoundary,{FallbackComponent:o,children:m(iP,{view:this})})}),this.contentEl)}async onClose(){q.unmountComponentAtNode(this.contentEl),await super.onClose()}getFields(){try{if(!this.file)return null;let r=this.app.metadataCache.getFileCache(this.file);if(!r)return null;let n=r.frontmatter;if(n==null)return this.fieldsToExtract.reduce((i,a)=>(i[a]=[],i),{});if(!uG(n))throw new lu(`Frontmatter is not an record: ${n}`,"_",n);return this.fieldsToExtract.reduce((i,a)=>{if(!(a in n))return i[a]=[],i;let s=n[a];if(typeof s=="string"||typeof s=="number")throw new Hi(`Field ${a}`,a,n);if(!by(s))throw new lu(`Field ${a} is not a string array`,a,n);return i[a]=s.map(u=>{if(!u)throw new Hi(`Field ${a}`,a,n);return u}),i},{})}catch(r){if(r instanceof lu)new fo.Notice(r.message);else{if(r instanceof Hi)throw r;new fo.Notice(`Failed to load note fields from file ${this.file.path}, check console for details`)}return console.error(r,this.file),null}}async setField(r,n,o){try{await this.app.fileManager.processFrontMatter(this.file,i=>{r!==null&&(r=r.trim(),r||(r=null));let a=i[n];if(a==null){if(!r)return;i[n]=[r];return}if(typeof a=="string"){r!==null?i[n]=[a,r]:i[n]=[a];return}if(typeof a=="number"&&r){i[n]=[String(a),r];return}if(!by(a))throw new Ui(`Cannot write to field ${n} due to existing values: ${a}`,n,a);let s=(c,f)=>{f?i[n][c]=f:(i[n].splice(c,1),i[n].length===0&&delete i[n])},u=c=>i[n].push(c),l=r;if(a[o]){s(o,l);return}l&&u(l)})}catch(i){i instanceof Ui?new fo.Notice(i.message):new fo.Notice(`Failed to write note fields to file ${this.file}: ${i instanceof Error?i.message:"Check console for details"}`),console.error(i,this.file)}}get fieldsToExtract(){return this.plugin.settings.noteFields.fieldNames}async prepareFields(){try{await this.app.fileManager.processFrontMatter(this.file,r=>{for(let n of this.fieldsToExtract){let o=r[n];if(o!=null){if(typeof o=="string"){r[n]=[o];continue}if(typeof o=="number"){r[n]=[String(o)];continue}if(!by(o))throw new Ui(`Cannot write to field ${n} due to existing values: ${o}`,n,o);r[n]=o}}})}catch(r){r instanceof Ui?new fo.Notice(r.message):new fo.Notice(`Failed to convert existing fields in file ${this.file}: ${r instanceof Error?r.message:"Check console for details"}`),console.error(r,this.file)}}},lu=class extends Error{constructor(r,n,o){super(r);this.fieldName=n;this.frontmatter=o}},Hi=class extends Error{constructor(r,n,o){super(r);this.fieldName=n;this.frontmatter=o}},Ui=class extends Error{constructor(r,n,o){super(r);this.fieldName=n;this.frontmatter=o}},by=e=>Array.isArray(e)&&e.every(t=>typeof t=="string"),uG=e=>typeof e=="object"&&e!==null;function cG({error:e,resetErrorBoundary:t}){return e instanceof Hi?m(Rg,{onClick:async()=>{await this.prepareFields();let r=this.app.metadataCache.on("changed",()=>{this.app.metadataCache.offref(r),t()});this.registerEvent(r)}}):m("div",{role:"alert",children:[m("p",{children:"Something went wrong:"}),m("pre",{children:e.message}),m("button",{onClick:t,children:"Try again"})]})}var Ir=require("obsidian");var up=class extends ce{plugin=this.use(be);onload(){this.registerEvent(this.plugin.server.on("zotero/open",t=>this.onZtOpen(fl(t)))),this.registerEvent(this.plugin.server.on("zotero/export",t=>this.onZtExport(fl(t)))),this.registerEvent(this.plugin.server.on("zotero/update",t=>this.onZtExport(fl(t))))}async onZtOpen(t){if(t.type==="annotation"){new Ir.Notice("Not implemented yet");return}if(t.items.length<1){new Ir.Notice("No items to open");return}await this.plugin.noteFeatures.openNote(t.items[0])}async onZtUpdate(t){if(t.type==="annotation"){new Ir.Notice("Single annotation update not yet supported");return}if(t.items.length<1){new Ir.Notice("No items to open");return}if(t.items.length>1){new Ir.Notice("Multiple literature note update not yet supported");return}await this.plugin.noteFeatures.updateNoteFromId(t.items[0])}async onZtExport(t){if(t.type==="annotation"){new Ir.Notice("Not implemented yet");return}t.items.length<1?new Ir.Notice("No items to open"):t.items.length>1&&new Ir.Notice("Multiple items not yet supported");let{libraryID:r,id:n}=t.items[0],[o]=await this.plugin.databaseAPI.getItems([[n,r]]);if(!o){new Ir.Notice("Item not found: "+n);return}let i=await this.plugin.noteFeatures.createNoteForDocItemFull(o);await this.plugin.app.workspace.openLinkText(i,"",!1,{active:!0})}};var sP=require("obsidian");var lG=[{command:"\u2191\u2193",purpose:"to navigate"},{command:"\u21B5",purpose:"to open/create literature note"},{command:"esc",purpose:"to dismiss"}],vy=class extends oo{constructor(r){super(r);this.plugin=r;this.setInstructions(lG)}};async function wy(e){let t=await ss(new vy(e));if(!t)return!1;let{value:{item:r},evt:n}=t;if(await e.noteFeatures.openNote(r,!0))return!0;let o=await e.noteFeatures.createNoteForDocItemFull(r);return await e.app.workspace.openLinkText(o,"",sP.Keymap.isModEvent(n),{active:!0}),!0}var uP=require("@codemirror/state");async function cP(e,t,r=t.settings.template.updateOverwrite){let{app:n,noteIndex:o,templateRenderer:i}=t,a=o.getNotesFor(e);if(a.length===0)return null;let s=t.database.settings.citationLibrary,u=await t.databaseAPI.getAttachments(e.itemID,s),l=new Set(a.flatMap(Fs)),c=u.filter(g=>l.has(g.itemID)),f;c.length===0&&(f=await Hn(u),f&&(Yc(f,e),c.push(f)));let p=await xy(e,{all:u,selected:c},t),d=Object.values(p)[0],h={notes:a.length,addedAnnots:0,updatedAnnots:0};for(let g of a){let y=n.metadataCache.getCache(g);if(!y)continue;let w=Fs(g);w||(f===void 0&&(f=await Hn(c)),f?w=[f.itemID]:w=[]);let x=n.vault.getAbstractFileByPath(g),S={plugin:t,sourcePath:g};if(r){let v=i.renderNote(p[w[0]],S);await n.vault.modify(x,v);continue}let O=bn((y.sections?.filter(Ns)??[]).flatMap(v=>Ps(v.id).map(A=>[A,v.position])),Bn(([v])=>v),lr((v,A)=>({key:v,blocks:A.map(([I,j])=>j)}))),F=new Set(Object.values(y.blocks??{})?.filter(Ns).flatMap(v=>Ps(v.id).map(A=>A))),D=new Map(w.map(v=>[p[v],[]])),P=[];if(w.forEach(v=>{let A=p[v];A.annotations.forEach(I=>{let j=Mt(I,!0),z=O[j];if(z){if(!t.settings.template.updateAnnotBlock)return;let H=i.renderAnnot(I,A,S);P.push(...z.blocks.map(G=>({from:G.start.offset,to:G.end.offset,insert:H})))}else F.has(j)||D.get(A).push(I)})}),P.length>0){let v=uP.EditorState.create({doc:await n.vault.read(x)}).update({changes:P}).state.doc.toString();await n.vault.modify(x,v)}await i.setFrontmatterTo(x,Qt(d,S).docItem);let R=[...D].reduce((v,[A,I])=>{if(I.length===0)return v;let j=i.renderAnnots({...A,annotations:I},S);return(v&&v+`
`)+j},"");R&&await n.vault.append(x,R);let E=P.length,T=[...D.values()].reduce((v,A)=>v+A.length,0);h.updatedAnnots+=E,h.addedAnnots+=T}return h}async function xy(e,{all:t,selected:r},n){let o=n.database.settings.citationLibrary,i=await n.databaseAPI.getTags([[e.itemID,o]]);if(r.length===0)return{[-1]:{docItem:e,attachment:null,tags:i,allAttachments:t,annotations:[]}};let a={};for(let s of r){let u=s?await n.databaseAPI.getAnnotations(s.itemID,o):[];a[s.itemID]={docItem:e,attachment:s,tags:{...i,...await n.databaseAPI.getTags(u.map(l=>[l.itemID,o]))},allAttachments:t,annotations:u}}return a}var Ey=class extends ce{plugin=this.use(be);noteFields=this.use(op);protocol=this.use(up);onload(){let{plugin:t}=this;t.addCommand({id:"note-quick-switcher",name:"Open quick switcher for literature notes",callback:()=>wy(t)}),t.registerView(rp,n=>new tp(n,t)),t.registerView(Bi,n=>new Xf(n,t)),t.registerView(qi,n=>new Qf(n,t)),t.registerEvent(t.app.workspace.on("file-menu",(n,o)=>{let i=t.templateLoader.getTemplateTypeOf(o);i&&n.addItem(a=>a.setIcon("edit").setTitle("Open Template Preview").onClick(()=>{lo(i,null,t)}))})),t.registerView(sp,n=>new ap(n,t)),t.addCommand({id:"zotero-annot-view",name:"Open Zotero Annotation View in Side Panel",callback:()=>{app.workspace.ensureSideLeaf(rp,"right",{active:!0,state:{file:app.workspace.getActiveFile()?.path}})}}),t.addCommand({id:"zotero-note-fields",name:"Open Literature Note Fields in Side Panel",callback:()=>{app.workspace.ensureSideLeaf(sp,"right",{active:!0,state:{file:app.workspace.getActiveFile()?.path}})}}),t.addCommand({id:"insert-markdown-citation",name:"Insert Markdown citation",editorCallback:n=>Hg(n,t)}),t.registerEditorSuggest(new zs(t));let r=async(n,o)=>{let i=t.settings.database.citationLibrary,a=Yn(n);if(!a)return new Gr.Notice("Cannot get zotero item key from file name"),!1;let[s]=await t.databaseAPI.getItems([[a,i]]);if(!s)return new Gr.Notice("Cannot find zotero item with key "+a),!1;await this.updateNote(s,o)};t.addCommand({id:"update-literature-note",name:"Update Literature Note",editorCheckCallback(n,o,i){let a=i.file&&Qn(i.file);if(n)return!!a;a&&r(i.file)}}),t.addCommand({id:"overwrite-update-literature-note",name:"Force Update Literature Note by Overwriting",editorCheckCallback(n,o,i){let a=i.file&&Qn(i.file);if(n)return!!a;a&&r(i.file,!0)}}),t.registerEvent(t.app.workspace.on("file-menu",(n,o)=>{Qn(o)&&(n.addItem(i=>i.setTitle("Update Literature Note").setIcon("sync").onClick(()=>r(o))),t.settings.template.updateOverwrite||n.addItem(i=>i.setTitle("Force Update by Overwriting").setIcon("sync").onClick(()=>r(o,!0))))})),t.registerEvent(t.app.workspace.on("file-menu",(n,o)=>{let i=t.templateLoader.getTemplateTypeOf(o);i&&n.addItem(a=>a.setTitle("Reset to default").setIcon("reset").onClick(async()=>{(app.workspace.activeLeaf?.containerEl.win??window).confirm("Reset template to default?")&&await t.app.vault.modify(o,Vn[i])}))}))}async openNote(t,r=!1){let{workspace:n}=this.plugin.app,{noteIndex:o}=this.plugin,i=o.getNotesFor(t);if(!i.length)return!r&&new Gr.Notice(`No literature note found for zotero item with key ${t.key}`),!1;let a=i.sort().shift();return await n.openLinkText(a,"",!1,{active:!0}),!0}async createNoteForDocItem(t,r){let{noteIndex:n}=this.plugin,o=n.getNotesFor(t);if(o.length)throw new cp(o,t.key);let{vault:i,fileManager:a}=this.plugin.app,{literatureNoteFolder:s}=this.plugin.settings.noteIndex,u=this.plugin.templateRenderer,l=(0,lP.join)(s,u.renderFilename(t)),c=i.getAbstractFileByPath(l);if(c&&Yn(c))throw new cp([l],t.key);return await a.createNewMarkdownFile(i.getRoot(),l,r(u,{plugin:this.plugin,sourcePath:l}))}async createNoteForDocItemFull(t){let r=this.plugin.database.settings.citationLibrary,n=await this.plugin.databaseAPI.getAttachments(t.itemID,r),o=await Hn(n);o&&Yc(o,t);let i=await xy(t,{all:n,selected:o?[o]:[]},this.plugin),a=Object.values(i)[0];return(await this.createNoteForDocItem(t,(u,l)=>u.renderNote(a,l))).path}async updateNoteFromId(t){let{noteIndex:r,databaseAPI:n}=this.plugin;if(!r.getNotesFor(t).length){new Gr.Notice(`No literature note found for zotero item with key ${t.key}`);return}let[i]=await n.getItems([[t.key,t.libraryID]]);if(!i){new Gr.Notice(`Cannot find zotero item with key ${t.key}`);return}await this.updateNote(i)}async updateNote(t,r){let n=await cP(t,this.plugin,r);n?n.addedAnnots>0||n.updatedAnnots>0?new Gr.Notice(`Affected ${n.notes} notes, annotations: ${n.addedAnnots} added, ${n.updatedAnnots} updated`):new Gr.Notice(`Affected ${n.notes} notes, no annotation updated`):new Gr.Notice("No note found for this literature")}},fP=Ey,cp=class extends Error{constructor(r,n){super(`Note linked to ${n} already exists: ${r.join(",")}`);this.targets=r;this.key=n;this.name="NoteExistsError"}};var dP=se(Wd(),1);var fp=require("obsidian");var pP='"use strict";var Jn=Object.create;var Ge=Object.defineProperty,Yn=Object.defineProperties,Xn=Object.getOwnPropertyDescriptor,ei=Object.getOwnPropertyDescriptors,ri=Object.getOwnPropertyNames,ct=Object.getOwnPropertySymbols,ti=Object.getPrototypeOf,ft=Object.prototype.hasOwnProperty,ni=Object.prototype.propertyIsEnumerable;var pt=(e,r,t)=>r in e?Ge(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,Ee=(e,r)=>{for(var t in r||(r={}))ft.call(r,t)&&pt(e,t,r[t]);if(ct)for(var t of ct(r))ni.call(r,t)&&pt(e,t,r[t]);return e},Se=(e,r)=>Yn(e,ei(r));var fe=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports),ht=(e,r)=>{for(var t in r)Ge(e,t,{get:r[t],enumerable:!0})},ii=(e,r,t,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let i of ri(r))!ft.call(e,i)&&i!==t&&Ge(e,i,{get:()=>r[i],enumerable:!(n=Xn(r,i))||n.enumerable});return e};var he=(e,r,t)=>(t=e!=null?Jn(ti(e)):{},ii(r||!e||!e.__esModule?Ge(t,"default",{value:e,enumerable:!0}):t,e));var mt=fe((exports,module)=>{(function(r,t){typeof exports=="object"&&typeof module=="object"?module.exports=t():typeof define=="function"&&define.amd?define("workerpool",[],t):typeof exports=="object"?exports.workerpool=t():r.workerpool=t()})(typeof self!="undefined"?self:exports,function(){return function(){var __webpack_modules__={162:function(e,r,t){"use strict";t.r(r),t.d(r,{IFrameWorker:function(){return i}});function n(){let o=document.createElement("iframe");return o.width=o.height=o.frameBorder="0",o.classList.add("iframe-worker"),o.style.display="contents",o}class i{constructor(a,u){if(this.scriptText=a,this.onerror=null,this.onmessage=null,this.onmessageerror=null,this.handleMessage=f=>{f.source===this.worker&&(f.stopImmediatePropagation(),this.dispatchEvent(new MessageEvent("message",{data:f.data})),this.onmessage&&this.onmessage(f))},this.handleError=(f,l,E,g,h)=>{if(l===this.scriptText.toString()){let m=new ErrorEvent("error",{message:f,filename:l,lineno:E,colno:g,error:h});this.dispatchEvent(m),this.onerror&&this.onerror(m)}},typeof u!="undefined")throw new TypeError("Options are not supported for iframe workers");let s=new EventTarget;this.addEventListener=s.addEventListener.bind(s),this.removeEventListener=s.removeEventListener.bind(s),this.dispatchEvent=s.dispatchEvent.bind(s),document.body.appendChild(this.iframe=n()),this.worker.document.open(),this.worker.document.write(`<html><body><script>window.postMessage=\n(message, origin) => {\n  parent.postMessage(message, origin || "*")\n};window.importScripts=\n(...urls) => urls.reduce((promise, url) => (\n  promise.then(() => new Promise(resolve => {\n    const script = document.createElement("script")\n    script.src = url\n    script.addEventListener("load", () => resolve())\n    document.body.appendChild(script)\n  }))\n), Promise.resolve());addEventListener("error",ev=>{parent.dispatchEvent(new ErrorEvent("error",{filename:"${a.substring(0,50)}",error:ev.error}))})</script><script type="module">${a}</script></body></html>`),this.worker.document.close(),window.addEventListener("message",this.handleMessage),window.onerror=this.handleError,this.ready=new Promise((f,l)=>{this.worker.onload=f,this.worker.onerror=l})}terminate(){document.body.removeChild(this.iframe),window.removeEventListener("message",this.handleMessage),window.onerror=null}postMessage(a){(async()=>{try{await this.ready}catch(u){}finally{this.worker.dispatchEvent(new MessageEvent("message",{data:a}))}})()}get worker(){return this.iframe.contentWindow}}},799:function(e,r,t){var n=t(446),i=t(518),o=t(722),a=t(393),u=new a;function s(h,m){typeof h=="string"?this.script=h||null:(this.script=null,m=h),this.workers=[],this.tasks=[],m=m||{},this.name=m.name,this.forkArgs=Object.freeze(m.forkArgs||[]),this.forkOpts=Object.freeze(m.forkOpts||{}),this.debugPortStart=m.debugPortStart||43210,this.nodeWorker=m.nodeWorker,this.workerType=m.workerType||m.nodeWorker||"auto",this.maxQueueSize=m.maxQueueSize||1/0,this.onCreateWorker=m.onCreateWorker||function(){return null},this.onTerminateWorker=m.onTerminateWorker||function(){return null},m&&"maxWorkers"in m?(f(m.maxWorkers),this.maxWorkers=m.maxWorkers):this.maxWorkers=Math.max((o.cpus||4)-1,1),m&&"minWorkers"in m&&(m.minWorkers==="max"?this.minWorkers=this.maxWorkers:(l(m.minWorkers),this.minWorkers=m.minWorkers,this.maxWorkers=Math.max(this.minWorkers,this.maxWorkers)),this._ensureMinWorkers()),this._boundNext=this._next.bind(this),this.workerType==="thread"&&i.ensureWorkerThreads()}s.prototype.exec=function(h,m,d){if(m&&!Array.isArray(m))throw new TypeError(\'Array expected as argument "params"\');if(typeof h=="string"){var b=n.defer();if(this.tasks.length>=this.maxQueueSize)throw new Error("Max queue size of "+this.maxQueueSize+" reached");var x=this.tasks,q={method:h,params:m,resolver:b,timeout:null,options:d};x.push(q);var C=b.promise.timeout;return b.promise.timeout=function(I){return x.indexOf(q)!==-1?(q.timeout=I,b.promise):C.call(b.promise,I)},this._next(),b.promise}else{if(typeof h=="function")return this.exec("run",[String(h),m]);throw new TypeError(\'Function or string expected as argument "method"\')}},s.prototype.proxy=function(){if(arguments.length>0)throw new Error("No arguments expected");var h=this;return this.exec("methods").then(function(m){var d={};return m.forEach(function(b){d[b]=function(){return h.exec(b,Array.prototype.slice.call(arguments))}}),d})},s.prototype._next=function(){if(this.tasks.length>0){var h=this._getWorker();if(h){var m=this,d=this.tasks.shift();if(d.resolver.promise.pending){var b=h.exec(d.method,d.params,d.resolver,d.options).then(m._boundNext).catch(function(){if(h.terminated)return m._removeWorker(h)}).then(function(){m._next()});typeof d.timeout=="number"&&b.timeout(d.timeout)}else m._next()}}},s.prototype._getWorker=function(){for(var h=this.workers,m=0;m<h.length;m++){var d=h[m];if(d.busy()===!1)return d}return h.length<this.maxWorkers?(d=this._createWorkerHandler(),h.push(d),d):null},s.prototype._removeWorker=function(h){var m=this;return u.releasePort(h.debugPort),this._removeWorkerFromList(h),this._ensureMinWorkers(),new n(function(d,b){h.terminate(!1,function(x){m.onTerminateWorker({forkArgs:h.forkArgs,forkOpts:h.forkOpts,script:h.script}),x?b(x):d(h)})})},s.prototype._removeWorkerFromList=function(h){var m=this.workers.indexOf(h);m!==-1&&this.workers.splice(m,1)},s.prototype.terminate=function(h,m){var d=this;this.tasks.forEach(function(L){L.resolver.reject(new Error("Pool terminated"))}),this.tasks.length=0;var b=function(I){this._removeWorkerFromList(I)},x=b.bind(this),q=[],C=this.workers.slice();return C.forEach(function(L){var I=L.terminateAndNotify(h,m).then(x).always(function(){d.onTerminateWorker({forkArgs:L.forkArgs,forkOpts:L.forkOpts,script:L.script})});q.push(I)}),n.all(q)},s.prototype.stats=function(){var h=this.workers.length,m=this.workers.filter(function(d){return d.busy()}).length;return{totalWorkers:h,busyWorkers:m,idleWorkers:h-m,pendingTasks:this.tasks.length,activeTasks:m}},s.prototype._ensureMinWorkers=function(){if(this.minWorkers)for(var h=this.workers.length;h<this.minWorkers;h++)this.workers.push(this._createWorkerHandler())},s.prototype._createWorkerHandler=function(){var h=this.onCreateWorker({forkArgs:this.forkArgs,forkOpts:this.forkOpts,script:this.script})||{};return new i(h.script||this.script,{forkArgs:h.forkArgs||this.forkArgs,forkOpts:h.forkOpts||this.forkOpts,debugPort:u.nextAvailableStartingAt(this.debugPortStart),workerType:this.workerType,name:this.name})};function f(h){if(!E(h)||!g(h)||h<1)throw new TypeError("Option maxWorkers must be an integer number >= 1")}function l(h){if(!E(h)||!g(h)||h<0)throw new TypeError("Option minWorkers must be an integer number >= 0")}function E(h){return typeof h=="number"}function g(h){return Math.round(h)==h}e.exports=s},446:function(e){"use strict";function r(o,a){var u=this;if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(typeof o!="function")throw new SyntaxError("Function parameter handler(resolve, reject) missing");var s=[],f=[];this.resolved=!1,this.rejected=!1,this.pending=!0;var l=function(m,d){s.push(m),f.push(d)};this.then=function(h,m){return new r(function(d,b){var x=h?t(h,d,b):d,q=m?t(m,d,b):b;l(x,q)},u)};var E=function(m){return u.resolved=!0,u.rejected=!1,u.pending=!1,s.forEach(function(d){d(m)}),l=function(b,x){b(m)},E=g=function(){},u},g=function(m){return u.resolved=!1,u.rejected=!0,u.pending=!1,f.forEach(function(d){d(m)}),l=function(b,x){x(m)},E=g=function(){},u};this.cancel=function(){return a?a.cancel():g(new n),u},this.timeout=function(h){if(a)a.timeout(h);else{var m=setTimeout(function(){g(new i("Promise timed out after "+h+" ms"))},h);u.always(function(){clearTimeout(m)})}return u},o(function(h){E(h)},function(h){g(h)})}function t(o,a,u){return function(s){try{var f=o(s);f&&typeof f.then=="function"&&typeof f.catch=="function"?f.then(a,u):a(f)}catch(l){u(l)}}}r.prototype.catch=function(o){return this.then(null,o)},r.prototype.always=function(o){return this.then(o,o)},r.all=function(o){return new r(function(a,u){var s=o.length,f=[];s?o.forEach(function(l,E){l.then(function(g){f[E]=g,s--,s==0&&a(f)},function(g){s=0,u(g)})}):a(f)})},r.defer=function(){var o={};return o.promise=new r(function(a,u){o.resolve=a,o.reject=u}),o};function n(o){this.message=o||"promise cancelled",this.stack=new Error().stack}n.prototype=new Error,n.prototype.constructor=Error,n.prototype.name="CancellationError",r.CancellationError=n;function i(o){this.message=o||"timeout exceeded",this.stack=new Error().stack}i.prototype=new Error,i.prototype.constructor=Error,i.prototype.name="TimeoutError",r.TimeoutError=i,e.exports=r},518:function(e,r,t){"use strict";function n(S,T){var k=typeof Symbol!="undefined"&&S[Symbol.iterator]||S["@@iterator"];if(!k){if(Array.isArray(S)||(k=i(S))||T&&S&&typeof S.length=="number"){k&&(S=k);var _=0,v=function(){};return{s:v,n:function(){return _>=S.length?{done:!0}:{done:!1,value:S[_++]}},e:function(N){throw N},f:v}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var O=!0,M=!1,z;return{s:function(){k=k.call(S)},n:function(){var N=k.next();return O=N.done,N},e:function(N){M=!0,z=N},f:function(){try{!O&&k.return!=null&&k.return()}finally{if(M)throw z}}}}function i(S,T){if(S){if(typeof S=="string")return o(S,T);var k=Object.prototype.toString.call(S).slice(8,-1);if(k==="Object"&&S.constructor&&(k=S.constructor.name),k==="Map"||k==="Set")return Array.from(S);if(k==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(k))return o(S,T)}}function o(S,T){(T==null||T>S.length)&&(T=S.length);for(var k=0,_=new Array(T);k<T;k++)_[k]=S[k];return _}function a(S){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},a(S)}var u=t(446),s=t(722),f=t(781),l=t(162),E=l.IFrameWorker,g="__workerpool-terminate__",h=1e3;function m(){var S=b();if(!S)throw new Error("WorkerPool: workerType = \'thread\' is not supported, Node >= 11.7.0 required");return S}function d(){if(typeof Worker!="function"&&((typeof Worker=="undefined"?"undefined":a(Worker))!=="object"||typeof Worker.prototype.constructor!="function"))throw new Error("WorkerPool: Web Workers not supported")}function b(){try{return f("worker_threads")}catch(S){if(a(S)==="object"&&S!==null&&S.code==="MODULE_NOT_FOUND")return null;throw S}}function x(){if(s.platform==="browser"){if(typeof Blob=="undefined")throw new Error("Blob not supported by the browser");if(!window.URL||typeof window.URL.createObjectURL!="function")throw new Error("URL.createObjectURL not supported by the browser");var S=new Blob([t(710)],{type:"text/javascript"});return window.URL.createObjectURL(S)}else return __dirname+"/worker.js"}function q(S,T){if(T.workerType==="iframe")return C(S,E,T);if(T.workerType==="web")return d(),C(S,Worker,T);if(T.workerType==="thread")return k=m(),L(S,k);if(T.workerType==="process"||!T.workerType)return I(S,y(T),f("child_process"));if(s.platform==="browser")return d(),C(S,Worker);var k=b();return k?L(S,k):I(S,y(T),f("child_process"))}function C(S,T,k){var _=new T(S,k!=null&&k.name?{name:"".concat(k.name,"-").concat(Date.now())}:void 0);return _.isBrowserWorker=!0,_.on=function(v,O){this.addEventListener(v,function(M){O(M.data)})},_.send=function(v){this.postMessage(v)},_}function L(S,T){var k=new T.Worker(S,{stdout:!1,stderr:!1});return k.isWorkerThread=!0,k.send=function(_){this.postMessage(_)},k.kill=function(){return this.terminate(),!0},k.disconnect=function(){this.terminate()},k}function I(S,T,k){var _=k.fork(S,T.forkArgs,T.forkOpts);return _.isChildProcess=!0,_}function y(S){S=S||{};var T=process.execArgv.join(" "),k=T.indexOf("--inspect")!==-1,_=T.indexOf("--debug-brk")!==-1,v=[];return k&&(v.push("--inspect="+S.debugPort),_&&v.push("--debug-brk")),process.execArgv.forEach(function(O){O.indexOf("--max-old-space-size")>-1&&v.push(O)}),Object.assign({},S,{forkArgs:S.forkArgs,forkOpts:Object.assign({},S.forkOpts,{execArgv:(S.forkOpts&&S.forkOpts.execArgv||[]).concat(v)})})}function D(S){for(var T=new Error(""),k=Object.keys(S),_=0;_<k.length;_++)T[k[_]]=S[k[_]];return T}function B(S,T){var k=this,_=T||{};this.script=S||x(),this.worker=q(this.script,_),this.debugPort=_.debugPort,this.forkOpts=_.forkOpts,this.forkArgs=_.forkArgs,S||(this.worker.ready=!0),this.requestQueue=[],this.worker.on("message",function(z){if(!k.terminated)if(typeof z=="string"&&z==="ready")k.worker.ready=!0,O();else{var W=z.id,N=k.processing[W];N!==void 0&&(z.isEvent?N.options&&typeof N.options.on=="function"&&N.options.on(z.payload):(delete k.processing[W],k.terminating===!0&&k.terminate(),z.error?N.resolver.reject(D(z.error)):N.resolver.resolve(z.result)))}});function v(z){k.terminated=!0;for(var W in k.processing)k.processing[W]!==void 0&&k.processing[W].resolver.reject(z);k.processing=Object.create(null)}function O(){var z=n(k.requestQueue.splice(0)),W;try{for(z.s();!(W=z.n()).done;){var N=W.value;k.worker.send(N)}}catch($){z.e($)}finally{z.f()}}var M=this.worker;this.worker.on("error",v),this.worker.on("exit",function(z,W){var N=`Workerpool Worker terminated Unexpectedly\n`;N+="    exitCode: `"+z+"`\\n",N+="    signalCode: `"+W+"`\\n",N+="    workerpool.script: `"+k.script+"`\\n",N+="    spawnArgs: `"+M.spawnargs+"`\\n",N+="    spawnfile: `"+M.spawnfile+"`\\n",N+="    stdout: `"+M.stdout+"`\\n",N+="    stderr: `"+M.stderr+"`\\n",v(new Error(N))}),this.processing=Object.create(null),this.terminating=!1,this.terminated=!1,this.terminationHandler=null,this.lastId=0}B.prototype.methods=function(){return this.exec("methods")},B.prototype.exec=function(S,T,k,_){k||(k=u.defer());var v=++this.lastId;this.processing[v]={id:v,resolver:k,options:_};var O={id:v,method:S,params:T};this.terminated?k.reject(new Error("Worker is terminated")):this.worker.ready?this.worker.send(O):this.requestQueue.push(O);var M=this;return k.promise.catch(function(z){if(z instanceof u.CancellationError||z instanceof u.TimeoutError)return delete M.processing[v],M.terminateAndNotify(!0).then(function(){throw z},function(W){throw W});throw z})},B.prototype.busy=function(){return Object.keys(this.processing).length>0},B.prototype.terminate=function(S,T){var k=this;if(S){for(var _ in this.processing)this.processing[_]!==void 0&&this.processing[_].resolver.reject(new Error("Worker terminated"));this.processing=Object.create(null)}if(typeof T=="function"&&(this.terminationHandler=T),this.busy())this.terminating=!0;else{var v=function(z){if(k.terminated=!0,k.worker!=null&&k.worker.removeAllListeners&&k.worker.removeAllListeners("message"),k.worker=null,k.terminating=!1,k.terminationHandler)k.terminationHandler(z,k);else if(z)throw z};if(this.worker)if(typeof this.worker.kill=="function"){if(this.worker.killed){v(new Error("worker already killed!"));return}if(this.worker.isChildProcess){var O=setTimeout(function(){k.worker&&k.worker.kill()},h);this.worker.once("exit",function(){clearTimeout(O),k.worker&&(k.worker.killed=!0),v()}),this.worker.ready?this.worker.send(g):this.requestQueue.push(g)}else this.worker.kill(),this.worker.killed=!0,v();return}else if(typeof this.worker.terminate=="function")this.worker.terminate(),this.worker.killed=!0;else throw new Error("Failed to terminate worker");v()}},B.prototype.terminateAndNotify=function(S,T){var k=u.defer();return T&&(k.promise.timeout=T),this.terminate(S,function(_,v){_?k.reject(_):k.resolve(v)}),k.promise},e.exports=B,e.exports._tryRequireWorkerThreads=b,e.exports._setupProcessWorker=I,e.exports._setupBrowserWorker=C,e.exports._setupWorkerThreadWorker=L,e.exports.ensureWorkerThreads=m},393:function(e){"use strict";var r=65535;e.exports=t;function t(){this.ports=Object.create(null),this.length=0}t.prototype.nextAvailableStartingAt=function(n){for(;this.ports[n]===!0;)n++;if(n>=r)throw new Error("WorkerPool debug port limit reached: "+n+">= "+r);return this.ports[n]=!0,this.length++,n},t.prototype.releasePort=function(n){delete this.ports[n],this.length--}},722:function(e,r,t){var n=t(781),i=function(s){return typeof s!="undefined"&&s.versions!=null&&s.versions.node!=null};e.exports.isNode=i,e.exports.platform=typeof process!="undefined"&&i(process)?"node":"browser";var o=a("worker_threads");e.exports.isMainThread=e.exports.platform==="node"?(!o||o.isMainThread)&&!process.connected:typeof Window!="undefined",e.exports.cpus=e.exports.platform==="browser"?self.navigator.hardwareConcurrency:n("os").cpus().length;function a(u){try{return n(u)}catch(s){return null}}},710:function(e){e.exports=`!function(){var __webpack_exports__={};!function(){var exports=__webpack_exports__,__webpack_unused_export__;function _typeof(r){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}var requireFoolWebpack=eval("typeof require !== \'undefined\' ? require : function (module) { throw new Error(\'Module \\\\" + module + \\\\" not found.\') }"),TERMINATE_METHOD_ID="__workerpool-terminate__",worker={exit:function(){}},WorkerThreads,parentPort;if("undefined"!=typeof self&&"function"==typeof postMessage&&"function"==typeof addEventListener)worker.on=function(r,e){addEventListener(r,function(r){e(r.data)})},worker.send=function(r){postMessage(r)};else{if("undefined"==typeof process)throw new Error("Script must be executed as a worker");try{WorkerThreads=requireFoolWebpack("worker_threads")}catch(error){if("object"!==_typeof(error)||null===error||"MODULE_NOT_FOUND"!==error.code)throw error}WorkerThreads&&null!==WorkerThreads.parentPort?(parentPort=WorkerThreads.parentPort,worker.send=parentPort.postMessage.bind(parentPort),worker.on=parentPort.on.bind(parentPort)):(worker.on=process.on.bind(process),worker.send=process.send.bind(process),worker.on("disconnect",function(){process.exit(1)}),worker.exit=process.exit.bind(process))}function convertError(o){return Object.getOwnPropertyNames(o).reduce(function(r,e){return Object.defineProperty(r,e,{value:o[e],enumerable:!0})},{})}function isPromise(r){return r&&"function"==typeof r.then&&"function"==typeof r.catch}worker.methods={},worker.methods.run=function(r,e){r=new Function("return ("+r+").apply(null, arguments);");return r.apply(r,e)},worker.methods.methods=function(){return Object.keys(worker.methods)};var currentRequestId=null;worker.on("message",function(e){if(e===TERMINATE_METHOD_ID)return worker.exit(0);try{var r=worker.methods[e.method];if(!r)throw new Error(\'Unknown method "\'+e.method+\'"\');currentRequestId=e.id;var o=r.apply(r,e.params);isPromise(o)?o.then(function(r){worker.send({id:e.id,result:r,error:null}),currentRequestId=null}).catch(function(r){worker.send({id:e.id,result:null,error:convertError(r)}),currentRequestId=null}):(worker.send({id:e.id,result:o,error:null}),currentRequestId=null)}catch(r){worker.send({id:e.id,result:null,error:convertError(r)})}}),worker.register=function(r){if(r)for(var e in r)r.hasOwnProperty(e)&&(worker.methods[e]=r[e]);worker.send("ready")},worker.emit=function(r){currentRequestId&&worker.send({id:currentRequestId,isEvent:!0,payload:r})},__webpack_unused_export__=worker.register,worker.emit}()}();`},781:function(module){var requireFoolWebpack=eval(`typeof require !== \'undefined\' ? require : function (module) { throw new Error(\'Module " + module + " not found.\') }`);module.exports=requireFoolWebpack},52:function(__unused_webpack_module,exports){function _typeof(e){return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},_typeof(e)}var requireFoolWebpack=eval(`typeof require !== \'undefined\' ? require : function (module) { throw new Error(\'Module " + module + " not found.\') }`),TERMINATE_METHOD_ID="__workerpool-terminate__",worker={exit:function e(){}};if(typeof self!="undefined"&&typeof postMessage=="function"&&typeof addEventListener=="function")worker.on=function(e,r){addEventListener(e,function(t){r(t.data)})},worker.send=function(e){postMessage(e)};else if(typeof process!="undefined"){var WorkerThreads;try{WorkerThreads=requireFoolWebpack("worker_threads")}catch(e){if(!(_typeof(e)==="object"&&e!==null&&e.code==="MODULE_NOT_FOUND"))throw e}if(WorkerThreads&&WorkerThreads.parentPort!==null){var parentPort=WorkerThreads.parentPort;worker.send=parentPort.postMessage.bind(parentPort),worker.on=parentPort.on.bind(parentPort)}else worker.on=process.on.bind(process),worker.send=process.send.bind(process),worker.on("disconnect",function(){process.exit(1)}),worker.exit=process.exit.bind(process)}else throw new Error("Script must be executed as a worker");function convertError(e){return Object.getOwnPropertyNames(e).reduce(function(r,t){return Object.defineProperty(r,t,{value:e[t],enumerable:!0})},{})}function isPromise(e){return e&&typeof e.then=="function"&&typeof e.catch=="function"}worker.methods={},worker.methods.run=function e(r,t){var n=new Function("return ("+r+").apply(null, arguments);");return n.apply(n,t)},worker.methods.methods=function e(){return Object.keys(worker.methods)};var currentRequestId=null;worker.on("message",function(e){if(e===TERMINATE_METHOD_ID)return worker.exit(0);try{var r=worker.methods[e.method];if(r){currentRequestId=e.id;var t=r.apply(r,e.params);isPromise(t)?t.then(function(n){worker.send({id:e.id,result:n,error:null}),currentRequestId=null}).catch(function(n){worker.send({id:e.id,result:null,error:convertError(n)}),currentRequestId=null}):(worker.send({id:e.id,result:t,error:null}),currentRequestId=null)}else throw new Error(\'Unknown method "\'+e.method+\'"\')}catch(n){worker.send({id:e.id,result:null,error:convertError(n)})}}),worker.register=function(e){if(e)for(var r in e)e.hasOwnProperty(r)&&(worker.methods[r]=e[r]);worker.send("ready")},worker.emit=function(e){currentRequestId&&worker.send({id:currentRequestId,isEvent:!0,payload:e})},exports.add=worker.register,exports.emit=worker.emit}},__webpack_module_cache__={};function __webpack_require__(e){var r=__webpack_module_cache__[e];if(r!==void 0)return r.exports;var t=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](t,t.exports,__webpack_require__),t.exports}(function(){__webpack_require__.d=function(e,r){for(var t in r)__webpack_require__.o(r,t)&&!__webpack_require__.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})}})(),function(){__webpack_require__.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)}}(),function(){__webpack_require__.r=function(e){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}();var __webpack_exports__={};return function(){var e=__webpack_exports__,r=__webpack_require__(722);e.pool=function(n,i){var o=__webpack_require__(799);return new o(n,i)},e.worker=function(n){var i=__webpack_require__(52);i.add(n)},e.workerEmit=function(n){var i=__webpack_require__(52);i.emit(n)},e.Promise=__webpack_require__(446),e.platform=r.platform,e.isMainThread=r.isMainThread,e.cpus=r.cpus}(),__webpack_exports__}()})});var Nr=fe((hc,Yt)=>{Yt.exports=function(r){return r!=null&&r.constructor!=null&&typeof r.constructor.isBuffer=="function"&&r.constructor.isBuffer(r)}});var sn=fe((mc,an)=>{"use strict";var ir=Object.prototype.hasOwnProperty,un=Object.prototype.toString,Xt=Object.defineProperty,en=Object.getOwnPropertyDescriptor,rn=function(r){return typeof Array.isArray=="function"?Array.isArray(r):un.call(r)==="[object Array]"},tn=function(r){if(!r||un.call(r)!=="[object Object]")return!1;var t=ir.call(r,"constructor"),n=r.constructor&&r.constructor.prototype&&ir.call(r.constructor.prototype,"isPrototypeOf");if(r.constructor&&!t&&!n)return!1;var i;for(i in r);return typeof i=="undefined"||ir.call(r,i)},nn=function(r,t){Xt&&t.name==="__proto__"?Xt(r,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):r[t.name]=t.newValue},on=function(r,t){if(t==="__proto__")if(ir.call(r,t)){if(en)return en(r,t).value}else return;return r[t]};an.exports=function e(){var r,t,n,i,o,a,u=arguments[0],s=1,f=arguments.length,l=!1;for(typeof u=="boolean"&&(l=u,u=arguments[1]||{},s=2),(u==null||typeof u!="object"&&typeof u!="function")&&(u={});s<f;++s)if(r=arguments[s],r!=null)for(t in r)n=on(u,t),i=on(r,t),u!==i&&(l&&i&&(tn(i)||(o=rn(i)))?(o?(o=!1,a=n&&rn(n)?n:[]):a=n&&tn(n)?n:{},nn(u,{name:t,newValue:e(l,a,i)})):typeof i!="undefined"&&nn(u,{name:t,newValue:i}));return u}});var An=fe((Vc,vn)=>{vn.exports={trueFunc:function(){return!0},falseFunc:function(){return!1}}});var et=fe(te=>{"use strict";Object.defineProperty(te,"__esModule",{value:!0});function fu(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"||e==="-"||e==="_"}te.isIdentStart=fu;function hu(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"||e>="0"&&e<="9"||e==="-"||e==="_"}te.isIdent=hu;function mu(e){return e>="a"&&e<="f"||e>="A"&&e<="F"||e>="0"&&e<="9"}te.isHex=mu;function du(e){for(var r=e.length,t="",n=0;n<r;){var i=e.charAt(n);if(te.identSpecialChars[i])t+="\\\\"+i;else if(i==="_"||i==="-"||i>="A"&&i<="Z"||i>="a"&&i<="z"||n!==0&&i>="0"&&i<="9")t+=i;else{var o=i.charCodeAt(0);if((o&63488)===55296){var a=e.charCodeAt(n++);if((o&64512)!==55296||(a&64512)!==56320)throw Error("UCS-2(decode): illegal sequence");o=((o&1023)<<10)+(a&1023)+65536}t+="\\\\"+o.toString(16)+" "}n++}return t}te.escapeIdentifier=du;function gu(e){for(var r=e.length,t="",n=0,i;n<r;){var o=e.charAt(n);o===\'"\'?o=\'\\\\"\':o==="\\\\"?o="\\\\\\\\":(i=te.strReplacementsRev[o])!==void 0&&(o=i),t+=o,n++}return\'"\'+t+\'"\'}te.escapeStr=gu;te.identSpecialChars={"!":!0,\'"\':!0,"#":!0,$:!0,"%":!0,"&":!0,"\'":!0,"(":!0,")":!0,"*":!0,"+":!0,",":!0,".":!0,"/":!0,";":!0,"<":!0,"=":!0,">":!0,"?":!0,"@":!0,"[":!0,"\\\\":!0,"]":!0,"^":!0,"`":!0,"{":!0,"|":!0,"}":!0,"~":!0};te.strReplacementsRev={"\\n":"\\\\n","\\r":"\\\\r","	":"\\\\t","\\f":"\\\\f","\\v":"\\\\v"};te.singleQuoteEscapeChars={n:`\n`,r:"\\r",t:"	",f:"\\f","\\\\":"\\\\","\'":"\'"};te.doubleQuotesEscapeChars={n:`\n`,r:"\\r",t:"	",f:"\\f","\\\\":"\\\\",\'"\':\'"\'}});var In=fe(rt=>{"use strict";Object.defineProperty(rt,"__esModule",{value:!0});var ue=et();function xu(e,r,t,n,i,o){var a=e.length,u="";function s(d,b){var x="";for(r++,u=e.charAt(r);r<a;){if(u===d)return r++,x;if(u==="\\\\"){r++,u=e.charAt(r);var q=void 0;if(u===d)x+=d;else if((q=b[u])!==void 0)x+=q;else if(ue.isHex(u)){var C=u;for(r++,u=e.charAt(r);ue.isHex(u);)C+=u,r++,u=e.charAt(r);u===" "&&(r++,u=e.charAt(r)),x+=String.fromCharCode(parseInt(C,16));continue}else x+=u}else x+=u;r++,u=e.charAt(r)}return x}function f(){var d="";for(u=e.charAt(r);r<a;){if(ue.isIdent(u))d+=u;else if(u==="\\\\"){if(r++,r>=a)throw Error("Expected symbol but end of file reached.");if(u=e.charAt(r),ue.identSpecialChars[u])d+=u;else if(ue.isHex(u)){var b=u;for(r++,u=e.charAt(r);ue.isHex(u);)b+=u,r++,u=e.charAt(r);u===" "&&(r++,u=e.charAt(r)),d+=String.fromCharCode(parseInt(b,16));continue}else d+=u}else return d;r++,u=e.charAt(r)}return d}function l(){u=e.charAt(r);for(var d=!1;u===" "||u==="	"||u===`\n`||u==="\\r"||u==="\\f";)d=!0,r++,u=e.charAt(r);return d}function E(){var d=g();if(r<a)throw Error(\'Rule expected but "\'+e.charAt(r)+\'" found.\');return d}function g(){var d=h();if(!d)return null;var b=d;for(u=e.charAt(r);u===",";){if(r++,l(),b.type!=="selectors"&&(b={type:"selectors",selectors:[d]}),d=h(),!d)throw Error(\'Rule expected after ",".\');b.selectors.push(d)}return b}function h(){l();var d={type:"ruleSet"},b=m();if(!b)return null;for(var x=d;b&&(b.type="rule",x.rule=b,x=b,l(),u=e.charAt(r),!(r>=a||u===","||u===")"));)if(i[u]){var q=u;if(r++,l(),b=m(),!b)throw Error(\'Rule expected after "\'+q+\'".\');b.nestingOperator=q}else b=m(),b&&(b.nestingOperator=null);return d}function m(){for(var d=null;r<a;)if(u=e.charAt(r),u==="*")r++,(d=d||{}).tagName="*";else if(ue.isIdentStart(u)||u==="\\\\")(d=d||{}).tagName=f();else if(u===".")r++,d=d||{},(d.classNames=d.classNames||[]).push(f());else if(u==="#")r++,(d=d||{}).id=f();else if(u==="["){r++,l();var b={name:f()};if(l(),u==="]")r++;else{var x="";if(n[u]&&(x=u,r++,u=e.charAt(r)),r>=a)throw Error(\'Expected "=" but end of file reached.\');if(u!=="=")throw Error(\'Expected "=" but "\'+u+\'" found.\');b.operator=x+"=",r++,l();var q="";if(b.valueType="string",u===\'"\')q=s(\'"\',ue.doubleQuotesEscapeChars);else if(u==="\'")q=s("\'",ue.singleQuoteEscapeChars);else if(o&&u==="$")r++,q=f(),b.valueType="substitute";else{for(;r<a&&u!=="]";)q+=u,r++,u=e.charAt(r);q=q.trim()}if(l(),r>=a)throw Error(\'Expected "]" but end of file reached.\');if(u!=="]")throw Error(\'Expected "]" but "\'+u+\'" found.\');r++,b.value=q}d=d||{},(d.attrs=d.attrs||[]).push(b)}else if(u===":"){r++;var C=f(),L={name:C};if(u==="("){r++;var I="";if(l(),t[C]==="selector")L.valueType="selector",I=g();else{if(L.valueType=t[C]||"string",u===\'"\')I=s(\'"\',ue.doubleQuotesEscapeChars);else if(u==="\'")I=s("\'",ue.singleQuoteEscapeChars);else if(o&&u==="$")r++,I=f(),L.valueType="substitute";else{for(;r<a&&u!==")";)I+=u,r++,u=e.charAt(r);I=I.trim()}l()}if(r>=a)throw Error(\'Expected ")" but end of file reached.\');if(u!==")")throw Error(\'Expected ")" but "\'+u+\'" found.\');r++,L.value=I}d=d||{},(d.pseudos=d.pseudos||[]).push(L)}else break;return d}return E()}rt.parseCssSelector=xu});var Ln=fe(tt=>{"use strict";Object.defineProperty(tt,"__esModule",{value:!0});var ne=et();function cr(e){var r="";switch(e.type){case"ruleSet":for(var t=e.rule,n=[];t;)t.nestingOperator&&n.push(t.nestingOperator),n.push(cr(t)),t=t.rule;r=n.join(" ");break;case"selectors":r=e.selectors.map(cr).join(", ");break;case"rule":e.tagName&&(e.tagName==="*"?r="*":r=ne.escapeIdentifier(e.tagName)),e.id&&(r+="#"+ne.escapeIdentifier(e.id)),e.classNames&&(r+=e.classNames.map(function(i){return"."+ne.escapeIdentifier(i)}).join("")),e.attrs&&(r+=e.attrs.map(function(i){return"operator"in i?i.valueType==="substitute"?"["+ne.escapeIdentifier(i.name)+i.operator+"$"+i.value+"]":"["+ne.escapeIdentifier(i.name)+i.operator+ne.escapeStr(i.value)+"]":"["+ne.escapeIdentifier(i.name)+"]"}).join("")),e.pseudos&&(r+=e.pseudos.map(function(i){return i.valueType?i.valueType==="selector"?":"+ne.escapeIdentifier(i.name)+"("+cr(i.value)+")":i.valueType==="substitute"?":"+ne.escapeIdentifier(i.name)+"($"+i.value+")":i.valueType==="numeric"?":"+ne.escapeIdentifier(i.name)+"("+i.value+")":":"+ne.escapeIdentifier(i.name)+"("+ne.escapeIdentifier(i.value)+")":":"+ne.escapeIdentifier(i.name)}).join(""));break;default:throw Error(\'Unknown entity type: "\'+e.type+\'".\')}return r}tt.renderEntity=cr});var On=fe(nt=>{"use strict";Object.defineProperty(nt,"__esModule",{value:!0});var ku=In(),wu=Ln(),yu=function(){function e(){this.pseudos={},this.attrEqualityMods={},this.ruleNestingOperators={},this.substitutesEnabled=!1}return e.prototype.registerSelectorPseudos=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];for(var n=0,i=r;n<i.length;n++){var o=i[n];this.pseudos[o]="selector"}return this},e.prototype.unregisterSelectorPseudos=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];for(var n=0,i=r;n<i.length;n++){var o=i[n];delete this.pseudos[o]}return this},e.prototype.registerNumericPseudos=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];for(var n=0,i=r;n<i.length;n++){var o=i[n];this.pseudos[o]="numeric"}return this},e.prototype.unregisterNumericPseudos=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];for(var n=0,i=r;n<i.length;n++){var o=i[n];delete this.pseudos[o]}return this},e.prototype.registerNestingOperators=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];for(var n=0,i=r;n<i.length;n++){var o=i[n];this.ruleNestingOperators[o]=!0}return this},e.prototype.unregisterNestingOperators=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];for(var n=0,i=r;n<i.length;n++){var o=i[n];delete this.ruleNestingOperators[o]}return this},e.prototype.registerAttrEqualityMods=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];for(var n=0,i=r;n<i.length;n++){var o=i[n];this.attrEqualityMods[o]=!0}return this},e.prototype.unregisterAttrEqualityMods=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];for(var n=0,i=r;n<i.length;n++){var o=i[n];delete this.attrEqualityMods[o]}return this},e.prototype.enableSubstitutes=function(){return this.substitutesEnabled=!0,this},e.prototype.disableSubstitutes=function(){return this.substitutesEnabled=!1,this},e.prototype.parse=function(r){return ku.parseCssSelector(r,0,this.pseudos,this.attrEqualityMods,this.ruleNestingOperators,this.substitutesEnabled)},e.prototype.render=function(r){return wu.renderEntity(r).trim()},e}();nt.CssSelectorParser=yu});var Nn=fe(fr=>{"use strict";Object.defineProperty(fr,"__esModule",{value:!0});function Bn(e,r){if(r)return e;throw new Error("Unhandled discriminated union member: "+JSON.stringify(e))}fr.assertNever=Bn;fr.default=Bn});var jn=he(mt(),1);var dr={};ht(dr,{loggerCategory:()=>dt});var dt=e=>`obsidian-zotero:${e}`;var gt=(e,r,t=!0)=>(n,...i)=>{let o="";for(let a=0;a<n.length;a++)a>0&&(o+=e(i[a-1])),o+=(t?n.raw:n)[a];return r(o)},kr=(e=!0,r)=>gt(t=>t,t=>new RegExp(e?"^"+t+"$":t,r),!0),gr=String.raw`[23456789ABCDEFGHIJKLMNPQRSTUVWXYZ]{8}`,xr=String.raw`\\d+`,xt=e=>{let r={annotKey:gr,parentKey:gr,groupID:xr,page:xr};if(e)for(let t in r)r[t]=`(${r[t]})`;return gt(t=>r[t],t=>t)`${"annotKey"}a${"parentKey"}(?:g${"groupID"})?(?:p${"page"})?`},Fu=kr()`${gr}(?:g${xr})?`,_u=kr()`${xt(!0)}`,Iu=kr()`(?:${xt(!1)}n?)+`;function kt(e,r){let t=Object.keys(r).map(n=>oi(e,n,r[n]));return t.length===1?t[0]:function(){t.forEach(n=>n())}}function oi(e,r,t){let n=e[r],i=e.hasOwnProperty(r),o=t(n);return n&&Object.setPrototypeOf(o,n),Object.setPrototypeOf(a,o),e[r]=a,u;function a(...s){return o===n&&e[r]===a&&u(),o.apply(this,s)}function u(){e[r]===a&&(i?e[r]=n:delete e[r]),o!==n&&(o=n,Object.setPrototypeOf(a,n||Function))}}var wt=e=>{let r=t=>async(...n)=>{try{return await t(...n)}catch(i){throw console.error(i),i}};return kt(e,Object.fromEntries(Object.keys(e).map(t=>[t,r]))),e};function wr(e,r){let t=(r||{}).includeImageAlt;return bt(e,typeof t=="boolean"?t:!0)}function bt(e,r){return ui(e)&&("value"in e&&e.value||r&&"alt"in e&&e.alt||"children"in e&&yt(e.children,r))||Array.isArray(e)&&yt(e,r)||""}function yt(e,r){let t=[],n=-1;for(;++n<e.length;)t[n]=bt(e[n],r);return t.join("")}function ui(e){return!!(e&&typeof e=="object")}function Z(e,r,t,n){let i=e.length,o=0,a;if(r<0?r=-r>i?0:i+r:r=r>i?i:r,t=t>0?t:0,n.length<1e4)a=Array.from(n),a.unshift(r,t),[].splice.apply(e,a);else for(t&&[].splice.apply(e,[r,t]);o<n.length;)a=n.slice(o,o+1e4),a.unshift(r,0),[].splice.apply(e,a),o+=1e4,r+=1e4}function X(e,r){return e.length>0?(Z(e,e.length,0,r),e):r}var Et={}.hasOwnProperty;function St(e){let r={},t=-1;for(;++t<e.length;)ai(r,e[t]);return r}function ai(e,r){let t;for(t in r){let i=(Et.call(e,t)?e[t]:void 0)||(e[t]={}),o=r[t],a;for(a in o){Et.call(i,a)||(i[a]=[]);let u=o[a];si(i[a],Array.isArray(u)?u:u?[u]:[])}}}function si(e,r){let t=-1,n=[];for(;++t<r.length;)(r[t].add==="after"?e:n).push(r[t]);Z(e,0,0,n)}var vt=/[!-/:-@[-`{-~\\u00A1\\u00A7\\u00AB\\u00B6\\u00B7\\u00BB\\u00BF\\u037E\\u0387\\u055A-\\u055F\\u0589\\u058A\\u05BE\\u05C0\\u05C3\\u05C6\\u05F3\\u05F4\\u0609\\u060A\\u060C\\u060D\\u061B\\u061E\\u061F\\u066A-\\u066D\\u06D4\\u0700-\\u070D\\u07F7-\\u07F9\\u0830-\\u083E\\u085E\\u0964\\u0965\\u0970\\u09FD\\u0A76\\u0AF0\\u0C77\\u0C84\\u0DF4\\u0E4F\\u0E5A\\u0E5B\\u0F04-\\u0F12\\u0F14\\u0F3A-\\u0F3D\\u0F85\\u0FD0-\\u0FD4\\u0FD9\\u0FDA\\u104A-\\u104F\\u10FB\\u1360-\\u1368\\u1400\\u166E\\u169B\\u169C\\u16EB-\\u16ED\\u1735\\u1736\\u17D4-\\u17D6\\u17D8-\\u17DA\\u1800-\\u180A\\u1944\\u1945\\u1A1E\\u1A1F\\u1AA0-\\u1AA6\\u1AA8-\\u1AAD\\u1B5A-\\u1B60\\u1BFC-\\u1BFF\\u1C3B-\\u1C3F\\u1C7E\\u1C7F\\u1CC0-\\u1CC7\\u1CD3\\u2010-\\u2027\\u2030-\\u2043\\u2045-\\u2051\\u2053-\\u205E\\u207D\\u207E\\u208D\\u208E\\u2308-\\u230B\\u2329\\u232A\\u2768-\\u2775\\u27C5\\u27C6\\u27E6-\\u27EF\\u2983-\\u2998\\u29D8-\\u29DB\\u29FC\\u29FD\\u2CF9-\\u2CFC\\u2CFE\\u2CFF\\u2D70\\u2E00-\\u2E2E\\u2E30-\\u2E4F\\u2E52\\u3001-\\u3003\\u3008-\\u3011\\u3014-\\u301F\\u3030\\u303D\\u30A0\\u30FB\\uA4FE\\uA4FF\\uA60D-\\uA60F\\uA673\\uA67E\\uA6F2-\\uA6F7\\uA874-\\uA877\\uA8CE\\uA8CF\\uA8F8-\\uA8FA\\uA8FC\\uA92E\\uA92F\\uA95F\\uA9C1-\\uA9CD\\uA9DE\\uA9DF\\uAA5C-\\uAA5F\\uAADE\\uAADF\\uAAF0\\uAAF1\\uABEB\\uFD3E\\uFD3F\\uFE10-\\uFE19\\uFE30-\\uFE52\\uFE54-\\uFE61\\uFE63\\uFE68\\uFE6A\\uFE6B\\uFF01-\\uFF03\\uFF05-\\uFF0A\\uFF0C-\\uFF0F\\uFF1A\\uFF1B\\uFF1F\\uFF20\\uFF3B-\\uFF3D\\uFF3F\\uFF5B\\uFF5D\\uFF5F-\\uFF65]/;var re=ge(/[A-Za-z]/),Re=ge(/\\d/),At=ge(/[\\dA-Fa-f]/),ee=ge(/[\\dA-Za-z]/),Ct=ge(/[!-/:-@[-`{-~]/),yr=ge(/[#-\'*+\\--9=?A-Z^-~]/);function Be(e){return e!==null&&(e<32||e===127)}function G(e){return e!==null&&(e<0||e===32)}function F(e){return e!==null&&e<-2}function j(e){return e===-2||e===-1||e===32}var Tt=ge(/\\s/),qt=ge(vt);function ge(e){return r;function r(t){return t!==null&&e.test(String.fromCharCode(t))}}function R(e,r,t,n){let i=n?n-1:Number.POSITIVE_INFINITY,o=0;return a;function a(s){return j(s)?(e.enter(t),u(s)):r(s)}function u(s){return j(s)&&o++<i?(e.consume(s),u):(e.exit(t),r(s))}}var Ft={tokenize:li};function li(e){let r=e.attempt(this.parser.constructs.contentInitial,n,i),t;return r;function n(u){if(u===null){e.consume(u);return}return e.enter("lineEnding"),e.consume(u),e.exit("lineEnding"),R(e,r,"linePrefix")}function i(u){return e.enter("paragraph"),o(u)}function o(u){let s=e.enter("chunkText",{contentType:"text",previous:t});return t&&(t.next=s),t=s,a(u)}function a(u){if(u===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(u);return}return F(u)?(e.consume(u),e.exit("chunkText"),o):(e.consume(u),a)}}var It={tokenize:ci},_t={tokenize:pi};function ci(e){let r=this,t=[],n=0,i,o,a;return u;function u(C){if(n<t.length){let L=t[n];return r.containerState=L[1],e.attempt(L[0].continuation,s,f)(C)}return f(C)}function s(C){if(n++,r.containerState._closeFlow){r.containerState._closeFlow=void 0,i&&q();let L=r.events.length,I=L,y;for(;I--;)if(r.events[I][0]==="exit"&&r.events[I][1].type==="chunkFlow"){y=r.events[I][1].end;break}x(n);let D=L;for(;D<r.events.length;)r.events[D][1].end=Object.assign({},y),D++;return Z(r.events,I+1,0,r.events.slice(L)),r.events.length=D,f(C)}return u(C)}function f(C){if(n===t.length){if(!i)return g(C);if(i.currentConstruct&&i.currentConstruct.concrete)return m(C);r.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return r.containerState={},e.check(_t,l,E)(C)}function l(C){return i&&q(),x(n),g(C)}function E(C){return r.parser.lazy[r.now().line]=n!==t.length,a=r.now().offset,m(C)}function g(C){return r.containerState={},e.attempt(_t,h,m)(C)}function h(C){return n++,t.push([r.currentConstruct,r.containerState]),g(C)}function m(C){if(C===null){i&&q(),x(0),e.consume(C);return}return i=i||r.parser.flow(r.now()),e.enter("chunkFlow",{contentType:"flow",previous:o,_tokenizer:i}),d(C)}function d(C){if(C===null){b(e.exit("chunkFlow"),!0),x(0),e.consume(C);return}return F(C)?(e.consume(C),b(e.exit("chunkFlow")),n=0,r.interrupt=void 0,u):(e.consume(C),d)}function b(C,L){let I=r.sliceStream(C);if(L&&I.push(null),C.previous=o,o&&(o.next=C),o=C,i.defineSkip(C.start),i.write(I),r.parser.lazy[C.start.line]){let y=i.events.length;for(;y--;)if(i.events[y][1].start.offset<a&&(!i.events[y][1].end||i.events[y][1].end.offset>a))return;let D=r.events.length,B=D,S,T;for(;B--;)if(r.events[B][0]==="exit"&&r.events[B][1].type==="chunkFlow"){if(S){T=r.events[B][1].end;break}S=!0}for(x(n),y=D;y<r.events.length;)r.events[y][1].end=Object.assign({},T),y++;Z(r.events,B+1,0,r.events.slice(D)),r.events.length=y}}function x(C){let L=t.length;for(;L-- >C;){let I=t[L];r.containerState=I[1],I[0].exit.call(r,e)}t.length=C}function q(){i.write([null]),o=void 0,i=void 0,r.containerState._closeFlow=void 0}}function pi(e,r,t){return R(e,e.attempt(this.parser.constructs.document,r,t),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function br(e){if(e===null||G(e)||Tt(e))return 1;if(qt(e))return 2}function _e(e,r,t){let n=[],i=-1;for(;++i<e.length;){let o=e[i].resolveAll;o&&!n.includes(o)&&(r=o(r,t),n.push(o))}return r}var Ne={name:"attention",tokenize:hi,resolveAll:fi};function fi(e,r){let t=-1,n,i,o,a,u,s,f,l;for(;++t<e.length;)if(e[t][0]==="enter"&&e[t][1].type==="attentionSequence"&&e[t][1]._close){for(n=t;n--;)if(e[n][0]==="exit"&&e[n][1].type==="attentionSequence"&&e[n][1]._open&&r.sliceSerialize(e[n][1]).charCodeAt(0)===r.sliceSerialize(e[t][1]).charCodeAt(0)){if((e[n][1]._close||e[t][1]._open)&&(e[t][1].end.offset-e[t][1].start.offset)%3&&!((e[n][1].end.offset-e[n][1].start.offset+e[t][1].end.offset-e[t][1].start.offset)%3))continue;s=e[n][1].end.offset-e[n][1].start.offset>1&&e[t][1].end.offset-e[t][1].start.offset>1?2:1;let E=Object.assign({},e[n][1].end),g=Object.assign({},e[t][1].start);Lt(E,-s),Lt(g,s),a={type:s>1?"strongSequence":"emphasisSequence",start:E,end:Object.assign({},e[n][1].end)},u={type:s>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[t][1].start),end:g},o={type:s>1?"strongText":"emphasisText",start:Object.assign({},e[n][1].end),end:Object.assign({},e[t][1].start)},i={type:s>1?"strong":"emphasis",start:Object.assign({},a.start),end:Object.assign({},u.end)},e[n][1].end=Object.assign({},a.start),e[t][1].start=Object.assign({},u.end),f=[],e[n][1].end.offset-e[n][1].start.offset&&(f=X(f,[["enter",e[n][1],r],["exit",e[n][1],r]])),f=X(f,[["enter",i,r],["enter",a,r],["exit",a,r],["enter",o,r]]),f=X(f,_e(r.parser.constructs.insideSpan.null,e.slice(n+1,t),r)),f=X(f,[["exit",o,r],["enter",u,r],["exit",u,r],["exit",i,r]]),e[t][1].end.offset-e[t][1].start.offset?(l=2,f=X(f,[["enter",e[t][1],r],["exit",e[t][1],r]])):l=0,Z(e,n-1,t-n+3,f),t=n+f.length-l-2;break}}for(t=-1;++t<e.length;)e[t][1].type==="attentionSequence"&&(e[t][1].type="data");return e}function hi(e,r){let t=this.parser.constructs.attentionMarkers.null,n=this.previous,i=br(n),o;return a;function a(s){return e.enter("attentionSequence"),o=s,u(s)}function u(s){if(s===o)return e.consume(s),u;let f=e.exit("attentionSequence"),l=br(s),E=!l||l===2&&i||t.includes(s),g=!i||i===2&&l||t.includes(n);return f._open=!!(o===42?E:E&&(i||!g)),f._close=!!(o===42?g:g&&(l||!E)),r(s)}}function Lt(e,r){e.column+=r,e.offset+=r,e._bufferIndex+=r}var Er={name:"autolink",tokenize:mi};function mi(e,r,t){let n=1;return i;function i(m){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(m),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),o}function o(m){return re(m)?(e.consume(m),a):yr(m)?f(m):t(m)}function a(m){return m===43||m===45||m===46||ee(m)?u(m):f(m)}function u(m){return m===58?(e.consume(m),s):(m===43||m===45||m===46||ee(m))&&n++<32?(e.consume(m),u):f(m)}function s(m){return m===62?(e.exit("autolinkProtocol"),h(m)):m===null||m===32||m===60||Be(m)?t(m):(e.consume(m),s)}function f(m){return m===64?(e.consume(m),n=0,l):yr(m)?(e.consume(m),f):t(m)}function l(m){return ee(m)?E(m):t(m)}function E(m){return m===46?(e.consume(m),n=0,l):m===62?(e.exit("autolinkProtocol").type="autolinkEmail",h(m)):g(m)}function g(m){return(m===45||ee(m))&&n++<63?(e.consume(m),m===45?g:E):t(m)}function h(m){return e.enter("autolinkMarker"),e.consume(m),e.exit("autolinkMarker"),e.exit("autolink"),r}}var xe={tokenize:di,partial:!0};function di(e,r,t){return R(e,n,"linePrefix");function n(i){return i===null||F(i)?r(i):t(i)}}var $e={name:"blockQuote",tokenize:gi,continuation:{tokenize:xi},exit:ki};function gi(e,r,t){let n=this;return i;function i(a){if(a===62){let u=n.containerState;return u.open||(e.enter("blockQuote",{_container:!0}),u.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(a),e.exit("blockQuoteMarker"),o}return t(a)}function o(a){return j(a)?(e.enter("blockQuotePrefixWhitespace"),e.consume(a),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),r):(e.exit("blockQuotePrefix"),r(a))}}function xi(e,r,t){return R(e,e.attempt($e,r,t),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function ki(e){e.exit("blockQuote")}var Ke={name:"characterEscape",tokenize:wi};function wi(e,r,t){return n;function n(o){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(o),e.exit("escapeMarker"),i}function i(o){return Ct(o)?(e.enter("characterEscapeValue"),e.consume(o),e.exit("characterEscapeValue"),e.exit("characterEscape"),r):t(o)}}var Sr={AElig:"\\xC6",AMP:"&",Aacute:"\\xC1",Abreve:"\\u0102",Acirc:"\\xC2",Acy:"\\u0410",Afr:"\\u{1D504}",Agrave:"\\xC0",Alpha:"\\u0391",Amacr:"\\u0100",And:"\\u2A53",Aogon:"\\u0104",Aopf:"\\u{1D538}",ApplyFunction:"\\u2061",Aring:"\\xC5",Ascr:"\\u{1D49C}",Assign:"\\u2254",Atilde:"\\xC3",Auml:"\\xC4",Backslash:"\\u2216",Barv:"\\u2AE7",Barwed:"\\u2306",Bcy:"\\u0411",Because:"\\u2235",Bernoullis:"\\u212C",Beta:"\\u0392",Bfr:"\\u{1D505}",Bopf:"\\u{1D539}",Breve:"\\u02D8",Bscr:"\\u212C",Bumpeq:"\\u224E",CHcy:"\\u0427",COPY:"\\xA9",Cacute:"\\u0106",Cap:"\\u22D2",CapitalDifferentialD:"\\u2145",Cayleys:"\\u212D",Ccaron:"\\u010C",Ccedil:"\\xC7",Ccirc:"\\u0108",Cconint:"\\u2230",Cdot:"\\u010A",Cedilla:"\\xB8",CenterDot:"\\xB7",Cfr:"\\u212D",Chi:"\\u03A7",CircleDot:"\\u2299",CircleMinus:"\\u2296",CirclePlus:"\\u2295",CircleTimes:"\\u2297",ClockwiseContourIntegral:"\\u2232",CloseCurlyDoubleQuote:"\\u201D",CloseCurlyQuote:"\\u2019",Colon:"\\u2237",Colone:"\\u2A74",Congruent:"\\u2261",Conint:"\\u222F",ContourIntegral:"\\u222E",Copf:"\\u2102",Coproduct:"\\u2210",CounterClockwiseContourIntegral:"\\u2233",Cross:"\\u2A2F",Cscr:"\\u{1D49E}",Cup:"\\u22D3",CupCap:"\\u224D",DD:"\\u2145",DDotrahd:"\\u2911",DJcy:"\\u0402",DScy:"\\u0405",DZcy:"\\u040F",Dagger:"\\u2021",Darr:"\\u21A1",Dashv:"\\u2AE4",Dcaron:"\\u010E",Dcy:"\\u0414",Del:"\\u2207",Delta:"\\u0394",Dfr:"\\u{1D507}",DiacriticalAcute:"\\xB4",DiacriticalDot:"\\u02D9",DiacriticalDoubleAcute:"\\u02DD",DiacriticalGrave:"`",DiacriticalTilde:"\\u02DC",Diamond:"\\u22C4",DifferentialD:"\\u2146",Dopf:"\\u{1D53B}",Dot:"\\xA8",DotDot:"\\u20DC",DotEqual:"\\u2250",DoubleContourIntegral:"\\u222F",DoubleDot:"\\xA8",DoubleDownArrow:"\\u21D3",DoubleLeftArrow:"\\u21D0",DoubleLeftRightArrow:"\\u21D4",DoubleLeftTee:"\\u2AE4",DoubleLongLeftArrow:"\\u27F8",DoubleLongLeftRightArrow:"\\u27FA",DoubleLongRightArrow:"\\u27F9",DoubleRightArrow:"\\u21D2",DoubleRightTee:"\\u22A8",DoubleUpArrow:"\\u21D1",DoubleUpDownArrow:"\\u21D5",DoubleVerticalBar:"\\u2225",DownArrow:"\\u2193",DownArrowBar:"\\u2913",DownArrowUpArrow:"\\u21F5",DownBreve:"\\u0311",DownLeftRightVector:"\\u2950",DownLeftTeeVector:"\\u295E",DownLeftVector:"\\u21BD",DownLeftVectorBar:"\\u2956",DownRightTeeVector:"\\u295F",DownRightVector:"\\u21C1",DownRightVectorBar:"\\u2957",DownTee:"\\u22A4",DownTeeArrow:"\\u21A7",Downarrow:"\\u21D3",Dscr:"\\u{1D49F}",Dstrok:"\\u0110",ENG:"\\u014A",ETH:"\\xD0",Eacute:"\\xC9",Ecaron:"\\u011A",Ecirc:"\\xCA",Ecy:"\\u042D",Edot:"\\u0116",Efr:"\\u{1D508}",Egrave:"\\xC8",Element:"\\u2208",Emacr:"\\u0112",EmptySmallSquare:"\\u25FB",EmptyVerySmallSquare:"\\u25AB",Eogon:"\\u0118",Eopf:"\\u{1D53C}",Epsilon:"\\u0395",Equal:"\\u2A75",EqualTilde:"\\u2242",Equilibrium:"\\u21CC",Escr:"\\u2130",Esim:"\\u2A73",Eta:"\\u0397",Euml:"\\xCB",Exists:"\\u2203",ExponentialE:"\\u2147",Fcy:"\\u0424",Ffr:"\\u{1D509}",FilledSmallSquare:"\\u25FC",FilledVerySmallSquare:"\\u25AA",Fopf:"\\u{1D53D}",ForAll:"\\u2200",Fouriertrf:"\\u2131",Fscr:"\\u2131",GJcy:"\\u0403",GT:">",Gamma:"\\u0393",Gammad:"\\u03DC",Gbreve:"\\u011E",Gcedil:"\\u0122",Gcirc:"\\u011C",Gcy:"\\u0413",Gdot:"\\u0120",Gfr:"\\u{1D50A}",Gg:"\\u22D9",Gopf:"\\u{1D53E}",GreaterEqual:"\\u2265",GreaterEqualLess:"\\u22DB",GreaterFullEqual:"\\u2267",GreaterGreater:"\\u2AA2",GreaterLess:"\\u2277",GreaterSlantEqual:"\\u2A7E",GreaterTilde:"\\u2273",Gscr:"\\u{1D4A2}",Gt:"\\u226B",HARDcy:"\\u042A",Hacek:"\\u02C7",Hat:"^",Hcirc:"\\u0124",Hfr:"\\u210C",HilbertSpace:"\\u210B",Hopf:"\\u210D",HorizontalLine:"\\u2500",Hscr:"\\u210B",Hstrok:"\\u0126",HumpDownHump:"\\u224E",HumpEqual:"\\u224F",IEcy:"\\u0415",IJlig:"\\u0132",IOcy:"\\u0401",Iacute:"\\xCD",Icirc:"\\xCE",Icy:"\\u0418",Idot:"\\u0130",Ifr:"\\u2111",Igrave:"\\xCC",Im:"\\u2111",Imacr:"\\u012A",ImaginaryI:"\\u2148",Implies:"\\u21D2",Int:"\\u222C",Integral:"\\u222B",Intersection:"\\u22C2",InvisibleComma:"\\u2063",InvisibleTimes:"\\u2062",Iogon:"\\u012E",Iopf:"\\u{1D540}",Iota:"\\u0399",Iscr:"\\u2110",Itilde:"\\u0128",Iukcy:"\\u0406",Iuml:"\\xCF",Jcirc:"\\u0134",Jcy:"\\u0419",Jfr:"\\u{1D50D}",Jopf:"\\u{1D541}",Jscr:"\\u{1D4A5}",Jsercy:"\\u0408",Jukcy:"\\u0404",KHcy:"\\u0425",KJcy:"\\u040C",Kappa:"\\u039A",Kcedil:"\\u0136",Kcy:"\\u041A",Kfr:"\\u{1D50E}",Kopf:"\\u{1D542}",Kscr:"\\u{1D4A6}",LJcy:"\\u0409",LT:"<",Lacute:"\\u0139",Lambda:"\\u039B",Lang:"\\u27EA",Laplacetrf:"\\u2112",Larr:"\\u219E",Lcaron:"\\u013D",Lcedil:"\\u013B",Lcy:"\\u041B",LeftAngleBracket:"\\u27E8",LeftArrow:"\\u2190",LeftArrowBar:"\\u21E4",LeftArrowRightArrow:"\\u21C6",LeftCeiling:"\\u2308",LeftDoubleBracket:"\\u27E6",LeftDownTeeVector:"\\u2961",LeftDownVector:"\\u21C3",LeftDownVectorBar:"\\u2959",LeftFloor:"\\u230A",LeftRightArrow:"\\u2194",LeftRightVector:"\\u294E",LeftTee:"\\u22A3",LeftTeeArrow:"\\u21A4",LeftTeeVector:"\\u295A",LeftTriangle:"\\u22B2",LeftTriangleBar:"\\u29CF",LeftTriangleEqual:"\\u22B4",LeftUpDownVector:"\\u2951",LeftUpTeeVector:"\\u2960",LeftUpVector:"\\u21BF",LeftUpVectorBar:"\\u2958",LeftVector:"\\u21BC",LeftVectorBar:"\\u2952",Leftarrow:"\\u21D0",Leftrightarrow:"\\u21D4",LessEqualGreater:"\\u22DA",LessFullEqual:"\\u2266",LessGreater:"\\u2276",LessLess:"\\u2AA1",LessSlantEqual:"\\u2A7D",LessTilde:"\\u2272",Lfr:"\\u{1D50F}",Ll:"\\u22D8",Lleftarrow:"\\u21DA",Lmidot:"\\u013F",LongLeftArrow:"\\u27F5",LongLeftRightArrow:"\\u27F7",LongRightArrow:"\\u27F6",Longleftarrow:"\\u27F8",Longleftrightarrow:"\\u27FA",Longrightarrow:"\\u27F9",Lopf:"\\u{1D543}",LowerLeftArrow:"\\u2199",LowerRightArrow:"\\u2198",Lscr:"\\u2112",Lsh:"\\u21B0",Lstrok:"\\u0141",Lt:"\\u226A",Map:"\\u2905",Mcy:"\\u041C",MediumSpace:"\\u205F",Mellintrf:"\\u2133",Mfr:"\\u{1D510}",MinusPlus:"\\u2213",Mopf:"\\u{1D544}",Mscr:"\\u2133",Mu:"\\u039C",NJcy:"\\u040A",Nacute:"\\u0143",Ncaron:"\\u0147",Ncedil:"\\u0145",Ncy:"\\u041D",NegativeMediumSpace:"\\u200B",NegativeThickSpace:"\\u200B",NegativeThinSpace:"\\u200B",NegativeVeryThinSpace:"\\u200B",NestedGreaterGreater:"\\u226B",NestedLessLess:"\\u226A",NewLine:`\n`,Nfr:"\\u{1D511}",NoBreak:"\\u2060",NonBreakingSpace:"\\xA0",Nopf:"\\u2115",Not:"\\u2AEC",NotCongruent:"\\u2262",NotCupCap:"\\u226D",NotDoubleVerticalBar:"\\u2226",NotElement:"\\u2209",NotEqual:"\\u2260",NotEqualTilde:"\\u2242\\u0338",NotExists:"\\u2204",NotGreater:"\\u226F",NotGreaterEqual:"\\u2271",NotGreaterFullEqual:"\\u2267\\u0338",NotGreaterGreater:"\\u226B\\u0338",NotGreaterLess:"\\u2279",NotGreaterSlantEqual:"\\u2A7E\\u0338",NotGreaterTilde:"\\u2275",NotHumpDownHump:"\\u224E\\u0338",NotHumpEqual:"\\u224F\\u0338",NotLeftTriangle:"\\u22EA",NotLeftTriangleBar:"\\u29CF\\u0338",NotLeftTriangleEqual:"\\u22EC",NotLess:"\\u226E",NotLessEqual:"\\u2270",NotLessGreater:"\\u2278",NotLessLess:"\\u226A\\u0338",NotLessSlantEqual:"\\u2A7D\\u0338",NotLessTilde:"\\u2274",NotNestedGreaterGreater:"\\u2AA2\\u0338",NotNestedLessLess:"\\u2AA1\\u0338",NotPrecedes:"\\u2280",NotPrecedesEqual:"\\u2AAF\\u0338",NotPrecedesSlantEqual:"\\u22E0",NotReverseElement:"\\u220C",NotRightTriangle:"\\u22EB",NotRightTriangleBar:"\\u29D0\\u0338",NotRightTriangleEqual:"\\u22ED",NotSquareSubset:"\\u228F\\u0338",NotSquareSubsetEqual:"\\u22E2",NotSquareSuperset:"\\u2290\\u0338",NotSquareSupersetEqual:"\\u22E3",NotSubset:"\\u2282\\u20D2",NotSubsetEqual:"\\u2288",NotSucceeds:"\\u2281",NotSucceedsEqual:"\\u2AB0\\u0338",NotSucceedsSlantEqual:"\\u22E1",NotSucceedsTilde:"\\u227F\\u0338",NotSuperset:"\\u2283\\u20D2",NotSupersetEqual:"\\u2289",NotTilde:"\\u2241",NotTildeEqual:"\\u2244",NotTildeFullEqual:"\\u2247",NotTildeTilde:"\\u2249",NotVerticalBar:"\\u2224",Nscr:"\\u{1D4A9}",Ntilde:"\\xD1",Nu:"\\u039D",OElig:"\\u0152",Oacute:"\\xD3",Ocirc:"\\xD4",Ocy:"\\u041E",Odblac:"\\u0150",Ofr:"\\u{1D512}",Ograve:"\\xD2",Omacr:"\\u014C",Omega:"\\u03A9",Omicron:"\\u039F",Oopf:"\\u{1D546}",OpenCurlyDoubleQuote:"\\u201C",OpenCurlyQuote:"\\u2018",Or:"\\u2A54",Oscr:"\\u{1D4AA}",Oslash:"\\xD8",Otilde:"\\xD5",Otimes:"\\u2A37",Ouml:"\\xD6",OverBar:"\\u203E",OverBrace:"\\u23DE",OverBracket:"\\u23B4",OverParenthesis:"\\u23DC",PartialD:"\\u2202",Pcy:"\\u041F",Pfr:"\\u{1D513}",Phi:"\\u03A6",Pi:"\\u03A0",PlusMinus:"\\xB1",Poincareplane:"\\u210C",Popf:"\\u2119",Pr:"\\u2ABB",Precedes:"\\u227A",PrecedesEqual:"\\u2AAF",PrecedesSlantEqual:"\\u227C",PrecedesTilde:"\\u227E",Prime:"\\u2033",Product:"\\u220F",Proportion:"\\u2237",Proportional:"\\u221D",Pscr:"\\u{1D4AB}",Psi:"\\u03A8",QUOT:\'"\',Qfr:"\\u{1D514}",Qopf:"\\u211A",Qscr:"\\u{1D4AC}",RBarr:"\\u2910",REG:"\\xAE",Racute:"\\u0154",Rang:"\\u27EB",Rarr:"\\u21A0",Rarrtl:"\\u2916",Rcaron:"\\u0158",Rcedil:"\\u0156",Rcy:"\\u0420",Re:"\\u211C",ReverseElement:"\\u220B",ReverseEquilibrium:"\\u21CB",ReverseUpEquilibrium:"\\u296F",Rfr:"\\u211C",Rho:"\\u03A1",RightAngleBracket:"\\u27E9",RightArrow:"\\u2192",RightArrowBar:"\\u21E5",RightArrowLeftArrow:"\\u21C4",RightCeiling:"\\u2309",RightDoubleBracket:"\\u27E7",RightDownTeeVector:"\\u295D",RightDownVector:"\\u21C2",RightDownVectorBar:"\\u2955",RightFloor:"\\u230B",RightTee:"\\u22A2",RightTeeArrow:"\\u21A6",RightTeeVector:"\\u295B",RightTriangle:"\\u22B3",RightTriangleBar:"\\u29D0",RightTriangleEqual:"\\u22B5",RightUpDownVector:"\\u294F",RightUpTeeVector:"\\u295C",RightUpVector:"\\u21BE",RightUpVectorBar:"\\u2954",RightVector:"\\u21C0",RightVectorBar:"\\u2953",Rightarrow:"\\u21D2",Ropf:"\\u211D",RoundImplies:"\\u2970",Rrightarrow:"\\u21DB",Rscr:"\\u211B",Rsh:"\\u21B1",RuleDelayed:"\\u29F4",SHCHcy:"\\u0429",SHcy:"\\u0428",SOFTcy:"\\u042C",Sacute:"\\u015A",Sc:"\\u2ABC",Scaron:"\\u0160",Scedil:"\\u015E",Scirc:"\\u015C",Scy:"\\u0421",Sfr:"\\u{1D516}",ShortDownArrow:"\\u2193",ShortLeftArrow:"\\u2190",ShortRightArrow:"\\u2192",ShortUpArrow:"\\u2191",Sigma:"\\u03A3",SmallCircle:"\\u2218",Sopf:"\\u{1D54A}",Sqrt:"\\u221A",Square:"\\u25A1",SquareIntersection:"\\u2293",SquareSubset:"\\u228F",SquareSubsetEqual:"\\u2291",SquareSuperset:"\\u2290",SquareSupersetEqual:"\\u2292",SquareUnion:"\\u2294",Sscr:"\\u{1D4AE}",Star:"\\u22C6",Sub:"\\u22D0",Subset:"\\u22D0",SubsetEqual:"\\u2286",Succeeds:"\\u227B",SucceedsEqual:"\\u2AB0",SucceedsSlantEqual:"\\u227D",SucceedsTilde:"\\u227F",SuchThat:"\\u220B",Sum:"\\u2211",Sup:"\\u22D1",Superset:"\\u2283",SupersetEqual:"\\u2287",Supset:"\\u22D1",THORN:"\\xDE",TRADE:"\\u2122",TSHcy:"\\u040B",TScy:"\\u0426",Tab:"	",Tau:"\\u03A4",Tcaron:"\\u0164",Tcedil:"\\u0162",Tcy:"\\u0422",Tfr:"\\u{1D517}",Therefore:"\\u2234",Theta:"\\u0398",ThickSpace:"\\u205F\\u200A",ThinSpace:"\\u2009",Tilde:"\\u223C",TildeEqual:"\\u2243",TildeFullEqual:"\\u2245",TildeTilde:"\\u2248",Topf:"\\u{1D54B}",TripleDot:"\\u20DB",Tscr:"\\u{1D4AF}",Tstrok:"\\u0166",Uacute:"\\xDA",Uarr:"\\u219F",Uarrocir:"\\u2949",Ubrcy:"\\u040E",Ubreve:"\\u016C",Ucirc:"\\xDB",Ucy:"\\u0423",Udblac:"\\u0170",Ufr:"\\u{1D518}",Ugrave:"\\xD9",Umacr:"\\u016A",UnderBar:"_",UnderBrace:"\\u23DF",UnderBracket:"\\u23B5",UnderParenthesis:"\\u23DD",Union:"\\u22C3",UnionPlus:"\\u228E",Uogon:"\\u0172",Uopf:"\\u{1D54C}",UpArrow:"\\u2191",UpArrowBar:"\\u2912",UpArrowDownArrow:"\\u21C5",UpDownArrow:"\\u2195",UpEquilibrium:"\\u296E",UpTee:"\\u22A5",UpTeeArrow:"\\u21A5",Uparrow:"\\u21D1",Updownarrow:"\\u21D5",UpperLeftArrow:"\\u2196",UpperRightArrow:"\\u2197",Upsi:"\\u03D2",Upsilon:"\\u03A5",Uring:"\\u016E",Uscr:"\\u{1D4B0}",Utilde:"\\u0168",Uuml:"\\xDC",VDash:"\\u22AB",Vbar:"\\u2AEB",Vcy:"\\u0412",Vdash:"\\u22A9",Vdashl:"\\u2AE6",Vee:"\\u22C1",Verbar:"\\u2016",Vert:"\\u2016",VerticalBar:"\\u2223",VerticalLine:"|",VerticalSeparator:"\\u2758",VerticalTilde:"\\u2240",VeryThinSpace:"\\u200A",Vfr:"\\u{1D519}",Vopf:"\\u{1D54D}",Vscr:"\\u{1D4B1}",Vvdash:"\\u22AA",Wcirc:"\\u0174",Wedge:"\\u22C0",Wfr:"\\u{1D51A}",Wopf:"\\u{1D54E}",Wscr:"\\u{1D4B2}",Xfr:"\\u{1D51B}",Xi:"\\u039E",Xopf:"\\u{1D54F}",Xscr:"\\u{1D4B3}",YAcy:"\\u042F",YIcy:"\\u0407",YUcy:"\\u042E",Yacute:"\\xDD",Ycirc:"\\u0176",Ycy:"\\u042B",Yfr:"\\u{1D51C}",Yopf:"\\u{1D550}",Yscr:"\\u{1D4B4}",Yuml:"\\u0178",ZHcy:"\\u0416",Zacute:"\\u0179",Zcaron:"\\u017D",Zcy:"\\u0417",Zdot:"\\u017B",ZeroWidthSpace:"\\u200B",Zeta:"\\u0396",Zfr:"\\u2128",Zopf:"\\u2124",Zscr:"\\u{1D4B5}",aacute:"\\xE1",abreve:"\\u0103",ac:"\\u223E",acE:"\\u223E\\u0333",acd:"\\u223F",acirc:"\\xE2",acute:"\\xB4",acy:"\\u0430",aelig:"\\xE6",af:"\\u2061",afr:"\\u{1D51E}",agrave:"\\xE0",alefsym:"\\u2135",aleph:"\\u2135",alpha:"\\u03B1",amacr:"\\u0101",amalg:"\\u2A3F",amp:"&",and:"\\u2227",andand:"\\u2A55",andd:"\\u2A5C",andslope:"\\u2A58",andv:"\\u2A5A",ang:"\\u2220",ange:"\\u29A4",angle:"\\u2220",angmsd:"\\u2221",angmsdaa:"\\u29A8",angmsdab:"\\u29A9",angmsdac:"\\u29AA",angmsdad:"\\u29AB",angmsdae:"\\u29AC",angmsdaf:"\\u29AD",angmsdag:"\\u29AE",angmsdah:"\\u29AF",angrt:"\\u221F",angrtvb:"\\u22BE",angrtvbd:"\\u299D",angsph:"\\u2222",angst:"\\xC5",angzarr:"\\u237C",aogon:"\\u0105",aopf:"\\u{1D552}",ap:"\\u2248",apE:"\\u2A70",apacir:"\\u2A6F",ape:"\\u224A",apid:"\\u224B",apos:"\'",approx:"\\u2248",approxeq:"\\u224A",aring:"\\xE5",ascr:"\\u{1D4B6}",ast:"*",asymp:"\\u2248",asympeq:"\\u224D",atilde:"\\xE3",auml:"\\xE4",awconint:"\\u2233",awint:"\\u2A11",bNot:"\\u2AED",backcong:"\\u224C",backepsilon:"\\u03F6",backprime:"\\u2035",backsim:"\\u223D",backsimeq:"\\u22CD",barvee:"\\u22BD",barwed:"\\u2305",barwedge:"\\u2305",bbrk:"\\u23B5",bbrktbrk:"\\u23B6",bcong:"\\u224C",bcy:"\\u0431",bdquo:"\\u201E",becaus:"\\u2235",because:"\\u2235",bemptyv:"\\u29B0",bepsi:"\\u03F6",bernou:"\\u212C",beta:"\\u03B2",beth:"\\u2136",between:"\\u226C",bfr:"\\u{1D51F}",bigcap:"\\u22C2",bigcirc:"\\u25EF",bigcup:"\\u22C3",bigodot:"\\u2A00",bigoplus:"\\u2A01",bigotimes:"\\u2A02",bigsqcup:"\\u2A06",bigstar:"\\u2605",bigtriangledown:"\\u25BD",bigtriangleup:"\\u25B3",biguplus:"\\u2A04",bigvee:"\\u22C1",bigwedge:"\\u22C0",bkarow:"\\u290D",blacklozenge:"\\u29EB",blacksquare:"\\u25AA",blacktriangle:"\\u25B4",blacktriangledown:"\\u25BE",blacktriangleleft:"\\u25C2",blacktriangleright:"\\u25B8",blank:"\\u2423",blk12:"\\u2592",blk14:"\\u2591",blk34:"\\u2593",block:"\\u2588",bne:"=\\u20E5",bnequiv:"\\u2261\\u20E5",bnot:"\\u2310",bopf:"\\u{1D553}",bot:"\\u22A5",bottom:"\\u22A5",bowtie:"\\u22C8",boxDL:"\\u2557",boxDR:"\\u2554",boxDl:"\\u2556",boxDr:"\\u2553",boxH:"\\u2550",boxHD:"\\u2566",boxHU:"\\u2569",boxHd:"\\u2564",boxHu:"\\u2567",boxUL:"\\u255D",boxUR:"\\u255A",boxUl:"\\u255C",boxUr:"\\u2559",boxV:"\\u2551",boxVH:"\\u256C",boxVL:"\\u2563",boxVR:"\\u2560",boxVh:"\\u256B",boxVl:"\\u2562",boxVr:"\\u255F",boxbox:"\\u29C9",boxdL:"\\u2555",boxdR:"\\u2552",boxdl:"\\u2510",boxdr:"\\u250C",boxh:"\\u2500",boxhD:"\\u2565",boxhU:"\\u2568",boxhd:"\\u252C",boxhu:"\\u2534",boxminus:"\\u229F",boxplus:"\\u229E",boxtimes:"\\u22A0",boxuL:"\\u255B",boxuR:"\\u2558",boxul:"\\u2518",boxur:"\\u2514",boxv:"\\u2502",boxvH:"\\u256A",boxvL:"\\u2561",boxvR:"\\u255E",boxvh:"\\u253C",boxvl:"\\u2524",boxvr:"\\u251C",bprime:"\\u2035",breve:"\\u02D8",brvbar:"\\xA6",bscr:"\\u{1D4B7}",bsemi:"\\u204F",bsim:"\\u223D",bsime:"\\u22CD",bsol:"\\\\",bsolb:"\\u29C5",bsolhsub:"\\u27C8",bull:"\\u2022",bullet:"\\u2022",bump:"\\u224E",bumpE:"\\u2AAE",bumpe:"\\u224F",bumpeq:"\\u224F",cacute:"\\u0107",cap:"\\u2229",capand:"\\u2A44",capbrcup:"\\u2A49",capcap:"\\u2A4B",capcup:"\\u2A47",capdot:"\\u2A40",caps:"\\u2229\\uFE00",caret:"\\u2041",caron:"\\u02C7",ccaps:"\\u2A4D",ccaron:"\\u010D",ccedil:"\\xE7",ccirc:"\\u0109",ccups:"\\u2A4C",ccupssm:"\\u2A50",cdot:"\\u010B",cedil:"\\xB8",cemptyv:"\\u29B2",cent:"\\xA2",centerdot:"\\xB7",cfr:"\\u{1D520}",chcy:"\\u0447",check:"\\u2713",checkmark:"\\u2713",chi:"\\u03C7",cir:"\\u25CB",cirE:"\\u29C3",circ:"\\u02C6",circeq:"\\u2257",circlearrowleft:"\\u21BA",circlearrowright:"\\u21BB",circledR:"\\xAE",circledS:"\\u24C8",circledast:"\\u229B",circledcirc:"\\u229A",circleddash:"\\u229D",cire:"\\u2257",cirfnint:"\\u2A10",cirmid:"\\u2AEF",cirscir:"\\u29C2",clubs:"\\u2663",clubsuit:"\\u2663",colon:":",colone:"\\u2254",coloneq:"\\u2254",comma:",",commat:"@",comp:"\\u2201",compfn:"\\u2218",complement:"\\u2201",complexes:"\\u2102",cong:"\\u2245",congdot:"\\u2A6D",conint:"\\u222E",copf:"\\u{1D554}",coprod:"\\u2210",copy:"\\xA9",copysr:"\\u2117",crarr:"\\u21B5",cross:"\\u2717",cscr:"\\u{1D4B8}",csub:"\\u2ACF",csube:"\\u2AD1",csup:"\\u2AD0",csupe:"\\u2AD2",ctdot:"\\u22EF",cudarrl:"\\u2938",cudarrr:"\\u2935",cuepr:"\\u22DE",cuesc:"\\u22DF",cularr:"\\u21B6",cularrp:"\\u293D",cup:"\\u222A",cupbrcap:"\\u2A48",cupcap:"\\u2A46",cupcup:"\\u2A4A",cupdot:"\\u228D",cupor:"\\u2A45",cups:"\\u222A\\uFE00",curarr:"\\u21B7",curarrm:"\\u293C",curlyeqprec:"\\u22DE",curlyeqsucc:"\\u22DF",curlyvee:"\\u22CE",curlywedge:"\\u22CF",curren:"\\xA4",curvearrowleft:"\\u21B6",curvearrowright:"\\u21B7",cuvee:"\\u22CE",cuwed:"\\u22CF",cwconint:"\\u2232",cwint:"\\u2231",cylcty:"\\u232D",dArr:"\\u21D3",dHar:"\\u2965",dagger:"\\u2020",daleth:"\\u2138",darr:"\\u2193",dash:"\\u2010",dashv:"\\u22A3",dbkarow:"\\u290F",dblac:"\\u02DD",dcaron:"\\u010F",dcy:"\\u0434",dd:"\\u2146",ddagger:"\\u2021",ddarr:"\\u21CA",ddotseq:"\\u2A77",deg:"\\xB0",delta:"\\u03B4",demptyv:"\\u29B1",dfisht:"\\u297F",dfr:"\\u{1D521}",dharl:"\\u21C3",dharr:"\\u21C2",diam:"\\u22C4",diamond:"\\u22C4",diamondsuit:"\\u2666",diams:"\\u2666",die:"\\xA8",digamma:"\\u03DD",disin:"\\u22F2",div:"\\xF7",divide:"\\xF7",divideontimes:"\\u22C7",divonx:"\\u22C7",djcy:"\\u0452",dlcorn:"\\u231E",dlcrop:"\\u230D",dollar:"$",dopf:"\\u{1D555}",dot:"\\u02D9",doteq:"\\u2250",doteqdot:"\\u2251",dotminus:"\\u2238",dotplus:"\\u2214",dotsquare:"\\u22A1",doublebarwedge:"\\u2306",downarrow:"\\u2193",downdownarrows:"\\u21CA",downharpoonleft:"\\u21C3",downharpoonright:"\\u21C2",drbkarow:"\\u2910",drcorn:"\\u231F",drcrop:"\\u230C",dscr:"\\u{1D4B9}",dscy:"\\u0455",dsol:"\\u29F6",dstrok:"\\u0111",dtdot:"\\u22F1",dtri:"\\u25BF",dtrif:"\\u25BE",duarr:"\\u21F5",duhar:"\\u296F",dwangle:"\\u29A6",dzcy:"\\u045F",dzigrarr:"\\u27FF",eDDot:"\\u2A77",eDot:"\\u2251",eacute:"\\xE9",easter:"\\u2A6E",ecaron:"\\u011B",ecir:"\\u2256",ecirc:"\\xEA",ecolon:"\\u2255",ecy:"\\u044D",edot:"\\u0117",ee:"\\u2147",efDot:"\\u2252",efr:"\\u{1D522}",eg:"\\u2A9A",egrave:"\\xE8",egs:"\\u2A96",egsdot:"\\u2A98",el:"\\u2A99",elinters:"\\u23E7",ell:"\\u2113",els:"\\u2A95",elsdot:"\\u2A97",emacr:"\\u0113",empty:"\\u2205",emptyset:"\\u2205",emptyv:"\\u2205",emsp13:"\\u2004",emsp14:"\\u2005",emsp:"\\u2003",eng:"\\u014B",ensp:"\\u2002",eogon:"\\u0119",eopf:"\\u{1D556}",epar:"\\u22D5",eparsl:"\\u29E3",eplus:"\\u2A71",epsi:"\\u03B5",epsilon:"\\u03B5",epsiv:"\\u03F5",eqcirc:"\\u2256",eqcolon:"\\u2255",eqsim:"\\u2242",eqslantgtr:"\\u2A96",eqslantless:"\\u2A95",equals:"=",equest:"\\u225F",equiv:"\\u2261",equivDD:"\\u2A78",eqvparsl:"\\u29E5",erDot:"\\u2253",erarr:"\\u2971",escr:"\\u212F",esdot:"\\u2250",esim:"\\u2242",eta:"\\u03B7",eth:"\\xF0",euml:"\\xEB",euro:"\\u20AC",excl:"!",exist:"\\u2203",expectation:"\\u2130",exponentiale:"\\u2147",fallingdotseq:"\\u2252",fcy:"\\u0444",female:"\\u2640",ffilig:"\\uFB03",fflig:"\\uFB00",ffllig:"\\uFB04",ffr:"\\u{1D523}",filig:"\\uFB01",fjlig:"fj",flat:"\\u266D",fllig:"\\uFB02",fltns:"\\u25B1",fnof:"\\u0192",fopf:"\\u{1D557}",forall:"\\u2200",fork:"\\u22D4",forkv:"\\u2AD9",fpartint:"\\u2A0D",frac12:"\\xBD",frac13:"\\u2153",frac14:"\\xBC",frac15:"\\u2155",frac16:"\\u2159",frac18:"\\u215B",frac23:"\\u2154",frac25:"\\u2156",frac34:"\\xBE",frac35:"\\u2157",frac38:"\\u215C",frac45:"\\u2158",frac56:"\\u215A",frac58:"\\u215D",frac78:"\\u215E",frasl:"\\u2044",frown:"\\u2322",fscr:"\\u{1D4BB}",gE:"\\u2267",gEl:"\\u2A8C",gacute:"\\u01F5",gamma:"\\u03B3",gammad:"\\u03DD",gap:"\\u2A86",gbreve:"\\u011F",gcirc:"\\u011D",gcy:"\\u0433",gdot:"\\u0121",ge:"\\u2265",gel:"\\u22DB",geq:"\\u2265",geqq:"\\u2267",geqslant:"\\u2A7E",ges:"\\u2A7E",gescc:"\\u2AA9",gesdot:"\\u2A80",gesdoto:"\\u2A82",gesdotol:"\\u2A84",gesl:"\\u22DB\\uFE00",gesles:"\\u2A94",gfr:"\\u{1D524}",gg:"\\u226B",ggg:"\\u22D9",gimel:"\\u2137",gjcy:"\\u0453",gl:"\\u2277",glE:"\\u2A92",gla:"\\u2AA5",glj:"\\u2AA4",gnE:"\\u2269",gnap:"\\u2A8A",gnapprox:"\\u2A8A",gne:"\\u2A88",gneq:"\\u2A88",gneqq:"\\u2269",gnsim:"\\u22E7",gopf:"\\u{1D558}",grave:"`",gscr:"\\u210A",gsim:"\\u2273",gsime:"\\u2A8E",gsiml:"\\u2A90",gt:">",gtcc:"\\u2AA7",gtcir:"\\u2A7A",gtdot:"\\u22D7",gtlPar:"\\u2995",gtquest:"\\u2A7C",gtrapprox:"\\u2A86",gtrarr:"\\u2978",gtrdot:"\\u22D7",gtreqless:"\\u22DB",gtreqqless:"\\u2A8C",gtrless:"\\u2277",gtrsim:"\\u2273",gvertneqq:"\\u2269\\uFE00",gvnE:"\\u2269\\uFE00",hArr:"\\u21D4",hairsp:"\\u200A",half:"\\xBD",hamilt:"\\u210B",hardcy:"\\u044A",harr:"\\u2194",harrcir:"\\u2948",harrw:"\\u21AD",hbar:"\\u210F",hcirc:"\\u0125",hearts:"\\u2665",heartsuit:"\\u2665",hellip:"\\u2026",hercon:"\\u22B9",hfr:"\\u{1D525}",hksearow:"\\u2925",hkswarow:"\\u2926",hoarr:"\\u21FF",homtht:"\\u223B",hookleftarrow:"\\u21A9",hookrightarrow:"\\u21AA",hopf:"\\u{1D559}",horbar:"\\u2015",hscr:"\\u{1D4BD}",hslash:"\\u210F",hstrok:"\\u0127",hybull:"\\u2043",hyphen:"\\u2010",iacute:"\\xED",ic:"\\u2063",icirc:"\\xEE",icy:"\\u0438",iecy:"\\u0435",iexcl:"\\xA1",iff:"\\u21D4",ifr:"\\u{1D526}",igrave:"\\xEC",ii:"\\u2148",iiiint:"\\u2A0C",iiint:"\\u222D",iinfin:"\\u29DC",iiota:"\\u2129",ijlig:"\\u0133",imacr:"\\u012B",image:"\\u2111",imagline:"\\u2110",imagpart:"\\u2111",imath:"\\u0131",imof:"\\u22B7",imped:"\\u01B5",in:"\\u2208",incare:"\\u2105",infin:"\\u221E",infintie:"\\u29DD",inodot:"\\u0131",int:"\\u222B",intcal:"\\u22BA",integers:"\\u2124",intercal:"\\u22BA",intlarhk:"\\u2A17",intprod:"\\u2A3C",iocy:"\\u0451",iogon:"\\u012F",iopf:"\\u{1D55A}",iota:"\\u03B9",iprod:"\\u2A3C",iquest:"\\xBF",iscr:"\\u{1D4BE}",isin:"\\u2208",isinE:"\\u22F9",isindot:"\\u22F5",isins:"\\u22F4",isinsv:"\\u22F3",isinv:"\\u2208",it:"\\u2062",itilde:"\\u0129",iukcy:"\\u0456",iuml:"\\xEF",jcirc:"\\u0135",jcy:"\\u0439",jfr:"\\u{1D527}",jmath:"\\u0237",jopf:"\\u{1D55B}",jscr:"\\u{1D4BF}",jsercy:"\\u0458",jukcy:"\\u0454",kappa:"\\u03BA",kappav:"\\u03F0",kcedil:"\\u0137",kcy:"\\u043A",kfr:"\\u{1D528}",kgreen:"\\u0138",khcy:"\\u0445",kjcy:"\\u045C",kopf:"\\u{1D55C}",kscr:"\\u{1D4C0}",lAarr:"\\u21DA",lArr:"\\u21D0",lAtail:"\\u291B",lBarr:"\\u290E",lE:"\\u2266",lEg:"\\u2A8B",lHar:"\\u2962",lacute:"\\u013A",laemptyv:"\\u29B4",lagran:"\\u2112",lambda:"\\u03BB",lang:"\\u27E8",langd:"\\u2991",langle:"\\u27E8",lap:"\\u2A85",laquo:"\\xAB",larr:"\\u2190",larrb:"\\u21E4",larrbfs:"\\u291F",larrfs:"\\u291D",larrhk:"\\u21A9",larrlp:"\\u21AB",larrpl:"\\u2939",larrsim:"\\u2973",larrtl:"\\u21A2",lat:"\\u2AAB",latail:"\\u2919",late:"\\u2AAD",lates:"\\u2AAD\\uFE00",lbarr:"\\u290C",lbbrk:"\\u2772",lbrace:"{",lbrack:"[",lbrke:"\\u298B",lbrksld:"\\u298F",lbrkslu:"\\u298D",lcaron:"\\u013E",lcedil:"\\u013C",lceil:"\\u2308",lcub:"{",lcy:"\\u043B",ldca:"\\u2936",ldquo:"\\u201C",ldquor:"\\u201E",ldrdhar:"\\u2967",ldrushar:"\\u294B",ldsh:"\\u21B2",le:"\\u2264",leftarrow:"\\u2190",leftarrowtail:"\\u21A2",leftharpoondown:"\\u21BD",leftharpoonup:"\\u21BC",leftleftarrows:"\\u21C7",leftrightarrow:"\\u2194",leftrightarrows:"\\u21C6",leftrightharpoons:"\\u21CB",leftrightsquigarrow:"\\u21AD",leftthreetimes:"\\u22CB",leg:"\\u22DA",leq:"\\u2264",leqq:"\\u2266",leqslant:"\\u2A7D",les:"\\u2A7D",lescc:"\\u2AA8",lesdot:"\\u2A7F",lesdoto:"\\u2A81",lesdotor:"\\u2A83",lesg:"\\u22DA\\uFE00",lesges:"\\u2A93",lessapprox:"\\u2A85",lessdot:"\\u22D6",lesseqgtr:"\\u22DA",lesseqqgtr:"\\u2A8B",lessgtr:"\\u2276",lesssim:"\\u2272",lfisht:"\\u297C",lfloor:"\\u230A",lfr:"\\u{1D529}",lg:"\\u2276",lgE:"\\u2A91",lhard:"\\u21BD",lharu:"\\u21BC",lharul:"\\u296A",lhblk:"\\u2584",ljcy:"\\u0459",ll:"\\u226A",llarr:"\\u21C7",llcorner:"\\u231E",llhard:"\\u296B",lltri:"\\u25FA",lmidot:"\\u0140",lmoust:"\\u23B0",lmoustache:"\\u23B0",lnE:"\\u2268",lnap:"\\u2A89",lnapprox:"\\u2A89",lne:"\\u2A87",lneq:"\\u2A87",lneqq:"\\u2268",lnsim:"\\u22E6",loang:"\\u27EC",loarr:"\\u21FD",lobrk:"\\u27E6",longleftarrow:"\\u27F5",longleftrightarrow:"\\u27F7",longmapsto:"\\u27FC",longrightarrow:"\\u27F6",looparrowleft:"\\u21AB",looparrowright:"\\u21AC",lopar:"\\u2985",lopf:"\\u{1D55D}",loplus:"\\u2A2D",lotimes:"\\u2A34",lowast:"\\u2217",lowbar:"_",loz:"\\u25CA",lozenge:"\\u25CA",lozf:"\\u29EB",lpar:"(",lparlt:"\\u2993",lrarr:"\\u21C6",lrcorner:"\\u231F",lrhar:"\\u21CB",lrhard:"\\u296D",lrm:"\\u200E",lrtri:"\\u22BF",lsaquo:"\\u2039",lscr:"\\u{1D4C1}",lsh:"\\u21B0",lsim:"\\u2272",lsime:"\\u2A8D",lsimg:"\\u2A8F",lsqb:"[",lsquo:"\\u2018",lsquor:"\\u201A",lstrok:"\\u0142",lt:"<",ltcc:"\\u2AA6",ltcir:"\\u2A79",ltdot:"\\u22D6",lthree:"\\u22CB",ltimes:"\\u22C9",ltlarr:"\\u2976",ltquest:"\\u2A7B",ltrPar:"\\u2996",ltri:"\\u25C3",ltrie:"\\u22B4",ltrif:"\\u25C2",lurdshar:"\\u294A",luruhar:"\\u2966",lvertneqq:"\\u2268\\uFE00",lvnE:"\\u2268\\uFE00",mDDot:"\\u223A",macr:"\\xAF",male:"\\u2642",malt:"\\u2720",maltese:"\\u2720",map:"\\u21A6",mapsto:"\\u21A6",mapstodown:"\\u21A7",mapstoleft:"\\u21A4",mapstoup:"\\u21A5",marker:"\\u25AE",mcomma:"\\u2A29",mcy:"\\u043C",mdash:"\\u2014",measuredangle:"\\u2221",mfr:"\\u{1D52A}",mho:"\\u2127",micro:"\\xB5",mid:"\\u2223",midast:"*",midcir:"\\u2AF0",middot:"\\xB7",minus:"\\u2212",minusb:"\\u229F",minusd:"\\u2238",minusdu:"\\u2A2A",mlcp:"\\u2ADB",mldr:"\\u2026",mnplus:"\\u2213",models:"\\u22A7",mopf:"\\u{1D55E}",mp:"\\u2213",mscr:"\\u{1D4C2}",mstpos:"\\u223E",mu:"\\u03BC",multimap:"\\u22B8",mumap:"\\u22B8",nGg:"\\u22D9\\u0338",nGt:"\\u226B\\u20D2",nGtv:"\\u226B\\u0338",nLeftarrow:"\\u21CD",nLeftrightarrow:"\\u21CE",nLl:"\\u22D8\\u0338",nLt:"\\u226A\\u20D2",nLtv:"\\u226A\\u0338",nRightarrow:"\\u21CF",nVDash:"\\u22AF",nVdash:"\\u22AE",nabla:"\\u2207",nacute:"\\u0144",nang:"\\u2220\\u20D2",nap:"\\u2249",napE:"\\u2A70\\u0338",napid:"\\u224B\\u0338",napos:"\\u0149",napprox:"\\u2249",natur:"\\u266E",natural:"\\u266E",naturals:"\\u2115",nbsp:"\\xA0",nbump:"\\u224E\\u0338",nbumpe:"\\u224F\\u0338",ncap:"\\u2A43",ncaron:"\\u0148",ncedil:"\\u0146",ncong:"\\u2247",ncongdot:"\\u2A6D\\u0338",ncup:"\\u2A42",ncy:"\\u043D",ndash:"\\u2013",ne:"\\u2260",neArr:"\\u21D7",nearhk:"\\u2924",nearr:"\\u2197",nearrow:"\\u2197",nedot:"\\u2250\\u0338",nequiv:"\\u2262",nesear:"\\u2928",nesim:"\\u2242\\u0338",nexist:"\\u2204",nexists:"\\u2204",nfr:"\\u{1D52B}",ngE:"\\u2267\\u0338",nge:"\\u2271",ngeq:"\\u2271",ngeqq:"\\u2267\\u0338",ngeqslant:"\\u2A7E\\u0338",nges:"\\u2A7E\\u0338",ngsim:"\\u2275",ngt:"\\u226F",ngtr:"\\u226F",nhArr:"\\u21CE",nharr:"\\u21AE",nhpar:"\\u2AF2",ni:"\\u220B",nis:"\\u22FC",nisd:"\\u22FA",niv:"\\u220B",njcy:"\\u045A",nlArr:"\\u21CD",nlE:"\\u2266\\u0338",nlarr:"\\u219A",nldr:"\\u2025",nle:"\\u2270",nleftarrow:"\\u219A",nleftrightarrow:"\\u21AE",nleq:"\\u2270",nleqq:"\\u2266\\u0338",nleqslant:"\\u2A7D\\u0338",nles:"\\u2A7D\\u0338",nless:"\\u226E",nlsim:"\\u2274",nlt:"\\u226E",nltri:"\\u22EA",nltrie:"\\u22EC",nmid:"\\u2224",nopf:"\\u{1D55F}",not:"\\xAC",notin:"\\u2209",notinE:"\\u22F9\\u0338",notindot:"\\u22F5\\u0338",notinva:"\\u2209",notinvb:"\\u22F7",notinvc:"\\u22F6",notni:"\\u220C",notniva:"\\u220C",notnivb:"\\u22FE",notnivc:"\\u22FD",npar:"\\u2226",nparallel:"\\u2226",nparsl:"\\u2AFD\\u20E5",npart:"\\u2202\\u0338",npolint:"\\u2A14",npr:"\\u2280",nprcue:"\\u22E0",npre:"\\u2AAF\\u0338",nprec:"\\u2280",npreceq:"\\u2AAF\\u0338",nrArr:"\\u21CF",nrarr:"\\u219B",nrarrc:"\\u2933\\u0338",nrarrw:"\\u219D\\u0338",nrightarrow:"\\u219B",nrtri:"\\u22EB",nrtrie:"\\u22ED",nsc:"\\u2281",nsccue:"\\u22E1",nsce:"\\u2AB0\\u0338",nscr:"\\u{1D4C3}",nshortmid:"\\u2224",nshortparallel:"\\u2226",nsim:"\\u2241",nsime:"\\u2244",nsimeq:"\\u2244",nsmid:"\\u2224",nspar:"\\u2226",nsqsube:"\\u22E2",nsqsupe:"\\u22E3",nsub:"\\u2284",nsubE:"\\u2AC5\\u0338",nsube:"\\u2288",nsubset:"\\u2282\\u20D2",nsubseteq:"\\u2288",nsubseteqq:"\\u2AC5\\u0338",nsucc:"\\u2281",nsucceq:"\\u2AB0\\u0338",nsup:"\\u2285",nsupE:"\\u2AC6\\u0338",nsupe:"\\u2289",nsupset:"\\u2283\\u20D2",nsupseteq:"\\u2289",nsupseteqq:"\\u2AC6\\u0338",ntgl:"\\u2279",ntilde:"\\xF1",ntlg:"\\u2278",ntriangleleft:"\\u22EA",ntrianglelefteq:"\\u22EC",ntriangleright:"\\u22EB",ntrianglerighteq:"\\u22ED",nu:"\\u03BD",num:"#",numero:"\\u2116",numsp:"\\u2007",nvDash:"\\u22AD",nvHarr:"\\u2904",nvap:"\\u224D\\u20D2",nvdash:"\\u22AC",nvge:"\\u2265\\u20D2",nvgt:">\\u20D2",nvinfin:"\\u29DE",nvlArr:"\\u2902",nvle:"\\u2264\\u20D2",nvlt:"<\\u20D2",nvltrie:"\\u22B4\\u20D2",nvrArr:"\\u2903",nvrtrie:"\\u22B5\\u20D2",nvsim:"\\u223C\\u20D2",nwArr:"\\u21D6",nwarhk:"\\u2923",nwarr:"\\u2196",nwarrow:"\\u2196",nwnear:"\\u2927",oS:"\\u24C8",oacute:"\\xF3",oast:"\\u229B",ocir:"\\u229A",ocirc:"\\xF4",ocy:"\\u043E",odash:"\\u229D",odblac:"\\u0151",odiv:"\\u2A38",odot:"\\u2299",odsold:"\\u29BC",oelig:"\\u0153",ofcir:"\\u29BF",ofr:"\\u{1D52C}",ogon:"\\u02DB",ograve:"\\xF2",ogt:"\\u29C1",ohbar:"\\u29B5",ohm:"\\u03A9",oint:"\\u222E",olarr:"\\u21BA",olcir:"\\u29BE",olcross:"\\u29BB",oline:"\\u203E",olt:"\\u29C0",omacr:"\\u014D",omega:"\\u03C9",omicron:"\\u03BF",omid:"\\u29B6",ominus:"\\u2296",oopf:"\\u{1D560}",opar:"\\u29B7",operp:"\\u29B9",oplus:"\\u2295",or:"\\u2228",orarr:"\\u21BB",ord:"\\u2A5D",order:"\\u2134",orderof:"\\u2134",ordf:"\\xAA",ordm:"\\xBA",origof:"\\u22B6",oror:"\\u2A56",orslope:"\\u2A57",orv:"\\u2A5B",oscr:"\\u2134",oslash:"\\xF8",osol:"\\u2298",otilde:"\\xF5",otimes:"\\u2297",otimesas:"\\u2A36",ouml:"\\xF6",ovbar:"\\u233D",par:"\\u2225",para:"\\xB6",parallel:"\\u2225",parsim:"\\u2AF3",parsl:"\\u2AFD",part:"\\u2202",pcy:"\\u043F",percnt:"%",period:".",permil:"\\u2030",perp:"\\u22A5",pertenk:"\\u2031",pfr:"\\u{1D52D}",phi:"\\u03C6",phiv:"\\u03D5",phmmat:"\\u2133",phone:"\\u260E",pi:"\\u03C0",pitchfork:"\\u22D4",piv:"\\u03D6",planck:"\\u210F",planckh:"\\u210E",plankv:"\\u210F",plus:"+",plusacir:"\\u2A23",plusb:"\\u229E",pluscir:"\\u2A22",plusdo:"\\u2214",plusdu:"\\u2A25",pluse:"\\u2A72",plusmn:"\\xB1",plussim:"\\u2A26",plustwo:"\\u2A27",pm:"\\xB1",pointint:"\\u2A15",popf:"\\u{1D561}",pound:"\\xA3",pr:"\\u227A",prE:"\\u2AB3",prap:"\\u2AB7",prcue:"\\u227C",pre:"\\u2AAF",prec:"\\u227A",precapprox:"\\u2AB7",preccurlyeq:"\\u227C",preceq:"\\u2AAF",precnapprox:"\\u2AB9",precneqq:"\\u2AB5",precnsim:"\\u22E8",precsim:"\\u227E",prime:"\\u2032",primes:"\\u2119",prnE:"\\u2AB5",prnap:"\\u2AB9",prnsim:"\\u22E8",prod:"\\u220F",profalar:"\\u232E",profline:"\\u2312",profsurf:"\\u2313",prop:"\\u221D",propto:"\\u221D",prsim:"\\u227E",prurel:"\\u22B0",pscr:"\\u{1D4C5}",psi:"\\u03C8",puncsp:"\\u2008",qfr:"\\u{1D52E}",qint:"\\u2A0C",qopf:"\\u{1D562}",qprime:"\\u2057",qscr:"\\u{1D4C6}",quaternions:"\\u210D",quatint:"\\u2A16",quest:"?",questeq:"\\u225F",quot:\'"\',rAarr:"\\u21DB",rArr:"\\u21D2",rAtail:"\\u291C",rBarr:"\\u290F",rHar:"\\u2964",race:"\\u223D\\u0331",racute:"\\u0155",radic:"\\u221A",raemptyv:"\\u29B3",rang:"\\u27E9",rangd:"\\u2992",range:"\\u29A5",rangle:"\\u27E9",raquo:"\\xBB",rarr:"\\u2192",rarrap:"\\u2975",rarrb:"\\u21E5",rarrbfs:"\\u2920",rarrc:"\\u2933",rarrfs:"\\u291E",rarrhk:"\\u21AA",rarrlp:"\\u21AC",rarrpl:"\\u2945",rarrsim:"\\u2974",rarrtl:"\\u21A3",rarrw:"\\u219D",ratail:"\\u291A",ratio:"\\u2236",rationals:"\\u211A",rbarr:"\\u290D",rbbrk:"\\u2773",rbrace:"}",rbrack:"]",rbrke:"\\u298C",rbrksld:"\\u298E",rbrkslu:"\\u2990",rcaron:"\\u0159",rcedil:"\\u0157",rceil:"\\u2309",rcub:"}",rcy:"\\u0440",rdca:"\\u2937",rdldhar:"\\u2969",rdquo:"\\u201D",rdquor:"\\u201D",rdsh:"\\u21B3",real:"\\u211C",realine:"\\u211B",realpart:"\\u211C",reals:"\\u211D",rect:"\\u25AD",reg:"\\xAE",rfisht:"\\u297D",rfloor:"\\u230B",rfr:"\\u{1D52F}",rhard:"\\u21C1",rharu:"\\u21C0",rharul:"\\u296C",rho:"\\u03C1",rhov:"\\u03F1",rightarrow:"\\u2192",rightarrowtail:"\\u21A3",rightharpoondown:"\\u21C1",rightharpoonup:"\\u21C0",rightleftarrows:"\\u21C4",rightleftharpoons:"\\u21CC",rightrightarrows:"\\u21C9",rightsquigarrow:"\\u219D",rightthreetimes:"\\u22CC",ring:"\\u02DA",risingdotseq:"\\u2253",rlarr:"\\u21C4",rlhar:"\\u21CC",rlm:"\\u200F",rmoust:"\\u23B1",rmoustache:"\\u23B1",rnmid:"\\u2AEE",roang:"\\u27ED",roarr:"\\u21FE",robrk:"\\u27E7",ropar:"\\u2986",ropf:"\\u{1D563}",roplus:"\\u2A2E",rotimes:"\\u2A35",rpar:")",rpargt:"\\u2994",rppolint:"\\u2A12",rrarr:"\\u21C9",rsaquo:"\\u203A",rscr:"\\u{1D4C7}",rsh:"\\u21B1",rsqb:"]",rsquo:"\\u2019",rsquor:"\\u2019",rthree:"\\u22CC",rtimes:"\\u22CA",rtri:"\\u25B9",rtrie:"\\u22B5",rtrif:"\\u25B8",rtriltri:"\\u29CE",ruluhar:"\\u2968",rx:"\\u211E",sacute:"\\u015B",sbquo:"\\u201A",sc:"\\u227B",scE:"\\u2AB4",scap:"\\u2AB8",scaron:"\\u0161",sccue:"\\u227D",sce:"\\u2AB0",scedil:"\\u015F",scirc:"\\u015D",scnE:"\\u2AB6",scnap:"\\u2ABA",scnsim:"\\u22E9",scpolint:"\\u2A13",scsim:"\\u227F",scy:"\\u0441",sdot:"\\u22C5",sdotb:"\\u22A1",sdote:"\\u2A66",seArr:"\\u21D8",searhk:"\\u2925",searr:"\\u2198",searrow:"\\u2198",sect:"\\xA7",semi:";",seswar:"\\u2929",setminus:"\\u2216",setmn:"\\u2216",sext:"\\u2736",sfr:"\\u{1D530}",sfrown:"\\u2322",sharp:"\\u266F",shchcy:"\\u0449",shcy:"\\u0448",shortmid:"\\u2223",shortparallel:"\\u2225",shy:"\\xAD",sigma:"\\u03C3",sigmaf:"\\u03C2",sigmav:"\\u03C2",sim:"\\u223C",simdot:"\\u2A6A",sime:"\\u2243",simeq:"\\u2243",simg:"\\u2A9E",simgE:"\\u2AA0",siml:"\\u2A9D",simlE:"\\u2A9F",simne:"\\u2246",simplus:"\\u2A24",simrarr:"\\u2972",slarr:"\\u2190",smallsetminus:"\\u2216",smashp:"\\u2A33",smeparsl:"\\u29E4",smid:"\\u2223",smile:"\\u2323",smt:"\\u2AAA",smte:"\\u2AAC",smtes:"\\u2AAC\\uFE00",softcy:"\\u044C",sol:"/",solb:"\\u29C4",solbar:"\\u233F",sopf:"\\u{1D564}",spades:"\\u2660",spadesuit:"\\u2660",spar:"\\u2225",sqcap:"\\u2293",sqcaps:"\\u2293\\uFE00",sqcup:"\\u2294",sqcups:"\\u2294\\uFE00",sqsub:"\\u228F",sqsube:"\\u2291",sqsubset:"\\u228F",sqsubseteq:"\\u2291",sqsup:"\\u2290",sqsupe:"\\u2292",sqsupset:"\\u2290",sqsupseteq:"\\u2292",squ:"\\u25A1",square:"\\u25A1",squarf:"\\u25AA",squf:"\\u25AA",srarr:"\\u2192",sscr:"\\u{1D4C8}",ssetmn:"\\u2216",ssmile:"\\u2323",sstarf:"\\u22C6",star:"\\u2606",starf:"\\u2605",straightepsilon:"\\u03F5",straightphi:"\\u03D5",strns:"\\xAF",sub:"\\u2282",subE:"\\u2AC5",subdot:"\\u2ABD",sube:"\\u2286",subedot:"\\u2AC3",submult:"\\u2AC1",subnE:"\\u2ACB",subne:"\\u228A",subplus:"\\u2ABF",subrarr:"\\u2979",subset:"\\u2282",subseteq:"\\u2286",subseteqq:"\\u2AC5",subsetneq:"\\u228A",subsetneqq:"\\u2ACB",subsim:"\\u2AC7",subsub:"\\u2AD5",subsup:"\\u2AD3",succ:"\\u227B",succapprox:"\\u2AB8",succcurlyeq:"\\u227D",succeq:"\\u2AB0",succnapprox:"\\u2ABA",succneqq:"\\u2AB6",succnsim:"\\u22E9",succsim:"\\u227F",sum:"\\u2211",sung:"\\u266A",sup1:"\\xB9",sup2:"\\xB2",sup3:"\\xB3",sup:"\\u2283",supE:"\\u2AC6",supdot:"\\u2ABE",supdsub:"\\u2AD8",supe:"\\u2287",supedot:"\\u2AC4",suphsol:"\\u27C9",suphsub:"\\u2AD7",suplarr:"\\u297B",supmult:"\\u2AC2",supnE:"\\u2ACC",supne:"\\u228B",supplus:"\\u2AC0",supset:"\\u2283",supseteq:"\\u2287",supseteqq:"\\u2AC6",supsetneq:"\\u228B",supsetneqq:"\\u2ACC",supsim:"\\u2AC8",supsub:"\\u2AD4",supsup:"\\u2AD6",swArr:"\\u21D9",swarhk:"\\u2926",swarr:"\\u2199",swarrow:"\\u2199",swnwar:"\\u292A",szlig:"\\xDF",target:"\\u2316",tau:"\\u03C4",tbrk:"\\u23B4",tcaron:"\\u0165",tcedil:"\\u0163",tcy:"\\u0442",tdot:"\\u20DB",telrec:"\\u2315",tfr:"\\u{1D531}",there4:"\\u2234",therefore:"\\u2234",theta:"\\u03B8",thetasym:"\\u03D1",thetav:"\\u03D1",thickapprox:"\\u2248",thicksim:"\\u223C",thinsp:"\\u2009",thkap:"\\u2248",thksim:"\\u223C",thorn:"\\xFE",tilde:"\\u02DC",times:"\\xD7",timesb:"\\u22A0",timesbar:"\\u2A31",timesd:"\\u2A30",tint:"\\u222D",toea:"\\u2928",top:"\\u22A4",topbot:"\\u2336",topcir:"\\u2AF1",topf:"\\u{1D565}",topfork:"\\u2ADA",tosa:"\\u2929",tprime:"\\u2034",trade:"\\u2122",triangle:"\\u25B5",triangledown:"\\u25BF",triangleleft:"\\u25C3",trianglelefteq:"\\u22B4",triangleq:"\\u225C",triangleright:"\\u25B9",trianglerighteq:"\\u22B5",tridot:"\\u25EC",trie:"\\u225C",triminus:"\\u2A3A",triplus:"\\u2A39",trisb:"\\u29CD",tritime:"\\u2A3B",trpezium:"\\u23E2",tscr:"\\u{1D4C9}",tscy:"\\u0446",tshcy:"\\u045B",tstrok:"\\u0167",twixt:"\\u226C",twoheadleftarrow:"\\u219E",twoheadrightarrow:"\\u21A0",uArr:"\\u21D1",uHar:"\\u2963",uacute:"\\xFA",uarr:"\\u2191",ubrcy:"\\u045E",ubreve:"\\u016D",ucirc:"\\xFB",ucy:"\\u0443",udarr:"\\u21C5",udblac:"\\u0171",udhar:"\\u296E",ufisht:"\\u297E",ufr:"\\u{1D532}",ugrave:"\\xF9",uharl:"\\u21BF",uharr:"\\u21BE",uhblk:"\\u2580",ulcorn:"\\u231C",ulcorner:"\\u231C",ulcrop:"\\u230F",ultri:"\\u25F8",umacr:"\\u016B",uml:"\\xA8",uogon:"\\u0173",uopf:"\\u{1D566}",uparrow:"\\u2191",updownarrow:"\\u2195",upharpoonleft:"\\u21BF",upharpoonright:"\\u21BE",uplus:"\\u228E",upsi:"\\u03C5",upsih:"\\u03D2",upsilon:"\\u03C5",upuparrows:"\\u21C8",urcorn:"\\u231D",urcorner:"\\u231D",urcrop:"\\u230E",uring:"\\u016F",urtri:"\\u25F9",uscr:"\\u{1D4CA}",utdot:"\\u22F0",utilde:"\\u0169",utri:"\\u25B5",utrif:"\\u25B4",uuarr:"\\u21C8",uuml:"\\xFC",uwangle:"\\u29A7",vArr:"\\u21D5",vBar:"\\u2AE8",vBarv:"\\u2AE9",vDash:"\\u22A8",vangrt:"\\u299C",varepsilon:"\\u03F5",varkappa:"\\u03F0",varnothing:"\\u2205",varphi:"\\u03D5",varpi:"\\u03D6",varpropto:"\\u221D",varr:"\\u2195",varrho:"\\u03F1",varsigma:"\\u03C2",varsubsetneq:"\\u228A\\uFE00",varsubsetneqq:"\\u2ACB\\uFE00",varsupsetneq:"\\u228B\\uFE00",varsupsetneqq:"\\u2ACC\\uFE00",vartheta:"\\u03D1",vartriangleleft:"\\u22B2",vartriangleright:"\\u22B3",vcy:"\\u0432",vdash:"\\u22A2",vee:"\\u2228",veebar:"\\u22BB",veeeq:"\\u225A",vellip:"\\u22EE",verbar:"|",vert:"|",vfr:"\\u{1D533}",vltri:"\\u22B2",vnsub:"\\u2282\\u20D2",vnsup:"\\u2283\\u20D2",vopf:"\\u{1D567}",vprop:"\\u221D",vrtri:"\\u22B3",vscr:"\\u{1D4CB}",vsubnE:"\\u2ACB\\uFE00",vsubne:"\\u228A\\uFE00",vsupnE:"\\u2ACC\\uFE00",vsupne:"\\u228B\\uFE00",vzigzag:"\\u299A",wcirc:"\\u0175",wedbar:"\\u2A5F",wedge:"\\u2227",wedgeq:"\\u2259",weierp:"\\u2118",wfr:"\\u{1D534}",wopf:"\\u{1D568}",wp:"\\u2118",wr:"\\u2240",wreath:"\\u2240",wscr:"\\u{1D4CC}",xcap:"\\u22C2",xcirc:"\\u25EF",xcup:"\\u22C3",xdtri:"\\u25BD",xfr:"\\u{1D535}",xhArr:"\\u27FA",xharr:"\\u27F7",xi:"\\u03BE",xlArr:"\\u27F8",xlarr:"\\u27F5",xmap:"\\u27FC",xnis:"\\u22FB",xodot:"\\u2A00",xopf:"\\u{1D569}",xoplus:"\\u2A01",xotime:"\\u2A02",xrArr:"\\u27F9",xrarr:"\\u27F6",xscr:"\\u{1D4CD}",xsqcup:"\\u2A06",xuplus:"\\u2A04",xutri:"\\u25B3",xvee:"\\u22C1",xwedge:"\\u22C0",yacute:"\\xFD",yacy:"\\u044F",ycirc:"\\u0177",ycy:"\\u044B",yen:"\\xA5",yfr:"\\u{1D536}",yicy:"\\u0457",yopf:"\\u{1D56A}",yscr:"\\u{1D4CE}",yucy:"\\u044E",yuml:"\\xFF",zacute:"\\u017A",zcaron:"\\u017E",zcy:"\\u0437",zdot:"\\u017C",zeetrf:"\\u2128",zeta:"\\u03B6",zfr:"\\u{1D537}",zhcy:"\\u0436",zigrarr:"\\u21DD",zopf:"\\u{1D56B}",zscr:"\\u{1D4CF}",zwj:"\\u200D",zwnj:"\\u200C"};var yi={}.hasOwnProperty;function Ie(e){return yi.call(Sr,e)?Sr[e]:!1}var Ze={name:"characterReference",tokenize:bi};function bi(e,r,t){let n=this,i=0,o,a;return u;function u(E){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(E),e.exit("characterReferenceMarker"),s}function s(E){return E===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(E),e.exit("characterReferenceMarkerNumeric"),f):(e.enter("characterReferenceValue"),o=31,a=ee,l(E))}function f(E){return E===88||E===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(E),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),o=6,a=At,l):(e.enter("characterReferenceValue"),o=7,a=Re,l(E))}function l(E){let g;return E===59&&i?(g=e.exit("characterReferenceValue"),a===ee&&!Ie(n.sliceSerialize(g))?t(E):(e.enter("characterReferenceMarker"),e.consume(E),e.exit("characterReferenceMarker"),e.exit("characterReference"),r)):a(E)&&i++<o?(e.consume(E),l):t(E)}}var Je={name:"codeFenced",tokenize:Ei,concrete:!0};function Ei(e,r,t){let n=this,i={tokenize:I,partial:!0},o={tokenize:L,partial:!0},a=this.events[this.events.length-1],u=a&&a[1].type==="linePrefix"?a[2].sliceSerialize(a[1],!0).length:0,s=0,f;return l;function l(y){return e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),f=y,E(y)}function E(y){return y===f?(e.consume(y),s++,E):(e.exit("codeFencedFenceSequence"),s<3?t(y):R(e,g,"whitespace")(y))}function g(y){return y===null||F(y)?b(y):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),h(y))}function h(y){return y===null||G(y)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),R(e,m,"whitespace")(y)):y===96&&y===f?t(y):(e.consume(y),h)}function m(y){return y===null||F(y)?b(y):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),d(y))}function d(y){return y===null||F(y)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),b(y)):y===96&&y===f?t(y):(e.consume(y),d)}function b(y){return e.exit("codeFencedFence"),n.interrupt?r(y):x(y)}function x(y){return y===null?C(y):F(y)?e.attempt(o,e.attempt(i,C,u?R(e,x,"linePrefix",u+1):x),C)(y):(e.enter("codeFlowValue"),q(y))}function q(y){return y===null||F(y)?(e.exit("codeFlowValue"),x(y)):(e.consume(y),q)}function C(y){return e.exit("codeFenced"),r(y)}function L(y,D,B){let S=this;return T;function T(_){return y.enter("lineEnding"),y.consume(_),y.exit("lineEnding"),k}function k(_){return S.parser.lazy[S.now().line]?B(_):D(_)}}function I(y,D,B){let S=0;return R(y,T,"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4);function T(v){return y.enter("codeFencedFence"),y.enter("codeFencedFenceSequence"),k(v)}function k(v){return v===f?(y.consume(v),S++,k):S<s?B(v):(y.exit("codeFencedFenceSequence"),R(y,_,"whitespace")(v))}function _(v){return v===null||F(v)?(y.exit("codeFencedFence"),D(v)):B(v)}}}var Me={name:"codeIndented",tokenize:vi},Si={tokenize:Ai,partial:!0};function vi(e,r,t){let n=this;return i;function i(f){return e.enter("codeIndented"),R(e,o,"linePrefix",4+1)(f)}function o(f){let l=n.events[n.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?a(f):t(f)}function a(f){return f===null?s(f):F(f)?e.attempt(Si,a,s)(f):(e.enter("codeFlowValue"),u(f))}function u(f){return f===null||F(f)?(e.exit("codeFlowValue"),a(f)):(e.consume(f),u)}function s(f){return e.exit("codeIndented"),r(f)}}function Ai(e,r,t){let n=this;return i;function i(a){return n.parser.lazy[n.now().line]?t(a):F(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),i):R(e,o,"linePrefix",4+1)(a)}function o(a){let u=n.events[n.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?r(a):F(a)?i(a):t(a)}}var vr={name:"codeText",tokenize:qi,resolve:Ci,previous:Ti};function Ci(e){let r=e.length-4,t=3,n,i;if((e[t][1].type==="lineEnding"||e[t][1].type==="space")&&(e[r][1].type==="lineEnding"||e[r][1].type==="space")){for(n=t;++n<r;)if(e[n][1].type==="codeTextData"){e[t][1].type="codeTextPadding",e[r][1].type="codeTextPadding",t+=2,r-=2;break}}for(n=t-1,r++;++n<=r;)i===void 0?n!==r&&e[n][1].type!=="lineEnding"&&(i=n):(n===r||e[n][1].type==="lineEnding")&&(e[i][1].type="codeTextData",n!==i+2&&(e[i][1].end=e[n-1][1].end,e.splice(i+2,n-i-2),r-=n-i-2,n=i+2),i=void 0);return e}function Ti(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function qi(e,r,t){let n=this,i=0,o,a;return u;function u(g){return e.enter("codeText"),e.enter("codeTextSequence"),s(g)}function s(g){return g===96?(e.consume(g),i++,s):(e.exit("codeTextSequence"),f(g))}function f(g){return g===null?t(g):g===96?(a=e.enter("codeTextSequence"),o=0,E(g)):g===32?(e.enter("space"),e.consume(g),e.exit("space"),f):F(g)?(e.enter("lineEnding"),e.consume(g),e.exit("lineEnding"),f):(e.enter("codeTextData"),l(g))}function l(g){return g===null||g===32||g===96||F(g)?(e.exit("codeTextData"),f(g)):(e.consume(g),l)}function E(g){return g===96?(e.consume(g),o++,E):o===i?(e.exit("codeTextSequence"),e.exit("codeText"),r(g)):(a.type="codeTextData",l(g))}}function Ye(e){let r={},t=-1,n,i,o,a,u,s,f;for(;++t<e.length;){for(;t in r;)t=r[t];if(n=e[t],t&&n[1].type==="chunkFlow"&&e[t-1][1].type==="listItemPrefix"&&(s=n[1]._tokenizer.events,o=0,o<s.length&&s[o][1].type==="lineEndingBlank"&&(o+=2),o<s.length&&s[o][1].type==="content"))for(;++o<s.length&&s[o][1].type!=="content";)s[o][1].type==="chunkText"&&(s[o][1]._isInFirstContentOfListItem=!0,o++);if(n[0]==="enter")n[1].contentType&&(Object.assign(r,Fi(e,t)),t=r[t],f=!0);else if(n[1]._container){for(o=t,i=void 0;o--&&(a=e[o],a[1].type==="lineEnding"||a[1].type==="lineEndingBlank");)a[0]==="enter"&&(i&&(e[i][1].type="lineEndingBlank"),a[1].type="lineEnding",i=o);i&&(n[1].end=Object.assign({},e[i][1].start),u=e.slice(i,t),u.unshift(n),Z(e,i,t-i+1,u))}}return!f}function Fi(e,r){let t=e[r][1],n=e[r][2],i=r-1,o=[],a=t._tokenizer||n.parser[t.contentType](t.start),u=a.events,s=[],f={},l,E,g=-1,h=t,m=0,d=0,b=[d];for(;h;){for(;e[++i][1]!==h;);o.push(i),h._tokenizer||(l=n.sliceStream(h),h.next||l.push(null),E&&a.defineSkip(h.start),h._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(l),h._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),E=h,h=h.next}for(h=t;++g<u.length;)u[g][0]==="exit"&&u[g-1][0]==="enter"&&u[g][1].type===u[g-1][1].type&&u[g][1].start.line!==u[g][1].end.line&&(d=g+1,b.push(d),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(a.events=[],h?(h._tokenizer=void 0,h.previous=void 0):b.pop(),g=b.length;g--;){let x=u.slice(b[g],b[g+1]),q=o.pop();s.unshift([q,q+x.length-1]),Z(e,q,2,x)}for(g=-1;++g<s.length;)f[m+s[g][0]]=m+s[g][1],m+=s[g][1]-s[g][0]-1;return f}var Ar={tokenize:Li,resolve:Ii},_i={tokenize:Oi,partial:!0};function Ii(e){return Ye(e),e}function Li(e,r){let t;return n;function n(u){return e.enter("content"),t=e.enter("chunkContent",{contentType:"content"}),i(u)}function i(u){return u===null?o(u):F(u)?e.check(_i,a,o)(u):(e.consume(u),i)}function o(u){return e.exit("chunkContent"),e.exit("content"),r(u)}function a(u){return e.consume(u),e.exit("chunkContent"),t.next=e.enter("chunkContent",{contentType:"content",previous:t}),t=t.next,i}}function Oi(e,r,t){let n=this;return i;function i(a){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),R(e,o,"linePrefix")}function o(a){if(a===null||F(a))return t(a);let u=n.events[n.events.length-1];return!n.parser.constructs.disable.null.includes("codeIndented")&&u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?r(a):e.interrupt(n.parser.constructs.flow,t,r)(a)}}function Xe(e,r,t,n,i,o,a,u,s){let f=s||Number.POSITIVE_INFINITY,l=0;return E;function E(x){return x===60?(e.enter(n),e.enter(i),e.enter(o),e.consume(x),e.exit(o),g):x===null||x===41||Be(x)?t(x):(e.enter(n),e.enter(a),e.enter(u),e.enter("chunkString",{contentType:"string"}),d(x))}function g(x){return x===62?(e.enter(o),e.consume(x),e.exit(o),e.exit(i),e.exit(n),r):(e.enter(u),e.enter("chunkString",{contentType:"string"}),h(x))}function h(x){return x===62?(e.exit("chunkString"),e.exit(u),g(x)):x===null||x===60||F(x)?t(x):(e.consume(x),x===92?m:h)}function m(x){return x===60||x===62||x===92?(e.consume(x),h):h(x)}function d(x){return x===40?++l>f?t(x):(e.consume(x),d):x===41?l--?(e.consume(x),d):(e.exit("chunkString"),e.exit(u),e.exit(a),e.exit(n),r(x)):x===null||G(x)?l?t(x):(e.exit("chunkString"),e.exit(u),e.exit(a),e.exit(n),r(x)):Be(x)?t(x):(e.consume(x),x===92?b:d)}function b(x){return x===40||x===41||x===92?(e.consume(x),d):d(x)}}function er(e,r,t,n,i,o){let a=this,u=0,s;return f;function f(h){return e.enter(n),e.enter(i),e.consume(h),e.exit(i),e.enter(o),l}function l(h){return h===null||h===91||h===93&&!s||h===94&&!u&&"_hiddenFootnoteSupport"in a.parser.constructs||u>999?t(h):h===93?(e.exit(o),e.enter(i),e.consume(h),e.exit(i),e.exit(n),r):F(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),l):(e.enter("chunkString",{contentType:"string"}),E(h))}function E(h){return h===null||h===91||h===93||F(h)||u++>999?(e.exit("chunkString"),l(h)):(e.consume(h),s=s||!j(h),h===92?g:E)}function g(h){return h===91||h===92||h===93?(e.consume(h),u++,E):E(h)}}function rr(e,r,t,n,i,o){let a;return u;function u(g){return e.enter(n),e.enter(i),e.consume(g),e.exit(i),a=g===40?41:g,s}function s(g){return g===a?(e.enter(i),e.consume(g),e.exit(i),e.exit(n),r):(e.enter(o),f(g))}function f(g){return g===a?(e.exit(o),s(a)):g===null?t(g):F(g)?(e.enter("lineEnding"),e.consume(g),e.exit("lineEnding"),R(e,f,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),l(g))}function l(g){return g===a||g===null||F(g)?(e.exit("chunkString"),f(g)):(e.consume(g),g===92?E:l)}function E(g){return g===a||g===92?(e.consume(g),l):l(g)}}function ve(e,r){let t;return n;function n(i){return F(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),t=!0,n):j(i)?R(e,n,t?"linePrefix":"lineSuffix")(i):r(i)}}function me(e){return e.replace(/[\\t\\n\\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}var Cr={name:"definition",tokenize:Di},Pi={tokenize:zi,partial:!0};function Di(e,r,t){let n=this,i;return o;function o(s){return e.enter("definition"),er.call(n,e,a,t,"definitionLabel","definitionLabelMarker","definitionLabelString")(s)}function a(s){return i=me(n.sliceSerialize(n.events[n.events.length-1][1]).slice(1,-1)),s===58?(e.enter("definitionMarker"),e.consume(s),e.exit("definitionMarker"),ve(e,Xe(e,e.attempt(Pi,R(e,u,"whitespace"),R(e,u,"whitespace")),t,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString"))):t(s)}function u(s){return s===null||F(s)?(e.exit("definition"),n.parser.defined.includes(i)||n.parser.defined.push(i),r(s)):t(s)}}function zi(e,r,t){return n;function n(a){return G(a)?ve(e,i)(a):t(a)}function i(a){return a===34||a===39||a===40?rr(e,R(e,o,"whitespace"),t,"definitionTitle","definitionTitleMarker","definitionTitleString")(a):t(a)}function o(a){return a===null||F(a)?r(a):t(a)}}var Tr={name:"hardBreakEscape",tokenize:Ri};function Ri(e,r,t){return n;function n(o){return e.enter("hardBreakEscape"),e.enter("escapeMarker"),e.consume(o),i}function i(o){return F(o)?(e.exit("escapeMarker"),e.exit("hardBreakEscape"),r(o)):t(o)}}var qr={name:"headingAtx",tokenize:Ni,resolve:Bi};function Bi(e,r){let t=e.length-2,n=3,i,o;return e[n][1].type==="whitespace"&&(n+=2),t-2>n&&e[t][1].type==="whitespace"&&(t-=2),e[t][1].type==="atxHeadingSequence"&&(n===t-1||t-4>n&&e[t-2][1].type==="whitespace")&&(t-=n+1===t?2:4),t>n&&(i={type:"atxHeadingText",start:e[n][1].start,end:e[t][1].end},o={type:"chunkText",start:e[n][1].start,end:e[t][1].end,contentType:"text"},Z(e,n,t-n+1,[["enter",i,r],["enter",o,r],["exit",o,r],["exit",i,r]])),e}function Ni(e,r,t){let n=this,i=0;return o;function o(l){return e.enter("atxHeading"),e.enter("atxHeadingSequence"),a(l)}function a(l){return l===35&&i++<6?(e.consume(l),a):l===null||G(l)?(e.exit("atxHeadingSequence"),n.interrupt?r(l):u(l)):t(l)}function u(l){return l===35?(e.enter("atxHeadingSequence"),s(l)):l===null||F(l)?(e.exit("atxHeading"),r(l)):j(l)?R(e,u,"whitespace")(l):(e.enter("atxHeadingText"),f(l))}function s(l){return l===35?(e.consume(l),s):(e.exit("atxHeadingSequence"),u(l))}function f(l){return l===null||l===35||G(l)?(e.exit("atxHeadingText"),u(l)):(e.consume(l),f)}}var Ot=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Fr=["pre","script","style","textarea"];var _r={name:"htmlFlow",tokenize:ji,resolveTo:Wi,concrete:!0},Mi={tokenize:Ui,partial:!0};function Wi(e){let r=e.length;for(;r--&&!(e[r][0]==="enter"&&e[r][1].type==="htmlFlow"););return r>1&&e[r-2][1].type==="linePrefix"&&(e[r][1].start=e[r-2][1].start,e[r+1][1].start=e[r-2][1].start,e.splice(r-2,2)),e}function ji(e,r,t){let n=this,i,o,a,u,s;return f;function f(c){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(c),l}function l(c){return c===33?(e.consume(c),E):c===47?(e.consume(c),m):c===63?(e.consume(c),i=3,n.interrupt?r:$):re(c)?(e.consume(c),a=String.fromCharCode(c),o=!0,d):t(c)}function E(c){return c===45?(e.consume(c),i=2,g):c===91?(e.consume(c),i=5,a="CDATA[",u=0,h):re(c)?(e.consume(c),i=4,n.interrupt?r:$):t(c)}function g(c){return c===45?(e.consume(c),n.interrupt?r:$):t(c)}function h(c){return c===a.charCodeAt(u++)?(e.consume(c),u===a.length?n.interrupt?r:k:h):t(c)}function m(c){return re(c)?(e.consume(c),a=String.fromCharCode(c),d):t(c)}function d(c){return c===null||c===47||c===62||G(c)?c!==47&&o&&Fr.includes(a.toLowerCase())?(i=1,n.interrupt?r(c):k(c)):Ot.includes(a.toLowerCase())?(i=6,c===47?(e.consume(c),b):n.interrupt?r(c):k(c)):(i=7,n.interrupt&&!n.parser.lazy[n.now().line]?t(c):o?q(c):x(c)):c===45||ee(c)?(e.consume(c),a+=String.fromCharCode(c),d):t(c)}function b(c){return c===62?(e.consume(c),n.interrupt?r:k):t(c)}function x(c){return j(c)?(e.consume(c),x):S(c)}function q(c){return c===47?(e.consume(c),S):c===58||c===95||re(c)?(e.consume(c),C):j(c)?(e.consume(c),q):S(c)}function C(c){return c===45||c===46||c===58||c===95||ee(c)?(e.consume(c),C):L(c)}function L(c){return c===61?(e.consume(c),I):j(c)?(e.consume(c),L):q(c)}function I(c){return c===null||c===60||c===61||c===62||c===96?t(c):c===34||c===39?(e.consume(c),s=c,y):j(c)?(e.consume(c),I):(s=null,D(c))}function y(c){return c===null||F(c)?t(c):c===s?(e.consume(c),B):(e.consume(c),y)}function D(c){return c===null||c===34||c===39||c===60||c===61||c===62||c===96||G(c)?L(c):(e.consume(c),D)}function B(c){return c===47||c===62||j(c)?q(c):t(c)}function S(c){return c===62?(e.consume(c),T):t(c)}function T(c){return j(c)?(e.consume(c),T):c===null||F(c)?k(c):t(c)}function k(c){return c===45&&i===2?(e.consume(c),M):c===60&&i===1?(e.consume(c),z):c===62&&i===4?(e.consume(c),Q):c===63&&i===3?(e.consume(c),$):c===93&&i===5?(e.consume(c),N):F(c)&&(i===6||i===7)?e.check(Mi,Q,_)(c):c===null||F(c)?_(c):(e.consume(c),k)}function _(c){return e.exit("htmlFlowData"),v(c)}function v(c){return c===null?p(c):F(c)?e.attempt({tokenize:O,partial:!0},v,p)(c):(e.enter("htmlFlowData"),k(c))}function O(c,Le,ye){return qe;function qe(ae){return c.enter("lineEnding"),c.consume(ae),c.exit("lineEnding"),Oe}function Oe(ae){return n.parser.lazy[n.now().line]?ye(ae):Le(ae)}}function M(c){return c===45?(e.consume(c),$):k(c)}function z(c){return c===47?(e.consume(c),a="",W):k(c)}function W(c){return c===62&&Fr.includes(a.toLowerCase())?(e.consume(c),Q):re(c)&&a.length<8?(e.consume(c),a+=String.fromCharCode(c),W):k(c)}function N(c){return c===93?(e.consume(c),$):k(c)}function $(c){return c===62?(e.consume(c),Q):c===45&&i===2?(e.consume(c),$):k(c)}function Q(c){return c===null||F(c)?(e.exit("htmlFlowData"),p(c)):(e.consume(c),Q)}function p(c){return e.exit("htmlFlow"),r(c)}}function Ui(e,r,t){return n;function n(i){return e.exit("htmlFlowData"),e.enter("lineEndingBlank"),e.consume(i),e.exit("lineEndingBlank"),e.attempt(xe,r,t)}}var Ir={name:"htmlText",tokenize:Hi};function Hi(e,r,t){let n=this,i,o,a,u;return s;function s(p){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(p),f}function f(p){return p===33?(e.consume(p),l):p===47?(e.consume(p),D):p===63?(e.consume(p),I):re(p)?(e.consume(p),T):t(p)}function l(p){return p===45?(e.consume(p),E):p===91?(e.consume(p),o="CDATA[",a=0,b):re(p)?(e.consume(p),L):t(p)}function E(p){return p===45?(e.consume(p),g):t(p)}function g(p){return p===null||p===62?t(p):p===45?(e.consume(p),h):m(p)}function h(p){return p===null||p===62?t(p):m(p)}function m(p){return p===null?t(p):p===45?(e.consume(p),d):F(p)?(u=m,N(p)):(e.consume(p),m)}function d(p){return p===45?(e.consume(p),Q):m(p)}function b(p){return p===o.charCodeAt(a++)?(e.consume(p),a===o.length?x:b):t(p)}function x(p){return p===null?t(p):p===93?(e.consume(p),q):F(p)?(u=x,N(p)):(e.consume(p),x)}function q(p){return p===93?(e.consume(p),C):x(p)}function C(p){return p===62?Q(p):p===93?(e.consume(p),C):x(p)}function L(p){return p===null||p===62?Q(p):F(p)?(u=L,N(p)):(e.consume(p),L)}function I(p){return p===null?t(p):p===63?(e.consume(p),y):F(p)?(u=I,N(p)):(e.consume(p),I)}function y(p){return p===62?Q(p):I(p)}function D(p){return re(p)?(e.consume(p),B):t(p)}function B(p){return p===45||ee(p)?(e.consume(p),B):S(p)}function S(p){return F(p)?(u=S,N(p)):j(p)?(e.consume(p),S):Q(p)}function T(p){return p===45||ee(p)?(e.consume(p),T):p===47||p===62||G(p)?k(p):t(p)}function k(p){return p===47?(e.consume(p),Q):p===58||p===95||re(p)?(e.consume(p),_):F(p)?(u=k,N(p)):j(p)?(e.consume(p),k):Q(p)}function _(p){return p===45||p===46||p===58||p===95||ee(p)?(e.consume(p),_):v(p)}function v(p){return p===61?(e.consume(p),O):F(p)?(u=v,N(p)):j(p)?(e.consume(p),v):k(p)}function O(p){return p===null||p===60||p===61||p===62||p===96?t(p):p===34||p===39?(e.consume(p),i=p,M):F(p)?(u=O,N(p)):j(p)?(e.consume(p),O):(e.consume(p),i=void 0,W)}function M(p){return p===i?(e.consume(p),z):p===null?t(p):F(p)?(u=M,N(p)):(e.consume(p),M)}function z(p){return p===62||p===47||G(p)?k(p):t(p)}function W(p){return p===null||p===34||p===39||p===60||p===61||p===96?t(p):p===62||G(p)?k(p):(e.consume(p),W)}function N(p){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(p),e.exit("lineEnding"),R(e,$,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function $(p){return e.enter("htmlTextData"),u(p)}function Q(p){return p===62?(e.consume(p),e.exit("htmlTextData"),e.exit("htmlText"),r):t(p)}}var Ae={name:"labelEnd",tokenize:Zi,resolveTo:Ki,resolveAll:$i},Vi={tokenize:Ji},Qi={tokenize:Yi},Gi={tokenize:Xi};function $i(e){let r=-1,t;for(;++r<e.length;)t=e[r][1],(t.type==="labelImage"||t.type==="labelLink"||t.type==="labelEnd")&&(e.splice(r+1,t.type==="labelImage"?4:2),t.type="data",r++);return e}function Ki(e,r){let t=e.length,n=0,i,o,a,u;for(;t--;)if(i=e[t][1],o){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[t][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(a){if(e[t][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(o=t,i.type!=="labelLink")){n=2;break}}else i.type==="labelEnd"&&(a=t);let s={type:e[o][1].type==="labelLink"?"link":"image",start:Object.assign({},e[o][1].start),end:Object.assign({},e[e.length-1][1].end)},f={type:"label",start:Object.assign({},e[o][1].start),end:Object.assign({},e[a][1].end)},l={type:"labelText",start:Object.assign({},e[o+n+2][1].end),end:Object.assign({},e[a-2][1].start)};return u=[["enter",s,r],["enter",f,r]],u=X(u,e.slice(o+1,o+n+3)),u=X(u,[["enter",l,r]]),u=X(u,_e(r.parser.constructs.insideSpan.null,e.slice(o+n+4,a-3),r)),u=X(u,[["exit",l,r],e[a-2],e[a-1],["exit",f,r]]),u=X(u,e.slice(a+1)),u=X(u,[["exit",s,r]]),Z(e,o,e.length,u),e}function Zi(e,r,t){let n=this,i=n.events.length,o,a;for(;i--;)if((n.events[i][1].type==="labelImage"||n.events[i][1].type==="labelLink")&&!n.events[i][1]._balanced){o=n.events[i][1];break}return u;function u(l){return o?o._inactive?f(l):(a=n.parser.defined.includes(me(n.sliceSerialize({start:o.end,end:n.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(l),e.exit("labelMarker"),e.exit("labelEnd"),s):t(l)}function s(l){return l===40?e.attempt(Vi,r,a?r:f)(l):l===91?e.attempt(Qi,r,a?e.attempt(Gi,r,f):f)(l):a?r(l):f(l)}function f(l){return o._balanced=!0,t(l)}}function Ji(e,r,t){return n;function n(s){return e.enter("resource"),e.enter("resourceMarker"),e.consume(s),e.exit("resourceMarker"),ve(e,i)}function i(s){return s===41?u(s):Xe(e,o,t,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(s)}function o(s){return G(s)?ve(e,a)(s):u(s)}function a(s){return s===34||s===39||s===40?rr(e,ve(e,u),t,"resourceTitle","resourceTitleMarker","resourceTitleString")(s):u(s)}function u(s){return s===41?(e.enter("resourceMarker"),e.consume(s),e.exit("resourceMarker"),e.exit("resource"),r):t(s)}}function Yi(e,r,t){let n=this;return i;function i(a){return er.call(n,e,o,t,"reference","referenceMarker","referenceString")(a)}function o(a){return n.parser.defined.includes(me(n.sliceSerialize(n.events[n.events.length-1][1]).slice(1,-1)))?r(a):t(a)}}function Xi(e,r,t){return n;function n(o){return e.enter("reference"),e.enter("referenceMarker"),e.consume(o),e.exit("referenceMarker"),i}function i(o){return o===93?(e.enter("referenceMarker"),e.consume(o),e.exit("referenceMarker"),e.exit("reference"),r):t(o)}}var Lr={name:"labelStartImage",tokenize:eo,resolveAll:Ae.resolveAll};function eo(e,r,t){let n=this;return i;function i(u){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(u),e.exit("labelImageMarker"),o}function o(u){return u===91?(e.enter("labelMarker"),e.consume(u),e.exit("labelMarker"),e.exit("labelImage"),a):t(u)}function a(u){return u===94&&"_hiddenFootnoteSupport"in n.parser.constructs?t(u):r(u)}}var Or={name:"labelStartLink",tokenize:ro,resolveAll:Ae.resolveAll};function ro(e,r,t){let n=this;return i;function i(a){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelLink"),o}function o(a){return a===94&&"_hiddenFootnoteSupport"in n.parser.constructs?t(a):r(a)}}var We={name:"lineEnding",tokenize:to};function to(e,r){return t;function t(n){return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),R(e,r,"linePrefix")}}var Ce={name:"thematicBreak",tokenize:no};function no(e,r,t){let n=0,i;return o;function o(s){return e.enter("thematicBreak"),i=s,a(s)}function a(s){return s===i?(e.enter("thematicBreakSequence"),u(s)):j(s)?R(e,a,"whitespace")(s):n<3||s!==null&&!F(s)?t(s):(e.exit("thematicBreak"),r(s))}function u(s){return s===i?(e.consume(s),n++,u):(e.exit("thematicBreakSequence"),a(s))}}var J={name:"list",tokenize:uo,continuation:{tokenize:ao},exit:lo},io={tokenize:co,partial:!0},oo={tokenize:so,partial:!0};function uo(e,r,t){let n=this,i=n.events[n.events.length-1],o=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,a=0;return u;function u(h){let m=n.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(m==="listUnordered"?!n.containerState.marker||h===n.containerState.marker:Re(h)){if(n.containerState.type||(n.containerState.type=m,e.enter(m,{_container:!0})),m==="listUnordered")return e.enter("listItemPrefix"),h===42||h===45?e.check(Ce,t,f)(h):f(h);if(!n.interrupt||h===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),s(h)}return t(h)}function s(h){return Re(h)&&++a<10?(e.consume(h),s):(!n.interrupt||a<2)&&(n.containerState.marker?h===n.containerState.marker:h===41||h===46)?(e.exit("listItemValue"),f(h)):t(h)}function f(h){return e.enter("listItemMarker"),e.consume(h),e.exit("listItemMarker"),n.containerState.marker=n.containerState.marker||h,e.check(xe,n.interrupt?t:l,e.attempt(io,g,E))}function l(h){return n.containerState.initialBlankLine=!0,o++,g(h)}function E(h){return j(h)?(e.enter("listItemPrefixWhitespace"),e.consume(h),e.exit("listItemPrefixWhitespace"),g):t(h)}function g(h){return n.containerState.size=o+n.sliceSerialize(e.exit("listItemPrefix"),!0).length,r(h)}}function ao(e,r,t){let n=this;return n.containerState._closeFlow=void 0,e.check(xe,i,o);function i(u){return n.containerState.furtherBlankLines=n.containerState.furtherBlankLines||n.containerState.initialBlankLine,R(e,r,"listItemIndent",n.containerState.size+1)(u)}function o(u){return n.containerState.furtherBlankLines||!j(u)?(n.containerState.furtherBlankLines=void 0,n.containerState.initialBlankLine=void 0,a(u)):(n.containerState.furtherBlankLines=void 0,n.containerState.initialBlankLine=void 0,e.attempt(oo,r,a)(u))}function a(u){return n.containerState._closeFlow=!0,n.interrupt=void 0,R(e,e.attempt(J,r,t),"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(u)}}function so(e,r,t){let n=this;return R(e,i,"listItemIndent",n.containerState.size+1);function i(o){let a=n.events[n.events.length-1];return a&&a[1].type==="listItemIndent"&&a[2].sliceSerialize(a[1],!0).length===n.containerState.size?r(o):t(o)}}function lo(e){e.exit(this.containerState.type)}function co(e,r,t){let n=this;return R(e,i,"listItemPrefixWhitespace",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4+1);function i(o){let a=n.events[n.events.length-1];return!j(o)&&a&&a[1].type==="listItemPrefixWhitespace"?r(o):t(o)}}var tr={name:"setextUnderline",tokenize:fo,resolveTo:po};function po(e,r){let t=e.length,n,i,o;for(;t--;)if(e[t][0]==="enter"){if(e[t][1].type==="content"){n=t;break}e[t][1].type==="paragraph"&&(i=t)}else e[t][1].type==="content"&&e.splice(t,1),!o&&e[t][1].type==="definition"&&(o=t);let a={type:"setextHeading",start:Object.assign({},e[i][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[i][1].type="setextHeadingText",o?(e.splice(i,0,["enter",a,r]),e.splice(o+1,0,["exit",e[n][1],r]),e[n][1].end=Object.assign({},e[o][1].end)):e[n][1]=a,e.push(["exit",a,r]),e}function fo(e,r,t){let n=this,i=n.events.length,o,a;for(;i--;)if(n.events[i][1].type!=="lineEnding"&&n.events[i][1].type!=="linePrefix"&&n.events[i][1].type!=="content"){a=n.events[i][1].type==="paragraph";break}return u;function u(l){return!n.parser.lazy[n.now().line]&&(n.interrupt||a)?(e.enter("setextHeadingLine"),e.enter("setextHeadingLineSequence"),o=l,s(l)):t(l)}function s(l){return l===o?(e.consume(l),s):(e.exit("setextHeadingLineSequence"),R(e,f,"lineSuffix")(l))}function f(l){return l===null||F(l)?(e.exit("setextHeadingLine"),r(l)):t(l)}}var Pt={tokenize:ho};function ho(e){let r=this,t=e.attempt(xe,n,e.attempt(this.parser.constructs.flowInitial,i,R(e,e.attempt(this.parser.constructs.flow,i,e.attempt(Ar,i)),"linePrefix")));return t;function n(o){if(o===null){e.consume(o);return}return e.enter("lineEndingBlank"),e.consume(o),e.exit("lineEndingBlank"),r.currentConstruct=void 0,t}function i(o){if(o===null){e.consume(o);return}return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),r.currentConstruct=void 0,t}}var Dt={resolveAll:Nt()},zt=Bt("string"),Rt=Bt("text");function Bt(e){return{tokenize:r,resolveAll:Nt(e==="text"?mo:void 0)};function r(t){let n=this,i=this.parser.constructs[e],o=t.attempt(i,a,u);return a;function a(l){return f(l)?o(l):u(l)}function u(l){if(l===null){t.consume(l);return}return t.enter("data"),t.consume(l),s}function s(l){return f(l)?(t.exit("data"),o(l)):(t.consume(l),s)}function f(l){if(l===null)return!0;let E=i[l],g=-1;if(E)for(;++g<E.length;){let h=E[g];if(!h.previous||h.previous.call(n,n.previous))return!0}return!1}}}function Nt(e){return r;function r(t,n){let i=-1,o;for(;++i<=t.length;)o===void 0?t[i]&&t[i][1].type==="data"&&(o=i,i++):(!t[i]||t[i][1].type!=="data")&&(i!==o+2&&(t[o][1].end=t[i-1][1].end,t.splice(o+2,i-o-2),i=o+2),o=void 0);return e?e(t,n):t}}function mo(e,r){let t=0;for(;++t<=e.length;)if((t===e.length||e[t][1].type==="lineEnding")&&e[t-1][1].type==="data"){let n=e[t-1][1],i=r.sliceStream(n),o=i.length,a=-1,u=0,s;for(;o--;){let f=i[o];if(typeof f=="string"){for(a=f.length;f.charCodeAt(a-1)===32;)u++,a--;if(a)break;a=-1}else if(f===-2)s=!0,u++;else if(f!==-1){o++;break}}if(u){let f={type:t===e.length||s||u<2?"lineSuffix":"hardBreakTrailing",start:{line:n.end.line,column:n.end.column-u,offset:n.end.offset-u,_index:n.start._index+o,_bufferIndex:o?a:n.start._bufferIndex+a},end:Object.assign({},n.end)};n.end=Object.assign({},f.start),n.start.offset===n.end.offset?Object.assign(n,f):(e.splice(t,0,["enter",f,r],["exit",f,r]),t+=2)}t++}return e}function Mt(e,r,t){let n=Object.assign(t?Object.assign({},t):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1}),i={},o=[],a=[],u=[],s=!0,f={consume:L,enter:I,exit:y,attempt:S(D),check:S(B),interrupt:S(B,{interrupt:!0})},l={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:d,sliceSerialize:m,now:b,defineSkip:x,write:h},E=r.tokenize.call(l,f),g;return r.resolveAll&&o.push(r),l;function h(v){return a=X(a,v),q(),a[a.length-1]!==null?[]:(T(r,0),l.events=_e(o,l.events,l),l.events)}function m(v,O){return xo(d(v),O)}function d(v){return go(a,v)}function b(){return Object.assign({},n)}function x(v){i[v.line]=v.column,_()}function q(){let v;for(;n._index<a.length;){let O=a[n._index];if(typeof O=="string")for(v=n._index,n._bufferIndex<0&&(n._bufferIndex=0);n._index===v&&n._bufferIndex<O.length;)C(O.charCodeAt(n._bufferIndex));else C(O)}}function C(v){s=void 0,g=v,E=E(v)}function L(v){F(v)?(n.line++,n.column=1,n.offset+=v===-3?2:1,_()):v!==-1&&(n.column++,n.offset++),n._bufferIndex<0?n._index++:(n._bufferIndex++,n._bufferIndex===a[n._index].length&&(n._bufferIndex=-1,n._index++)),l.previous=v,s=!0}function I(v,O){let M=O||{};return M.type=v,M.start=b(),l.events.push(["enter",M,l]),u.push(M),M}function y(v){let O=u.pop();return O.end=b(),l.events.push(["exit",O,l]),O}function D(v,O){T(v,O.from)}function B(v,O){O.restore()}function S(v,O){return M;function M(z,W,N){let $,Q,p,c;return Array.isArray(z)?ye(z):"tokenize"in z?ye([z]):Le(z);function Le(K){return Pe;function Pe(le){let Fe=le!==null&&K[le],be=le!==null&&K.null,hr=[...Array.isArray(Fe)?Fe:Fe?[Fe]:[],...Array.isArray(be)?be:be?[be]:[]];return ye(hr)(le)}}function ye(K){return $=K,Q=0,K.length===0?N:qe(K[Q])}function qe(K){return Pe;function Pe(le){return c=k(),p=K,K.partial||(l.currentConstruct=K),K.name&&l.parser.constructs.disable.null.includes(K.name)?ae(le):K.tokenize.call(O?Object.assign(Object.create(l),O):l,f,Oe,ae)(le)}}function Oe(K){return s=!0,v(p,c),W}function ae(K){return s=!0,c.restore(),++Q<$.length?qe($[Q]):N}}}function T(v,O){v.resolveAll&&!o.includes(v)&&o.push(v),v.resolve&&Z(l.events,O,l.events.length-O,v.resolve(l.events.slice(O),l)),v.resolveTo&&(l.events=v.resolveTo(l.events,l))}function k(){let v=b(),O=l.previous,M=l.currentConstruct,z=l.events.length,W=Array.from(u);return{restore:N,from:z};function N(){n=v,l.previous=O,l.currentConstruct=M,l.events.length=z,u=W,_()}}function _(){n.line in i&&n.column<2&&(n.column=i[n.line],n.offset+=i[n.line]-1)}}function go(e,r){let t=r.start._index,n=r.start._bufferIndex,i=r.end._index,o=r.end._bufferIndex,a;return t===i?a=[e[t].slice(n,o)]:(a=e.slice(t,i),n>-1&&(a[0]=a[0].slice(n)),o>0&&a.push(e[i].slice(0,o))),a}function xo(e,r){let t=-1,n=[],i;for(;++t<e.length;){let o=e[t],a;if(typeof o=="string")a=o;else switch(o){case-5:{a="\\r";break}case-4:{a=`\n`;break}case-3:{a=`\\r\n`;break}case-2:{a=r?" ":"	";break}case-1:{if(!r&&i)continue;a=" ";break}default:a=String.fromCharCode(o)}i=o===-2,n.push(a)}return n.join("")}var Pr={};ht(Pr,{attentionMarkers:()=>Ao,contentInitial:()=>wo,disable:()=>Co,document:()=>ko,flow:()=>bo,flowInitial:()=>yo,insideSpan:()=>vo,string:()=>Eo,text:()=>So});var ko={[42]:J,[43]:J,[45]:J,[48]:J,[49]:J,[50]:J,[51]:J,[52]:J,[53]:J,[54]:J,[55]:J,[56]:J,[57]:J,[62]:$e},wo={[91]:Cr},yo={[-2]:Me,[-1]:Me,[32]:Me},bo={[35]:qr,[42]:Ce,[45]:[tr,Ce],[60]:_r,[61]:tr,[95]:Ce,[96]:Je,[126]:Je},Eo={[38]:Ze,[92]:Ke},So={[-5]:We,[-4]:We,[-3]:We,[33]:Lr,[38]:Ze,[42]:Ne,[60]:[Er,Ir],[91]:Or,[92]:[Tr,Ke],[93]:Ae,[95]:Ne,[96]:vr},vo={null:[Ne,Dt]},Ao={null:[42,95]},Co={null:[]};function Wt(e={}){let r=St([Pr].concat(e.extensions||[])),t={defined:[],lazy:{},constructs:r,content:n(Ft),document:n(It),flow:n(Pt),string:n(zt),text:n(Rt)};return t;function n(i){return o;function o(a){return Mt(t,i,a)}}}var jt=/[\\0\\t\\n\\r]/g;function Ut(){let e=1,r="",t=!0,n;return i;function i(o,a,u){let s=[],f,l,E,g,h;for(o=r+o.toString(a),E=0,r="",t&&(o.charCodeAt(0)===65279&&E++,t=void 0);E<o.length;){if(jt.lastIndex=E,f=jt.exec(o),g=f&&f.index!==void 0?f.index:o.length,h=o.charCodeAt(g),!f){r=o.slice(E);break}if(h===10&&E===g&&n)s.push(-3),n=void 0;else switch(n&&(s.push(-5),n=void 0),E<g&&(s.push(o.slice(E,g)),e+=g-E),h){case 0:{s.push(65533),e++;break}case 9:{for(l=Math.ceil(e/4)*4,s.push(-2);e++<l;)s.push(-1);break}case 10:{s.push(-4),e=1;break}default:n=!0,e=1}E=g+1}return u&&(n&&s.push(-5),r&&s.push(r),s.push(null)),s}}function Ht(e){for(;!Ye(e););return e}function nr(e,r){let t=Number.parseInt(e,r);return t<9||t===11||t>13&&t<32||t>126&&t<160||t>55295&&t<57344||t>64975&&t<65008||(t&65535)===65535||(t&65535)===65534||t>1114111?"\\uFFFD":String.fromCharCode(t)}var To=/\\\\([!-/:-@[-`{-~])|&(#(?:\\d{1,7}|x[\\da-f]{1,6})|[\\da-z]{1,31});/gi;function Vt(e){return e.replace(To,qo)}function qo(e,r,t){if(r)return r;if(t.charCodeAt(0)===35){let i=t.charCodeAt(1),o=i===120||i===88;return nr(t.slice(o?2:1),o?16:10)}return Ie(t)||e}function ke(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?Qt(e.position):"start"in e||"end"in e?Qt(e):"line"in e||"column"in e?Dr(e):""}function Dr(e){return Gt(e&&e.line)+":"+Gt(e&&e.column)}function Qt(e){return Dr(e&&e.start)+"-"+Dr(e&&e.end)}function Gt(e){return e&&typeof e=="number"?e:1}var Kt={}.hasOwnProperty,zr=function(e,r,t){return typeof r!="string"&&(t=r,r=void 0),Fo(t)(Ht(Wt(t).document().write(Ut()(e,r,!0))))};function Fo(e){let r={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:u(st),autolinkProtocol:k,autolinkEmail:k,atxHeading:u(ot),blockQuote:u(Fe),characterEscape:k,characterReference:k,codeFenced:u(be),codeFencedFenceInfo:s,codeFencedFenceMeta:s,codeIndented:u(be,s),codeText:u(hr,s),codeTextData:k,data:k,codeFlowValue:k,definition:u(Un),definitionDestinationString:s,definitionLabelString:s,definitionTitleString:s,emphasis:u(Hn),hardBreakEscape:u(ut),hardBreakTrailing:u(ut),htmlFlow:u(at,s),htmlFlowData:k,htmlText:u(at,s),htmlTextData:k,image:u(Vn),label:s,link:u(st),listItem:u(Qn),listItemValue:m,listOrdered:u(lt,h),listUnordered:u(lt),paragraph:u(Gn),reference:qe,referenceString:s,resourceDestinationString:s,resourceTitleString:s,setextHeading:u(ot),strong:u($n),thematicBreak:u(Zn)},exit:{atxHeading:l(),atxHeadingSequence:D,autolink:l(),autolinkEmail:le,autolinkProtocol:Pe,blockQuote:l(),characterEscapeValue:_,characterReferenceMarkerHexadecimal:ae,characterReferenceMarkerNumeric:ae,characterReferenceValue:K,codeFenced:l(q),codeFencedFence:x,codeFencedFenceInfo:d,codeFencedFenceMeta:b,codeFlowValue:_,codeIndented:l(C),codeText:l(W),codeTextData:_,data:_,definition:l(),definitionDestinationString:y,definitionLabelString:L,definitionTitleString:I,emphasis:l(),hardBreakEscape:l(O),hardBreakTrailing:l(O),htmlFlow:l(M),htmlFlowData:_,htmlText:l(z),htmlTextData:_,image:l($),label:p,labelText:Q,lineEnding:v,link:l(N),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:Oe,resourceDestinationString:c,resourceTitleString:Le,resource:ye,setextHeading:l(T),setextHeadingLineSequence:S,setextHeadingText:B,strong:l(),thematicBreak:l()}};Zt(r,(e||{}).mdastExtensions||[]);let t={};return n;function n(w){let A={type:"root",children:[]},P={stack:[A],tokenStack:[],config:r,enter:f,exit:E,buffer:s,resume:g,setData:o,getData:a},U=[],H=-1;for(;++H<w.length;)if(w[H][1].type==="listOrdered"||w[H][1].type==="listUnordered")if(w[H][0]==="enter")U.push(H);else{let oe=U.pop();H=i(w,oe,H)}for(H=-1;++H<w.length;){let oe=r[w[H][0]];Kt.call(oe,w[H][1].type)&&oe[w[H][1].type].call(Object.assign({sliceSerialize:w[H][2].sliceSerialize},P),w[H][1])}if(P.tokenStack.length>0){let oe=P.tokenStack[P.tokenStack.length-1];(oe[1]||$t).call(P,void 0,oe[0])}for(A.position={start:we(w.length>0?w[0][1].start:{line:1,column:1,offset:0}),end:we(w.length>0?w[w.length-2][1].end:{line:1,column:1,offset:0})},H=-1;++H<r.transforms.length;)A=r.transforms[H](A)||A;return A}function i(w,A,P){let U=A-1,H=-1,oe=!1,de,ce,De,ze;for(;++U<=P;){let V=w[U];if(V[1].type==="listUnordered"||V[1].type==="listOrdered"||V[1].type==="blockQuote"?(V[0]==="enter"?H++:H--,ze=void 0):V[1].type==="lineEndingBlank"?V[0]==="enter"&&(de&&!ze&&!H&&!De&&(De=U),ze=void 0):V[1].type==="linePrefix"||V[1].type==="listItemValue"||V[1].type==="listItemMarker"||V[1].type==="listItemPrefix"||V[1].type==="listItemPrefixWhitespace"||(ze=void 0),!H&&V[0]==="enter"&&V[1].type==="listItemPrefix"||H===-1&&V[0]==="exit"&&(V[1].type==="listUnordered"||V[1].type==="listOrdered")){if(de){let mr=U;for(ce=void 0;mr--;){let pe=w[mr];if(pe[1].type==="lineEnding"||pe[1].type==="lineEndingBlank"){if(pe[0]==="exit")continue;ce&&(w[ce][1].type="lineEndingBlank",oe=!0),pe[1].type="lineEnding",ce=mr}else if(!(pe[1].type==="linePrefix"||pe[1].type==="blockQuotePrefix"||pe[1].type==="blockQuotePrefixWhitespace"||pe[1].type==="blockQuoteMarker"||pe[1].type==="listItemIndent"))break}De&&(!ce||De<ce)&&(de._spread=!0),de.end=Object.assign({},ce?w[ce][1].start:V[1].end),w.splice(ce||U,0,["exit",de,V[2]]),U++,P++}V[1].type==="listItemPrefix"&&(de={type:"listItem",_spread:!1,start:Object.assign({},V[1].start)},w.splice(U,0,["enter",de,V[2]]),U++,P++,De=void 0,ze=!0)}}return w[A][1]._spread=oe,P}function o(w,A){t[w]=A}function a(w){return t[w]}function u(w,A){return P;function P(U){f.call(this,w(U),U),A&&A.call(this,U)}}function s(){this.stack.push({type:"fragment",children:[]})}function f(w,A,P){return this.stack[this.stack.length-1].children.push(w),this.stack.push(w),this.tokenStack.push([A,P]),w.position={start:we(A.start)},w}function l(w){return A;function A(P){w&&w.call(this,P),E.call(this,P)}}function E(w,A){let P=this.stack.pop(),U=this.tokenStack.pop();if(U)U[0].type!==w.type&&(A?A.call(this,w,U[0]):(U[1]||$t).call(this,w,U[0]));else throw new Error("Cannot close `"+w.type+"` ("+ke({start:w.start,end:w.end})+"): it\\u2019s not open");return P.position.end=we(w.end),P}function g(){return wr(this.stack.pop())}function h(){o("expectingFirstListItemValue",!0)}function m(w){if(a("expectingFirstListItemValue")){let A=this.stack[this.stack.length-2];A.start=Number.parseInt(this.sliceSerialize(w),10),o("expectingFirstListItemValue")}}function d(){let w=this.resume(),A=this.stack[this.stack.length-1];A.lang=w}function b(){let w=this.resume(),A=this.stack[this.stack.length-1];A.meta=w}function x(){a("flowCodeInside")||(this.buffer(),o("flowCodeInside",!0))}function q(){let w=this.resume(),A=this.stack[this.stack.length-1];A.value=w.replace(/^(\\r?\\n|\\r)|(\\r?\\n|\\r)$/g,""),o("flowCodeInside")}function C(){let w=this.resume(),A=this.stack[this.stack.length-1];A.value=w.replace(/(\\r?\\n|\\r)$/g,"")}function L(w){let A=this.resume(),P=this.stack[this.stack.length-1];P.label=A,P.identifier=me(this.sliceSerialize(w)).toLowerCase()}function I(){let w=this.resume(),A=this.stack[this.stack.length-1];A.title=w}function y(){let w=this.resume(),A=this.stack[this.stack.length-1];A.url=w}function D(w){let A=this.stack[this.stack.length-1];if(!A.depth){let P=this.sliceSerialize(w).length;A.depth=P}}function B(){o("setextHeadingSlurpLineEnding",!0)}function S(w){let A=this.stack[this.stack.length-1];A.depth=this.sliceSerialize(w).charCodeAt(0)===61?1:2}function T(){o("setextHeadingSlurpLineEnding")}function k(w){let A=this.stack[this.stack.length-1],P=A.children[A.children.length-1];(!P||P.type!=="text")&&(P=Kn(),P.position={start:we(w.start)},A.children.push(P)),this.stack.push(P)}function _(w){let A=this.stack.pop();A.value+=this.sliceSerialize(w),A.position.end=we(w.end)}function v(w){let A=this.stack[this.stack.length-1];if(a("atHardBreak")){let P=A.children[A.children.length-1];P.position.end=we(w.end),o("atHardBreak");return}!a("setextHeadingSlurpLineEnding")&&r.canContainEols.includes(A.type)&&(k.call(this,w),_.call(this,w))}function O(){o("atHardBreak",!0)}function M(){let w=this.resume(),A=this.stack[this.stack.length-1];A.value=w}function z(){let w=this.resume(),A=this.stack[this.stack.length-1];A.value=w}function W(){let w=this.resume(),A=this.stack[this.stack.length-1];A.value=w}function N(){let w=this.stack[this.stack.length-1];if(a("inReference")){let A=a("referenceType")||"shortcut";w.type+="Reference",w.referenceType=A,delete w.url,delete w.title}else delete w.identifier,delete w.label;o("referenceType")}function $(){let w=this.stack[this.stack.length-1];if(a("inReference")){let A=a("referenceType")||"shortcut";w.type+="Reference",w.referenceType=A,delete w.url,delete w.title}else delete w.identifier,delete w.label;o("referenceType")}function Q(w){let A=this.sliceSerialize(w),P=this.stack[this.stack.length-2];P.label=Vt(A),P.identifier=me(A).toLowerCase()}function p(){let w=this.stack[this.stack.length-1],A=this.resume(),P=this.stack[this.stack.length-1];if(o("inReference",!0),P.type==="link"){let U=w.children;P.children=U}else P.alt=A}function c(){let w=this.resume(),A=this.stack[this.stack.length-1];A.url=w}function Le(){let w=this.resume(),A=this.stack[this.stack.length-1];A.title=w}function ye(){o("inReference")}function qe(){o("referenceType","collapsed")}function Oe(w){let A=this.resume(),P=this.stack[this.stack.length-1];P.label=A,P.identifier=me(this.sliceSerialize(w)).toLowerCase(),o("referenceType","full")}function ae(w){o("characterReferenceType",w.type)}function K(w){let A=this.sliceSerialize(w),P=a("characterReferenceType"),U;P?(U=nr(A,P==="characterReferenceMarkerNumeric"?10:16),o("characterReferenceType")):U=Ie(A);let H=this.stack.pop();H.value+=U,H.position.end=we(w.end)}function Pe(w){_.call(this,w);let A=this.stack[this.stack.length-1];A.url=this.sliceSerialize(w)}function le(w){_.call(this,w);let A=this.stack[this.stack.length-1];A.url="mailto:"+this.sliceSerialize(w)}function Fe(){return{type:"blockquote",children:[]}}function be(){return{type:"code",lang:null,meta:null,value:""}}function hr(){return{type:"inlineCode",value:""}}function Un(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Hn(){return{type:"emphasis",children:[]}}function ot(){return{type:"heading",depth:void 0,children:[]}}function ut(){return{type:"break"}}function at(){return{type:"html",value:""}}function Vn(){return{type:"image",title:null,url:"",alt:null}}function st(){return{type:"link",title:null,url:"",children:[]}}function lt(w){return{type:"list",ordered:w.type==="listOrdered",start:null,spread:w._spread,children:[]}}function Qn(w){return{type:"listItem",spread:w._spread,checked:null,children:[]}}function Gn(){return{type:"paragraph",children:[]}}function $n(){return{type:"strong",children:[]}}function Kn(){return{type:"text",value:""}}function Zn(){return{type:"thematicBreak"}}}function we(e){return{line:e.line,column:e.column,offset:e.offset}}function Zt(e,r){let t=-1;for(;++t<r.length;){let n=r[t];Array.isArray(n)?Zt(e,n):_o(e,n)}}function _o(e,r){let t;for(t in r)if(Kt.call(r,t)){if(t==="canContainEols"){let n=r[t];n&&e[t].push(...n)}else if(t==="transforms"){let n=r[t];n&&e[t].push(...n)}else if(t==="enter"||t==="exit"){let n=r[t];n&&Object.assign(e[t],n)}}}function $t(e,r){throw e?new Error("Cannot close `"+e.type+"` ("+ke({start:e.start,end:e.end})+"): a different token (`"+r.type+"`, "+ke({start:r.start,end:r.end})+") is open"):new Error("Cannot close document, a token (`"+r.type+"`, "+ke({start:r.start,end:r.end})+") is still open")}function Rr(e){Object.assign(this,{Parser:t=>{let n=this.data("settings");return zr(t,Object.assign({},n,e,{extensions:this.data("micromarkExtensions")||[],mdastExtensions:this.data("fromMarkdownExtensions")||[]}))}})}var Jt=Rr;function Br(e){if(e)throw e}var dn=he(Nr(),1),$r=he(sn(),1);function je(e){if(typeof e!="object"||e===null)return!1;let r=Object.getPrototypeOf(e);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function ln(){let e=[],r={run:t,use:n};return r;function t(...i){let o=-1,a=i.pop();if(typeof a!="function")throw new TypeError("Expected function as last argument, not "+a);u(null,...i);function u(s,...f){let l=e[++o],E=-1;if(s){a(s);return}for(;++E<i.length;)(f[E]===null||f[E]===void 0)&&(f[E]=i[E]);i=f,l?Io(l,u)(...f):a(null,...f)}}function n(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),r}}function Io(e,r){let t;return n;function n(...a){let u=e.length>a.length,s;u&&a.push(i);try{s=e.apply(this,a)}catch(f){let l=f;if(u&&t)throw l;return i(l)}u||(s instanceof Promise?s.then(o,i):s instanceof Error?i(s):o(s))}function i(a,...u){t||(t=!0,r(a,...u))}function o(a){i(null,a)}}var pn=he(Nr(),1);var Y=class extends Error{constructor(r,t,n){let i=[null,null],o={start:{line:null,column:null},end:{line:null,column:null}};if(super(),typeof t=="string"&&(n=t,t=void 0),typeof n=="string"){let a=n.indexOf(":");a===-1?i[1]=n:(i[0]=n.slice(0,a),i[1]=n.slice(a+1))}t&&("type"in t||"position"in t?t.position&&(o=t.position):"start"in t||"end"in t?o=t:("line"in t||"column"in t)&&(o.start=t)),this.name=ke(t)||"1:1",this.message=typeof r=="object"?r.message:r,this.stack="",typeof r=="object"&&r.stack&&(this.stack=r.stack),this.reason=this.message,this.fatal,this.line=o.start.line,this.column=o.start.column,this.position=o,this.source=i[0],this.ruleId=i[1],this.file,this.actual,this.expected,this.url,this.note}};Y.prototype.file="";Y.prototype.name="";Y.prototype.reason="";Y.prototype.message="";Y.prototype.stack="";Y.prototype.fatal=null;Y.prototype.column=null;Y.prototype.line=null;Y.prototype.source=null;Y.prototype.ruleId=null;Y.prototype.position=null;var ie=he(require("path"),1);var Mr=he(require("process"),1);var Wr=require("url");function or(e){return e!==null&&typeof e=="object"&&e.href&&e.origin}var jr=["history","path","basename","stem","extname","dirname"],Ue=class{constructor(r){let t;r?typeof r=="string"||Lo(r)?t={value:r}:or(r)?t={path:r}:t=r:t={},this.data={},this.messages=[],this.history=[],this.cwd=Mr.default.cwd(),this.value,this.stored,this.result,this.map;let n=-1;for(;++n<jr.length;){let o=jr[n];o in t&&t[o]!==void 0&&t[o]!==null&&(this[o]=o==="history"?[...t[o]]:t[o])}let i;for(i in t)jr.includes(i)||(this[i]=t[i])}get path(){return this.history[this.history.length-1]}set path(r){or(r)&&(r=(0,Wr.fileURLToPath)(r)),Hr(r,"path"),this.path!==r&&this.history.push(r)}get dirname(){return typeof this.path=="string"?ie.default.dirname(this.path):void 0}set dirname(r){cn(this.basename,"dirname"),this.path=ie.default.join(r||"",this.basename)}get basename(){return typeof this.path=="string"?ie.default.basename(this.path):void 0}set basename(r){Hr(r,"basename"),Ur(r,"basename"),this.path=ie.default.join(this.dirname||"",r)}get extname(){return typeof this.path=="string"?ie.default.extname(this.path):void 0}set extname(r){if(Ur(r,"extname"),cn(this.dirname,"extname"),r){if(r.charCodeAt(0)!==46)throw new Error("`extname` must start with `.`");if(r.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=ie.default.join(this.dirname,this.stem+(r||""))}get stem(){return typeof this.path=="string"?ie.default.basename(this.path,this.extname):void 0}set stem(r){Hr(r,"stem"),Ur(r,"stem"),this.path=ie.default.join(this.dirname||"",r+(this.extname||""))}toString(r){return(this.value||"").toString(r||void 0)}message(r,t,n){let i=new Y(r,t,n);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}info(r,t,n){let i=this.message(r,t,n);return i.fatal=null,i}fail(r,t,n){let i=this.message(r,t,n);throw i.fatal=!0,i}};function Ur(e,r){if(e&&e.includes(ie.default.sep))throw new Error("`"+r+"` cannot be a path: did not expect `"+ie.default.sep+"`")}function Hr(e,r){if(!e)throw new Error("`"+r+"` cannot be empty")}function cn(e,r){if(!e)throw new Error("Setting `"+r+"` requires `path` to be set too")}function Lo(e){return(0,pn.default)(e)}var Kr=xn().freeze(),gn={}.hasOwnProperty;function xn(){let e=ln(),r=[],t={},n,i=-1;return o.data=a,o.Parser=void 0,o.Compiler=void 0,o.freeze=u,o.attachers=r,o.use=s,o.parse=f,o.stringify=l,o.run=E,o.runSync=g,o.process=h,o.processSync=m,o;function o(){let d=xn(),b=-1;for(;++b<r.length;)d.use(...r[b]);return d.data((0,$r.default)(!0,{},t)),d}function a(d,b){return typeof d=="string"?arguments.length===2?(Gr("data",n),t[d]=b,o):gn.call(t,d)&&t[d]||null:d?(Gr("data",n),t=d,o):t}function u(){if(n)return o;for(;++i<r.length;){let[d,...b]=r[i];if(b[0]===!1)continue;b[0]===!0&&(b[0]=void 0);let x=d.call(o,...b);typeof x=="function"&&e.use(x)}return n=!0,i=Number.POSITIVE_INFINITY,o}function s(d,...b){let x;if(Gr("use",n),d!=null)if(typeof d=="function")I(d,...b);else if(typeof d=="object")Array.isArray(d)?L(d):C(d);else throw new TypeError("Expected usable value, not `"+d+"`");return x&&(t.settings=Object.assign(t.settings||{},x)),o;function q(y){if(typeof y=="function")I(y);else if(typeof y=="object")if(Array.isArray(y)){let[D,...B]=y;I(D,...B)}else C(y);else throw new TypeError("Expected usable value, not `"+y+"`")}function C(y){L(y.plugins),y.settings&&(x=Object.assign(x||{},y.settings))}function L(y){let D=-1;if(y!=null)if(Array.isArray(y))for(;++D<y.length;){let B=y[D];q(B)}else throw new TypeError("Expected a list of plugins, not `"+y+"`")}function I(y,D){let B=-1,S;for(;++B<r.length;)if(r[B][0]===y){S=r[B];break}S?(je(S[1])&&je(D)&&(D=(0,$r.default)(!0,S[1],D)),S[1]=D):r.push([...arguments])}}function f(d){o.freeze();let b=He(d),x=o.Parser;return Vr("parse",x),fn(x,"parse")?new x(String(b),b).parse():x(String(b),b)}function l(d,b){o.freeze();let x=He(b),q=o.Compiler;return Qr("stringify",q),hn(d),fn(q,"compile")?new q(d,x).compile():q(d,x)}function E(d,b,x){if(hn(d),o.freeze(),!x&&typeof b=="function"&&(x=b,b=void 0),!x)return new Promise(q);q(null,x);function q(C,L){e.run(d,He(b),I);function I(y,D,B){D=D||d,y?L(y):C?C(D):x(null,D,B)}}}function g(d,b){let x,q;return o.run(d,b,C),mn("runSync","run",q),x;function C(L,I){Br(L),x=I,q=!0}}function h(d,b){if(o.freeze(),Vr("process",o.Parser),Qr("process",o.Compiler),!b)return new Promise(x);x(null,b);function x(q,C){let L=He(d);o.run(o.parse(L),L,(y,D,B)=>{if(y||!D||!B)I(y);else{let S=o.stringify(D,B);S==null||(Do(S)?B.value=S:B.result=S),I(y,B)}});function I(y,D){y||!D?C(y):q?q(D):b(null,D)}}}function m(d){let b;o.freeze(),Vr("processSync",o.Parser),Qr("processSync",o.Compiler);let x=He(d);return o.process(x,q),mn("processSync","process",b),x;function q(C){b=!0,Br(C)}}}function fn(e,r){return typeof e=="function"&&e.prototype&&(Oo(e.prototype)||r in e.prototype)}function Oo(e){let r;for(r in e)if(gn.call(e,r))return!0;return!1}function Vr(e,r){if(typeof r!="function")throw new TypeError("Cannot `"+e+"` without `Parser`")}function Qr(e,r){if(typeof r!="function")throw new TypeError("Cannot `"+e+"` without `Compiler`")}function Gr(e,r){if(r)throw new Error("Cannot call `"+e+"` on a frozen processor.\\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function hn(e){if(!je(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function mn(e,r,t){if(!t)throw new Error("`"+e+"` finished async. Use `"+r+"` instead")}function He(e){return Po(e)?e:new Ue(e)}function Po(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function Do(e){return typeof e=="string"||(0,dn.default)(e)}var kn={}.hasOwnProperty;function ur(e,r){let t=r||{};function n(i,...o){let a=n.invalid,u=n.handlers;if(i&&kn.call(i,e)){let s=String(i[e]);a=kn.call(u,s)?u[s]:n.unknown}if(a)return a.call(this,i,...o)}return n.handlers=t.handlers||{},n.invalid=t.invalid,n.unknown=t.unknown,n}var zo=ur("operator",{unknown:jo,invalid:yn,handlers:{"=":Ro,"^=":No,"$=":Mo,"*=":Wo,"~=":Bo}});function wn(e,r){let t=-1;for(;++t<e.attrs.length;)if(!zo(e.attrs[t],r))return!1;return!0}function yn(e,r){return r[e.name]!==null&&r[e.name]!==void 0}function Ro(e,r){return yn(e,r)&&String(r[e.name])===e.value}function Bo(e,r){let t=r[e.name];return t==null?!1:Array.isArray(t)&&t.includes(e.value)?!0:String(t)===e.value}function No(e,r){let t=r[e.name];return!!(e.value&&typeof t=="string"&&t.slice(0,e.value.length)===e.value)}function Mo(e,r){let t=r[e.name];return!!(e.value&&typeof t=="string"&&t.slice(-e.value.length)===e.value)}function Wo(e,r){let t=r[e.name];return!!(e.value&&typeof t=="string"&&t.includes(e.value))}function jo(e){throw new Error("Unknown operator `"+e.operator+"`")}function bn(e,r){return e.tagName==="*"||e.tagName===r.type}var Uo=new Set([9,10,12,13,32]),En="0".charCodeAt(0),Ho="9".charCodeAt(0);function Sn(e){if(e=e.trim().toLowerCase(),e==="even")return[2,0];if(e==="odd")return[2,1];let r=0,t=0,n=o(),i=a();if(r<e.length&&e.charAt(r)==="n"&&(r++,t=n*(i!=null?i:1),u(),r<e.length?(n=o(),u(),i=a()):n=i=0),i===null||r<e.length)throw new Error(`n-th rule couldn\'t be parsed (\'${e}\')`);return[t,n*i];function o(){return e.charAt(r)==="-"?(r++,-1):(e.charAt(r)==="+"&&r++,1)}function a(){let s=r,f=0;for(;r<e.length&&e.charCodeAt(r)>=En&&e.charCodeAt(r)<=Ho;)f=f*10+(e.charCodeAt(r)-En),r++;return r===s?null:f}function u(){for(;r<e.length&&Uo.has(e.charCodeAt(r));)r++}}var Zr=he(An(),1);function Cn(e){let r=e[0],t=e[1]-1;if(t<0&&r<=0)return Zr.default.falseFunc;if(r===-1)return o=>o<=t;if(r===0)return o=>o===t;if(r===1)return t<0?Zr.default.trueFunc:o=>o>=t;let n=Math.abs(r),i=(t%n+n)%n;return r>1?o=>o>=t&&o%n===i:o=>o<=t&&o%n===i}function ar(e){return Cn(Sn(e))}function Te(e){return Array.isArray(e.children)}var Vo=ar.default||ar,Qo=ur("name",{unknown:su,invalid:au,handlers:{any:Jr,blank:Tn,empty:Tn,"first-child":Go,"first-of-type":$o,has:Ko,"last-child":Zo,"last-of-type":Jo,matches:Jr,not:Yo,"nth-child":Xo,"nth-last-child":eu,"nth-of-type":tu,"nth-last-of-type":ru,"only-child":nu,"only-of-type":iu,root:ou,scope:uu}});Yr.needsIndex=["any","first-child","first-of-type","last-child","last-of-type","matches","not","nth-child","nth-last-child","nth-of-type","nth-last-of-type","only-child","only-of-type"];function Yr(e,r,t,n,i){let o=e.pseudos,a=-1;for(;++a<o.length;)if(!Qo(o[a],r,t,n,i))return!1;return!0}function Tn(e,r){return Te(r)?r.children.length===0:!("value"in r)}function Go(e,r,t,n,i){return se(i,e),i.nodeIndex===0}function $o(e,r,t,n,i){return se(i,e),i.typeIndex===0}function Ko(e,r,t,n,i){let o={type:"root",children:Te(r)?r.children:[]},a=Se(Ee({},i),{found:!1,shallow:!1,one:!0,scopeNodes:[r],results:[],rootQuery:Ve(e.value)});return Qe(a,o),a.results.length>0}function Zo(e,r,t,n,i){return se(i,e),typeof i.nodeCount=="number"&&i.nodeIndex===i.nodeCount-1}function Jo(e,r,t,n,i){return se(i,e),typeof i.typeCount=="number"&&i.typeIndex===i.typeCount-1}function Jr(e,r,t,n,i){let o=Se(Ee({},i),{found:!1,shallow:!1,one:!0,scopeNodes:[r],results:[],rootQuery:Ve(e.value)});return Qe(o,r),o.results[0]===r}function Yo(e,r,t,n,i){return!Jr(e,r,t,n,i)}function Xo(e,r,t,n,i){let o=sr(e);return se(i,e),typeof i.nodeIndex=="number"&&o(i.nodeIndex)}function eu(e,r,t,n,i){let o=sr(e);return se(i,e),typeof i.nodeCount=="number"&&typeof i.nodeIndex=="number"&&o(i.nodeCount-i.nodeIndex-1)}function ru(e,r,t,n,i){let o=sr(e);return se(i,e),typeof i.typeIndex=="number"&&typeof i.typeCount=="number"&&o(i.typeCount-1-i.typeIndex)}function tu(e,r,t,n,i){let o=sr(e);return se(i,e),typeof i.typeIndex=="number"&&o(i.typeIndex)}function nu(e,r,t,n,i){return se(i,e),i.nodeCount===1}function iu(e,r,t,n,i){return se(i,e),i.typeCount===1}function ou(e,r,t,n){return r&&!n}function uu(e,r,t,n,i){return r&&i.scopeNodes.includes(r)}function au(){throw new Error("Invalid pseudo-selector")}function su(e){throw e.name?new Error("Unknown pseudo-selector `"+e.name+"`"):new Error("Unexpected pseudo-element or empty pseudo-class")}function se(e,r){if(e.shallow)throw new Error("Cannot use `:"+r.name+"` without parent")}function sr(e){let r=e._cachedFn;return r||(r=Vo(e.value),e._cachedFn=r),r}function qn(e,r,t,n,i){if(e.id)throw new Error("Invalid selector: id");if(e.classNames)throw new Error("Invalid selector: class");return!!(r&&(!e.tagName||bn(e,r))&&(!e.attrs||wn(e,r))&&(!e.pseudos||Yr(e,r,t,n,i)))}var lu=[];function Ve(e){return e===null?{type:"selectors",selectors:[]}:e.type==="ruleSet"?{type:"selectors",selectors:[e]}:e}function Qe(e,r){r&&_n(e,[],r,void 0,void 0)}function _n(e,r,t,n,i){let o={directChild:void 0,descendant:void 0,adjacentSibling:void 0,generalSibling:void 0};return o=pu(e,lr(r,e.rootQuery.selectors),t,n,i),Te(t)&&!e.shallow&&!(e.one&&e.found)&&cu(e,o,t),o}function cu(e,r,t){let n=lr(r.descendant,r.directChild),i,o=-1,a={count:0,types:new Map},u={count:0,types:new Map};for(;++o<t.children.length;)Fn(a,t.children[o]);for(o=-1;++o<t.children.length;){let f=t.children[o].type.toUpperCase();e.nodeIndex=u.count,e.typeIndex=u.types.get(f)||0,e.nodeCount=a.count,e.typeCount=a.types.get(f);let l=lr(n,i),E=_n(e,l,t.children[o],o,t);if(i=lr(E.generalSibling,E.adjacentSibling),e.one&&e.found)break;Fn(u,t.children[o])}}function pu(e,r,t,n,i){let o={directChild:void 0,descendant:void 0,adjacentSibling:void 0,generalSibling:void 0},a=-1;for(;++a<r.length;){let u=r[a];if(e.one&&e.found)break;if(e.shallow&&u.rule.rule)throw new Error("Expected selector without nesting");if(qn(u.rule,t,n,i,e)){let s=u.rule.rule;if(s){let f={type:"ruleSet",rule:s},l=s.nestingOperator==="+"?"adjacentSibling":s.nestingOperator==="~"?"generalSibling":s.nestingOperator===">"?"directChild":"descendant";Xr(o,l,f)}else e.found=!0,e.results.includes(t)||e.results.push(t)}u.rule.nestingOperator===null?Xr(o,"descendant",u):u.rule.nestingOperator==="~"&&Xr(o,"generalSibling",u)}return o}function lr(e,r){return e&&r&&e.length>0&&r.length>0?[...e,...r]:e&&e.length>0?e:r&&r.length>0?r:lu}function Xr(e,r,t){let n=e[r];n?n.push(t):e[r]=[t]}function Fn(e,r){let t=r.type.toUpperCase(),n=(e.types.get(t)||0)+1;e.count++,e.types.set(t,n)}var Pn=he(On(),1),pr=new Pn.CssSelectorParser;pr.registerAttrEqualityMods("~","^","$","*");pr.registerSelectorPseudos("any","matches","not","has");pr.registerNestingOperators(">","+","~");function Dn(e){if(typeof e!="string")throw new TypeError("Expected `string` as selector, not `"+e+"`");return pr.parse(e)}function it(e,r){let t=bu(e,r);return Qe(t,r||void 0),t.results}function bu(e,r){return{rootQuery:Ve(Dn(e)),results:[],scopeNodes:r?Te(r)&&(r.type==="RootNode"||r.type==="root")?r.children:[r]:[],one:!1,shallow:!1,found:!1,typeIndex:void 0,nodeIndex:void 0,typeCount:void 0,nodeCount:void 0}}var Eu=Kr().use(Jt).freeze(),Su=e=>{let r=Eu.parse(e),t=it("blockquote > paragraph link",r).filter(({url:u})=>{try{let s=new URL(u);return s.protocol==="zotero:"&&s.searchParams.has("annotation")}catch(s){return!1}}),n=it("blockquote > paragraph",r),i=new Map;for(let{children:u}of n){let s="";for(let f of u)if(f.type==="text")s+=f.value;else if(f.type==="link")i.set(f,s.replace(/\\n+/g," ").trim()),s="";else{let{start:l,end:E}=f.position;s+=e.slice(l.offset,E.offset)}}let o=vu(e,t.map(({position:{start:u,end:s}})=>[u.offset,s.offset]));return{annots:t.map(u=>{var h;let{url:s,children:f}=u,l=f[0],E=f[f.length-1],g={annotKey:new URL(s).searchParams.get("annotation"),url:s,fallback:(h=i.get(u))!=null?h:""};return f.length===1&&l.type==="inlineCode"&&l.value?Se(Ee({},g),{alt:l.value,altType:"code"}):f.length>0&&l.type==="text"&&l.value.startsWith("%%")&&E.type==="text"&&E.value.endsWith("%%")?Se(Ee({},g),{alt:zn(e,f).slice(2,-2),altType:"text"}):Se(Ee({},g),{alt:zn(e,f),altType:"none"})}),withoutLinks:o}},Rn=Su,vu=(e,r)=>{let t=0;for(let[n,i]of r)e=e.slice(0,n+t)+e.slice(i+t),t+=n-i;return e},zn=(e,r)=>{if(r.length===0)return"";let t=r[0].position.start.offset,n=r[r.length-1].position.end.offset;return e.slice(t,n)};var Mn=he(Nn(),1),Au=e=>{let r=e.map(({text:n,alt:i,altType:o})=>{if(o==="code")try{return`${new Function("raw",`return raw.${i}`)(n)}`}catch(a){let u=`Failed to alter annotation "${n}", error: ${a}`;return console.error(u,a),`<span style="color:var(--text-error)">${n}</span>`}else{if(o==="text")return i;if(o==="none")return n;(0,Mn.assertNever)(o)}}),t=e.map(({url:n,altType:i,alt:o},a)=>`[${i==="none"&&o&&!Cu.has(o.toLowerCase())?o:a>0?a:"annot"}](${n})`);return[r.join(" ")+" "+t.join(" ")].map(n=>"> "+n).join(`\n`)},Cu=new Set(["zotero","annot"]),Wn=Au;var Tu={parse:Rn,stringify:Wn};(0,jn.worker)(wt(Tu));\n/*! Bundled license information:\n\n@aidenlx/workerpool/dist/workerpool.js:\n  (**\n   * workerpool.js\n   * https://github.com/josdejong/workerpool\n   *\n   * Offload tasks to a pool of workers on node.js and in the browser.\n   *\n   * @version 6.2.1-mod.13\n   * @date    2022-10-04\n   *\n   * @license\n   * Copyright (C) 2014-2022 Jos de Jong <wjosdejong@gmail.com>\n   *\n   * Licensed under the Apache License, Version 2.0 (the "License"); you may not\n   * use this file except in compliance with the License. You may obtain a copy\n   * of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n   * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n   * License for the specific language governing permissions and limitations under\n   * the License.\n   *)\n\nis-buffer/index.js:\n  (*!\n   * Determine if an object is a Buffer\n   *\n   * @author   Feross Aboukhadijeh <https://feross.org>\n   * @license  MIT\n   *)\n*/\n';var lp=class extends ce{plugin=this.use(be);#e=mc(pP);#t=dP.default.pool(this.#e,{workerType:"web",name:"Zotero Annot Block Worker"});api=gc(this.#t);onload(){this.plugin.registerMarkdownCodeBlockProcessor("zotero-annot",(t,r,n)=>{let o=new Sy(r,this.plugin.database,this);n.addChild(o),o.load(),o.render([t,n.sourcePath])})}async onunload(){await this.#t.terminate(),URL.revokeObjectURL(this.#e)}async parse(t){return await this.api.parse(t)}async stringify(t){return await this.api.stringify(t)}},Sy=class extends fp.MarkdownRenderChild{constructor(r,n,o){super(r);this.db=n;this.worker=o}cache=null;async render(r){this.containerEl.empty();let n,o,i;if(r)[i,o]=r,this.cache=null,n=(await this.worker.parse(i)).annots,this.cache=[n,o,i];else if(this.cache)[n,o,i]=this.cache;else{ne.debug("Cannot render without spec or cache");return}let a;try{let s=await this.db.api.getAnnotFromKey(n.map(({annotKey:l})=>l),this.db.settings.citationLibrary),u=n.map(({annotKey:l,...c})=>({...c,annotKey:l,text:s[l]?.type===Se.highlight?s[l].text??"":""}));a=await this.worker.stringify(u)}catch(s){$e("stringify annots",s),a=i}await fp.MarkdownRenderer.renderMarkdown(a,this.containerEl,o,this)}onload(){this.registerEvent(app.vault.on("zotero:db-refresh",this.render.bind(this)))}};var dp=require("@codemirror/language");var ky=require("obsidian");var pp=class extends ce{plugin=this.use(be);onload(){this.patchEditorClick()}async patchEditorClick(){let{workspace:t}=this.plugin.app,{noteIndex:r,database:n,settings:o,noteFeatures:i}=this.plugin;await d1(this.plugin.app);let a=()=>t.getLeavesOfType("markdown").length>0,[s,u]=ja({register:c=>t.on("layout-change",()=>{a()&&c()}),unregister:c=>t.offref(c),escape:a,timeout:null});u&&this.register(u),await s;let l=t.getLeavesOfType("markdown")[0].view;this.register(Rt(l.editor.constructor.prototype,{getClickableTokenAt:c=>function(f,...p){let d=c.call(this,f,...p);return d||pG.call(this,f,r)}})),this.register(Rt(l.editMode.constructor.prototype,{triggerClickableToken:c=>function(f,p){if(f.type==="internal-link"&&f.citekey==="zotero")(async()=>{let d=f.text,{[d]:h}=await n.api.getItemIDsFromCitekey([f.text]);if(h<0){new ky.Notice(`Citekey ${d} not found in Zotero`);return}let[g]=await n.api.getItems([[h,o.database.citationLibrary]]);if(!g){new ky.Notice(`Item not found for citekey ${d}`);return}let y=await i.createNoteForDocItemFull(g);await t.openLinkText(y,"",!0,{active:!0})})();else return c.call(this,f,p)}}))}};function pG(e,t){let r=this.cm,n=r.state.doc,o=[],i=n.line(e.line+1),a=(0,dp.syntaxTree)(r.state),s=i.from;a.iterate({from:i.from,to:i.to,enter:g=>{let y=g.type,w=g.from,x=g.to,S=y.prop(dp.tokenClassNodeProp);S&&(s<w&&o.push({type:"",from:s,to:w}),o.push({type:S,from:w,to:x}),s=x)}}),s<i.to&&o.push({type:"",from:s,to:i.to});let u=this.posToOffset(e),l=-1;for(let g=0;g<o.length;g++){let y=o[g];if(y.from<=u&&y.to>=u){l=g;break}}if(l<0)return null;let c=o[l];if(!c.type.split(" ").includes("hmd-barelink"))return null;let p=n.sliceString(c.from,c.to);if(!p.startsWith("@"))return null;let d=p.slice(1),h={start:this.offsetToPos(c.from),end:this.offsetToPos(c.to)};if(t.citekeyCache.has(d)){let[g]=t.citekeyCache.get(d);return{type:"internal-link",text:g,...h}}else return{type:"internal-link",text:d,citekey:"zotero",...h}}var hP=require("obsidian");var mP=se(Qe(),1);var Vi=class extends Me{getDefaults(){return{literatureNoteFolder:"LiteratureNotes"}}async apply(t){t==="literatureNoteFolder"?this.use(po).reload():(0,mP.default)(t)}get joinPath(){return dG(this.literatureNoteFolder)}},dG=e=>e==="/"?"":e+"/";var po=class extends ce{plugin=this.use(be);settings=this.use(Vi);get meta(){return this.plugin.app.metadataCache}get vault(){return this.plugin.app.vault}get template(){return this.plugin.settings.template}noteCache=new Map;blockCache={byFile:new Map,byKey:new Map};citekeyCache=new Map;#e(t,r){let n=fg(r);if(n){if(!this.noteCache.has(n))return this.noteCache.set(n,new Set([t])),!0;let i=this.noteCache.get(n),a=i.size;return i.add(t).size!==a}let o=!1;for(let[i,a]of this.noteCache.entries()){let s=a.delete(t);o||=s,s&&a.size===0&&this.noteCache.delete(i)}return o}#t(t,r){let n=u=>{let l=this.blockCache.byFile.get(u);if(!l)return!1;this.blockCache.byFile.delete(u);for(let c of l){let f=this.blockCache.byKey.get(c.key);f.delete(c),f.size===0&&this.blockCache.byKey.delete(c.key)}return!0};if(!r)return n(t);let{blocks:o,sections:i}=r;if(!i||!o)return n(t);let a=i.filter(Ns);if(a.length===0)return n(t);n(t);let s=bn(a.flatMap(u=>Ps(u.id).map(l=>[l,u.position])),Bn(([u])=>u),lr((u,l)=>({file:t,key:u,blocks:l.map(([c,f])=>f)})),jn);this.blockCache.byFile.set(t,s);for(let u of s){let l=this.blockCache.byKey.get(u.key);l?l.add(u):this.blockCache.byKey.set(u.key,new Set([u]))}return!0}#r(t,r){let n=r?.frontmatter?.citekey;if(n){if(!this.citekeyCache.has(n))return this.citekeyCache.set(n,new Set([t])),!0;let i=this.citekeyCache.get(n),a=i.size;return i.add(t).size!==a}let o=!1;for(let[i,a]of this.citekeyCache.entries()){let s=a.delete(t);o||=s,s&&a.size===0&&this.citekeyCache.delete(i)}return o}getNotesFor(t){let r=this.noteCache.get(Mt(t,!0));return r?[...r]:[]}getBlocksFor({file:t,item:r}){if(!t&&!r)throw new Error("no file or item provided");let n=r?this.blockCache.byKey.get(Mt(r,!0)):null,o=t?this.blockCache.byFile.get(t):null;return t&&r?!o||!n?[]:o.filter(i=>n.has(i)):t?o?[...o]:[]:r?n?[...n]:[]:[]}getBlocksIn(t){let r=this.blockCache.byFile.get(t);return r?[...r]:null}#n(t,r){r===void 0&&(r=this.meta.getCache(t)),[this.#e(t,r),this.#t(t,r),this.#r(t,r)].some(o=>o)&&this.meta.trigger("zotero:index-update",t)}#o(t){this.#n(t,null)}#a(){this.noteCache.clear(),this.blockCache.byFile.clear(),this.blockCache.byKey.clear(),this.meta.trigger("zotero:index-clear")}onload(){[this.meta.on("changed",this.onMetaChanged,this),this.vault.on("rename",this.onFileRenamed,this),this.vault.on("delete",this.onFileRemoved,this)].forEach(this.registerEvent.bind(this));let[t,r]=hc(this.plugin.app,{});r&&this.register(r),t.then(()=>{this.onMetaBuilt(),this.plugin.addCommand({id:"refresh-note-index",name:"Refresh Literature Notes Index",callback:()=>{this.reload(),new hP.Notice("Literature notes re-indexed")}})})}onMetaBuilt(){for(let t of this.vault.getMarkdownFiles())this.#n(t.path)}onMetaChanged(t,r,n){this.#n(t.path,n)}onFileRemoved(t){gn(t)&&this.#o(t.path)}onFileRenamed(t,r){this.#o(r),gn(t)&&this.#n(t.path)}reload(){this.#a(),this.onMetaBuilt(),ne.info("Note Index: Reloaded")}};var gp=require("fs/promises");var mG=(e,t)=>t.some(r=>e instanceof r),gP,yP;function hG(){return gP||(gP=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function gG(){return yP||(yP=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var bP=new WeakMap,Iy=new WeakMap,vP=new WeakMap,Ay=new WeakMap,Cy=new WeakMap;function yG(e){let t=new Promise((r,n)=>{let o=()=>{e.removeEventListener("success",i),e.removeEventListener("error",a)},i=()=>{r(_r(e.result)),o()},a=()=>{n(e.error),o()};e.addEventListener("success",i),e.addEventListener("error",a)});return t.then(r=>{r instanceof IDBCursor&&bP.set(r,e)}).catch(()=>{}),Cy.set(t,e),t}function bG(e){if(Iy.has(e))return;let t=new Promise((r,n)=>{let o=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=()=>{r(),o()},a=()=>{n(e.error||new DOMException("AbortError","AbortError")),o()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)});Iy.set(e,t)}var _y={get(e,t,r){if(e instanceof IDBTransaction){if(t==="done")return Iy.get(e);if(t==="objectStoreNames")return e.objectStoreNames||vP.get(e);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return _r(e[t])},set(e,t,r){return e[t]=r,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function wP(e){_y=e(_y)}function vG(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...r){let n=e.call(mp(this),t,...r);return vP.set(n,t.sort?t.sort():[t]),_r(n)}:gG().includes(e)?function(...t){return e.apply(mp(this),t),_r(bP.get(this))}:function(...t){return _r(e.apply(mp(this),t))}}function wG(e){return typeof e=="function"?vG(e):(e instanceof IDBTransaction&&bG(e),mG(e,hG())?new Proxy(e,_y):e)}function _r(e){if(e instanceof IDBRequest)return yG(e);if(Ay.has(e))return Ay.get(e);let t=wG(e);return t!==e&&(Ay.set(e,t),Cy.set(t,e)),t}var mp=e=>Cy.get(e);function EP(e,t,{blocked:r,upgrade:n,blocking:o,terminated:i}={}){let a=indexedDB.open(e,t),s=_r(a);return n&&a.addEventListener("upgradeneeded",u=>{n(_r(a.result),u.oldVersion,u.newVersion,_r(a.transaction),u)}),r&&a.addEventListener("blocked",u=>r(u.oldVersion,u.newVersion,u)),s.then(u=>{i&&u.addEventListener("close",()=>i()),o&&u.addEventListener("versionchange",l=>o(l.oldVersion,l.newVersion,l))}).catch(()=>{}),s}var xG=["get","getKey","getAll","getAllKeys","count"],EG=["put","add","delete","clear"],Ty=new Map;function xP(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Ty.get(t))return Ty.get(t);let r=t.replace(/FromIndex$/,""),n=t!==r,o=EG.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(o||xG.includes(r)))return;let i=async function(a,...s){let u=this.transaction(a,o?"readwrite":"readonly"),l=u.store;return n&&(l=l.index(s.shift())),(await Promise.all([l[r](...s),o&&u.done]))[0]};return Ty.set(t,i),i}wP(e=>({...e,get:(t,r,n)=>xP(t,r)||e.get(t,r,n),has:(t,r)=>!!xP(t,r)||e.has(t,r)}));var yp=require("obsidian");var SG="obsidian-zotero-plugin",hp="pdf-outline",fu=class extends ce{constructor(r){super();this.plugin=r}db=EP(SG,1,{upgrade(r){r.createObjectStore(hp,{keyPath:"path"})}});async getCachedOutlineKeys(){return await(await this.db).getAllKeys(hp)}async getPDFOutline(r,n=!1){let o=await this.db,i=await o.get(hp,r),a;try{a=await(0,gp.stat)(r)}catch(u){if(u.code==="ENOENT")return new yp.Notice("PDF file not found"),null;throw u}if(i&&a.mtimeMs===i.mtime&&!n)return ne.debug("PDF outline cache hit",r),i.outline;let s=await this.#e(r);return s?(await o.put(hp,{path:r,mtime:a.mtimeMs,outline:s,created:Date.now()}),ne.debug("PDF outline cache miss and updated",r),s):null}pdfjs;async#e(r){this.pdfjs??=await(0,yp.loadPdfJs)();let n=this.pdfjs.getDocument(await(0,gp.readFile)(r)),o=await n.promise,i=SP(await o.getOutline(),0),a=await Promise.all(i.map(async({dest:s,...u})=>{if(!Array.isArray(s))return{...u,page:null};let[l]=s,c=await o.getPageIndex(l);return{...u,page:c}}));return await o.cleanup(),await n.destroy(),a}},SP=(e,t)=>e.flatMap(({title:r,dest:n,items:o})=>[{title:r,dest:n,level:t},...SP(o,t+1)]);var AP=require("http");var IP=require("obsidian");var kP=se(Qe(),1);var Gi=class extends Me{getDefaults(){return{enableServer:!1,serverPort:9091}}async apply(t){let r=this.use(Ki);switch(t){case"enableServer":this.enableServer?r.initServer():r.closeServer();return;case"serverPort":r.reloadPort();return;default:(0,kP.assertNever)(t)}}};var kG=new Set(["notify"]),AG=new Set([...hk.map(e=>`zotero/${e}`)]),Ki=class extends ce{#e=new IP.Events;settings=this.use(Gi);plugin=this.use(be);server=null;get port(){return this.settings.serverPort}onload(){this.settings.enableServer&&this.initServer(),this.registerObsidianProtocolHandler()}onunload(){this.closeServer(),this.server=null}registerObsidianProtocolHandler(){let t=r=>{let{action:n,...o}=r;this.trigger(n,o)};for(let r of AG)this.plugin.registerObsidianProtocolHandler(r,t)}#t(){this.server??=(0,AP.createServer)((t,r)=>{this.requestListener(t,r)})}#r(){this.server?.listening||this.server?.listen(this.port,"localhost",()=>this.listeningListener())}initServer(){this.#t(),this.#r()}closeServer(){this.server?.close()}reloadPort(){this.settings.enableServer&&(this.closeServer(),this.#t(),this.#r())}requestListener(t,r){if(!t.url){ne.error("Request without url"),r.statusCode=400,r.end();return}ne.trace("server recieved req",t.url,t.rawHeaders);let{pathname:n,searchParams:o}=new URL(t.url,`http://${t.headers.host}`),i=n.substring(1),a=`bg:${n.substring(1)}`;if(kG.has(i)){let s=Object.fromEntries(o.entries());t.headers["content-type"]==="application/json"?new Promise((u,l)=>{let c="";t.on("data",f=>c+=f),t.on("error",f=>l(f)),t.on("end",()=>{try{u(JSON.parse(c))}catch(f){l(f)}})}).then(u=>{this.trigger(a,s,u),r.end()}):(this.trigger(a,s),r.end())}else r.statusCode=404,r.end()}listeningListener(){this.server&&ne.info(`Server is listening at ${IG(this.server)}`)}on(t,r,n){return this.#e.on(t,r,n)}off(t,r){return this.#e.off(t,r)}offref(t){return this.#e.offref(t)}trigger(t,...r){return ne.trace(`server trigger ${t}`,...r),this.#e.trigger(t,...r)}tryTrigger(t,r){return this.#e.tryTrigger(t,r)}};function IG(e){let t=e.address();return t?typeof t=="string"?t:`${t.address}:${t.port}`:"?"}var Oy=require("fs");var _P=se(Qe(),1);var Ji=class extends Me{getDefaults(){return{autoRefresh:!0}}async apply(t){switch(t){case"autoRefresh":return await this.use(Cr).setAutoRefresh(this.autoRefresh);default:(0,_P.assertNever)(t)}}};var CP=e=>()=>app.vault.trigger("zotero:db-updated",e),Cr=class extends ce{databaseSettings=this.use(Ut);settings=this.use(Ji);api=this.use(ft).api;async onload(){await this.setAutoRefresh(this.settings.autoRefresh),ne.debug("loading DatabaseWatcher")}onunload(){this.#e()}#e(){this.#r=!1,this.#t=Go(this.#t,t=>(t?.close(),null))}#t={main:null,bbt:null};#r=!1;async setAutoRefresh(t,r=!1){t===this.#r&&!r||(ne.debug("Auto refresh set to "+t),this.#r=t,this.#e(),t&&(this.#t.main=(0,Oy.watch)(this.databaseSettings.zoteroDbPath,CP("main")),await this.api.checkDbStatus("bbt")&&(this.#t.bbt=(0,Oy.watch)(this.databaseSettings.betterBibTexDbPath,CP("bbt")))))}};var pu=class extends ce{onunload(){ne.info("ZoteroDB unloaded")}get defaultLibId(){return this.settings.citationLibrary}settings=this.use(Ut);#e=this.use(ft);watcher=this.use(Cr);get api(){return this.#e.api}async search(t){let n=this.defaultLibId;if(this.#e.status!==2)throw new Error("Search index not ready");let o=await this.api.search(n,{query:t,limit:50,index:_G});if(o.length===0)return[];let i=CG(o);return i.length===0?[]:(await this.api.getItems(i.map(s=>[s.id,n]))).map((s,u)=>{let{id:l,fields:c,score:f}=i[u];if(!s)throw new Error("Item not found: "+l);return{item:s,score:f,fields:[...c]}})}async getItemsOf(t=50,r=this.defaultLibId){if(this.#e.status!==2)throw new Error("Search index not ready");return(await this.api.getItemsFromCache(t,r)).map(o=>({item:o,score:-1,fields:[]}))}},_G=["title","creators[]:firstName","creators[]:lastName","date"];function CG(e){let{size:t}=new Set(e.flatMap(n=>n.result)),r=e.reduce((n,{field:o,result:i})=>(o.startsWith("creators[]")&&(o="creators"),i.forEach((a,s)=>{let u=t-s;switch(o){case"title":u*=100;break;case"creators":case"date":u*=5;break;default:throw new Error("Unknown field: "+o)}if(!n.has(+a))n.set(+a,{id:+a,score:u,fields:new Set([o])});else{let l=n.get(+a);l.fields.add(o),l.score+=u}}),n),new Map);return Array.from(r.values()).sort((n,o)=>o.score-n.score)}var Yi=require("fs/promises"),bp=require("path");var En=require("obsidian");var Zi=class extends Me{getDefaults(){return{symlinkImgExcerpt:!1,imgExcerptPath:"ZtImgExcerpt"}}get imgExcerptDir(){return this.symlinkImgExcerpt?this.imgExcerptPath:null}};var du=class extends ce{onload(){ne.debug("loading ImgCacheImporter")}async onunload(){await Promise.all(this.flush())}databaseSettings=this.use(Ut);settings=this.use(Zi);queue=new Map;getCachePath(t){return ln(t,this.databaseSettings.zoteroDataDir)}getInVaultPath(t){if(!this.settings.imgExcerptDir||t.type!==Se.image)return null;let r=this.getCachePath(t);return OG(t,r,this.settings.imgExcerptDir)}import(t){let r=this.getCachePath(t),n=this.getInVaultPath(t);if(!n)return null;let o;return this.queue.has(n)?o=this.queue.get(n):(o=async()=>{let i=await this.linkToVault(n,r);return this.queue.delete(n),i},this.queue.set(n,o)),n}flush(){return[...this.queue.values()].map(t=>t())}cancel(){this.queue.clear()}async linkToVault(t,r){let n=app.vault.getAbstractFileByPath(t);if(n)return n instanceof En.TFile?!0:($e("failed to get in-vault image excerpt: given path not file",t),!1);try{if(!(await(0,Yi.stat)(r)).isFile()){let a=`failed to link image excerpt cache to vault: given path not file ${r}`;return new En.Notice(a),$e(a,null),!1}}catch(i){if(i.code==="ENOENT"){let a=`failed to link image excerpt cache to vault: file not found ${r}`;return new En.Notice(a),$e(a,i),!1}else throw i}let o=app.vault.adapter.getFullPath(t);try{await(0,Yi.mkdir)((0,bp.dirname)(o),{recursive:!0})}catch(i){if(i.code!=="EEXIST")throw i}return await(0,Yi.symlink)(r,o),new En.Notice(`linked image excerpt cache to vault: ${t}`),!0}},TG=(e,t)=>(t??"")+(0,bp.basename)(e),OG=(e,t,r)=>{let n=TG(t,e.groupID);return[(0,En.normalizePath)(r),n].join("/")};C();C();C();function Sn(e,t=[]){let r=[];function n(i,a){let s=we(a),u=r.length;r=[...r,a];function l(f){let{scope:p,children:d,...h}=f,g=p?.[e][u]||s,y=K(()=>h,Object.values(h));return Q(g.Provider,{value:y},d)}function c(f,p){let d=p?.[e][u]||s,h=V(d);if(h)return h;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${i}\``)}return l.displayName=i+"Provider",[l,c]}let o=()=>{let i=r.map(a=>we(a));return function(s){let u=s?.[e]||i;return K(()=>({[`__scope${e}`]:{...s,[e]:u}}),[s,u])}};return o.scopeName=e,[n,DG(o,...t)]}function DG(...e){let t=e[0];if(e.length===1)return t;let r=()=>{let n=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(i){let a=n.reduce((s,{useScope:u,scopeName:l})=>{let f=u(i)[`__scope${l}`];return{...s,...f}},{});return K(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return r.scopeName=t.scopeName,r}C();C();C();function FG(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function Dy(...e){return t=>e.forEach(r=>FG(r,t))}function Kr(...e){return J(Dy(...e),e)}C();var Qi=te((e,t)=>{let{children:r,...n}=e,o=He.toArray(r),i=o.find(PG);if(i){let a=i.props.children,s=o.map(u=>u===i?He.count(a)>1?He.only(null):St(a)?a.props.children:null:u);return Q(Fy,le({},n,{ref:t}),St(a)?kt(a,void 0,s):null)}return Q(Fy,le({},n,{ref:t}),r)});Qi.displayName="Slot";var Fy=te((e,t)=>{let{children:r,...n}=e;return St(r)?kt(r,{...RG(n,r.props),ref:Dy(t,r.ref)}):He.count(r)>1?He.only(null):null});Fy.displayName="SlotClone";var NG=({children:e})=>Q(Y,null,e);function PG(e){return St(e)&&e.type===NG}function RG(e,t){let r={...t};for(let n in t){let o=e[n],i=t[n];/^on[A-Z]/.test(n)?o&&i?r[n]=(...s)=>{i(...s),o(...s)}:o&&(r[n]=o):n==="style"?r[n]={...o,...i}:n==="className"&&(r[n]=[o,i].filter(Boolean).join(" "))}return{...e,...r}}function TP(e){let t=e+"CollectionProvider",[r,n]=Sn(t),[o,i]=r(t,{collectionRef:{current:null},itemMap:new Map}),a=d=>{let{scope:h,children:g}=d,y=q.useRef(null),w=q.useRef(new Map).current;return q.createElement(o,{scope:h,itemMap:w,collectionRef:y},g)},s=e+"CollectionSlot",u=q.forwardRef((d,h)=>{let{scope:g,children:y}=d,w=i(s,g),x=Kr(h,w.collectionRef);return q.createElement(Qi,{ref:x},y)}),l=e+"CollectionItemSlot",c="data-radix-collection-item",f=q.forwardRef((d,h)=>{let{scope:g,children:y,...w}=d,x=q.useRef(null),S=Kr(h,x),O=i(l,g);return q.useEffect(()=>(O.itemMap.set(x,{ref:x,...w}),()=>void O.itemMap.delete(x))),q.createElement(Qi,{[c]:"",ref:S},y)});function p(d){let h=i(e+"CollectionConsumer",d);return q.useCallback(()=>{let y=h.collectionRef.current;if(!y)return[];let w=Array.from(y.querySelectorAll(`[${c}]`));return Array.from(h.itemMap.values()).sort((O,F)=>w.indexOf(O.ref.current)-w.indexOf(F.ref.current))},[h.collectionRef,h.itemMap])}return[{Provider:a,Slot:u,ItemSlot:f},p,n]}C();C();var mo=globalThis?.document?et:()=>{};var MG=At["useId".toString()]||(()=>{}),$G=0;function Xi(e){let[t,r]=$(MG());return mo(()=>{e||r(n=>n??String($G++))},[e]),e||(t?`radix-${t}`:"")}C();C();var LG=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Gt=LG.reduce((e,t)=>{let r=te((n,o)=>{let{asChild:i,...a}=n,s=i?Qi:t;return L(()=>{window[Symbol.for("radix-ui")]=!0},[]),Q(s,le({},a,{ref:o}))});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});C();function mu(e){let t=N(e);return L(()=>{t.current=e}),K(()=>(...r)=>{var n;return(n=t.current)===null||n===void 0?void 0:n.call(t,...r)},[])}C();function ea({prop:e,defaultProp:t,onChange:r=()=>{}}){let[n,o]=qG({defaultProp:t,onChange:r}),i=e!==void 0,a=i?e:n,s=mu(r),u=J(l=>{if(i){let f=typeof l=="function"?l(e):l;f!==e&&s(f)}else o(l)},[i,e,o,s]);return[a,u]}function qG({defaultProp:e,onChange:t}){let r=$(e),[n]=r,o=N(n),i=mu(t);return L(()=>{o.current!==n&&(i(n),o.current=n)},[n,o,i]),r}C();var BG=we(void 0);function vp(e){let t=V(BG);return e||t||"ltr"}var Ny="rovingFocusGroup.onEntryFocus",jG={bubbles:!1,cancelable:!0},Ry="RovingFocusGroup",[Py,OP,zG]=TP(Ry),[WG,My]=Sn(Ry,[zG]),[UG,HG]=WG(Ry),VG=te((e,t)=>Q(Py.Provider,{scope:e.__scopeRovingFocusGroup},Q(Py.Slot,{scope:e.__scopeRovingFocusGroup},Q(GG,le({},e,{ref:t}))))),GG=te((e,t)=>{let{__scopeRovingFocusGroup:r,orientation:n,loop:o=!1,dir:i,currentTabStopId:a,defaultCurrentTabStopId:s,onCurrentTabStopIdChange:u,onEntryFocus:l,...c}=e,f=N(null),p=Kr(t,f),d=vp(i),[h=null,g]=ea({prop:a,defaultProp:s,onChange:u}),[y,w]=$(!1),x=mu(l),S=OP(r),O=N(!1),[F,D]=$(0);return L(()=>{let P=f.current;if(P)return P.addEventListener(Ny,x),()=>P.removeEventListener(Ny,x)},[x]),Q(UG,{scope:r,orientation:n,dir:d,loop:o,currentTabStopId:h,onItemFocus:J(P=>g(P),[g]),onItemShiftTab:J(()=>w(!0),[]),onFocusableItemAdd:J(()=>D(P=>P+1),[]),onFocusableItemRemove:J(()=>D(P=>P-1),[])},Q(Gt.div,le({tabIndex:y||F===0?-1:0,"data-orientation":n},c,{ref:p,style:{outline:"none",...e.style},onMouseDown:rt(e.onMouseDown,()=>{O.current=!0}),onFocus:rt(e.onFocus,P=>{let R=!O.current;if(P.target===P.currentTarget&&R&&!y){let E=new CustomEvent(Ny,jG);if(P.currentTarget.dispatchEvent(E),!E.defaultPrevented){let T=S().filter(z=>z.focusable),v=T.find(z=>z.active),A=T.find(z=>z.id===h),j=[v,A,...T].filter(Boolean).map(z=>z.ref.current);DP(j)}}O.current=!1}),onBlur:rt(e.onBlur,()=>w(!1))})))}),KG="RovingFocusGroupItem",JG=te((e,t)=>{let{__scopeRovingFocusGroup:r,focusable:n=!0,active:o=!1,tabStopId:i,...a}=e,s=Xi(),u=i||s,l=HG(KG,r),c=l.currentTabStopId===u,f=OP(r),{onFocusableItemAdd:p,onFocusableItemRemove:d}=l;return L(()=>{if(n)return p(),()=>d()},[n,p,d]),Q(Py.ItemSlot,{scope:r,id:u,focusable:n,active:o},Q(Gt.span,le({tabIndex:c?0:-1,"data-orientation":l.orientation},a,{ref:t,onMouseDown:rt(e.onMouseDown,h=>{n?l.onItemFocus(u):h.preventDefault()}),onFocus:rt(e.onFocus,()=>l.onItemFocus(u)),onKeyDown:rt(e.onKeyDown,h=>{if(h.key==="Tab"&&h.shiftKey){l.onItemShiftTab();return}if(h.target!==h.currentTarget)return;let g=QG(h,l.orientation,l.dir);if(g!==void 0){h.preventDefault();let w=f().filter(x=>x.focusable).map(x=>x.ref.current);if(g==="last")w.reverse();else if(g==="prev"||g==="next"){g==="prev"&&w.reverse();let x=w.indexOf(h.currentTarget);w=l.loop?XG(w,x+1):w.slice(x+1)}setTimeout(()=>DP(w))}})})))}),ZG={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function YG(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function QG(e,t,r){let n=YG(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return ZG[n]}function DP(e){let t=document.activeElement;for(let r of e)if(r===t||(r.focus(),document.activeElement!==t))return}function XG(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var FP=VG,NP=JG;C();C();function eK(e,t){return pt((r,n)=>{let o=t[r][n];return o??r},e)}var hu=e=>{let{present:t,children:r}=e,n=tK(t),o=typeof r=="function"?r({present:n.isPresent}):He.only(r),i=Kr(n.ref,o.ref);return typeof r=="function"||n.isPresent?kt(o,{ref:i}):null};hu.displayName="Presence";function tK(e){let[t,r]=$(),n=N({}),o=N(e),i=N("none"),a=e?"mounted":"unmounted",[s,u]=eK(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return L(()=>{let l=wp(n.current);i.current=s==="mounted"?l:"none"},[s]),mo(()=>{let l=n.current,c=o.current;if(c!==e){let p=i.current,d=wp(l);e?u("MOUNT"):d==="none"||l?.display==="none"?u("UNMOUNT"):u(c&&p!==d?"ANIMATION_OUT":"UNMOUNT"),o.current=e}},[e,u]),mo(()=>{if(t){let l=f=>{let d=wp(n.current).includes(f.animationName);f.target===t&&d&&pr(()=>u("ANIMATION_END"))},c=f=>{f.target===t&&(i.current=wp(n.current))};return t.addEventListener("animationstart",c),t.addEventListener("animationcancel",l),t.addEventListener("animationend",l),()=>{t.removeEventListener("animationstart",c),t.removeEventListener("animationcancel",l),t.removeEventListener("animationend",l)}}else u("ANIMATION_END")},[t,u]),{isPresent:["mounted","unmountSuspended"].includes(s),ref:J(l=>{l&&(n.current=getComputedStyle(l)),r(l)},[])}}function wp(e){return e?.animationName||"none"}var PP="Tabs",[rK,T2e]=Sn(PP,[My]),RP=My(),[nK,$y]=rK(PP),oK=te((e,t)=>{let{__scopeTabs:r,value:n,onValueChange:o,defaultValue:i,orientation:a="horizontal",dir:s,activationMode:u="automatic",...l}=e,c=vp(s),[f,p]=ea({prop:n,onChange:o,defaultProp:i});return Q(nK,{scope:r,baseId:Xi(),value:f,onValueChange:p,orientation:a,dir:c,activationMode:u},Q(Gt.div,le({dir:c,"data-orientation":a},l,{ref:t})))}),iK="TabsList",aK=te((e,t)=>{let{__scopeTabs:r,loop:n=!0,...o}=e,i=$y(iK,r),a=RP(r);return Q(FP,le({asChild:!0},a,{orientation:i.orientation,dir:i.dir,loop:n}),Q(Gt.div,le({role:"tablist","aria-orientation":i.orientation},o,{ref:t})))}),sK="TabsTrigger",uK=te((e,t)=>{let{__scopeTabs:r,value:n,disabled:o=!1,...i}=e,a=$y(sK,r),s=RP(r),u=MP(a.baseId,n),l=$P(a.baseId,n),c=n===a.value;return Q(NP,le({asChild:!0},s,{focusable:!o,active:c}),Q(Gt.button,le({type:"button",role:"tab","aria-selected":c,"aria-controls":l,"data-state":c?"active":"inactive","data-disabled":o?"":void 0,disabled:o,id:u},i,{ref:t,onMouseDown:rt(e.onMouseDown,f=>{!o&&f.button===0&&f.ctrlKey===!1?a.onValueChange(n):f.preventDefault()}),onKeyDown:rt(e.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&a.onValueChange(n)}),onFocus:rt(e.onFocus,()=>{let f=a.activationMode!=="manual";!c&&!o&&f&&a.onValueChange(n)})})))}),cK="TabsContent",lK=te((e,t)=>{let{__scopeTabs:r,value:n,forceMount:o,children:i,...a}=e,s=$y(cK,r),u=MP(s.baseId,n),l=$P(s.baseId,n),c=n===s.value,f=N(c);return L(()=>{let p=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(p)},[]),Q(hu,{present:o||c},({present:p})=>Q(Gt.div,le({"data-state":c?"active":"inactive","data-orientation":s.orientation,role:"tabpanel","aria-labelledby":u,hidden:!p,id:l,tabIndex:0},a,{ref:t,style:{...e.style,animationDuration:f.current?"0s":void 0}}),p&&i))});function MP(e,t){return`${e}-trigger-${t}`}function $P(e,t){return`${e}-content-${t}`}var LP=oK,Ly=aK,qy=uK,By=lK;C();var qP=LP,jy=te(({className:e,...t},r)=>m(Ly,{ref:r,className:ae("inline-flex items-center justify-center rounded-md bg-secondary p-1",e),...t}));jy.displayName=Ly.displayName;var kn=te(({className:e,...t},r)=>m(qy,{className:ae("obzt-btn-reset","inline-flex min-w-[100px] items-center justify-center rounded-[0.185rem] px-3 py-1.5  text-sm font-medium text-txt-muted transition-all  disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-primary data-[state=active]:text-txt-normal data-[state=active]:shadow-sm",e),...t,ref:r}));kn.displayName=qy.displayName;var An=te(({className:e,...t},r)=>m(By,{className:ae("mt-2 rounded-md border p-6",e),...t,ref:r}));An.displayName=By.displayName;C();C();function ta(){return ta=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ta.apply(this,arguments)}var P2e=typeof Symbol<"u"?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator",R2e=typeof Symbol<"u"?Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")):"@@asyncIterator";var pK=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?et:L,dK=function(t){var r=N(t);return pK(function(){r.current=t}),J(function(){return r.current},[r])},mK={status:"not-requested",loading:!1,result:void 0,error:void 0},jP={status:"loading",loading:!0,result:void 0,error:void 0},hK=function(t){return jP},gK=function(t,r){return{status:"success",loading:!1,result:t,error:void 0}},yK=function(t,r){return{status:"error",loading:!1,result:void 0,error:t}},BP=function(){},bK={initialState:function(t){return t&&t.executeOnMount?jP:mK},executeOnMount:!0,executeOnUpdate:!0,setLoading:hK,setResult:gK,setError:yK,onSuccess:BP,onError:BP},vK=function(t){return ta({},bK,{},t)},wK=function(t){var r=$(function(){return t.initialState(t)}),n=r[0],o=r[1],i=J(function(){return o(t.initialState(t))},[o,t]),a=J(function(){return o(t.setLoading(n))},[n,o]),s=J(function(c){return o(t.setResult(c,n))},[n,o]),u=J(function(c){return o(t.setError(c,n))},[n,o]),l=J(function(c){return o(ta({},n,{},c))},[n,o]);return{value:n,set:o,merge:l,reset:i,setLoading:a,setResult:s,setError:u}},xK=function(){var t=N(!1);return L(function(){return t.current=!0,function(){t.current=!1}},[]),function(){return t.current}},EK=function(){var t=N(null);return{set:function(n){return t.current=n},get:function(){return t.current},is:function(n){return t.current===n}}},zP=function(t,r,n){!r&&(r=[]);var o=vK(n),i=$(null),a=i[0],s=i[1],u=wK(o),l=xK(),c=EK(),f=function(w){return l()&&c.is(w)},p=function(){for(var w=arguments.length,x=new Array(w),S=0;S<w;S++)x[S]=arguments[S];var O=function(){try{return Promise.resolve(t.apply(void 0,x))}catch(F){return Promise.reject(F)}}();return s(x),c.set(O),u.setLoading(),O.then(function(F){f(O)&&u.setResult(F),o.onSuccess(F,{isCurrent:function(){return c.is(O)}})},function(F){f(O)&&u.setError(F),o.onError(F,{isCurrent:function(){return c.is(O)}})}),O},d=dK(p),h=J(function(){return d().apply(void 0,arguments)},[d]),g=!l();return L(function(){var y=function(){return d().apply(void 0,r)};g&&o.executeOnMount&&y(),!g&&o.executeOnUpdate&&y()},r),ta({},u.value,{set:u.set,merge:u.merge,reset:u.reset,execute:h,currentPromise:c.get(),currentParams:a})};function WP(e,t,r){return zP(e,t,r)}var UP=function(t,r){return zP(t,[],ta({},r,{executeOnMount:!1,executeOnUpdate:!1}))};var HP=require("obsidian");var xp=class{constructor(t){this.path=t??xp.defaultPath}vaildPath;get path(){return this.vaildPath}set path(t){t?this.vaildPath=(0,HP.normalizePath)(t):this.vaildPath=xp.defaultPath}getFile(t){return t.getAbstractFileByPath(this.vaildPath)}fromJSON(t){return t&&(this.vaildPath=t),this}toJSON(){return this.path}toString(){return this.path}},gu=xp;Sb(gu,"defaultPath","/");var de=we({});function ra(e){return new gu(e).path}function Ep(e,t,r){let[n,o]=$(!1);return[WP(e,[...t,n],r),J(()=>o(i=>!i),[])]}C();var VP=require("obsidian");C();C();var ve=te(function({name:t,description:r,heading:n,children:o,className:i},a){return m("div",{className:ae("setting-item",n&&"setting-item-heading border-none",i),children:[m("div",{className:"setting-item-info",children:[m("div",{className:"setting-item-name",children:t}),r&&m("div",{className:"setting-item-description",children:r})]}),m("div",{className:"setting-item-control",ref:a,children:o})]})});function Dt(e,t){let{plugin:{settings:r}}=V(de);return Le(async function(o){return await e.setOption(t,o).apply()===!1?!1:(await r.save(),!0)})}function SK(e,t){let r=Le(t),n=N(null);return L(()=>{n.current?.setValue(e)},[e]),J(o=>{if(!o)n.current?.toggleEl.remove(),n.current=null;else{let i=new VP.ToggleComponent(o);i.setValue(e),i.onChange(r),n.current=i}},[])}function Tr({name:e,children:t,settings:r,prop:n}){let[,o]=bu(r,n);return m(yu,{ref:o,name:e,children:t})}var yu=te(function({name:t,children:r},n){return m(ve,{className:"mod-toggle",ref:n,name:t,description:r})});function bu(e,t){let[r,n]=$(e[t]),o=Dt(e,t),i=Le(async function(s){n(s),await o(s)});return[r,SK(r,i)]}var JP=se(require("node:net"),1),ZP=se(require("node:os"),1),kp=class extends Error{constructor(t){super(`${t} is locked`)}},na={old:new Set,young:new Set},kK=1e3*15;var Sp,AK=()=>{let e=ZP.default.networkInterfaces(),t=new Set([void 0,"0.0.0.0"]);for(let r of Object.values(e))for(let n of r)t.add(n.address);return t},GP=e=>new Promise((t,r)=>{let n=JP.default.createServer();n.unref(),n.on("error",r),n.listen(e,()=>{let{port:o}=n.address();n.close(()=>{t(o)})})}),KP=async(e,t)=>{if(e.host||e.port===0)return GP(e);for(let r of t)try{await GP({port:e.port,host:r})}catch(n){if(!["EADDRNOTAVAIL","EINVAL"].includes(n.code))throw n}return e.port},IK=function*(e){e&&(yield*e),yield 0};async function zy(e){let t,r=new Set;if(e&&(e.port&&(t=typeof e.port=="number"?[e.port]:e.port),e.exclude)){let o=e.exclude;if(typeof o[Symbol.iterator]!="function")throw new TypeError("The `exclude` option must be an iterable.");for(let i of o){if(typeof i!="number")throw new TypeError("Each item in the `exclude` option must be a number corresponding to the port you want excluded.");if(!Number.isSafeInteger(i))throw new TypeError(`Number ${i} in the exclude option is not a safe integer and can't be used`)}r=new Set(o)}Sp===void 0&&(Sp=setInterval(()=>{na.old=na.young,na.young=new Set},kK),Sp.unref&&Sp.unref());let n=AK();for(let o of IK(t))try{if(r.has(o))continue;let i=await KP({...e,port:o},n);for(;na.old.has(i)||na.young.has(i);){if(o!==0)throw new kp(o);i=await KP({...e,port:o},n)}return na.young.add(i),i}catch(i){if(!["EADDRINUSE","EACCES"].includes(i.code)&&!(i instanceof kp))throw i}throw new Error("No available ports found")}var Ap=require("obsidian");C();function YP(){let{server:e}=V(de).plugin.settings,[t,r]=bu(e,"enableServer");return m(Y,{children:[m(ve,{heading:!0,name:"Background Connect",description:"Allow Zotero to send status in the background, which is required for some features like focus annotation on selection in Zotero"}),m(yu,{ref:r,name:"Enable",children:"Remember to enable the server in Zotero as well"}),t&&m(_K,{})]})}function _K(){let{server:e}=V(de).plugin.settings,t=K(()=>e.getDefaults().serverPort,[]),[r,n]=$(t),[o]=Ve("check");async function i(){if(isNaN(r)||r<0||r>65535)return new Ap.Notice("Invalid port number: "+r),n(e.serverPort),!1;if(r===e.serverPort)return!1;let a=await zy({host:"127.0.0.1",port:[r]});if(console.log(a,r),a!==r)return new Ap.Notice(`Port is currently occupied, a different port is provided: ${a}, confirm again to apply the change.`),n(a),!1;let s=e.setOption("serverPort",a);return await s.apply(),s.changed&&new Ap.Notice("Server port is saved and applied."),s.changed}return m(ve,{name:"Port Number",description:`Default to ${t}`,children:[m("input",{type:"number",value:r,min:0,max:65535,onChange:a=>n(Number.parseInt(a.target.value,10))}),m("button",{"aria-label":"Apply",ref:o,onClick:i})]})}var eR=require("@electron/remote");var tR=se(Qe(),1),rR=require("obsidian");C();function Wy(){let[e,t,r]=QP("main"),[n,o,i]=QP("bbt"),[a,s]=nR("data"),[u,l]=TK(Le(()=>{s(),r(),i()}));return m(ve,{name:"Zotero Data Directory",description:m(Y,{children:[m(XP,{path:e,state:t,children:"Zotero"}),m(XP,{path:n,state:o,children:"Better BibTeX"})]}),children:[m(oR,{path:a,state:u}),m("button",{onClick:l,children:"Select"})]})}function CK(e){let{plugin:t}=V(de),[r,n]=Ep(()=>t.databaseAPI.checkDbStatus(e),[e]),o;return r.loading?o="disabled":r.error?o="failed":o=r.result?"success":"failed",[o,n]}function QP(e){let[t,r]=nR(e),[n,o]=CK(e);return[t,n,J(()=>{r(),o()},[r,o])]}function TK(e){let{plugin:{settings:t}}=V(de),r=UP(async()=>{try{let{filePaths:[o]}=await eR.dialog.showOpenDialog({defaultPath:t.database.zoteroDataDir,properties:["openDirectory"]});o&&t.database.zoteroDataDir!==o&&(await t.database.setOption("zoteroDataDir",o).apply(),await t.save(),e())}catch(o){throw console.error("Failed to set data directory",o),new rR.Notice(`Failed to set data directory: ${o}`),o}}),n;return r.loading?n="disabled":r.error?n="failed":n="success",[n,r.execute]}function nR(e){let{plugin:{settings:{database:t}}}=V(de),r=J(()=>{switch(e){case"main":return t.zoteroDbPath;case"bbt":return t.betterBibTexDbPath;case"data":return t.zoteroDataDir;default:(0,tR.assertNever)(e)}},[e,t]),[n,o]=$(r);return[n,J(()=>o(r),[r])]}function XP({children:e,path:t,state:r}){return m("div",{children:[e,": ",r==="failed"&&"(Failed to load)",m(oR,{path:t,state:r})]})}function oR({path:e,state:t}){return m("code",{"data-state":t,className:ae("data-[state=success]:text-txt-success","data-[state=failed]:text-txt-error","data-[state=disabled]:text-txt-muted"),children:e})}function Uy(){let{plugin:{settings:{watcher:e}}}=V(de);return m(Y,{children:[m(Wy,{}),m(Tr,{name:"Refresh automatically when Zotero updates database",settings:e,prop:"autoRefresh"}),m(YP,{})]})}C();C();function Jr({name:e,children:t,normalize:r,settings:n,prop:o}){let[i,a]=$(n[o]),s=Dt(n,o);return m(Hy,{name:e,value:i,onChange:u=>a(u.target.value),onSubmit:()=>{let u=r?.(i)??i;u!==i&&a(u),s(u)},children:t})}function Hy({name:e,children:t,value:r,onChange:n,onSubmit:o}){let[i]=Ve("check");return m(ve,{name:e,description:t,children:[m(to,{className:"border",value:r,onChange:n}),m("button",{"aria-label":"Apply",ref:i,onClick:o})]})}C();function iR(){let{imgImporter:e}=V(de).plugin.settings,[t,r]=bu(e,"symlinkImgExcerpt");return m(Y,{children:[m(yu,{ref:r,name:"Image Excerpt"}),t&&m(Jr,{name:"Image Excerpts Folder",settings:e,prop:"imgExcerptPath",normalize:ra})]})}var aR=require("obsidian");C();function Vy(){let{plugin:e}=V(de),{database:t}=e.settings,[r,n]=Ep(()=>e.databaseAPI.getLibs(),[]),[o,i]=$(()=>t.citationLibrary),a=Dt(t,"citationLibrary"),s=Le(async function(f){let p=Number.parseInt(f.target.value,10);Number.isNaN(p)||(i(p),await a(p)&&new aR.Notice("Zotero search index updated."))}),u=r.result??[{groupID:null,libraryID:1,name:"My Library"}],[l]=Ve("switch");return m(ve,{name:"Citation Library",children:[m("select",{className:"dropdown",onChange:s,value:o,children:u.map(({groupID:c,libraryID:f,name:p})=>m("option",{value:f,children:p?c?`${p} (Group)`:p:`Library ${f}`},f))}),m("button",{"aria-label":"Refresh",ref:l,onClick:async()=>{await e.dbWorker.refresh({task:"full"}),n()}})]})}function Gy(){let{noteIndex:e}=V(de).plugin.settings;return m(Y,{children:[m(Jr,{name:"Literature Note Folder",settings:e,prop:"literatureNoteFolder",normalize:ra}),m(iR,{}),m(Vy,{})]})}C();function Ky(){let{log:e}=V(de).plugin.settings,[t,r]=$(()=>e.level),n=Dt(e,"level"),o=Le(async function(a){let s=a.target.value;r(s),await n(s)});return m(Y,{children:[m(ve,{heading:!0,name:"Debug"}),m(ve,{name:"Log Level",description:m(Y,{children:["Change level of logs output to the console.",m("br",{}),"Set to DEBUG if you need to report a issue",m("br",{}),"To check console, ",BC()]}),children:m("select",{className:"dropdown",onChange:o,value:t,children:Object.entries(Lb).map(([i,a])=>m("option",{value:a,children:i},a))})})]})}function Jy(){return m(Y,{children:m(Ky,{})})}C();C();C();function uR(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return K(()=>n=>{t.forEach(o=>o(n))},t)}var vu=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function ho(e){let t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function Ip(e){return"nodeType"in e}function st(e){var t,r;return e?ho(e)?e:Ip(e)&&(t=(r=e.ownerDocument)==null?void 0:r.defaultView)!=null?t:window:window}function _p(e){let{Document:t}=st(e);return e instanceof t}function oa(e){return ho(e)?!1:e instanceof st(e).HTMLElement}function cR(e){return e instanceof st(e).SVGElement}function go(e){return e?ho(e)?e.document:Ip(e)?_p(e)?e:oa(e)?e.ownerDocument:document:document:document}var Ft=vu?et:L;function Cp(e){let t=N(e);return Ft(()=>{t.current=e}),J(function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return t.current==null?void 0:t.current(...n)},[])}function lR(){let e=N(null),t=J((n,o)=>{e.current=setInterval(n,o)},[]),r=J(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,r]}function ia(e,t){t===void 0&&(t=[e]);let r=N(e);return Ft(()=>{r.current!==e&&(r.current=e)},t),r}function aa(e,t){let r=N();return K(()=>{let n=e(r.current);return r.current=n,n},[...t])}function wu(e){let t=Cp(e),r=N(null),n=J(o=>{o!==r.current&&t?.(o,r.current),r.current=o},[]);return[r,n]}function Tp(e){let t=N();return L(()=>{t.current=e},[e]),t.current}var Zy={};function yo(e,t){return K(()=>{if(t)return t;let r=Zy[e]==null?0:Zy[e]+1;return Zy[e]=r,e+"-"+r},[e,t])}function fR(e){return function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return n.reduce((i,a)=>{let s=Object.entries(a);for(let[u,l]of s){let c=i[u];c!=null&&(i[u]=c+e*l)}return i},{...t})}}var bo=fR(1),sa=fR(-1);function OK(e){return"clientX"in e&&"clientY"in e}function xu(e){if(!e)return!1;let{KeyboardEvent:t}=st(e.target);return t&&e instanceof t}function DK(e){if(!e)return!1;let{TouchEvent:t}=st(e.target);return t&&e instanceof t}function Op(e){if(DK(e)){if(e.touches&&e.touches.length){let{clientX:t,clientY:r}=e.touches[0];return{x:t,y:r}}else if(e.changedTouches&&e.changedTouches.length){let{clientX:t,clientY:r}=e.changedTouches[0];return{x:t,y:r}}}return OK(e)?{x:e.clientX,y:e.clientY}:null}var In=Object.freeze({Translate:{toString(e){if(!e)return;let{x:t,y:r}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;let{scaleX:t,scaleY:r}=e;return"scaleX("+t+") scaleY("+r+")"}},Transform:{toString(e){if(e)return[In.Translate.toString(e),In.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:r,easing:n}=e;return t+" "+r+"ms "+n}}}),sR="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function pR(e){return e.matches(sR)?e:e.querySelector(sR)}C();var FK={display:"none"};function dR(e){let{id:t,value:r}=e;return q.createElement("div",{id:t,style:FK},r)}var NK={position:"fixed",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};function mR(e){let{id:t,announcement:r}=e;return q.createElement("div",{id:t,style:NK,role:"status","aria-live":"assertive","aria-atomic":!0},r)}function hR(){let[e,t]=$("");return{announce:J(n=>{n!=null&&t(n)},[]),announcement:e}}var IR=we(null);function PK(e){let t=V(IR);L(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function RK(){let[e]=$(()=>new Set),t=J(n=>(e.add(n),()=>e.delete(n)),[e]);return[J(n=>{let{type:o,event:i}=n;e.forEach(a=>{var s;return(s=a[o])==null?void 0:s.call(a,i)})},[e]),t]}var MK={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},$K={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was moved over droppable area "+r.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was dropped over droppable area "+r.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function LK(e){let{announcements:t=$K,container:r,hiddenTextDescribedById:n,screenReaderInstructions:o=MK}=e,{announce:i,announcement:a}=hR(),s=yo("DndLiveRegion"),[u,l]=$(!1);if(L(()=>{l(!0)},[]),PK(K(()=>({onDragStart(f){let{active:p}=f;i(t.onDragStart({active:p}))},onDragMove(f){let{active:p,over:d}=f;t.onDragMove&&i(t.onDragMove({active:p,over:d}))},onDragOver(f){let{active:p,over:d}=f;i(t.onDragOver({active:p,over:d}))},onDragEnd(f){let{active:p,over:d}=f;i(t.onDragEnd({active:p,over:d}))},onDragCancel(f){let{active:p,over:d}=f;i(t.onDragCancel({active:p,over:d}))}}),[i,t])),!u)return null;let c=q.createElement(q.Fragment,null,q.createElement(dR,{id:n,value:o.draggable}),q.createElement(mR,{id:s,announcement:a}));return r?Fc(c,r):c}var ze;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(ze||(ze={}));function Fp(){}function _R(e,t){return K(()=>({sensor:e,options:t??{}}),[e,t])}function CR(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return K(()=>[...t].filter(n=>n!=null),[...t])}var rr=Object.freeze({x:0,y:0});function qK(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function BK(e,t){let{data:{value:r}}=e,{data:{value:n}}=t;return r-n}function jK(e,t){let{data:{value:r}}=e,{data:{value:n}}=t;return n-r}function TR(e,t){if(!e||e.length===0)return null;let[r]=e;return t?r[t]:r}function gR(e,t,r){return t===void 0&&(t=e.left),r===void 0&&(r=e.top),{x:t+e.width*.5,y:r+e.height*.5}}var OR=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:n}=e,o=gR(t,t.left,t.top),i=[];for(let a of n){let{id:s}=a,u=r.get(s);if(u){let l=qK(gR(u),o);i.push({id:s,data:{droppableContainer:a,value:l}})}}return i.sort(BK)};function zK(e,t){let r=Math.max(t.top,e.top),n=Math.max(t.left,e.left),o=Math.min(t.left+t.width,e.left+e.width),i=Math.min(t.top+t.height,e.top+e.height),a=o-n,s=i-r;if(n<o&&r<i){let u=t.width*t.height,l=e.width*e.height,c=a*s,f=c/(u+l-c);return Number(f.toFixed(4))}return 0}var WK=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:n}=e,o=[];for(let i of n){let{id:a}=i,s=r.get(a);if(s){let u=zK(s,t);u>0&&o.push({id:a,data:{droppableContainer:i,value:u}})}}return o.sort(jK)};function UK(e,t,r){return{...e,scaleX:t&&r?t.width/r.width:1,scaleY:t&&r?t.height/r.height:1}}function DR(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:rr}function HK(e){return function(r){for(var n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return o.reduce((a,s)=>({...a,top:a.top+e*s.y,bottom:a.bottom+e*s.y,left:a.left+e*s.x,right:a.right+e*s.x}),{...r})}}var VK=HK(1);function GK(e){if(e.startsWith("matrix3d(")){let t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){let t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function KK(e,t,r){let n=GK(t);if(!n)return e;let{scaleX:o,scaleY:i,x:a,y:s}=n,u=e.left-a-(1-o)*parseFloat(r),l=e.top-s-(1-i)*parseFloat(r.slice(r.indexOf(" ")+1)),c=o?e.width/o:e.width,f=i?e.height/i:e.height;return{width:c,height:f,top:l,right:u+c,bottom:l+f,left:u}}var JK={ignoreTransform:!1};function xo(e,t){t===void 0&&(t=JK);let r=e.getBoundingClientRect();if(t.ignoreTransform){let{transform:l,transformOrigin:c}=st(e).getComputedStyle(e);l&&(r=KK(r,l,c))}let{top:n,left:o,width:i,height:a,bottom:s,right:u}=r;return{top:n,left:o,width:i,height:a,bottom:s,right:u}}function yR(e){return xo(e,{ignoreTransform:!0})}function ZK(e){let t=e.innerWidth,r=e.innerHeight;return{top:0,left:0,right:t,bottom:r,width:t,height:r}}function YK(e,t){return t===void 0&&(t=st(e).getComputedStyle(e)),t.position==="fixed"}function QK(e,t){t===void 0&&(t=st(e).getComputedStyle(e));let r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(o=>{let i=t[o];return typeof i=="string"?r.test(i):!1})}function Rp(e,t){let r=[];function n(o){if(t!=null&&r.length>=t||!o)return r;if(_p(o)&&o.scrollingElement!=null&&!r.includes(o.scrollingElement))return r.push(o.scrollingElement),r;if(!oa(o)||cR(o)||r.includes(o))return r;let i=st(e).getComputedStyle(o);return o!==e&&QK(o,i)&&r.push(o),YK(o,i)?r:n(o.parentNode)}return e?n(e):r}function FR(e){let[t]=Rp(e,1);return t??null}function Yy(e){return!vu||!e?null:ho(e)?e:Ip(e)?_p(e)||e===go(e).scrollingElement?window:oa(e)?e:null:null}function NR(e){return ho(e)?e.scrollX:e.scrollLeft}function PR(e){return ho(e)?e.scrollY:e.scrollTop}function tb(e){return{x:NR(e),y:PR(e)}}var Ge;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Ge||(Ge={}));function RR(e){return!vu||!e?!1:e===document.scrollingElement}function MR(e){let t={x:0,y:0},r=RR(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},n={x:e.scrollWidth-r.width,y:e.scrollHeight-r.height},o=e.scrollTop<=t.y,i=e.scrollLeft<=t.x,a=e.scrollTop>=n.y,s=e.scrollLeft>=n.x;return{isTop:o,isLeft:i,isBottom:a,isRight:s,maxScroll:n,minScroll:t}}var XK={x:.2,y:.2};function eJ(e,t,r,n,o){let{top:i,left:a,right:s,bottom:u}=r;n===void 0&&(n=10),o===void 0&&(o=XK);let{isTop:l,isBottom:c,isLeft:f,isRight:p}=MR(e),d={x:0,y:0},h={x:0,y:0},g={height:t.height*o.y,width:t.width*o.x};return!l&&i<=t.top+g.height?(d.y=Ge.Backward,h.y=n*Math.abs((t.top+g.height-i)/g.height)):!c&&u>=t.bottom-g.height&&(d.y=Ge.Forward,h.y=n*Math.abs((t.bottom-g.height-u)/g.height)),!p&&s>=t.right-g.width?(d.x=Ge.Forward,h.x=n*Math.abs((t.right-g.width-s)/g.width)):!f&&a<=t.left+g.width&&(d.x=Ge.Backward,h.x=n*Math.abs((t.left+g.width-a)/g.width)),{direction:d,speed:h}}function tJ(e){if(e===document.scrollingElement){let{innerWidth:i,innerHeight:a}=window;return{top:0,left:0,right:i,bottom:a,width:i,height:a}}let{top:t,left:r,right:n,bottom:o}=e.getBoundingClientRect();return{top:t,left:r,right:n,bottom:o,width:e.clientWidth,height:e.clientHeight}}function $R(e){return e.reduce((t,r)=>bo(t,tb(r)),rr)}function rJ(e){return e.reduce((t,r)=>t+NR(r),0)}function nJ(e){return e.reduce((t,r)=>t+PR(r),0)}function oJ(e,t){if(t===void 0&&(t=xo),!e)return;let{top:r,left:n,bottom:o,right:i}=t(e);FR(e)&&(o<=0||i<=0||r>=window.innerHeight||n>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}var iJ=[["x",["left","right"],rJ],["y",["top","bottom"],nJ]],Su=class{constructor(t,r){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;let n=Rp(r),o=$R(n);this.rect={...t},this.width=t.width,this.height=t.height;for(let[i,a,s]of iJ)for(let u of a)Object.defineProperty(this,u,{get:()=>{let l=s(n),c=o[i]-l;return this.rect[u]+c},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}},vo=class{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(r=>{var n;return(n=this.target)==null?void 0:n.removeEventListener(...r)})},this.target=t}add(t,r,n){var o;(o=this.target)==null||o.addEventListener(t,r,n),this.listeners.push([t,r,n])}};function aJ(e){let{EventTarget:t}=st(e);return e instanceof t?e:go(e)}function Qy(e,t){let r=Math.abs(e.x),n=Math.abs(e.y);return typeof t=="number"?Math.sqrt(r**2+n**2)>t:"x"in t&&"y"in t?r>t.x&&n>t.y:"x"in t?r>t.x:"y"in t?n>t.y:!1}var Kt;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Kt||(Kt={}));function bR(e){e.preventDefault()}function sJ(e){e.stopPropagation()}var ye;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter"})(ye||(ye={}));var LR={start:[ye.Space,ye.Enter],cancel:[ye.Esc],end:[ye.Space,ye.Enter]},uJ=(e,t)=>{let{currentCoordinates:r}=t;switch(e.code){case ye.Right:return{...r,x:r.x+25};case ye.Left:return{...r,x:r.x-25};case ye.Down:return{...r,y:r.y+25};case ye.Up:return{...r,y:r.y-25}}},Np=class{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;let{event:{target:r}}=t;this.props=t,this.listeners=new vo(go(r)),this.windowListeners=new vo(st(r)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Kt.Resize,this.handleCancel),this.windowListeners.add(Kt.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Kt.Keydown,this.handleKeyDown))}handleStart(){let{activeNode:t,onStart:r}=this.props,n=t.node.current;n&&oJ(n),r(rr)}handleKeyDown(t){if(xu(t)){let{active:r,context:n,options:o}=this.props,{keyboardCodes:i=LR,coordinateGetter:a=uJ,scrollBehavior:s="smooth"}=o,{code:u}=t;if(i.end.includes(u)){this.handleEnd(t);return}if(i.cancel.includes(u)){this.handleCancel(t);return}let{collisionRect:l}=n.current,c=l?{x:l.left,y:l.top}:rr;this.referenceCoordinates||(this.referenceCoordinates=c);let f=a(t,{active:r,context:n.current,currentCoordinates:c});if(f){let p=sa(f,c),d={x:0,y:0},{scrollableAncestors:h}=n.current;for(let g of h){let y=t.code,{isTop:w,isRight:x,isLeft:S,isBottom:O,maxScroll:F,minScroll:D}=MR(g),P=tJ(g),R={x:Math.min(y===ye.Right?P.right-P.width/2:P.right,Math.max(y===ye.Right?P.left:P.left+P.width/2,f.x)),y:Math.min(y===ye.Down?P.bottom-P.height/2:P.bottom,Math.max(y===ye.Down?P.top:P.top+P.height/2,f.y))},E=y===ye.Right&&!x||y===ye.Left&&!S,T=y===ye.Down&&!O||y===ye.Up&&!w;if(E&&R.x!==f.x){let v=g.scrollLeft+p.x,A=y===ye.Right&&v<=F.x||y===ye.Left&&v>=D.x;if(A&&!p.y){g.scrollTo({left:v,behavior:s});return}A?d.x=g.scrollLeft-v:d.x=y===ye.Right?g.scrollLeft-F.x:g.scrollLeft-D.x,d.x&&g.scrollBy({left:-d.x,behavior:s});break}else if(T&&R.y!==f.y){let v=g.scrollTop+p.y,A=y===ye.Down&&v<=F.y||y===ye.Up&&v>=D.y;if(A&&!p.x){g.scrollTo({top:v,behavior:s});return}A?d.y=g.scrollTop-v:d.y=y===ye.Down?g.scrollTop-F.y:g.scrollTop-D.y,d.y&&g.scrollBy({top:-d.y,behavior:s});break}}this.handleMove(t,bo(sa(f,this.referenceCoordinates),d))}}}handleMove(t,r){let{onMove:n}=this.props;t.preventDefault(),n(r)}handleEnd(t){let{onEnd:r}=this.props;t.preventDefault(),this.detach(),r()}handleCancel(t){let{onCancel:r}=this.props;t.preventDefault(),this.detach(),r()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}};Np.activators=[{eventName:"onKeyDown",handler:(e,t,r)=>{let{keyboardCodes:n=LR,onActivation:o}=t,{active:i}=r,{code:a}=e.nativeEvent;if(n.start.includes(a)){let s=i.activatorNode.current;return s&&e.target!==s?!1:(e.preventDefault(),o?.({event:e.nativeEvent}),!0)}return!1}}];function vR(e){return!!(e&&"distance"in e)}function wR(e){return!!(e&&"delay"in e)}var ku=class{constructor(t,r,n){var o;n===void 0&&(n=aJ(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=r;let{event:i}=t,{target:a}=i;this.props=t,this.events=r,this.document=go(a),this.documentListeners=new vo(this.document),this.listeners=new vo(n),this.windowListeners=new vo(st(a)),this.initialCoordinates=(o=Op(i))!=null?o:rr,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){let{events:t,props:{options:{activationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),this.windowListeners.add(Kt.Resize,this.handleCancel),this.windowListeners.add(Kt.DragStart,bR),this.windowListeners.add(Kt.VisibilityChange,this.handleCancel),this.windowListeners.add(Kt.ContextMenu,bR),this.documentListeners.add(Kt.Keydown,this.handleKeydown),r){if(vR(r))return;if(wR(r)){this.timeoutId=setTimeout(this.handleStart,r.delay);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handleStart(){let{initialCoordinates:t}=this,{onStart:r}=this.props;t&&(this.activated=!0,this.documentListeners.add(Kt.Click,sJ,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Kt.SelectionChange,this.removeTextSelection),r(t))}handleMove(t){var r;let{activated:n,initialCoordinates:o,props:i}=this,{onMove:a,options:{activationConstraint:s}}=i;if(!o)return;let u=(r=Op(t))!=null?r:rr,l=sa(o,u);if(!n&&s){if(wR(s))return Qy(l,s.tolerance)?this.handleCancel():void 0;if(vR(s))return s.tolerance!=null&&Qy(l,s.tolerance)?this.handleCancel():Qy(l,s.distance)?this.handleStart():void 0}t.cancelable&&t.preventDefault(),a(u)}handleEnd(){let{onEnd:t}=this.props;this.detach(),t()}handleCancel(){let{onCancel:t}=this.props;this.detach(),t()}handleKeydown(t){t.code===ye.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}},cJ={move:{name:"pointermove"},end:{name:"pointerup"}},ua=class extends ku{constructor(t){let{event:r}=t,n=go(r.target);super(t,cJ,n)}};ua.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;return!r.isPrimary||r.button!==0?!1:(n?.({event:r}),!0)}}];var lJ={move:{name:"mousemove"},end:{name:"mouseup"}},rb;(function(e){e[e.RightClick=2]="RightClick"})(rb||(rb={}));var nb=class extends ku{constructor(t){super(t,lJ,go(t.event.target))}};nb.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;return r.button===rb.RightClick?!1:(n?.({event:r}),!0)}}];var Xy={move:{name:"touchmove"},end:{name:"touchend"}},ob=class extends ku{constructor(t){super(t,Xy)}static setup(){return window.addEventListener(Xy.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Xy.move.name,t)};function t(){}}};ob.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t,{touches:o}=r;return o.length>1?!1:(n?.({event:r}),!0)}}];var Eu;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Eu||(Eu={}));var Pp;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Pp||(Pp={}));function fJ(e){let{acceleration:t,activator:r=Eu.Pointer,canScroll:n,draggingRect:o,enabled:i,interval:a=5,order:s=Pp.TreeOrder,pointerCoordinates:u,scrollableAncestors:l,scrollableAncestorRects:c,delta:f,threshold:p}=e,d=dJ({delta:f,disabled:!i}),[h,g]=lR(),y=N({x:0,y:0}),w=N({x:0,y:0}),x=K(()=>{switch(r){case Eu.Pointer:return u?{top:u.y,bottom:u.y,left:u.x,right:u.x}:null;case Eu.DraggableRect:return o}},[r,o,u]),S=N(null),O=J(()=>{let D=S.current;if(!D)return;let P=y.current.x*w.current.x,R=y.current.y*w.current.y;D.scrollBy(P,R)},[]),F=K(()=>s===Pp.TreeOrder?[...l].reverse():l,[s,l]);L(()=>{if(!i||!l.length||!x){g();return}for(let D of F){if(n?.(D)===!1)continue;let P=l.indexOf(D),R=c[P];if(!R)continue;let{direction:E,speed:T}=eJ(D,R,x,t,p);for(let v of["x","y"])d[v][E[v]]||(T[v]=0,E[v]=0);if(T.x>0||T.y>0){g(),S.current=D,h(O,a),y.current=T,w.current=E;return}}y.current={x:0,y:0},w.current={x:0,y:0},g()},[t,O,n,g,i,a,JSON.stringify(x),JSON.stringify(d),h,l,F,c,JSON.stringify(p)])}var pJ={x:{[Ge.Backward]:!1,[Ge.Forward]:!1},y:{[Ge.Backward]:!1,[Ge.Forward]:!1}};function dJ(e){let{delta:t,disabled:r}=e,n=Tp(t);return aa(o=>{if(r||!n||!o)return pJ;let i={x:Math.sign(t.x-n.x),y:Math.sign(t.y-n.y)};return{x:{[Ge.Backward]:o.x[Ge.Backward]||i.x===-1,[Ge.Forward]:o.x[Ge.Forward]||i.x===1},y:{[Ge.Backward]:o.y[Ge.Backward]||i.y===-1,[Ge.Forward]:o.y[Ge.Forward]||i.y===1}}},[r,t,n])}function mJ(e,t){let r=t!==null?e.get(t):void 0,n=r?r.node.current:null;return aa(o=>{var i;return t===null?null:(i=n??o)!=null?i:null},[n,t])}function hJ(e,t){return K(()=>e.reduce((r,n)=>{let{sensor:o}=n,i=o.activators.map(a=>({eventName:a.eventName,handler:t(a.handler,n)}));return[...r,...i]},[]),[e,t])}var Au;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Au||(Au={}));var ib;(function(e){e.Optimized="optimized"})(ib||(ib={}));var xR=new Map;function gJ(e,t){let{dragging:r,dependencies:n,config:o}=t,[i,a]=$(null),{frequency:s,measure:u,strategy:l}=o,c=N(e),f=y(),p=ia(f),d=J(function(w){w===void 0&&(w=[]),!p.current&&a(x=>x===null?w:x.concat(w.filter(S=>!x.includes(S))))},[p]),h=N(null),g=aa(w=>{if(f&&!r)return xR;if(!w||w===xR||c.current!==e||i!=null){let x=new Map;for(let S of e){if(!S)continue;if(i&&i.length>0&&!i.includes(S.id)&&S.rect.current){x.set(S.id,S.rect.current);continue}let O=S.node.current,F=O?new Su(u(O),O):null;S.rect.current=F,F&&x.set(S.id,F)}return x}return w},[e,i,r,f,u]);return L(()=>{c.current=e},[e]),L(()=>{f||d()},[r,f]),L(()=>{i&&i.length>0&&a(null)},[JSON.stringify(i)]),L(()=>{f||typeof s!="number"||h.current!==null||(h.current=setTimeout(()=>{d(),h.current=null},s))},[s,f,d,...n]),{droppableRects:g,measureDroppableContainers:d,measuringScheduled:i!=null};function y(){switch(l){case Au.Always:return!1;case Au.BeforeDragging:return r;default:return!r}}}function qR(e,t){return aa(r=>e?r||(typeof t=="function"?t(e):e):null,[t,e])}function yJ(e,t){return qR(e,t)}function bJ(e){let{callback:t,disabled:r}=e,n=Cp(t),o=K(()=>{if(r||typeof window>"u"||typeof window.MutationObserver>"u")return;let{MutationObserver:i}=window;return new i(n)},[n,r]);return L(()=>()=>o?.disconnect(),[o]),o}function Mp(e){let{callback:t,disabled:r}=e,n=Cp(t),o=K(()=>{if(r||typeof window>"u"||typeof window.ResizeObserver>"u")return;let{ResizeObserver:i}=window;return new i(n)},[r]);return L(()=>()=>o?.disconnect(),[o]),o}function vJ(e){return new Su(xo(e),e)}function ER(e,t,r){t===void 0&&(t=vJ);let[n,o]=pt(s,null),i=bJ({callback(u){if(e)for(let l of u){let{type:c,target:f}=l;if(c==="childList"&&f instanceof HTMLElement&&f.contains(e)){o();break}}}}),a=Mp({callback:o});return Ft(()=>{o(),e?(a?.observe(e),i?.observe(document.body,{childList:!0,subtree:!0})):(a?.disconnect(),i?.disconnect())},[e]),n;function s(u){if(!e)return null;if(e.isConnected===!1){var l;return(l=u??r)!=null?l:null}let c=t(e);return JSON.stringify(u)===JSON.stringify(c)?u:c}}function wJ(e){let t=qR(e);return DR(e,t)}var SR=[];function xJ(e){let t=N(e),r=aa(n=>e?n&&n!==SR&&e&&t.current&&e.parentNode===t.current.parentNode?n:Rp(e):SR,[e]);return L(()=>{t.current=e},[e]),r}function EJ(e){let[t,r]=$(null),n=N(e),o=J(i=>{let a=Yy(i.target);a&&r(s=>s?(s.set(a,tb(a)),new Map(s)):null)},[]);return L(()=>{let i=n.current;if(e!==i){a(i);let s=e.map(u=>{let l=Yy(u);return l?(l.addEventListener("scroll",o,{passive:!0}),[l,tb(l)]):null}).filter(u=>u!=null);r(s.length?new Map(s):null),n.current=e}return()=>{a(e),a(i)};function a(s){s.forEach(u=>{let l=Yy(u);l?.removeEventListener("scroll",o)})}},[o,e]),K(()=>e.length?t?Array.from(t.values()).reduce((i,a)=>bo(i,a),rr):$R(e):rr,[e,t])}function kR(e,t){t===void 0&&(t=[]);let r=N(null);return L(()=>{r.current=null},t),L(()=>{let n=e!==rr;n&&!r.current&&(r.current=e),!n&&r.current&&(r.current=null)},[e]),r.current?sa(e,r.current):rr}function SJ(e){L(()=>{if(!vu)return;let t=e.map(r=>{let{sensor:n}=r;return n.setup==null?void 0:n.setup()});return()=>{for(let r of t)r?.()}},e.map(t=>{let{sensor:r}=t;return r}))}function kJ(e,t){return K(()=>e.reduce((r,n)=>{let{eventName:o,handler:i}=n;return r[o]=a=>{i(a,t)},r},{}),[e,t])}function BR(e){return K(()=>e?ZK(e):null,[e])}var eb=[];function AJ(e,t){t===void 0&&(t=xo);let[r]=e,n=BR(r?st(r):null),[o,i]=pt(s,eb),a=Mp({callback:i});return e.length>0&&o===eb&&i(),Ft(()=>{e.length?e.forEach(u=>a?.observe(u)):(a?.disconnect(),i())},[e]),o;function s(){return e.length?e.map(u=>RR(u)?n:new Su(t(u),u)):eb}}function IJ(e){if(!e)return null;if(e.children.length>1)return e;let t=e.children[0];return oa(t)?t:e}function _J(e){let{measure:t}=e,[r,n]=$(null),o=J(l=>{for(let{target:c}of l)if(oa(c)){n(f=>{let p=t(c);return f?{...f,width:p.width,height:p.height}:p});break}},[t]),i=Mp({callback:o}),a=J(l=>{let c=IJ(l);i?.disconnect(),c&&i?.observe(c),n(c?t(c):null)},[t,i]),[s,u]=wu(a);return K(()=>({nodeRef:s,rect:r,setRef:u}),[r,s,u])}var CJ=[{sensor:ua,options:{}},{sensor:Np,options:{}}],TJ={current:{}},Dp={draggable:{measure:yR},droppable:{measure:yR,strategy:Au.WhileDragging,frequency:ib.Optimized},dragOverlay:{measure:xo}},wo=class extends Map{get(t){var r;return t!=null&&(r=super.get(t))!=null?r:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:r}=t;return!r})}getNodeFor(t){var r,n;return(r=(n=this.get(t))==null?void 0:n.node.current)!=null?r:void 0}},OJ={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new wo,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Fp},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Dp,measureDroppableContainers:Fp,windowRect:null,measuringScheduled:!1},DJ={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Fp,draggableNodes:new Map,over:null,measureDroppableContainers:Fp},$p=we(DJ),jR=we(OJ);function FJ(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new wo}}}function NJ(e,t){switch(t.type){case ze.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case ze.DragMove:return e.draggable.active?{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}}:e;case ze.DragEnd:case ze.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case ze.RegisterDroppable:{let{element:r}=t,{id:n}=r,o=new wo(e.droppable.containers);return o.set(n,r),{...e,droppable:{...e.droppable,containers:o}}}case ze.SetDroppableDisabled:{let{id:r,key:n,disabled:o}=t,i=e.droppable.containers.get(r);if(!i||n!==i.key)return e;let a=new wo(e.droppable.containers);return a.set(r,{...i,disabled:o}),{...e,droppable:{...e.droppable,containers:a}}}case ze.UnregisterDroppable:{let{id:r,key:n}=t,o=e.droppable.containers.get(r);if(!o||n!==o.key)return e;let i=new wo(e.droppable.containers);return i.delete(r),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function PJ(e){let{disabled:t}=e,{active:r,activatorEvent:n,draggableNodes:o}=V($p),i=Tp(n),a=Tp(r?.id);return L(()=>{if(!t&&!n&&i&&a!=null){if(!xu(i)||document.activeElement===i.target)return;let s=o.get(a);if(!s)return;let{activatorNode:u,node:l}=s;if(!u.current&&!l.current)return;requestAnimationFrame(()=>{for(let c of[u.current,l.current]){if(!c)continue;let f=pR(c);if(f){f.focus();break}}})}},[n,t,o,a,i]),null}function RJ(e,t){let{transform:r,...n}=t;return e!=null&&e.length?e.reduce((o,i)=>i({transform:o,...n}),r):r}function MJ(e){return K(()=>({draggable:{...Dp.draggable,...e?.draggable},droppable:{...Dp.droppable,...e?.droppable},dragOverlay:{...Dp.dragOverlay,...e?.dragOverlay}}),[e?.draggable,e?.droppable,e?.dragOverlay])}function $J(e){let{activeNode:t,measure:r,initialRect:n,config:o=!0}=e,i=N(!1),{x:a,y:s}=typeof o=="boolean"?{x:o,y:o}:o;Ft(()=>{if(!a&&!s||!t){i.current=!1;return}if(i.current||!n)return;let l=t?.node.current;if(!l||l.isConnected===!1)return;let c=r(l),f=DR(c,n);if(a||(f.x=0),s||(f.y=0),i.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){let p=FR(l);p&&p.scrollBy({top:f.y,left:f.x})}},[t,a,s,n,r])}var zR=we({...rr,scaleX:1,scaleY:1}),_n;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(_n||(_n={}));var WR=Ue(function(t){var r,n,o,i;let{id:a,accessibility:s,autoScroll:u=!0,children:l,sensors:c=CJ,collisionDetection:f=WK,measuring:p,modifiers:d,...h}=t,g=pt(NJ,void 0,FJ),[y,w]=g,[x,S]=RK(),[O,F]=$(_n.Uninitialized),D=O===_n.Initialized,{draggable:{active:P,nodes:R,translate:E},droppable:{containers:T}}=y,v=P?R.get(P):null,A=N({initial:null,translated:null}),I=K(()=>{var Ke;return P!=null?{id:P,data:(Ke=v?.data)!=null?Ke:TJ,rect:A}:null},[P,v]),j=N(null),[z,H]=$(null),[G,re]=$(null),ie=ia(h,Object.values(h)),_=yo("DndDescribedBy",a),k=K(()=>T.getEnabled(),[T]),M=MJ(p),{droppableRects:B,measureDroppableContainers:W,measuringScheduled:U}=gJ(k,{dragging:D,dependencies:[E.x,E.y],config:M.droppable}),Z=mJ(R,P),oe=K(()=>G?Op(G):null,[G]),qe=S3(),Te=yJ(Z,M.draggable.measure);$J({activeNode:P?R.get(P):null,config:qe.layoutShiftCompensation,initialRect:Te,measure:M.draggable.measure});let me=ER(Z,M.draggable.measure,Te),Or=ER(Z?Z.parentElement:null),Nt=N({activatorEvent:null,active:null,activeNode:Z,collisionRect:null,collisions:null,droppableRects:B,draggableNodes:R,draggingNode:null,draggingNodeRect:null,droppableContainers:T,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Dr=T.getNodeFor((r=Nt.current.over)==null?void 0:r.id),Fr=_J({measure:M.dragOverlay.measure}),So=(n=Fr.nodeRef.current)!=null?n:Z,ko=D?(o=Fr.rect)!=null?o:me:null,pb=!!(Fr.nodeRef.current&&Fr.rect),db=wJ(pb?null:me),Hp=BR(So?st(So):null),Zr=xJ(D?Dr??Z:null),Cu=AJ(Zr),Tu=RJ(d,{transform:{x:E.x-db.x,y:E.y-db.y,scaleX:1,scaleY:1},activatorEvent:G,active:I,activeNodeRect:me,containerNodeRect:Or,draggingNodeRect:ko,over:Nt.current.over,overlayNodeRect:Fr.rect,scrollableAncestors:Zr,scrollableAncestorRects:Cu,windowRect:Hp}),mb=oe?bo(oe,E):null,hb=EJ(Zr),g3=kR(hb),y3=kR(hb,[me]),Ao=bo(Tu,g3),Io=ko?VK(ko,Tu):null,ca=I&&Io?f({active:I,collisionRect:Io,droppableRects:B,droppableContainers:k,pointerCoordinates:mb}):null,gb=TR(ca,"id"),[Yr,yb]=$(null),b3=pb?Tu:bo(Tu,y3),v3=UK(b3,(i=Yr?.rect)!=null?i:null,me),bb=J((Ke,gt)=>{let{sensor:yt,options:Qr}=gt;if(j.current==null)return;let Pt=R.get(j.current);if(!Pt)return;let Jt=Ke.nativeEvent,nr=new yt({active:j.current,activeNode:Pt,event:Jt,options:Qr,context:Nt,onStart(Zt){let la=j.current;if(la==null)return;let fa=R.get(la);if(!fa)return;let{onDragStart:Ou}=ie.current,Du={active:{id:la,data:fa.data,rect:A}};cn(()=>{Ou?.(Du),F(_n.Initializing),w({type:ze.DragStart,initialCoordinates:Zt,active:la}),x({type:"onDragStart",event:Du})})},onMove(Zt){w({type:ze.DragMove,coordinates:Zt})},onEnd:_o(ze.DragEnd),onCancel:_o(ze.DragCancel)});cn(()=>{H(nr),re(Ke.nativeEvent)});function _o(Zt){return async function(){let{active:fa,collisions:Ou,over:Du,scrollAdjustedTranslate:wb}=Nt.current,pa=null;if(fa&&wb){let{cancelDrop:da}=ie.current;pa={activatorEvent:Jt,active:fa,collisions:Ou,delta:wb,over:Du},Zt===ze.DragEnd&&typeof da=="function"&&await Promise.resolve(da(pa))&&(Zt=ze.DragCancel)}j.current=null,cn(()=>{w({type:Zt}),F(_n.Uninitialized),yb(null),H(null),re(null);let da=Zt===ze.DragEnd?"onDragEnd":"onDragCancel";if(pa){let Vp=ie.current[da];Vp?.(pa),x({type:da,event:pa})}})}}},[R]),w3=J((Ke,gt)=>(yt,Qr)=>{let Pt=yt.nativeEvent,Jt=R.get(Qr);if(j.current!==null||!Jt||Pt.dndKit||Pt.defaultPrevented)return;let nr={active:Jt};Ke(yt,gt.options,nr)===!0&&(Pt.dndKit={capturedBy:gt.sensor},j.current=Qr,bb(yt,gt))},[R,bb]),vb=hJ(c,w3);SJ(c),Ft(()=>{me&&O===_n.Initializing&&F(_n.Initialized)},[me,O]),L(()=>{let{onDragMove:Ke}=ie.current,{active:gt,activatorEvent:yt,collisions:Qr,over:Pt}=Nt.current;if(!gt||!yt)return;let Jt={active:gt,activatorEvent:yt,collisions:Qr,delta:{x:Ao.x,y:Ao.y},over:Pt};cn(()=>{Ke?.(Jt),x({type:"onDragMove",event:Jt})})},[Ao.x,Ao.y]),L(()=>{let{active:Ke,activatorEvent:gt,collisions:yt,droppableContainers:Qr,scrollAdjustedTranslate:Pt}=Nt.current;if(!Ke||j.current==null||!gt||!Pt)return;let{onDragOver:Jt}=ie.current,nr=Qr.get(gb),_o=nr&&nr.rect.current?{id:nr.id,rect:nr.rect.current,data:nr.data,disabled:nr.disabled}:null,Zt={active:Ke,activatorEvent:gt,collisions:yt,delta:{x:Pt.x,y:Pt.y},over:_o};cn(()=>{yb(_o),Jt?.(Zt),x({type:"onDragOver",event:Zt})})},[gb]),Ft(()=>{Nt.current={activatorEvent:G,active:I,activeNode:Z,collisionRect:Io,collisions:ca,droppableRects:B,draggableNodes:R,draggingNode:So,draggingNodeRect:ko,droppableContainers:T,over:Yr,scrollableAncestors:Zr,scrollAdjustedTranslate:Ao},A.current={initial:ko,translated:Io}},[I,Z,ca,Io,R,So,ko,B,T,Yr,Zr,Ao]),fJ({...qe,delta:E,draggingRect:Io,pointerCoordinates:mb,scrollableAncestors:Zr,scrollableAncestorRects:Cu});let x3=K(()=>({active:I,activeNode:Z,activeNodeRect:me,activatorEvent:G,collisions:ca,containerNodeRect:Or,dragOverlay:Fr,draggableNodes:R,droppableContainers:T,droppableRects:B,over:Yr,measureDroppableContainers:W,scrollableAncestors:Zr,scrollableAncestorRects:Cu,measuringConfiguration:M,measuringScheduled:U,windowRect:Hp}),[I,Z,me,G,ca,Or,Fr,R,T,B,Yr,W,Zr,Cu,M,U,Hp]),E3=K(()=>({activatorEvent:G,activators:vb,active:I,activeNodeRect:me,ariaDescribedById:{draggable:_},dispatch:w,draggableNodes:R,over:Yr,measureDroppableContainers:W}),[G,vb,I,me,w,_,R,Yr,W]);return q.createElement(IR.Provider,{value:S},q.createElement($p.Provider,{value:E3},q.createElement(jR.Provider,{value:x3},q.createElement(zR.Provider,{value:v3},l)),q.createElement(PJ,{disabled:s?.restoreFocus===!1})),q.createElement(LK,{...s,hiddenTextDescribedById:_}));function S3(){let Ke=z?.autoScrollEnabled===!1,gt=typeof u=="object"?u.enabled===!1:u===!1,yt=D&&!Ke&&!gt;return typeof u=="object"?{...u,enabled:yt}:{enabled:yt}}}),LJ=we(null),AR="button",qJ="Droppable";function UR(e){let{id:t,data:r,disabled:n=!1,attributes:o}=e,i=yo(qJ),{activators:a,activatorEvent:s,active:u,activeNodeRect:l,ariaDescribedById:c,draggableNodes:f,over:p}=V($p),{role:d=AR,roleDescription:h="draggable",tabIndex:g=0}=o??{},y=u?.id===t,w=V(y?zR:LJ),[x,S]=wu(),[O,F]=wu(),D=kJ(a,t),P=ia(r);Ft(()=>(f.set(t,{id:t,key:i,node:x,activatorNode:O,data:P}),()=>{let E=f.get(t);E&&E.key===i&&f.delete(t)}),[f,t]);let R=K(()=>({role:d,tabIndex:g,"aria-disabled":n,"aria-pressed":y&&d===AR?!0:void 0,"aria-roledescription":h,"aria-describedby":c.draggable}),[n,d,g,y,h,c.draggable]);return{active:u,activatorEvent:s,activeNodeRect:l,attributes:R,isDragging:y,listeners:n?void 0:D,node:x,over:p,setNodeRef:S,setActivatorNodeRef:F,transform:w}}function HR(){return V(jR)}var BJ="Droppable",jJ={timeout:25};function VR(e){let{data:t,disabled:r=!1,id:n,resizeObserverConfig:o}=e,i=yo(BJ),{active:a,dispatch:s,over:u,measureDroppableContainers:l}=V($p),c=N({disabled:r}),f=N(!1),p=N(null),d=N(null),{disabled:h,updateMeasurementsFor:g,timeout:y}={...jJ,...o},w=ia(g??n),x=J(()=>{if(!f.current){f.current=!0;return}d.current!=null&&clearTimeout(d.current),d.current=setTimeout(()=>{l(Array.isArray(w.current)?w.current:[w.current]),d.current=null},y)},[y]),S=Mp({callback:x,disabled:h||!a}),O=J((R,E)=>{S&&(E&&(S.unobserve(E),f.current=!1),R&&S.observe(R))},[S]),[F,D]=wu(O),P=ia(t);return L(()=>{!S||!F.current||(S.disconnect(),f.current=!1,S.observe(F.current))},[F,S]),Ft(()=>(s({type:ze.RegisterDroppable,element:{id:n,key:i,disabled:r,node:F,rect:p,data:P}}),()=>s({type:ze.UnregisterDroppable,key:i,id:n})),[n]),L(()=>{r!==c.current.disabled&&(s({type:ze.SetDroppableDisabled,id:n,key:i,disabled:r}),c.current.disabled=r)},[n,i,r,s]),{active:a,rect:p,isOver:u?.id===n,node:F,over:u,setNodeRef:D}}C();function Bp(e,t,r){let n=e.slice();return n.splice(r<0?n.length+r:r,0,n.splice(t,1)[0]),n}function zJ(e,t){return e.reduce((r,n,o)=>{let i=t.get(n);return i&&(r[o]=i),r},Array(e.length))}function Lp(e){return e!==null&&e>=0}function WJ(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function UJ(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}var GR=e=>{let{rects:t,activeIndex:r,overIndex:n,index:o}=e,i=Bp(t,n,r),a=t[o],s=i[o];return!s||!a?null:{x:s.left-a.left,y:s.top-a.top,scaleX:s.width/a.width,scaleY:s.height/a.height}};var qp={scaleX:1,scaleY:1},KR=e=>{var t;let{activeIndex:r,activeNodeRect:n,index:o,rects:i,overIndex:a}=e,s=(t=i[r])!=null?t:n;if(!s)return null;if(o===r){let l=i[a];return l?{x:0,y:r<a?l.top+l.height-(s.top+s.height):l.top-s.top,...qp}:null}let u=HJ(i,o,r);return o>r&&o<=a?{x:0,y:-s.height-u,...qp}:o<r&&o>=a?{x:0,y:s.height+u,...qp}:{x:0,y:0,...qp}};function HJ(e,t,r){let n=e[t],o=e[t-1],i=e[t+1];return n?r<t?o?n.top-(o.top+o.height):i?i.top-(n.top+n.height):0:i?i.top-(n.top+n.height):o?n.top-(o.top+o.height):0:0}var JR="Sortable",ZR=q.createContext({activeIndex:-1,containerId:JR,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:GR,disabled:{draggable:!1,droppable:!1}});function YR(e){let{children:t,id:r,items:n,strategy:o=GR,disabled:i=!1}=e,{active:a,dragOverlay:s,droppableRects:u,over:l,measureDroppableContainers:c}=HR(),f=yo(JR,r),p=s.rect!==null,d=K(()=>n.map(D=>typeof D=="object"&&"id"in D?D.id:D),[n]),h=a!=null,g=a?d.indexOf(a.id):-1,y=l?d.indexOf(l.id):-1,w=N(d),x=!WJ(d,w.current),S=y!==-1&&g===-1||x,O=UJ(i);Ft(()=>{x&&h&&c(d)},[x,d,h,c]),L(()=>{w.current=d},[d]);let F=K(()=>({activeIndex:g,containerId:f,disabled:O,disableTransforms:S,items:d,overIndex:y,useDragOverlay:p,sortedRects:zJ(d,u),strategy:o}),[g,f,O.draggable,O.droppable,S,d,y,u,p,o]);return q.createElement(ZR.Provider,{value:F},t)}var VJ=e=>{let{id:t,items:r,activeIndex:n,overIndex:o}=e;return Bp(r,n,o).indexOf(t)},GJ=e=>{let{containerId:t,isSorting:r,wasDragging:n,index:o,items:i,newIndex:a,previousItems:s,previousContainerId:u,transition:l}=e;return!l||!n||s!==i&&o===a?!1:r?!0:a!==o&&t===u},KJ={duration:200,easing:"ease"},QR="transform",JJ=In.Transition.toString({property:QR,duration:0,easing:"linear"}),ZJ={roleDescription:"sortable"};function YJ(e){let{disabled:t,index:r,node:n,rect:o}=e,[i,a]=$(null),s=N(r);return Ft(()=>{if(!t&&r!==s.current&&n.current){let u=o.current;if(u){let l=xo(n.current,{ignoreTransform:!0}),c={x:u.left-l.left,y:u.top-l.top,scaleX:u.width/l.width,scaleY:u.height/l.height};(c.x||c.y)&&a(c)}}r!==s.current&&(s.current=r)},[t,r,n,o]),L(()=>{i&&a(null)},[i]),i}function XR(e){let{animateLayoutChanges:t=GJ,attributes:r,disabled:n,data:o,getNewIndex:i=VJ,id:a,strategy:s,resizeObserverConfig:u,transition:l=KJ}=e,{items:c,containerId:f,activeIndex:p,disabled:d,disableTransforms:h,sortedRects:g,overIndex:y,useDragOverlay:w,strategy:x}=V(ZR),S=QJ(n,d),O=c.indexOf(a),F=K(()=>({sortable:{containerId:f,index:O,items:c},...o}),[f,o,O,c]),D=K(()=>c.slice(c.indexOf(a)),[c,a]),{rect:P,node:R,isOver:E,setNodeRef:T}=VR({id:a,data:F,disabled:S.droppable,resizeObserverConfig:{updateMeasurementsFor:D,...u}}),{active:v,activatorEvent:A,activeNodeRect:I,attributes:j,setNodeRef:z,listeners:H,isDragging:G,over:re,setActivatorNodeRef:ie,transform:_}=UR({id:a,data:F,attributes:{...ZJ,...r},disabled:S.draggable}),k=uR(T,z),M=!!v,B=M&&!h&&Lp(p)&&Lp(y),W=!w&&G,U=W&&B?_:null,oe=B?U??(s??x)({rects:g,activeNodeRect:I,activeIndex:p,overIndex:y,index:O}):null,qe=Lp(p)&&Lp(y)?i({id:a,items:c,activeIndex:p,overIndex:y}):O,Te=v?.id,me=N({activeId:Te,items:c,newIndex:qe,containerId:f}),Or=c!==me.current.items,Nt=t({active:v,containerId:f,isDragging:G,isSorting:M,id:a,index:O,items:c,newIndex:me.current.newIndex,previousItems:me.current.items,previousContainerId:me.current.containerId,transition:l,wasDragging:me.current.activeId!=null}),Dr=YJ({disabled:!Nt,index:O,node:R,rect:P});return L(()=>{M&&me.current.newIndex!==qe&&(me.current.newIndex=qe),f!==me.current.containerId&&(me.current.containerId=f),c!==me.current.items&&(me.current.items=c)},[M,qe,f,c]),L(()=>{if(Te===me.current.activeId)return;if(Te&&!me.current.activeId){me.current.activeId=Te;return}let So=setTimeout(()=>{me.current.activeId=Te},50);return()=>clearTimeout(So)},[Te]),{active:v,activeIndex:p,attributes:j,data:F,rect:P,index:O,newIndex:qe,items:c,isOver:E,isSorting:M,isDragging:G,listeners:H,node:R,overIndex:y,over:re,setNodeRef:k,setActivatorNodeRef:ie,setDroppableNodeRef:T,setDraggableNodeRef:z,transform:Dr??oe,transition:Fr()};function Fr(){if(Dr||Or&&me.current.newIndex===O)return JJ;if(!(W&&!xu(A)||!l)&&(M||Nt))return In.Transition.toString({...l,property:QR})}}function QJ(e,t){var r,n;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(r=e?.draggable)!=null?r:t.draggable,droppable:(n=e?.droppable)!=null?n:t.droppable}}var wSe=[ye.Down,ye.Right,ye.Up,ye.Left];C();C();var e3="Collapsible",[XJ,FSe]=Sn(e3),[eZ,ab]=XJ(e3),tZ=te((e,t)=>{let{__scopeCollapsible:r,open:n,defaultOpen:o,disabled:i,onOpenChange:a,...s}=e,[u=!1,l]=ea({prop:n,defaultProp:o,onChange:a});return Q(eZ,{scope:r,disabled:i,contentId:Xi(),open:u,onOpenToggle:J(()=>l(c=>!c),[l])},Q(Gt.div,le({"data-state":sb(u),"data-disabled":i?"":void 0},s,{ref:t})))}),rZ="CollapsibleTrigger",t3=te((e,t)=>{let{__scopeCollapsible:r,...n}=e,o=ab(rZ,r);return Q(Gt.button,le({type:"button","aria-controls":o.contentId,"aria-expanded":o.open||!1,"data-state":sb(o.open),"data-disabled":o.disabled?"":void 0,disabled:o.disabled},n,{ref:t,onClick:rt(e.onClick,o.onOpenToggle)}))}),r3="CollapsibleContent",n3=te((e,t)=>{let{forceMount:r,...n}=e,o=ab(r3,e.__scopeCollapsible);return Q(hu,{present:r||o.open},({present:i})=>Q(nZ,le({},n,{ref:t,present:i})))}),nZ=te((e,t)=>{let{__scopeCollapsible:r,present:n,children:o,...i}=e,a=ab(r3,r),[s,u]=$(n),l=N(null),c=Kr(t,l),f=N(0),p=f.current,d=N(0),h=d.current,g=a.open||s,y=N(g),w=N();return L(()=>{let x=requestAnimationFrame(()=>y.current=!1);return()=>cancelAnimationFrame(x)},[]),mo(()=>{let x=l.current;if(x){w.current=w.current||{transitionDuration:x.style.transitionDuration,animationName:x.style.animationName},x.style.transitionDuration="0s",x.style.animationName="none";let S=x.getBoundingClientRect();f.current=S.height,d.current=S.width,y.current||(x.style.transitionDuration=w.current.transitionDuration,x.style.animationName=w.current.animationName),u(n)}},[a.open,n]),Q(Gt.div,le({"data-state":sb(a.open),"data-disabled":a.disabled?"":void 0,id:a.contentId,hidden:!g},i,{ref:c,style:{["--radix-collapsible-content-height"]:p?`${p}px`:void 0,["--radix-collapsible-content-width"]:h?`${h}px`:void 0,...e.style}}),g&&o)});function sb(e){return e?"open":"closed"}var o3=tZ;var jp=o3,zp=t3,Wp=n3;var i3=require("obsidian");C();function Eo(e,{icon:t,desc:r,disable:n}){let o=Le(e),i=N(null);return L(()=>{i.current?.setIcon(t??"")},[t]),L(()=>{i.current?.setTooltip(r??"")},[r]),L(()=>{i.current?.setDisabled(n??!1)},[n]),J(a=>{if(!a)i.current?.extraSettingsEl.remove(),i.current=null;else{let s=new i3.ExtraButtonComponent(a);s.onClick(o),i.current=s}},[])}function a3(e){let{attributes:t,listeners:r,setNodeRef:n,transform:o,transition:i}=XR({id:e.id}),a={transform:In.Transform.toString(o),transition:i};return m("div",{ref:n,style:a,...t,...r,children:e.children})}function ub(){let{settings:e}=V(de).plugin,{noteFields:t}=e,{run:r}=es(async()=>{t.setOption("noteFields",n).apply()&&await e.save()},{wait:200}),[n,o]=$(t.noteFields),i=CR(_R(ua,{activationConstraint:{delay:200,tolerance:5}})),[a,s]=$(!0),[u,l]=$(""),c=Eo(()=>{u&&(o(d=>[...d,[u,t.getDefaultField()]]),r(),l(""))},{icon:"plus",desc:"Add"}),[f]=Ve(a?"chevrons-down-up":"chevrons-up-down");return m(Y,{children:[m(ve,{name:"Metadata Fields",description:m(Y,{children:"Specify the metadata fields shown in Note Fields View"}),ref:c,children:m("input",{type:"text",value:u,onChange:d=>l(d.target.value),placeholder:"Name of new field"})}),m(jp,{open:a,onOpenChange:s,className:"flex flex-col items-end",children:[m(zp,{asChild:!0,children:m("button",{ref:f,"aria-label":a?"Hide Fields":"Show All Fields"})}),m(Wp,{className:"p-3 divide-y ",children:m(WR,{sensors:i,collisionDetection:OR,onDragEnd:p,children:m(YR,{items:n.map(([d])=>d),strategy:KR,children:n.map(([d])=>m(a3,{id:d,children:m(iZ,{name:d,onDelete:()=>{o(h=>{let g=h.findIndex(([y])=>y===d);return[...h.slice(0,g),...h.slice(g+1)]}),r()}})},d))})})})]})]});function p(d){let{active:h,over:g}=d;g&&h.id!==g.id&&o(y=>{let w=y.findIndex(([S])=>h.id===S),x=y.findIndex(([S])=>g.id===S);return r(),Bp(y,w,x)})}}function iZ({name:e,onDelete:t}){let[r]=Ve("trash");return m(ve,{name:m("code",{children:e}),children:m("button",{ref:r,onClick:t})})}function cb(){return m(Y,{children:m(ub,{})})}var s3=require("obsidian");var Iu=class extends s3.PluginSettingTab{#e(){let t=this.containerEl.parentElement;if(!t)throw new Error("Setting tab is not mounted");if(!t.classList.contains("vertical-tab-content-container"))return ne.error("Failed to patch unload, unexpected tabContentContainer"),console.error(t),!1;let r=this,n=Rt(t,{empty:o=>function(){r.unload(),o.call(this),n()}});return ne.debug("Setting tab unload patched"),!0}#t=[];register(t){this.#t.push(t)}unload(){for(;this.#t.length>0;)this.#t.pop()()}display(){this.containerEl.empty(),this.#e()}};C();function lb(){let{suggester:e}=V(de).plugin.settings;return m(Y,{children:[m(Tr,{name:"Citation Editor Suggester",settings:e,prop:"citationEditorSuggester"}),m(Tr,{name:"Show BibTex Citekey in Suggester",settings:e,prop:"showCitekeyInSuggester"})]})}C();C();var Cn={filename:{title:"Note Filename",desc:""},citation:{title:"Markdown primary citation template",desc:""},altCitation:{title:"Markdown secondary citation template",desc:""},note:{title:"Note Content",desc:"Used to render created literature note"},annotation:{title:"Annotaion",desc:"Used to render single annotation"},annots:{title:"Annotations",desc:"Used to render annotation list when batch importing"}};function u3({ejected:e,type:t}){let{plugin:r}=V(de),n=r.templateLoader,[o]=Ve("arrow-up-right");if(e){let i=n.getTemplateFile(t);return m(ve,{name:Cn[t].title,description:Cn[t].desc,children:[m("code",{children:i}),m("button",{"aria-label":"Open Template File",ref:o,onClick:async()=>{await lo(t,null,r)}})]})}else return m(ve,{name:Cn[t].title,description:Cn[t].desc,children:m("pre",{className:"text-left max-w-xs overflow-scroll rounded border p-4",children:n.getTemplate(t)})})}var c3=require("obsidian");C();C();function aZ(){let{plugin:e}=V(de),{template:t}=e.settings,[r,n]=$(()=>t.fmFieldsMode),o=Dt(t,"fmFieldsMode"),i=Le(async function(s){let u=s.target.value;n(u),await o(u)});return m(ve,{name:"Mode",description:m(Y,{children:["Use whitelist to include only the fields specified in"," ",m("code",{children:"Mapping"}),m("br",{}),"Use blacklist to include all fields available except the fields specified in ",m("code",{children:"Mapping"})]}),children:m("select",{className:"dropdown",onChange:i,value:r,children:RS.map(a=>m("option",{value:a,children:a},a))})})}function l3(){let{plugin:e}=V(de),{template:t}=e.settings,[r,n]=$(()=>t.fmFieldsMapping),o=Dt(t,"fmFieldsMapping"),i=K(()=>(0,c3.debounce)(p=>o(p),500),[o]),[a,s]=$(""),u=Eo(()=>{if(!a)return;let p={...r,[a]:!0};n(p),i(p),s("")},{icon:"plus",desc:"Add"}),[l,c]=$(!0),[f]=Ve(l?"chevrons-down-up":"chevrons-up-down");return m(Y,{children:[m(ve,{heading:!0,name:"Metadata Fields",description:"Specify metadata fields that will be added to the frontmatter of the note."}),m(aZ,{}),m(Jr,{name:"Tag Prefix",settings:t,prop:"fmTagPrefix",children:["If you want all the tags imported from zotero to be included in a certain category, you can specify it here. For example: ",m("code",{children:"zt/"})]}),m(ve,{name:"Mapping",description:m(Y,{children:["Specify the fields to import to the frontmatter of the note.",m("br",{}),"You can also specify the alias of the field here if you don't like the default field name from Zotero."]}),ref:u,children:m("input",{type:"text",value:a,onChange:p=>s(p.target.value),placeholder:"Name of new field"})}),m(jp,{open:l,onOpenChange:c,className:"flex flex-col items-end",children:[m(zp,{asChild:!0,children:m("button",{ref:f,"aria-label":l?"Hide Fields":"Show All Fields"})}),m(Wp,{className:"p-3 divide-y ",children:Object.entries(r).map(([p,d])=>m(ve,{name:m("code",{children:p}),children:m(sZ,{alias:d,onAliasChange:h=>{let g=sn(r,p,()=>h);n(g),i(g)},onDelete:()=>{let h=wc(r,p);n(h),i(h)}})},p))})]})]})}function sZ({alias:e,onAliasChange:t,onDelete:r}){let[n]=Ve("trash");return m(Y,{children:[m("input",{type:"text",placeholder:"Specify Alias Here",value:e===!0?"":e,onChange:o=>t(o.target.value?o.target.value:!0)}),m("button",{"aria-label":"Remove",ref:n,onClick:r})]})}C();function f3({type:e}){let{plugin:t}=V(de),{template:r}=t.settings,[n,o]=$(r.templates[e]),i=async a=>{if(await r.setTemplate(e,a)===!1)return!1;await t.settings.save()};return m(Hy,{name:Cn[e].title,value:n,onChange:a=>o(a.target.value),onSubmit:()=>{o(n),i(n)},children:Cn[e].desc})}C();var p3=te(function({ejected:t},r){return m(ve,{heading:!0,name:"Ejectable",description:"These templates can be customized once saved to the template folder",ref:r,children:m("div",{children:t?"Revert":"Eject"})})});function d3(){let{template:e}=V(de).plugin.settings,[t,r]=$(e.ejected),n=Dt(e,"ejected"),o=Eo(async()=>{r(!t),await n(!t)},{icon:t?"x-circle":"folder-input",desc:t?"Revert to default":"Save template file to edit"});return[t,o]}function fb(){let{template:e}=V(de).plugin.settings,[t,r]=d3();return m(Y,{children:[m(Jr,{name:"Template Folder",settings:e,prop:"folder",normalize:ra,children:"The folder which templates are ejected into and stored"}),m(Tr,{name:"Auto Pair For Eta",settings:e,prop:"autoPairEta",children:["Pair `<` and `%` automatically in eta templates.",m("br",{}),"If you have issue with native auto pair features, you can disable this option and report the bug in GitHub"]}),m(ve,{heading:!0,name:"Update Note",description:m(Y,{children:["You can find update note option in ",m("code",{children:"More Options"})," menu and command pallette inside a literature note. When update, all literature notes with the same ",m("code",{children:"zotero-key"})," will be updated."]})}),m(Tr,{name:"Overwrite Existing Note",settings:e,prop:"updateOverwrite",children:m("div",{className:"space-y-2",children:m("div",{className:"text-txt-error",children:"\u26A0 WARNING: This will overwrite the whole note content with latest one when update literature note, make sure you didn't add any custom content in the note before enable this option."})})}),m(Tr,{name:"In-place Update of Existing Annotations",settings:e,prop:"updateAnnotBlock",children:m("div",{className:"space-y-2",children:[m("div",{children:"(Experimental)"}),m("div",{className:"text-txt-error",children:"\u26A0 WARNING: When enable, the plugin will try to update existing annotaion callouts marked with block-id in addition to appped newly-added ones, which may cause unexpected behavior. Make sure you have backup of your notes before enable this option."}),m("div",{className:"text-txt-accent",children:"\u24D8 Note: If you disable callout warpping in annotation template, you need to make sure the block-id is added properly in the template."}),m("div",{className:"text-txt-accent",children:"\u24D8 Note: This won't work on annotations imported before this feature is available, unless every annotation is inside a block with proper block-id"})]})}),m(l3,{}),m(ve,{heading:!0,name:"Simple"}),Xc.map(n=>m(f3,{type:n},n)),m(p3,{ejected:t,ref:r}),Gn.map(n=>m(u3,{ejected:t,type:n},n))]})}var _u=class extends Iu{constructor(r){super(r.app,r);this.plugin=r;this.containerEl.addClass("obzt")}display(){super.display(),q.render(m(de.Provider,{value:{plugin:this.plugin,closeTab:()=>this.setting.close()},children:m(uZ,{})}),this.containerEl),this.register(()=>q.unmountComponentAtNode(this.containerEl))}};function uZ(){let[e,t]=Im("obzt-setting-tab",{defaultValue:"general"});return m(qP,{value:e,onValueChange:t,className:"flex h-full flex-col",children:[m(jy,{className:"self-start max-w-full",children:[m(kn,{value:"general",children:"General"}),m(kn,{value:"connect",children:"Connect"}),m(kn,{value:"suggester",children:"Suggester"}),m(kn,{value:"template",children:"Template"}),m(kn,{value:"note-fields",children:"Fields"}),m(kn,{value:"misc",children:"Misc"})]}),m(An,{value:"general",className:"divide-y flex-grow overflow-y-scroll",children:m(Gy,{})}),m(An,{value:"connect",className:"divide-y flex-grow overflow-y-scroll",children:m(Uy,{})}),m(An,{value:"suggester",className:"divide-y flex-grow overflow-y-scroll",children:m(lb,{})}),m(An,{value:"template",className:"divide-y flex-grow overflow-y-scroll",children:m(fb,{})}),m(An,{value:"note-fields",className:"divide-y flex-grow overflow-y-scroll",children:m(cb,{})}),m(An,{value:"misc",className:"divide-y flex-grow overflow-y-scroll",children:m(Jy,{})})]})}var m3=$t()("database","watcher","imgImporter","log","noteIndex","template","suggester","noteFields","server"),Up=class extends ce{plugin=this.use(be);noteIndex=this.use(Vi);database=this.use(Ut);watcher=this.use(Ji);imgImporter=this.use(Zi);log=this.use(Jo);template=this.use(Ct);suggester=this.use(Ws);noteFields=this.use(zi);server=this.use(Gi);async onload(){ne.debug("Loading Settings...");let t=await this.plugin.loadData()??{};bn(this,xt(m3),jn).forEach(r=>r.fromJSON(t)),await this.log.applyAll(),ne.debug("Settings loaded")}async save(){let t=bn(this,xt(m3),lr((r,n)=>n instanceof Me?n.toJSON():{[r]:n}),jn);await this.plugin.saveData(Object.assign({},...t))}};var be=class extends h3.Plugin{use=Oe.plugin(this);constructor(t,r){if(super(t,r),!IS(r))throw new Error("Library check failed")}settings=this.use(Up);noteIndex=this.use(po);server=this.use(Ki);citekeyClick=this.use(pp);templateEditor=this.use(Ds);noteFeatures=this.use(fP);get databaseAPI(){return this.dbWorker.api}dbWorker=this.use(ft);imgCacheImporter=this.use(du);dbWatcher=this.use(Cr);database=this.use(pu);templateRenderer=this.use(ys);templateComplier=this.use(Os);templateLoader=this.use(gr);annotBlockWorker=this.use(lp);pdfParser=this.use(fu);async onload(){ne.info("loading Obsidian Zotero Plugin"),this.addSettingTab(new _u(this)),globalThis.zoteroAPI={version:this.manifest.version,getDocItems:t=>this.databaseAPI.getItems(t),getItemIDsFromCitekey:(...t)=>this.databaseAPI.getItemIDsFromCitekey(...t),getAnnotsFromKeys:(...t)=>this.databaseAPI.getAnnotFromKey(...t),getAnnotsOfAtch:(...t)=>this.databaseAPI.getAnnotations(...t),getAttachments:(...t)=>this.databaseAPI.getAttachments(...t),getLibs:()=>this.databaseAPI.getLibs()},this.register(()=>{delete globalThis.zoteroAPI})}onunload(){ne.info("unloading Obsidian Zotero Plugin")}};0&&(module.exports={});
/*! Bundled license information:

flatted/cjs/index.js:
  (*! (c) 2020 Andrea Giammarchi *)

@aidenlx/workerpool/dist/workerpool.js:
  (**
   * workerpool.js
   * https://github.com/josdejong/workerpool
   *
   * Offload tasks to a pool of workers on node.js and in the browser.
   *
   * @version 6.2.1-mod.13
   * @date    2022-10-04
   *
   * @license
   * Copyright (C) 2014-2022 Jos de Jong <wjosdejong@gmail.com>
   *
   * Licensed under the Apache License, Version 2.0 (the "License"); you may not
   * use this file except in compliance with the License. You may obtain a copy
   * of the License at
   *
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
   * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
   * License for the specific language governing permissions and limitations under
   * the License.
   *)

use-sync-external-store/cjs/use-sync-external-store-shim.production.min.js:
  (**
   * @license React
   * use-sync-external-store-shim.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

use-sync-external-store/cjs/use-sync-external-store-shim/with-selector.production.min.js:
  (**
   * @license React
   * use-sync-external-store-shim/with-selector.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

lodash-es/lodash.js:
  (**
   * @license
   * Lodash (Custom Build) <https://lodash.com/>
   * Build: `lodash modularize exports="es" -o ./`
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)

@mui/base/index.js:
  (**
   * @mui/base v5.0.0-alpha.122
   *
   * @license MIT
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)
*/
